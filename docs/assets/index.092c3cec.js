var qs=Object.defineProperty;var Hs=(d,r,o)=>r in d?qs(d,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[r]=o;var L=(d,r,o)=>(Hs(d,typeof r!="symbol"?r+"":r,o),o);const Ws=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const y of p.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&a(y)}).observe(document,{childList:!0,subtree:!0});function o(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerpolicy&&(p.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?p.credentials="include":c.crossorigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function a(c){if(c.ep)return;c.ep=!0;const p=o(c);fetch(c.href,p)}};Ws();var Vs=Object.defineProperty,Us=(d,r,o)=>r in d?Vs(d,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[r]=o,ne=(d,r,o)=>(Us(d,typeof r!="symbol"?r+"":r,o),o);function Gs(d,r,o){d/=255,r/=255,o/=255;const a={h:0,s:0,b:0};var c=0,p=0;if(d>=r&&d>=o?(p=d,c=r>o?o:r):r>=o&&r>=d?(p=r,c=d>o?o:d):(p=o,c=r>d?d:r),a.b=p,a.s=p?(p-c)/p:0,!a.s)a.h=0;else{const y=p-c;d==p?a.h=(r-o)/y:r==p?a.h=2+(o-d)/y:a.h=4+(d-r)/y,a.h=Math.floor(a.h*60),a.h<0&&(a.h+=360)}return a.s=Math.floor(a.s*100),a.b=Math.floor(a.b*100),a}function It(d,r,o){let a=0,c=0,p=0;if(r==0)o==0?a=c=p=0:a=c=p=Math.floor(o*255/100);else{d==360&&(d=0),d/=60,r=r/100,o=o/100;var y=Math.floor(d),v=d-y,w=o*(1-r),E=o*(1-r*v),C=o*(1-r*(1-v));switch(y){case 0:a=o,c=C,p=w;break;case 1:a=E,c=o,p=w;break;case 2:a=w,c=o,p=C;break;case 3:a=w,c=E,p=o;break;case 4:a=C,c=w,p=o;break;case 5:a=o,c=w,p=E;break}a=Math.floor(a*255),c=Math.floor(c*255),p=Math.floor(p*255)}return $s(a,c,p)}function $s(d,r,o){return"#"+[d,r,o].map(a=>("0"+a.toString(16)).slice(-2)).join("")}function Ks(d){const r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d);return r?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]:null}function Zs(d){const r=Ks(d);return r?Gs(r[0],r[1],r[2]):null}function Bo(d){return/(^#[0-9A-F]{6}$)/i.test(d)}class Js{constructor(r,o,a){ne(this,"elements"),ne(this,"confirmBtn"),ne(this,"cancelBtn"),this._colorPicker=r,this.elements=document.createElement("div"),this.elements.classList.add("btns"),this.confirmBtn=document.createElement("button"),this.confirmBtn.classList.add("btns_ok"),this.confirmBtn.textContent=o,this.elements.appendChild(this.confirmBtn),this.cancelBtn=document.createElement("button"),this.cancelBtn.classList.add("btns_cancel"),this.cancelBtn.textContent=a,this.elements.appendChild(this.cancelBtn),this.cancelBtn.addEventListener("click",()=>this._cancel()),this.cancelBtn.addEventListener("keydown",c=>this._keyDown(c)),this.confirmBtn.addEventListener("click",()=>this._confirm())}_cancel(){this._colorPicker.exit()}_confirm(){this._colorPicker.close();const r=It(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness);this._colorPicker.dispatchEvent(new CustomEvent("color-change",{detail:r}))}_keyDown(r){var o,a;r.code==="Tab"&&!r.shiftKey&&((a=(o=this._colorPicker.shadowRoot)==null?void 0:o.querySelector(".picker"))==null||a.focus(),r.preventDefault())}}function Qs(){const d=document.createElement("style");return d.textContent=`
            :host {
				display:flex;
				flex-direction: column;
				align-items: center;
                position: relative;
                padding:.5rem;
                gap:.7rem;
                background-color:var(--bg,#3f3e3e);
                border-radius:0.3125rem;
                display:none;
                z-index:10;
            }
            .picker{
                width:100%;
                height:auto;
                aspect-ratio:1;
                background-color: #ff0000;
                position:relative;
                cursor:pointer;
            }
            .picker::after{
                content:"";
                position:absolute;
                inset:0;
                background-image: linear-gradient(to right, #fff, rgba(204, 154, 129, 0));
            }
            .picker::before{
                content:"";
                position:absolute;
                inset:0;
                z-index:1;
                background-image: linear-gradient(to top, #000, rgba(204, 154, 129, 0));
            }
            .picker_cursor{
                position:absolute;
                width:.6rem;
                height:.6rem;
                border-radius:50%;
                border:2px solid #fff;
                mix-blend-mode:difference;
                left:100%;
                transform:translate(-50%,-50%);
                z-index:2;
            }
            .range-wrapper{
                display:flex;
                align-items:center;
                justify-content:space-between;
                width:100%;
                gap:.5rem;
            }
            .hueRange{
				-webkit-appearance :none;
                width:100%;
                height:.8rem;
                outline: 0;
                border-radius:0.5rem;
                box-sizing:border-box;
                background: linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%);
                cursor:pointer;
				padding:0;
            }
            .hueRange:focus{
                outline:1px solid;
            }
            .preview{
                width:1.5rem;
                height:auto;
                aspect-ratio:1;
                outline:1px solid white;
            }
            input[type=range]::-webkit-slider-thumb {
                -webkit-appearance: none;
                border: 2px solid #ffff;
                height: 1rem;
                width: .35rem;
                background: transparent;
                cursor: pointer;
              }
              
              input[type=range]::-moz-range-thumb {
                -webkit-appearance: none;
                border: 2px solid #ffff;
                height: 1rem;
                width: .35rem;
                background: transparent;
                cursor: pointer;
              }
			  .pallet{
				  width:100%;
                display:grid;
                grid-template-columns:repeat(8,1fr);
                align-content:center;
				gap:.2rem;
            }
            .colorBtn{
                display: none;
            }
            .colorLabel{
                cursor:pointer;
                border-radius:0.125rem;
				width:100%;
				height:auto;
				aspect-ratio:69 / 69;
            }
            .colorLabel:hover,.colorLabel:focus{
                transform:scale(1.1);
            }
            .colorBtn:checked + .colorLabel{
                outline:1px solid white;
                outline-offset: 1px;
            }
            .hexInput{
                grid-row:2;
                grid-column:2 / -1;
                display:block;
                width:100%;
                margin:0;
                box-sizing:border-box;
                background-color:var(--bg-input,#282828);
                color:var(--font-color,white);
                font-size:.8em;
                border:0;
                padding:.4rem;
            }
            .hexInput.error{
                background-color: var(--bg-error,#7b0000);
            }
            .btns{
                display:flex;
                width:100%;
                gap:.3125rem;
            }
            .btns_ok,.btns_cancel{
                width:100%;
                cursor:pointer;
                background-color:var(--bg-input,#282828);
                color:var(--font-color,white);
                border:0;
                padding:0.2rem;
            }
        `,d}class el{constructor(r,o){ne(this,"element"),this._colorPicker=r,this._onChange=o,this.element=document.createElement("input"),this.element.classList.add("hexInput"),this.element.setAttribute("type","text"),this.element.setAttribute("maxlength","7"),this.update(),this.element.addEventListener("input",a=>this._onInput(a))}update(){const r=It(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness);this.element.value=r}_onInput(r){const o=r.target;/^#([A-Fa-f0-9]{6})$/.test(o.value)?(this.element.classList.remove("error"),this._onChange(o.value)):this.element.classList.add("error")}}class tl{constructor(r,o){ne(this,"element"),this._colorPicker=r,this._onChange=o,this.element=document.createElement("input"),this.element.classList.add("hueRange"),this.element.setAttribute("type","range"),this.element.setAttribute("min","0"),this.element.setAttribute("max","360"),this.element.setAttribute("value","0"),this.element.addEventListener("input",a=>this._hueRangeChange())}_hueRangeChange(){this._onChange(this.value)}update(){this.value=this._colorPicker.hue}get value(){return parseInt(this.element.value)}set value(r){this.element.value=r.toString()}}class Fo{constructor(r,o,a){ne(this,"element"),ne(this,"selected"),this._colorPicker=r,this._onChange=a,this.element=document.createElement("div"),this.element.classList.add("pallet"),this._init(o),this.selected=this.element.querySelector('input[type="radio"]')}_init(r){const o=this.element.querySelector("input:checked");this.element.innerHTML="",r.forEach((c,p)=>{const y=document.createElement("input");y.setAttribute("type","radio"),y.setAttribute("name","color"),y.setAttribute("value",c),y.id=`clrBtn-${p}`,y.classList.add("colorBtn");const v=document.createElement("label");v.setAttribute("for",`clrBtn-${p}`),v.classList.add("colorLabel"),v.style.backgroundColor=c,v.setAttribute("tabindex","0"),v.addEventListener("keydown",w=>{w.code==="Space"&&v.click()}),y.addEventListener("click",w=>this._clrBtnClick(w)),this.element.appendChild(y),this.element.appendChild(v)});const a=o?this.element.querySelector(`#${o.id}`):null;a?(this.selected=a,this.selected&&(this.selected.checked=!0)):(this.selected=o||this.element.querySelector('input[type="radio"]'),this.selected.checked=!0),this._onChange(this.selected.value)}_clrBtnClick(r){const o=r.target;this.selected=o,this._onChange(o.value)}setColors(r){this._init(r)}update(){const r=It(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness),o=this.element.querySelector(`label[for="${this.selected.id}"]`);this.selected.value=r,o&&o.style.setProperty("background-color",r)}get clrs(){const r=[];return this.element.querySelectorAll(".colorBtn").forEach(a=>{r.push(a.value)}),r}}class nl{constructor(r,o){ne(this,"element"),ne(this,"cursor"),this._colorPicker=r,this._onChange=o,this.element=document.createElement("div"),this.element.classList.add("picker"),this.element.addEventListener("click",a=>this._onClick(a)),this.element.addEventListener("mousemove",a=>this._onMove(a)),this.element.setAttribute("tabindex","0"),this.cursor=document.createElement("span"),this.cursor.classList.add("picker_cursor"),this.element.appendChild(this.cursor),this.element.addEventListener("keydown",a=>this._pickerKeyDown(a))}_onClick(r){const{left:o,top:a,width:c,height:p}=this.element.getBoundingClientRect(),y=r.clientX-o,v=r.clientY-a;this.cursor.style.setProperty("left",`${y}px`),this.cursor.style.setProperty("top",`${v}px`),this._colorPicker.brightness=Math.min(100,Math.max(0,100-v/p*100)),this._colorPicker.saturation=Math.min(100,Math.max(0,y/c*100)),this._onChange()}_onMove(r){if(r.buttons===1){r.preventDefault();const{left:o,top:a,width:c,height:p}=this.element.getBoundingClientRect(),y=Math.min(c,Math.max(0,r.clientX-o)),v=Math.min(p,Math.max(0,r.clientY-a));this.cursor.style.setProperty("left",`${y}px`),this.cursor.style.setProperty("top",`${v}px`),this._colorPicker.brightness=Math.min(100,Math.max(0,100-v/p*100)),this._colorPicker.saturation=Math.min(100,Math.max(0,y/c*100)),this._onChange()}}_pickerKeyDown(r){var o,a;switch(r.key){case"ArrowUp":this._colorPicker.brightness=Math.min(100,this._colorPicker.brightness+10),this._onChange();break;case"ArrowDown":this._colorPicker.brightness=Math.max(0,this._colorPicker.brightness-10),this._onChange();break;case"ArrowLeft":this._colorPicker.saturation=Math.max(0,this._colorPicker.saturation-10),this._onChange();break;case"ArrowRight":this._colorPicker.saturation=Math.min(100,this._colorPicker.saturation+10),this._onChange();break;case"Tab":r.shiftKey&&((a=(o=this._colorPicker.shadowRoot)==null?void 0:o.querySelector(".btns_cancel"))==null||a.focus(),r.preventDefault());break}this.update()}update(){this.element.style.setProperty("background-color",It(this._colorPicker.hue,100,100));const{width:r,height:o}=this.element.getBoundingClientRect(),a=this._colorPicker.saturation/100*r,c=(1-this._colorPicker.brightness/100)*o;this.cursor.style.setProperty("left",`${a}px`),this.cursor.style.setProperty("top",`${c}px`)}}class rl{constructor(r){ne(this,"element"),this._colorPicker=r,this.element=document.createElement("div"),this.element.classList.add("preview")}update(){const r=It(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness);this.element.style.backgroundColor=r}}class il extends HTMLElement{constructor(){var r;super(),ne(this,"_picker"),ne(this,"_hueRange"),ne(this,"_hexInput"),ne(this,"_preview"),ne(this,"_rangeWrapper"),ne(this,"_btns"),ne(this,"_pallet",null),ne(this,"_selectedClr",null),ne(this,"_palletClr",null),ne(this,"_savedPalletClr",null),ne(this,"_savedSelected",null),ne(this,"_value"),ne(this,"_savedValue",null),ne(this,"hue",0),ne(this,"saturation",0),ne(this,"brightness",0),ne(this,"_backdrop"),ne(this,"_openBtn",null);const o=this.attachShadow({mode:"open"});this._definePalletClr(),this._picker=new nl(this,this._onPickerChange.bind(this)),this._hueRange=new tl(this,this._onHueRangeChange.bind(this)),this._preview=new rl(this),this._rangeWrapper=document.createElement("div"),this._rangeWrapper.classList.add("range-wrapper"),this._rangeWrapper.appendChild(this._hueRange.element),this._palletClr&&(this._pallet=new Fo(this,this._palletClr,this._onPalletChange.bind(this))),this._hexInput=new el(this,this._onHexInputChange.bind(this)),this._btns=new Js(this,this.getAttribute("confirm-label")||"Ok",this.getAttribute("cancel-label")||"Cancel"),o.appendChild(this._picker.element),o.appendChild(this._rangeWrapper),this._pallet?(o.appendChild(this._pallet.element),this._palletClr&&(this.updateHSB(this._palletClr[0]),this._selectedClr=this._pallet.element.querySelector(`input[value="${this._palletClr[0]}"]`))):(this._rangeWrapper.insertBefore(this._preview.element,this._hueRange.element),this._preview.update()),this._value=((r=this._selectedClr)==null?void 0:r.value)||"#000000",o.appendChild(this._hexInput.element),o.appendChild(this._btns.elements),this._picker.update(),this.setAttribute("aria-label","Color Picker"),this.setAttribute("role","dialog"),this.setAttribute("tabindex","0"),o.appendChild(Qs()),this._backdrop=this._createBackdrop()}static get observedAttributes(){return["confirm-label","cancel-label","pallet"]}attributeChangedCallback(r,o,a){r==="pallet"?(this._definePalletClr(),this._resetPallet()):r==="confirm-label"?this._btns.confirmBtn.textContent=a:r==="cancel-label"&&(this._btns.cancelBtn.textContent=a)}_resetPallet(){var r,o;const a=this._rangeWrapper.querySelector(".preview");a&&this._rangeWrapper.removeChild(a),this._palletClr?(this._pallet||(this._pallet=new Fo(this,this._palletClr,this._onPalletChange),(r=this.shadowRoot)==null||r.insertBefore(this._pallet.element,this._hexInput.element),this._selectedClr=this._pallet.element.querySelector(`input[value="${this._palletClr[0]}"]`),this._selectedClr&&(this._selectedClr.checked=!0)),(o=this._pallet)==null||o.setColors(this._palletClr)):(this._rangeWrapper.insertBefore(this._preview.element,this._hueRange.element),this._preview.update())}get value(){return this._value}set value(r){var o;if(!Bo(r))throw new Error("Invalid hex color");if(this._value=It(this.hue,this.saturation,this.brightness),this._savedValue=this._value,this._hexInput.update(),this._preview.update(),this._picker.update(),this._hueRange.update(),this.updateHSB(r),this._pallet){(o=this._pallet)==null||o.update();const a=Array.from(this._pallet.element.querySelectorAll('input[type="radio"]'));this._palletClr=a.map(c=>c.value),this._savedPalletClr=[...this._palletClr]}}open(){var r,o;this._openBtn=document.activeElement,this.style.display="flex",this.setAttribute("aria-hidden","false"),this._picker.element.focus(),this.addEventListener("keydown",a=>this._keyDown(a)),this._picker.update(),this._hexInput.update(),this._resetPallet(),this._palletClr&&(this._savedPalletClr=[...this._palletClr]),this._savedValue=this.value,this._savedSelected=((o=(r=this._pallet)==null?void 0:r.element.querySelector("input:checked"))==null?void 0:o.id)||null,document.body.appendChild(this._backdrop)}_createBackdrop(){const r=document.createElement("div");return r.classList.add("backdrop"),r.addEventListener("click",()=>this.exit()),r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%",r.style.zIndex="1",r.style.backgroundColor="rgba(0,0,0,0.5)",r.id="clrpckr-backdrop",r}close(){var r;this.style.display="none",this.setAttribute("aria-hidden","true"),this.removeEventListener("keydown",a=>this._keyDown(a)),this._pallet&&(this._palletClr=this._pallet.clrs),this._value=It(this.hue,this.saturation,this.brightness);const o=document.getElementById("clrpckr-backdrop");o&&o.remove(),(r=this._openBtn)==null||r.focus()}exit(){var r;this.close(),this._savedPalletClr&&(this._palletClr=[...this._savedPalletClr]),this._savedValue&&(this.value=this._savedValue);const o=(r=this._pallet)==null?void 0:r.element.querySelector(`#${this._savedSelected}`);o&&(o.checked=!0)}_definePalletClr(){const r=this.getAttribute("pallet");let o=[];r&&JSON.parse(r).forEach(c=>{typeof c=="string"&&Bo(c)&&o.push(c)}),this._palletClr=o.length>0?o:null}_keyDown(r){r.code==="Escape"?this.exit():r.code==="Enter"&&this.close()}updateHSB(r){const o=Zs(r);o&&(this.hue=o.h,this.saturation=o.s,this.brightness=o.b)}_onPalletChange(r){var o,a,c,p;this.updateHSB(r),(o=this._picker)==null||o.update(),(a=this._hueRange)==null||a.update(),(c=this._hexInput)==null||c.update(),(p=this._preview)==null||p.update()}_onHexInputChange(r){var o,a,c,p;this.updateHSB(r),(o=this._picker)==null||o.update(),(a=this._hueRange)==null||a.update(),(c=this._pallet)==null||c.update(),(p=this._preview)==null||p.update()}_onHueRangeChange(r){var o,a,c,p;this.hue=r,(o=this._picker)==null||o.update(),(a=this._pallet)==null||a.update(),(c=this._hexInput)==null||c.update(),(p=this._preview)==null||p.update()}_onPickerChange(){var r;(r=this._pallet)==null||r.update(),this._hexInput.update(),this._preview.update()}}customElements.define("color-picker",il);class ol{constructor(r,o){L(this,"_zoomValue",1);L(this,"_translate",{x:0,y:0});this._frame=r,this._canvas=o,document.addEventListener("fullscreenchange",a=>{this.fitSketch()})}get zoomValue(){return this._zoomValue}set zoomValue(r){this._zoomValue=r,this._canvas.style.width=this._canvas.width*this._zoomValue+"px";const o=this._frame.getBoundingClientRect();this.translate={x:-(o.width-this._canvas.width*this._zoomValue)/2,y:-(o.height-this._canvas.height*this._zoomValue)/2}}get translate(){return this._translate}set translate(r){this._translate=r,this._canvas.style.setProperty("transform",`translate(${-this._translate.x}px,${-this._translate.y}px)`)}fitSketch(){const{width:r,height:o}=this._frame.getBoundingClientRect(),a=this._canvas.width/this._canvas.height,c=r/o;this.zoomValue=a<c?o/this._canvas.height:r/this._canvas.width}zoom(r,o,a){let c=this._zoomValue>1?this._zoomValue+1:this._zoomValue*2;if(o&&o<0&&(c=this._zoomValue>1?this._zoomValue-1:this._zoomValue*.999999),a&&(c=a>1?this._zoomValue+.25:this._zoomValue-.25),c=Math.max(1,Math.min(50,c)),r){r.x=Math.min(Math.max(r.x,0),this._canvas.width),r.y=Math.min(Math.max(r.y,0),this._canvas.width);const p=r.x*c-r.x*this._zoomValue+this._translate.x,y=r.y*c-r.y*this._zoomValue+this._translate.y;this._translate={x:p,y}}this._zoomValue=c,this._canvas.style.width=this._canvas.width*this._zoomValue+"px",this._canvas.style.setProperty("transform",`translate(${-this._translate.x}px,${-this._translate.y}px)`)}drag(r,o){const a=o.x-r.x,c=o.y-r.y;this.translate={x:this.translate.x-a,y:this.translate.y-c}}}class Zo{constructor(){L(this,"rgba",[0,0,0,255])}get hex(){return"#"+this.rgba.map(r=>("00"+r.toString(16)).slice(-2)).join("")}}class al extends Zo{constructor(r){var a;super();const o=((a=r.replace("#","").match(/(..?)/g))==null?void 0:a.map(c=>parseInt(c,16)))||[];this.rgba=this.rgba.map((c,p)=>o[p]||c)}}class sl extends Zo{constructor(r){super(),this.rgba=r}}function Kr(d){return typeof d=="string"?new al(d):new sl(d)}class Jo{constructor(r,o){L(this,"_canvas");L(this,"actif",!0);L(this,"_ctx");this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),r&&(this._canvas.width=r),o&&(this._canvas.height=o)}set width(r){this._canvas.width=r}get width(){return this._canvas.width}set height(r){this._canvas.height=r}get height(){return this._canvas.height}get canvas(){return this._canvas}getImgData(r=0,o=0,a=this.width,c=this.height){return new ImageData(new Uint8ClampedArray(this._ctx.getImageData(r,o,a,c).data),a,c)}get imgData(){return this._ctx.getImageData(0,0,this.width,this.height)}crop(r,o,a,c){const p=this._ctx.getImageData(r,o,a,c);this.width=a,this.height=c,this._ctx.putImageData(p,0,0)}putDatas(r,o,a){this.clear(),this._ctx.putImageData(r,o,a)}resize(r,o,a=-1,c=-1){const p=this._ctx.getImageData(0,0,this.width,this.height);this.width=r,this.height=o,this._ctx.putImageData(p,0,0)}paint(r,o,a){this._ctx.fillStyle=a||"#000000";const c=o>1?r.x-o/2:r.x,p=o>1?r.y-o/2:r.y;this._ctx.fillRect(Math.floor(c),Math.floor(p),o,o)}erase(r,o){const a=o>1?r.x-o/2:r.x,c=o>1?r.y-o/2:r.y;this._ctx.clearRect(Math.floor(a),Math.floor(c),o,o)}_getColor(r){const[o,a,c,p]=this._ctx.getImageData(r.x,r.y,1,1).data;return[o,a,c,p].join("-")}_getHexColor(r){const[o,a,c,p]=this._ctx.getImageData(r.x,r.y,1,1).data;return p===0?null:"#"+((1<<24)+(o<<16)+(a<<8)+c).toString(16).slice(1)}_hexToRgba(r){var a;const o=((a=r.replace("#","").match(/(..?)/g))==null?void 0:a.map(c=>parseInt(c,16)))||[];for(let c=o.length;c<4;c++)o.push(c===3?255:0);return o}}class fi extends Jo{clear(){this._ctx.clearRect(0,0,this.width,this.height)}bucket(r,o){const a=r.y*this.width+r.x,c=this.getImgData().data,p=Kr([...c.slice(4*a,4*a+4)]);if(Kr(o).hex===p.hex)return;const v=new Set([a]),w=v.values();let E=w.next();for(;!E.done;){if(Kr([...c.slice(4*E.value,4*E.value+4)]).hex===p.hex){const P=E.value%this.width,D=Math.floor(E.value/this.width);P>0&&v.add(E.value-1),P<this.width-1&&v.add(E.value+1),D>0&&v.add(E.value-this.width),D<this.height-1&&v.add(E.value+this.width),this.paint({x:P,y:D},1,o)}E=w.next()}}line(r,o,a,c){const p=Math.floor(r.x),y=Math.floor(r.y),v=Math.floor(o.x),w=Math.floor(o.y);if(p===v&&y===w){this.paint(r,a,c);return}const E=Math.abs(v-p),C=Math.abs(w-y),P=Math.sign(v-p),D=Math.sign(w-y);if(C===0)for(let z=p;z!==v+P;z+=P)this.paint({x:z,y},a,c);else if(E===0)for(let z=y;z!==w+D;z+=D)this.paint({x:p,y:z},a,c);else if(E>=C){const z=2*C,q=-2*E;let Y=-E,de=y;for(let V=p;V!==v+P;V+=P)this.paint({x:V,y:de},a,c),Y+=z,Y>=0&&(de+=D,Y+=q)}else{const z=2*E,q=-2*C;let Y=-C,de=p;for(let V=y;V!==w+D;V+=D)this.paint({x:de,y:V},a,c),Y+=z,Y>=0&&(de+=P,Y+=q)}}fillRect(r,o,a,c){this._ctx.fillStyle=c,this._ctx.fillRect(r.x,r.y,o,a)}rect(r,o,a,c,p){this.line({x:r.x,y:r.y},{x:r.x+o,y:r.y},c,p),this.line({x:r.x+o,y:r.y},{x:r.x+o,y:r.y+a},c,p),this.line({x:r.x,y:r.y+a},{x:r.x+o,y:r.y+a},c,p),this.line({x:r.x,y:r.y},{x:r.x,y:r.y+a},c,p)}ellipse(r,o,a,c,p){this._ctx.fillStyle=p;const y=Math.floor(o/2),v=Math.floor(a/2);let w=0,E=v,C=v*v-y*y*v+.25*y*y,P=2*v*v*w,D=2*y*y*E;for(;P<D;)this._ctx.fillRect(w+r.x,E+r.y,c,c),this._ctx.fillRect(-w+r.x,E+r.y,c,c),this._ctx.fillRect(w+r.x,-E+r.y,c,c),this._ctx.fillRect(-w+r.x,-E+r.y,c,c),C<0?(w++,P=P+2*v*v,C=C+P+v*v):(w++,E--,P=P+2*v*v,D=D-2*y*y,C=C+P-D+v*v);let z=v*v*((w+.5)*(w+.5))+y*y*((E-1)*(E-1))-y*y*v*v;for(;E>=0;)this._ctx.fillRect(w+r.x,E+r.y,c,c),this._ctx.fillRect(-w+r.x,E+r.y,c,c),this._ctx.fillRect(w+r.x,-E+r.y,c,c),this._ctx.fillRect(-w+r.x,-E+r.y,c,c),z>0?(E--,D=D-2*y*y,z=z+y*y-D):(E--,w++,P=P+2*v*v,D=D-2*y*y,z=z+P-D+y*y)}resize(r,o,a=-1,c=-1){let p=0,y=0;a===0?p=(r-this.width)/2:a===1&&(p=r-this.width),c===0?y=(o-this.height)/2:c===1&&(y=o-this.height);const v=this._ctx.getImageData(0,0,this.width,this.height);this.width=r,this.height=o,this._ctx.putImageData(v,p,y)}}class ll extends Jo{constructor(){super();L(this,"_colors",["#909090","#C0C0C0"]);L(this,"_size",4);this.clear()}clear(){for(let o=0;o<=Math.ceil(this.height/this._size);o++)for(let a=0;a<=Math.ceil(this.width/this._size);a++){const c=(a+o)%2;this.paint({x:a*this._size,y:o*this._size},this._size,this._colors[c])}}}class Ot{constructor(){L(this,"_observers",[]);L(this,"_newId",function*(){let r=0;for(;;)yield r,r++}())}subscribe(r){const o=this._newId.next().value;return this._observers.push({id:o,callback:r}),o}unsubscribe(r){this._observers=this._observers.filter(o=>o.id!==r)}notify(r){this._observers.forEach(o=>o.callback(r))}}function cl(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Qo={exports:{}};(function(d,r){(function(o){d.exports=o()})(function(){var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default=function(e){return!(!e||!e.Window)&&e instanceof e.Window};var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.init=y,a.getWindow=function(e){return(0,o.default)(e)?e:(e.ownerDocument||e).defaultView||p.window},a.window=a.realWindow=void 0;var c=void 0;a.realWindow=c;var p=void 0;function y(e){a.realWindow=c=e;var t=e.document.createTextNode("");t.ownerDocument!==e.document&&typeof e.wrap=="function"&&e.wrap(t)===t&&(e=e.wrap(e)),a.window=p=e}a.window=p,typeof window!="undefined"&&window&&y(window);var v={};function w(e){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var E=function(e){return!!e&&w(e)==="object"},C=function(e){return typeof e=="function"},P={window:function(e){return e===a.window||(0,o.default)(e)},docFrag:function(e){return E(e)&&e.nodeType===11},object:E,func:C,number:function(e){return typeof e=="number"},bool:function(e){return typeof e=="boolean"},string:function(e){return typeof e=="string"},element:function(e){if(!e||w(e)!=="object")return!1;var t=a.getWindow(e)||a.window;return/object|function/.test(w(t.Element))?e instanceof t.Element:e.nodeType===1&&typeof e.nodeName=="string"},plainObject:function(e){return E(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},array:function(e){return E(e)&&e.length!==void 0&&C(e.splice)}};v.default=P;var D={};function z(e){var t=e.interaction;if(t.prepared.name==="drag"){var n=t.prepared.axis;n==="x"?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):n==="y"&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function q(e){var t=e.iEvent,n=e.interaction;if(n.prepared.name==="drag"){var i=n.prepared.axis;if(i==="x"||i==="y"){var s=i==="x"?"y":"x";t.page[s]=n.coords.start.page[s],t.client[s]=n.coords.start.client[s],t.delta[s]=0}}}Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var Y={id:"actions/drag",install:function(e){var t=e.actions,n=e.Interactable,i=e.defaults;n.prototype.draggable=Y.draggable,t.map.drag=Y,t.methodDict.drag="draggable",i.actions.drag=Y.defaults},listeners:{"interactions:before-action-move":z,"interactions:action-resume":z,"interactions:action-move":q,"auto-start:check":function(e){var t=e.interaction,n=e.interactable,i=e.buttons,s=n.options.drag;if(s&&s.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(i&n.options.drag.mouseButtons)!=0))return e.action={name:"drag",axis:s.lockAxis==="start"?s.startAxis:s.lockAxis},!1}},draggable:function(e){return v.default.object(e)?(this.options.drag.enabled=e.enabled!==!1,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):v.default.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:z,move:q,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},de=Y;D.default=de;var V={};Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var J={init:function(e){var t=e;J.document=t.document,J.DocumentFragment=t.DocumentFragment||fe,J.SVGElement=t.SVGElement||fe,J.SVGSVGElement=t.SVGSVGElement||fe,J.SVGElementInstance=t.SVGElementInstance||fe,J.Element=t.Element||fe,J.HTMLElement=t.HTMLElement||J.Element,J.Event=t.Event,J.Touch=t.Touch||fe,J.PointerEvent=t.PointerEvent||t.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function fe(){}var me=J;V.default=me;var ie={};Object.defineProperty(ie,"__esModule",{value:!0}),ie.default=void 0;var oe={init:function(e){var t=V.default.Element,n=e.navigator||{};oe.supportsTouch="ontouchstart"in e||v.default.func(e.DocumentTouch)&&V.default.document instanceof e.DocumentTouch,oe.supportsPointerEvent=n.pointerEnabled!==!1&&!!V.default.PointerEvent,oe.isIOS=/iP(hone|od|ad)/.test(n.platform),oe.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),oe.isIe9=/MSIE 9/.test(n.userAgent),oe.isOperaMobile=n.appName==="Opera"&&oe.supportsTouch&&/Presto/.test(n.userAgent),oe.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",oe.pEventTypes=oe.supportsPointerEvent?V.default.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,oe.wheelEvent=V.default.document&&"onmousewheel"in V.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},Ae=oe;ie.default=Ae;var R={};function he(e){var t=e.parentNode;if(v.default.docFrag(t)){for(;(t=t.host)&&v.default.docFrag(t););return t}return t}function je(e,t){return a.window!==a.realWindow&&(t=t.replace(/\/deep\//g," ")),e[ie.default.prefixedMatchesSelector](t)}Object.defineProperty(R,"__esModule",{value:!0}),R.nodeContains=function(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1},R.closest=function(e,t){for(;v.default.element(e);){if(je(e,t))return e;e=he(e)}return null},R.parentNode=he,R.matchesSelector=je,R.indexOfDeepestElement=function(e){for(var t,n=[],i=0;i<e.length;i++){var s=e[i],l=e[t];if(s&&i!==t)if(l){var f=Se(s),u=Se(l);if(f!==s.ownerDocument)if(u!==s.ownerDocument)if(f!==u){n=n.length?n:qe(l);var h=void 0;if(l instanceof V.default.HTMLElement&&s instanceof V.default.SVGElement&&!(s instanceof V.default.SVGSVGElement)){if(s===u)continue;h=s.ownerSVGElement}else h=s;for(var g=qe(h,l.ownerDocument),m=0;g[m]&&g[m]===n[m];)m++;var b=[g[m-1],g[m],n[m]];if(b[0])for(var x=b[0].lastChild;x;){if(x===b[1]){t=i,n=g;break}if(x===b[2])break;x=x.previousSibling}}else k=s,_=l,(parseInt(a.getWindow(k).getComputedStyle(k).zIndex,10)||0)>=(parseInt(a.getWindow(_).getComputedStyle(_).zIndex,10)||0)&&(t=i);else t=i}else t=i}var k,_;return t},R.matchesUpTo=function(e,t,n){for(;v.default.element(e);){if(je(e,t))return!0;if((e=he(e))===n)return je(e,t)}return!1},R.getActualElement=function(e){return e.correspondingUseElement||e},R.getScrollXY=Re,R.getElementClientRect=He,R.getElementRect=function(e){var t=He(e);if(!ie.default.isIOS7&&t){var n=Re(a.getWindow(e));t.left+=n.x,t.right+=n.x,t.top+=n.y,t.bottom+=n.y}return t},R.getPath=function(e){for(var t=[];e;)t.push(e),e=he(e);return t},R.trySelector=function(e){return!!v.default.string(e)&&(V.default.document.querySelector(e),!0)};var Se=function(e){return e.parentNode||e.host};function qe(e,t){for(var n,i=[],s=e;(n=Se(s))&&s!==t&&n!==s.ownerDocument;)i.unshift(s),s=n;return i}function Re(e){return{x:(e=e||a.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function He(e){var t=e instanceof V.default.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.default=function(e,t){for(var n in t)e[n]=t[n];return e};var G={};function st(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function lt(e,t,n){return e==="parent"?(0,R.parentNode)(n):e==="self"?t.getRect(n):(0,R.closest)(n,e)}Object.defineProperty(G,"__esModule",{value:!0}),G.getStringOptionResult=lt,G.resolveRectLike=function(e,t,n,i){var s,l=e;return v.default.string(l)?l=lt(l,t,n):v.default.func(l)&&(l=l.apply(void 0,function(f){if(Array.isArray(f))return st(f)}(s=i)||function(f){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(f))return Array.from(f)}(s)||function(f,u){if(f){if(typeof f=="string")return st(f,u);var h=Object.prototype.toString.call(f).slice(8,-1);return h==="Object"&&f.constructor&&(h=f.constructor.name),h==="Map"||h==="Set"?Array.from(f):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?st(f,u):void 0}}(s)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())),v.default.element(l)&&(l=(0,R.getElementRect)(l)),l},G.rectToXY=function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},G.xywhToTlbr=function(e){return!e||"left"in e&&"top"in e||((e=(0,I.default)({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e},G.tlbrToXywh=function(e){return!e||"x"in e&&"y"in e||((e=(0,I.default)({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||(e.right||0)-e.x,e.height=e.height||(e.bottom||0)-e.y),e},G.addEdges=function(e,t,n){e.left&&(t.left+=n.x),e.right&&(t.right+=n.x),e.top&&(t.top+=n.y),e.bottom&&(t.bottom+=n.y),t.width=t.right-t.left,t.height=t.bottom-t.top};var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.default=function(e,t,n){var i=e.options[n],s=i&&i.origin||e.options.origin,l=(0,G.resolveRectLike)(s,e,t,[e&&t]);return(0,G.rectToXY)(l)||{x:0,y:0}};var yt={};function $t(e){return e.trim().split(/ +/)}Object.defineProperty(yt,"__esModule",{value:!0}),yt.default=function e(t,n,i){if(i=i||{},v.default.string(t)&&t.search(" ")!==-1&&(t=$t(t)),v.default.array(t))return t.reduce(function(h,g){return(0,I.default)(h,e(g,n,i))},i);if(v.default.object(t)&&(n=t,t=""),v.default.func(n))i[t]=i[t]||[],i[t].push(n);else if(v.default.array(n))for(var s=0;s<n.length;s++){var l;l=n[s],e(t,l,i)}else if(v.default.object(n))for(var f in n){var u=$t(f).map(function(h){return"".concat(t).concat(h)});e(u,n[f],i)}return i};var We={};Object.defineProperty(We,"__esModule",{value:!0}),We.default=void 0,We.default=function(e,t){return Math.sqrt(e*e+t*t)};var Kt={};function yr(e,t){for(var n in t){var i=yr.prefixedPropREs,s=!1;for(var l in i)if(n.indexOf(l)===0&&i[l].test(n)){s=!0;break}s||typeof t[n]=="function"||(e[n]=t[n])}return e}Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.default=void 0,yr.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/};var ha=yr;Kt.default=ha;var j={};function br(e){return e instanceof V.default.Event||e instanceof V.default.Touch}function Zt(e,t,n){return e=e||"page",(n=n||{}).x=t[e+"X"],n.y=t[e+"Y"],n}function _i(e,t){return t=t||{x:0,y:0},ie.default.isOperaMobile&&br(e)?(Zt("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):Zt("page",e,t),t}function wi(e,t){return t=t||{},ie.default.isOperaMobile&&br(e)?Zt("screen",e,t):Zt("client",e,t),t}function kn(e){var t=[];return v.default.array(e)?(t[0]=e[0],t[1]=e[1]):e.type==="touchend"?e.touches.length===1?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):e.touches.length===0&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function xi(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<e.length;n++){var i=e[n];for(var s in t)t[s]+=i[s]}for(var l in t)t[l]/=e.length;return t}Object.defineProperty(j,"__esModule",{value:!0}),j.copyCoords=function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},j.setCoordDeltas=function(e,t,n){e.page.x=n.page.x-t.page.x,e.page.y=n.page.y-t.page.y,e.client.x=n.client.x-t.client.x,e.client.y=n.client.y-t.client.y,e.timeStamp=n.timeStamp-t.timeStamp},j.setCoordVelocity=function(e,t){var n=Math.max(t.timeStamp/1e3,.001);e.page.x=t.page.x/n,e.page.y=t.page.y/n,e.client.x=t.client.x/n,e.client.y=t.client.y/n,e.timeStamp=n},j.setZeroCoords=function(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0},j.isNativePointer=br,j.getXY=Zt,j.getPageXY=_i,j.getClientXY=wi,j.getPointerId=function(e){return v.default.number(e.pointerId)?e.pointerId:e.identifier},j.setCoords=function(e,t,n){var i=t.length>1?xi(t):t[0];_i(i,e.page),wi(i,e.client),e.timeStamp=n},j.getTouchPair=kn,j.pointerAverage=xi,j.touchBBox=function(e){if(!e.length)return null;var t=kn(e),n=Math.min(t[0].pageX,t[1].pageX),i=Math.min(t[0].pageY,t[1].pageY),s=Math.max(t[0].pageX,t[1].pageX),l=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:i,left:n,top:i,right:s,bottom:l,width:s-n,height:l-i}},j.touchDistance=function(e,t){var n=t+"X",i=t+"Y",s=kn(e),l=s[0][n]-s[1][n],f=s[0][i]-s[1][i];return(0,We.default)(l,f)},j.touchAngle=function(e,t){var n=t+"X",i=t+"Y",s=kn(e),l=s[1][n]-s[0][n],f=s[1][i]-s[0][i];return 180*Math.atan2(f,l)/Math.PI},j.getPointerType=function(e){return v.default.string(e.pointerType)?e.pointerType:v.default.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type||"")||e instanceof V.default.Touch?"touch":"mouse"},j.getEventTargets=function(e){var t=v.default.func(e.composedPath)?e.composedPath():e.path;return[R.getActualElement(t?t[0]:e.target),R.getActualElement(e.currentTarget)]},j.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},j.coordsToEvent=function(e){return{coords:e,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(j,"pointerExtend",{enumerable:!0,get:function(){return Kt.default}});var At={};function pa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(At,"__esModule",{value:!0}),At.BaseEvent=void 0;var Ei=function(){function e(i){(function(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),ct(this,"type",void 0),ct(this,"target",void 0),ct(this,"currentTarget",void 0),ct(this,"interactable",void 0),ct(this,"_interaction",void 0),ct(this,"timeStamp",void 0),ct(this,"immediatePropagationStopped",!1),ct(this,"propagationStopped",!1),this._interaction=i}var t,n;return t=e,(n=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&pa(t.prototype,n),e}();At.BaseEvent=Ei,Object.defineProperty(Ei.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var re={};Object.defineProperty(re,"__esModule",{value:!0}),re.find=re.findIndex=re.from=re.merge=re.remove=re.contains=void 0,re.contains=function(e,t){return e.indexOf(t)!==-1},re.remove=function(e,t){return e.splice(e.indexOf(t),1)};var ki=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}return e};re.merge=ki,re.from=function(e){return ki([],e)};var Si=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1};re.findIndex=Si,re.find=function(e,t){return e[Si(e,t)]};var Ze={};function Pi(e){return(Pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function va(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Oi(e,t){return(Oi=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(e,t)}function ga(e,t){return!t||Pi(t)!=="object"&&typeof t!="function"?Je(e):t}function Je(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _r(e){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.DropEvent=void 0;var ma=function(e){(function(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),h&&Oi(u,h)})(f,e);var t,n,i,s,l=(i=f,s=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var u,h=_r(i);if(s){var g=_r(this).constructor;u=Reflect.construct(h,arguments,g)}else u=h.apply(this,arguments);return ga(this,u)});function f(u,h,g){var m;(function(_,S){if(!(_ instanceof S))throw new TypeError("Cannot call a class as a function")})(this,f),ut(Je(m=l.call(this,h._interaction)),"target",void 0),ut(Je(m),"dropzone",void 0),ut(Je(m),"dragEvent",void 0),ut(Je(m),"relatedTarget",void 0),ut(Je(m),"draggable",void 0),ut(Je(m),"timeStamp",void 0),ut(Je(m),"propagationStopped",!1),ut(Je(m),"immediatePropagationStopped",!1);var b=g==="dragleave"?u.prev:u.cur,x=b.element,k=b.dropzone;return m.type=g,m.target=x,m.currentTarget=x,m.dropzone=k,m.dragEvent=h,m.relatedTarget=h.target,m.draggable=h.interactable,m.timeStamp=h.timeStamp,m}return t=f,(n=[{key:"reject",value:function(){var u=this,h=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&h.cur.dropzone===this.dropzone&&h.cur.element===this.target)if(h.prev.dropzone=this.dropzone,h.prev.element=this.target,h.rejected=!0,h.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var g=h.activeDrops,m=re.findIndex(g,function(x){var k=x.dropzone,_=x.element;return k===u.dropzone&&_===u.target});h.activeDrops.splice(m,1);var b=new f(h,this.dragEvent,"dropdeactivate");b.dropzone=this.dropzone,b.target=this.target,this.dropzone.fire(b)}else this.dropzone.fire(new f(h,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&va(t.prototype,n),f}(At.BaseEvent);Ze.DropEvent=ma;var Sn={};function Ci(e,t){for(var n=0;n<e.slice().length;n++){var i=e.slice()[n],s=i.dropzone,l=i.element;t.dropzone=s,t.target=l,s.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function wr(e,t){for(var n=function(l,f){for(var u=l.interactables,h=[],g=0;g<u.list.length;g++){var m=u.list[g];if(m.options.drop.enabled){var b=m.options.drop.accept;if(!(v.default.element(b)&&b!==f||v.default.string(b)&&!R.matchesSelector(f,b)||v.default.func(b)&&!b({dropzone:m,draggableElement:f})))for(var x=v.default.string(m.target)?m._context.querySelectorAll(m.target):v.default.array(m.target)?m.target:[m.target],k=0;k<x.length;k++){var _=x[k];_!==f&&h.push({dropzone:m,element:_,rect:m.getRect(_)})}}}return h}(e,t),i=0;i<n.length;i++){var s=n[i];s.rect=s.dropzone.getRect(s.element)}return n}function Ti(e,t,n){for(var i=e.dropState,s=e.interactable,l=e.element,f=[],u=0;u<i.activeDrops.length;u++){var h=i.activeDrops[u],g=h.dropzone,m=h.element,b=h.rect;f.push(g.dropCheck(t,n,s,l,m,b)?m:null)}var x=R.indexOfDeepestElement(f);return i.activeDrops[x]||null}function xr(e,t,n){var i=e.dropState,s={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return n.type==="dragstart"&&(s.activate=new Ze.DropEvent(i,n,"dropactivate"),s.activate.target=null,s.activate.dropzone=null),n.type==="dragend"&&(s.deactivate=new Ze.DropEvent(i,n,"dropdeactivate"),s.deactivate.target=null,s.deactivate.dropzone=null),i.rejected||(i.cur.element!==i.prev.element&&(i.prev.dropzone&&(s.leave=new Ze.DropEvent(i,n,"dragleave"),n.dragLeave=s.leave.target=i.prev.element,n.prevDropzone=s.leave.dropzone=i.prev.dropzone),i.cur.dropzone&&(s.enter=new Ze.DropEvent(i,n,"dragenter"),n.dragEnter=i.cur.element,n.dropzone=i.cur.dropzone)),n.type==="dragend"&&i.cur.dropzone&&(s.drop=new Ze.DropEvent(i,n,"drop"),n.dropzone=i.cur.dropzone,n.relatedTarget=i.cur.element),n.type==="dragmove"&&i.cur.dropzone&&(s.move=new Ze.DropEvent(i,n,"dropmove"),s.move.dragmove=n,n.dropzone=i.cur.dropzone)),s}function Er(e,t){var n=e.dropState,i=n.activeDrops,s=n.cur,l=n.prev;t.leave&&l.dropzone.fire(t.leave),t.enter&&s.dropzone.fire(t.enter),t.move&&s.dropzone.fire(t.move),t.drop&&s.dropzone.fire(t.drop),t.deactivate&&Ci(i,t.deactivate),n.prev.dropzone=s.dropzone,n.prev.element=s.element}function Mi(e,t){var n=e.interaction,i=e.iEvent,s=e.event;if(i.type==="dragmove"||i.type==="dragend"){var l=n.dropState;t.dynamicDrop&&(l.activeDrops=wr(t,n.element));var f=i,u=Ti(n,f,s);l.rejected=l.rejected&&!!u&&u.dropzone===l.cur.dropzone&&u.element===l.cur.element,l.cur.dropzone=u&&u.dropzone,l.cur.element=u&&u.element,l.events=xr(n,0,f)}}Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.default=void 0;var Di={id:"actions/drop",install:function(e){var t=e.actions,n=e.interactStatic,i=e.Interactable,s=e.defaults;e.usePlugin(D.default),i.prototype.dropzone=function(l){return function(f,u){if(v.default.object(u)){if(f.options.drop.enabled=u.enabled!==!1,u.listeners){var h=(0,yt.default)(u.listeners),g=Object.keys(h).reduce(function(m,b){return m[/^(enter|leave)/.test(b)?"drag".concat(b):/^(activate|deactivate|move)/.test(b)?"drop".concat(b):b]=h[b],m},{});f.off(f.options.drop.listeners),f.on(g),f.options.drop.listeners=g}return v.default.func(u.ondrop)&&f.on("drop",u.ondrop),v.default.func(u.ondropactivate)&&f.on("dropactivate",u.ondropactivate),v.default.func(u.ondropdeactivate)&&f.on("dropdeactivate",u.ondropdeactivate),v.default.func(u.ondragenter)&&f.on("dragenter",u.ondragenter),v.default.func(u.ondragleave)&&f.on("dragleave",u.ondragleave),v.default.func(u.ondropmove)&&f.on("dropmove",u.ondropmove),/^(pointer|center)$/.test(u.overlap)?f.options.drop.overlap=u.overlap:v.default.number(u.overlap)&&(f.options.drop.overlap=Math.max(Math.min(1,u.overlap),0)),"accept"in u&&(f.options.drop.accept=u.accept),"checker"in u&&(f.options.drop.checker=u.checker),f}return v.default.bool(u)?(f.options.drop.enabled=u,f):f.options.drop}(this,l)},i.prototype.dropCheck=function(l,f,u,h,g,m){return function(b,x,k,_,S,M,O){var A=!1;if(!(O=O||b.getRect(M)))return!!b.options.drop.checker&&b.options.drop.checker(x,k,A,b,M,_,S);var B=b.options.drop.overlap;if(B==="pointer"){var H=(0,Ke.default)(_,S,"drag"),K=j.getPageXY(x);K.x+=H.x,K.y+=H.y;var ae=K.x>O.left&&K.x<O.right,U=K.y>O.top&&K.y<O.bottom;A=ae&&U}var te=_.getRect(S);if(te&&B==="center"){var Le=te.left+te.width/2,rt=te.top+te.height/2;A=Le>=O.left&&Le<=O.right&&rt>=O.top&&rt<=O.bottom}return te&&v.default.number(B)&&(A=Math.max(0,Math.min(O.right,te.right)-Math.max(O.left,te.left))*Math.max(0,Math.min(O.bottom,te.bottom)-Math.max(O.top,te.top))/(te.width*te.height)>=B),b.options.drop.checker&&(A=b.options.drop.checker(x,k,A,b,M,_,S)),A}(this,l,f,u,h,g,m)},n.dynamicDrop=function(l){return v.default.bool(l)?(e.dynamicDrop=l,n):e.dynamicDrop},(0,I.default)(t.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),t.methodDict.drop="dropzone",e.dynamicDrop=!1,s.actions.drop=Di.defaults},listeners:{"interactions:before-action-start":function(e){var t=e.interaction;t.prepared.name==="drag"&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var n=e.interaction,i=(e.event,e.iEvent);if(n.prepared.name==="drag"){var s=n.dropState;s.activeDrops=null,s.events=null,s.activeDrops=wr(t,n.element),s.events=xr(n,0,i),s.events.activate&&(Ci(s.activeDrops,s.events.activate),t.fire("actions/drop:start",{interaction:n,dragEvent:i}))}},"interactions:action-move":Mi,"interactions:after-action-move":function(e,t){var n=e.interaction,i=e.iEvent;n.prepared.name==="drag"&&(Er(n,n.dropState.events),t.fire("actions/drop:move",{interaction:n,dragEvent:i}),n.dropState.events={})},"interactions:action-end":function(e,t){if(e.interaction.prepared.name==="drag"){var n=e.interaction,i=e.iEvent;Mi(e,t),Er(n,n.dropState.events),t.fire("actions/drop:end",{interaction:n,dragEvent:i})}},"interactions:stop":function(e){var t=e.interaction;if(t.prepared.name==="drag"){var n=t.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:wr,getDrop:Ti,getDropEvents:xr,fireDropEvents:Er,defaults:{enabled:!1,accept:null,overlap:"pointer"}},ya=Di;Sn.default=ya;var Pn={};function kr(e){var t=e.interaction,n=e.iEvent,i=e.phase;if(t.prepared.name==="gesture"){var s=t.pointers.map(function(g){return g.pointer}),l=i==="start",f=i==="end",u=t.interactable.options.deltaSource;if(n.touches=[s[0],s[1]],l)n.distance=j.touchDistance(s,u),n.box=j.touchBBox(s),n.scale=1,n.ds=0,n.angle=j.touchAngle(s,u),n.da=0,t.gesture.startDistance=n.distance,t.gesture.startAngle=n.angle;else if(f){var h=t.prevEvent;n.distance=h.distance,n.box=h.box,n.scale=h.scale,n.ds=0,n.angle=h.angle,n.da=0}else n.distance=j.touchDistance(s,u),n.box=j.touchBBox(s),n.scale=n.distance/t.gesture.startDistance,n.angle=j.touchAngle(s,u),n.ds=n.scale-t.gesture.scale,n.da=n.angle-t.gesture.angle;t.gesture.distance=n.distance,t.gesture.angle=n.angle,v.default.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(t.gesture.scale=n.scale)}}Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.default=void 0;var Sr={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,n=e.Interactable,i=e.defaults;n.prototype.gesturable=function(s){return v.default.object(s)?(this.options.gesture.enabled=s.enabled!==!1,this.setPerAction("gesture",s),this.setOnEvents("gesture",s),this):v.default.bool(s)?(this.options.gesture.enabled=s,this):this.options.gesture},t.map.gesture=Sr,t.methodDict.gesture="gesturable",i.actions.gesture=Sr.defaults},listeners:{"interactions:action-start":kr,"interactions:action-move":kr,"interactions:action-end":kr,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return e.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},ba=Sr;Pn.default=ba;var On={};function _a(e,t,n,i,s,l,f){if(!t)return!1;if(t===!0){var u=v.default.number(l.width)?l.width:l.right-l.left,h=v.default.number(l.height)?l.height:l.bottom-l.top;if(f=Math.min(f,Math.abs((e==="left"||e==="right"?u:h)/2)),u<0&&(e==="left"?e="right":e==="right"&&(e="left")),h<0&&(e==="top"?e="bottom":e==="bottom"&&(e="top")),e==="left")return n.x<(u>=0?l.left:l.right)+f;if(e==="top")return n.y<(h>=0?l.top:l.bottom)+f;if(e==="right")return n.x>(u>=0?l.right:l.left)-f;if(e==="bottom")return n.y>(h>=0?l.bottom:l.top)-f}return!!v.default.element(i)&&(v.default.element(t)?t===i:R.matchesUpTo(i,t,s))}function Ii(e){var t=e.iEvent,n=e.interaction;if(n.prepared.name==="resize"&&n.resizeAxes){var i=t;n.interactable.options.resize.square?(n.resizeAxes==="y"?i.delta.x=i.delta.y:i.delta.y=i.delta.x,i.axes="xy"):(i.axes=n.resizeAxes,n.resizeAxes==="x"?i.delta.y=0:n.resizeAxes==="y"&&(i.delta.x=0))}}Object.defineProperty(On,"__esModule",{value:!0}),On.default=void 0;var Qe={id:"actions/resize",before:["actions/drag"],install:function(e){var t=e.actions,n=e.browser,i=e.Interactable,s=e.defaults;Qe.cursors=function(l){return l.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(n),Qe.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,i.prototype.resizable=function(l){return function(f,u,h){return v.default.object(u)?(f.options.resize.enabled=u.enabled!==!1,f.setPerAction("resize",u),f.setOnEvents("resize",u),v.default.string(u.axis)&&/^x$|^y$|^xy$/.test(u.axis)?f.options.resize.axis=u.axis:u.axis===null&&(f.options.resize.axis=h.defaults.actions.resize.axis),v.default.bool(u.preserveAspectRatio)?f.options.resize.preserveAspectRatio=u.preserveAspectRatio:v.default.bool(u.square)&&(f.options.resize.square=u.square),f):v.default.bool(u)?(f.options.resize.enabled=u,f):f.options.resize}(this,l,e)},t.map.resize=Qe,t.methodDict.resize="resizable",s.actions.resize=Qe.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(e){(function(t){var n=t.iEvent,i=t.interaction;if(i.prepared.name==="resize"&&i.prepared.edges){var s=n,l=i.rect;i._rects={start:(0,I.default)({},l),corrected:(0,I.default)({},l),previous:(0,I.default)({},l),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},s.edges=i.prepared.edges,s.rect=i._rects.corrected,s.deltaRect=i._rects.delta}})(e),Ii(e)},"interactions:action-move":function(e){(function(t){var n=t.iEvent,i=t.interaction;if(i.prepared.name==="resize"&&i.prepared.edges){var s=n,l=i.interactable.options.resize.invert,f=l==="reposition"||l==="negate",u=i.rect,h=i._rects,g=h.start,m=h.corrected,b=h.delta,x=h.previous;if((0,I.default)(x,m),f){if((0,I.default)(m,u),l==="reposition"){if(m.top>m.bottom){var k=m.top;m.top=m.bottom,m.bottom=k}if(m.left>m.right){var _=m.left;m.left=m.right,m.right=_}}}else m.top=Math.min(u.top,g.bottom),m.bottom=Math.max(u.bottom,g.top),m.left=Math.min(u.left,g.right),m.right=Math.max(u.right,g.left);for(var S in m.width=m.right-m.left,m.height=m.bottom-m.top,m)b[S]=m[S]-x[S];s.edges=i.prepared.edges,s.rect=m,s.deltaRect=b}})(e),Ii(e)},"interactions:action-end":function(e){var t=e.iEvent,n=e.interaction;if(n.prepared.name==="resize"&&n.prepared.edges){var i=t;i.edges=n.prepared.edges,i.rect=n._rects.corrected,i.deltaRect=n._rects.delta}},"auto-start:check":function(e){var t=e.interaction,n=e.interactable,i=e.element,s=e.rect,l=e.buttons;if(s){var f=(0,I.default)({},t.coords.cur.page),u=n.options.resize;if(u&&u.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(l&u.mouseButtons)!=0)){if(v.default.object(u.edges)){var h={left:!1,right:!1,top:!1,bottom:!1};for(var g in h)h[g]=_a(g,u.edges[g],f,t._latestPointer.eventTarget,i,s,u.margin||Qe.defaultMargin);h.left=h.left&&!h.right,h.top=h.top&&!h.bottom,(h.left||h.right||h.top||h.bottom)&&(e.action={name:"resize",edges:h})}else{var m=u.axis!=="y"&&f.x>s.right-Qe.defaultMargin,b=u.axis!=="x"&&f.y>s.bottom-Qe.defaultMargin;(m||b)&&(e.action={name:"resize",axes:(m?"x":"")+(b?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,n=e.axis,i=e.name,s=Qe.cursors,l=null;if(n)l=s[i+n];else if(t){for(var f="",u=["top","bottom","left","right"],h=0;h<u.length;h++){var g=u[h];t[g]&&(f+=g)}l=s[f]}return l},defaultMargin:null},wa=Qe;On.default=wa;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.default=void 0;var xa={id:"actions",install:function(e){e.usePlugin(Pn.default),e.usePlugin(On.default),e.usePlugin(D.default),e.usePlugin(Sn.default)}};Cn.default=xa;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.default=void 0;var et,bt,Ai=0,Ea={request:function(e){return et(e)},cancel:function(e){return bt(e)},init:function(e){if(et=e.requestAnimationFrame,bt=e.cancelAnimationFrame,!et)for(var t=["ms","moz","webkit","o"],n=0;n<t.length;n++){var i=t[n];et=e["".concat(i,"RequestAnimationFrame")],bt=e["".concat(i,"CancelAnimationFrame")]||e["".concat(i,"CancelRequestAnimationFrame")]}et=et&&et.bind(e),bt=bt&&bt.bind(e),et||(et=function(s){var l=Date.now(),f=Math.max(0,16-(l-Ai)),u=e.setTimeout(function(){s(l+f)},f);return Ai=l+f,u},bt=function(s){return clearTimeout(s)})}};Ne.default=Ea;var dt={};Object.defineProperty(dt,"__esModule",{value:!0}),dt.getContainer=Tn,dt.getScroll=Jt,dt.getScrollSize=function(e){return v.default.window(e)&&(e=window.document.body),{x:e.scrollWidth,y:e.scrollHeight}},dt.getScrollSizeDelta=function(e,t){var n=e.interaction,i=e.element,s=n&&n.interactable.options[n.prepared.name].autoScroll;if(!s||!s.enabled)return t(),{x:0,y:0};var l=Tn(s.container,n.interactable,i),f=Jt(l);t();var u=Jt(l);return{x:u.x-f.x,y:u.y-f.y}},dt.default=void 0;var X={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){X.isScrolling=!0,Ne.default.cancel(X.i),e.autoScroll=X,X.interaction=e,X.prevTime=X.now(),X.i=Ne.default.request(X.scroll)},stop:function(){X.isScrolling=!1,X.interaction&&(X.interaction.autoScroll=null),Ne.default.cancel(X.i)},scroll:function(){var e=X.interaction,t=e.interactable,n=e.element,i=e.prepared.name,s=t.options[i].autoScroll,l=Tn(s.container,t,n),f=X.now(),u=(f-X.prevTime)/1e3,h=s.speed*u;if(h>=1){var g={x:X.x*h,y:X.y*h};if(g.x||g.y){var m=Jt(l);v.default.window(l)?l.scrollBy(g.x,g.y):l&&(l.scrollLeft+=g.x,l.scrollTop+=g.y);var b=Jt(l),x={x:b.x-m.x,y:b.y-m.y};(x.x||x.y)&&t.fire({type:"autoscroll",target:n,interactable:t,delta:x,interaction:e,container:l})}X.prevTime=f}X.isScrolling&&(Ne.default.cancel(X.i),X.i=Ne.default.request(X.scroll))},check:function(e,t){var n;return(n=e.options[t].autoScroll)==null?void 0:n.enabled},onInteractionMove:function(e){var t=e.interaction,n=e.pointer;if(t.interacting()&&X.check(t.interactable,t.prepared.name))if(t.simulation)X.x=X.y=0;else{var i,s,l,f,u=t.interactable,h=t.element,g=t.prepared.name,m=u.options[g].autoScroll,b=Tn(m.container,u,h);if(v.default.window(b))f=n.clientX<X.margin,i=n.clientY<X.margin,s=n.clientX>b.innerWidth-X.margin,l=n.clientY>b.innerHeight-X.margin;else{var x=R.getElementClientRect(b);f=n.clientX<x.left+X.margin,i=n.clientY<x.top+X.margin,s=n.clientX>x.right-X.margin,l=n.clientY>x.bottom-X.margin}X.x=s?1:f?-1:0,X.y=l?1:i?-1:0,X.isScrolling||(X.margin=m.margin,X.speed=m.speed,X.start(t))}}};function Tn(e,t,n){return(v.default.string(e)?(0,G.getStringOptionResult)(e,t,n):e)||(0,a.getWindow)(n)}function Jt(e){return v.default.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var ka={id:"auto-scroll",install:function(e){var t=e.defaults,n=e.actions;e.autoScroll=X,X.now=function(){return e.now()},n.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=X.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,X.stop(),X.interaction&&(X.interaction=null)},"interactions:stop":X.stop,"interactions:action-move":function(e){return X.onInteractionMove(e)}}};dt.default=ka;var Te={};Object.defineProperty(Te,"__esModule",{value:!0}),Te.warnOnce=function(e,t){var n=!1;return function(){return n||(a.window.console.warn(t),n=!0),e.apply(this,arguments)}},Te.copyAction=function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e},Te.sign=void 0,Te.sign=function(e){return e>=0?1:-1};var Mn={};function Sa(e){return v.default.bool(e)?(this.options.styleCursor=e,this):e===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Pa(e){return v.default.func(e)?(this.options.actionChecker=e,this):e===null?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.default=void 0;var Oa={id:"auto-start/interactableMethods",install:function(e){var t=e.Interactable;t.prototype.getAction=function(n,i,s,l){var f=function(u,h,g,m,b){var x=u.getRect(m),k={action:null,interactable:u,interaction:g,element:m,rect:x,buttons:h.buttons||{0:1,1:4,3:8,4:16}[h.button]};return b.fire("auto-start:check",k),k.action}(this,i,s,l,e);return this.options.actionChecker?this.options.actionChecker(n,i,f,this,l,s):f},t.prototype.ignoreFrom=(0,Te.warnOnce)(function(n){return this._backCompatOption("ignoreFrom",n)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=(0,Te.warnOnce)(function(n){return this._backCompatOption("allowFrom",n)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=Pa,t.prototype.styleCursor=Sa}};Mn.default=Oa;var jt={};function ji(e,t,n,i,s){return t.testIgnoreAllow(t.options[e.name],n,i)&&t.options[e.name].enabled&&Dn(t,n,e,s)?e:null}function Ca(e,t,n,i,s,l,f){for(var u=0,h=i.length;u<h;u++){var g=i[u],m=s[u],b=g.getAction(t,n,e,m);if(b){var x=ji(b,g,m,l,f);if(x)return{action:x,interactable:g,element:m}}}return{action:null,interactable:null,element:null}}function Ri(e,t,n,i,s){var l=[],f=[],u=i;function h(m){l.push(m),f.push(u)}for(;v.default.element(u);){l=[],f=[],s.interactables.forEachMatch(u,h);var g=Ca(e,t,n,l,f,i,s);if(g.action&&!g.interactable.options[g.action.name].manualStart)return g;u=R.parentNode(u)}return{action:null,interactable:null,element:null}}function zi(e,t,n){var i=t.action,s=t.interactable,l=t.element;i=i||{name:null},e.interactable=s,e.element=l,(0,Te.copyAction)(e.prepared,i),e.rect=s&&i.name?s.getRect(l):null,Bi(e,n),n.fire("autoStart:prepared",{interaction:e})}function Dn(e,t,n,i){var s=e.options,l=s[n.name].max,f=s[n.name].maxPerElement,u=i.autoStart.maxInteractions,h=0,g=0,m=0;if(!(l&&f&&u))return!1;for(var b=0;b<i.interactions.list.length;b++){var x=i.interactions.list[b],k=x.prepared.name;if(x.interacting()&&(++h>=u||x.interactable===e&&((g+=k===n.name?1:0)>=l||x.element===t&&(m++,k===n.name&&m>=f))))return!1}return u>0}function Li(e,t){return v.default.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function Pr(e,t,n){var i=n.autoStart.cursorElement;i&&i!==e&&(i.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,n.autoStart.cursorElement=t?e:null}function Bi(e,t){var n=e.interactable,i=e.element,s=e.prepared;if(e.pointerType==="mouse"&&n&&n.options.styleCursor){var l="";if(s.name){var f=n.options[s.name].cursorChecker;l=v.default.func(f)?f(s,n,i,e._interacting):t.actions.map[s.name].getCursor(s)}Pr(e.element,l||"",t)}else t.autoStart.cursorElement&&Pr(t.autoStart.cursorElement,"",t)}Object.defineProperty(jt,"__esModule",{value:!0}),jt.default=void 0;var Ta={id:"auto-start/base",before:["actions"],install:function(e){var t=e.interactStatic,n=e.defaults;e.usePlugin(Mn.default),n.base.actionChecker=null,n.base.styleCursor=!0,(0,I.default)(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=function(i){return Li(i,e)},e.autoStart={maxInteractions:1/0,withinInteractionLimit:Dn,cursorElement:null}},listeners:{"interactions:down":function(e,t){var n=e.interaction,i=e.pointer,s=e.event,l=e.eventTarget;n.interacting()||zi(n,Ri(n,i,s,l,t),t)},"interactions:move":function(e,t){(function(n,i){var s=n.interaction,l=n.pointer,f=n.event,u=n.eventTarget;s.pointerType!=="mouse"||s.pointerIsDown||s.interacting()||zi(s,Ri(s,l,f,u,i),i)})(e,t),function(n,i){var s=n.interaction;if(s.pointerIsDown&&!s.interacting()&&s.pointerWasMoved&&s.prepared.name){i.fire("autoStart:before-start",n);var l=s.interactable,f=s.prepared.name;f&&l&&(l.options[f].manualStart||!Dn(l,s.element,s.prepared,i)?s.stop():(s.start(s.prepared,l,s.element),Bi(s,i)))}}(e,t)},"interactions:stop":function(e,t){var n=e.interaction,i=n.interactable;i&&i.options.styleCursor&&Pr(n.element,"",t)}},maxInteractions:Li,withinInteractionLimit:Dn,validateAction:ji};jt.default=Ta;var In={};Object.defineProperty(In,"__esModule",{value:!0}),In.default=void 0;var Ma={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,t){var n=e.interaction,i=e.eventTarget,s=e.dx,l=e.dy;if(n.prepared.name==="drag"){var f=Math.abs(s),u=Math.abs(l),h=n.interactable.options.drag,g=h.startAxis,m=f>u?"x":f<u?"y":"xy";if(n.prepared.axis=h.lockAxis==="start"?m[0]:h.lockAxis,m!=="xy"&&g!=="xy"&&g!==m){n.prepared.name=null;for(var b=i,x=function(_){if(_!==n.interactable){var S=n.interactable.options.drag;if(!S.manualStart&&_.testIgnoreAllow(S,b,i)){var M=_.getAction(n.downPointer,n.downEvent,n,b);if(M&&M.name==="drag"&&function(O,A){if(!A)return!1;var B=A.options.drag.startAxis;return O==="xy"||B==="xy"||B===O}(m,_)&&jt.default.validateAction(M,_,b,i,t))return _}}};v.default.element(b);){var k=t.interactables.forEachMatch(b,x);if(k){n.prepared.name="drag",n.interactable=k,n.element=b;break}b=(0,R.parentNode)(b)}}}}}};In.default=Ma;var An={};function Or(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var n=e.interactable.options;return n[t].hold||n[t].delay}Object.defineProperty(An,"__esModule",{value:!0}),An.default=void 0;var Da={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(jt.default),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,n=Or(t);n>0&&(t.autoStartHoldTimer=setTimeout(function(){t.start(t.prepared,t.interactable,t.element)},n))},"interactions:move":function(e){var t=e.interaction,n=e.duplicate;t.autoStartHoldTimer&&t.pointerWasMoved&&!n&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":function(e){var t=e.interaction;Or(t)>0&&(t.prepared.name=null)}},getHoldDuration:Or};An.default=Da;var jn={};Object.defineProperty(jn,"__esModule",{value:!0}),jn.default=void 0;var Ia={id:"auto-start",install:function(e){e.usePlugin(jt.default),e.usePlugin(An.default),e.usePlugin(In.default)}};jn.default=Ia;var Rt={};function Aa(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):v.default.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault}function ja(e){var t=e.interaction,n=e.event;t.interactable&&t.interactable.checkAndPreventDefault(n)}function Fi(e){var t=e.Interactable;t.prototype.preventDefault=Aa,t.prototype.checkAndPreventDefault=function(n){return function(i,s,l){var f=i.options.preventDefault;if(f!=="never")if(f!=="always"){if(s.events.supportsPassive&&/^touch(start|move)$/.test(l.type)){var u=(0,a.getWindow)(l.target).document,h=s.getDocOptions(u);if(!h||!h.events||h.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(l.type)||v.default.element(l.target)&&(0,R.matchesSelector)(l.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||l.preventDefault()}else l.preventDefault()}(this,e,n)},e.interactions.docEvents.push({type:"dragstart",listener:function(n){for(var i=0;i<e.interactions.list.length;i++){var s=e.interactions.list[i];if(s.element&&(s.element===n.target||(0,R.nodeContains)(s.element,n.target)))return void s.interactable.checkAndPreventDefault(n)}}})}Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.install=Fi,Rt.default=void 0;var Ra={id:"core/interactablePreventDefault",install:Fi,listeners:["down","move","up","cancel"].reduce(function(e,t){return e["interactions:".concat(t)]=ja,e},{})};Rt.default=Ra;var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.default=void 0,Cr.default={};var Qt,Tr={};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.default=void 0,function(e){e.touchAction="touchAction",e.boxSizing="boxSizing",e.noListeners="noListeners"}(Qt||(Qt={})),Qt.touchAction,Qt.boxSizing,Qt.noListeners;var za={id:"dev-tools",install:function(){}};Tr.default=za;var _t={};Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=function e(t){var n={};for(var i in t){var s=t[i];v.default.plainObject(s)?n[i]=e(s):v.default.array(s)?n[i]=re.from(s):n[i]=s}return n};var wt={};function Ni(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(n)){var s=[],l=!0,f=!1,u=void 0;try{for(var h,g=n[Symbol.iterator]();!(l=(h=g.next()).done)&&(s.push(h.value),!i||s.length!==i);l=!0);}catch(m){f=!0,u=m}finally{try{l||g.return==null||g.return()}finally{if(f)throw u}}return s}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Xi(n,i);var s=Object.prototype.toString.call(n).slice(8,-1);return s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set"?Array.from(n):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Xi(n,i):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xi(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function La(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(wt,"__esModule",{value:!0}),wt.getRectOffset=Yi,wt.default=void 0;var Ba=function(){function e(i){(function(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),xt(this,"states",[]),xt(this,"startOffset",{left:0,right:0,top:0,bottom:0}),xt(this,"startDelta",void 0),xt(this,"result",void 0),xt(this,"endResult",void 0),xt(this,"edges",void 0),xt(this,"interaction",void 0),this.interaction=i,this.result=Rn()}var t,n;return t=e,(n=[{key:"start",value:function(i,s){var l=i.phase,f=this.interaction,u=function(g){var m=g.interactable.options[g.prepared.name],b=m.modifiers;return b&&b.length?b:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(x){var k=m[x];return k&&k.enabled&&{options:k,methods:k._methods}}).filter(function(x){return!!x})}(f);this.prepareStates(u),this.edges=(0,I.default)({},f.edges),this.startOffset=Yi(f.rect,s),this.startDelta={x:0,y:0};var h=this.fillArg({phase:l,pageCoords:s,preEnd:!1});return this.result=Rn(),this.startAll(h),this.result=this.setAll(h)}},{key:"fillArg",value:function(i){var s=this.interaction;return i.interaction=s,i.interactable=s.interactable,i.element=s.element,i.rect=i.rect||s.rect,i.edges=this.edges,i.startOffset=this.startOffset,i}},{key:"startAll",value:function(i){for(var s=0;s<this.states.length;s++){var l=this.states[s];l.methods.start&&(i.state=l,l.methods.start(i))}}},{key:"setAll",value:function(i){var s=i.phase,l=i.preEnd,f=i.skipModifiers,u=i.rect;i.coords=(0,I.default)({},i.pageCoords),i.rect=(0,I.default)({},u);for(var h=f?this.states.slice(f):this.states,g=Rn(i.coords,i.rect),m=0;m<h.length;m++){var b,x=h[m],k=x.options,_=(0,I.default)({},i.coords),S=null;(b=x.methods)!=null&&b.set&&this.shouldDo(k,l,s)&&(i.state=x,S=x.methods.set(i),G.addEdges(this.interaction.edges,i.rect,{x:i.coords.x-_.x,y:i.coords.y-_.y})),g.eventProps.push(S)}g.delta.x=i.coords.x-i.pageCoords.x,g.delta.y=i.coords.y-i.pageCoords.y,g.rectDelta.left=i.rect.left-u.left,g.rectDelta.right=i.rect.right-u.right,g.rectDelta.top=i.rect.top-u.top,g.rectDelta.bottom=i.rect.bottom-u.bottom;var M=this.result.coords,O=this.result.rect;if(M&&O){var A=g.rect.left!==O.left||g.rect.right!==O.right||g.rect.top!==O.top||g.rect.bottom!==O.bottom;g.changed=A||M.x!==g.coords.x||M.y!==g.coords.y}return g}},{key:"applyToInteraction",value:function(i){var s=this.interaction,l=i.phase,f=s.coords.cur,u=s.coords.start,h=this.result,g=this.startDelta,m=h.delta;l==="start"&&(0,I.default)(this.startDelta,h.delta);for(var b=0;b<[[u,g],[f,m]].length;b++){var x=Ni([[u,g],[f,m]][b],2),k=x[0],_=x[1];k.page.x+=_.x,k.page.y+=_.y,k.client.x+=_.x,k.client.y+=_.y}var S=this.result.rectDelta,M=i.rect||s.rect;M.left+=S.left,M.right+=S.right,M.top+=S.top,M.bottom+=S.bottom,M.width=M.right-M.left,M.height=M.bottom-M.top}},{key:"setAndApply",value:function(i){var s=this.interaction,l=i.phase,f=i.preEnd,u=i.skipModifiers,h=this.setAll(this.fillArg({preEnd:f,phase:l,pageCoords:i.modifiedCoords||s.coords.cur.page}));if(this.result=h,!h.changed&&(!u||u<this.states.length)&&s.interacting())return!1;if(i.modifiedCoords){var g=s.coords.cur.page,m={x:i.modifiedCoords.x-g.x,y:i.modifiedCoords.y-g.y};h.coords.x+=m.x,h.coords.y+=m.y,h.delta.x+=m.x,h.delta.y+=m.y}this.applyToInteraction(i)}},{key:"beforeEnd",value:function(i){var s=i.interaction,l=i.event,f=this.states;if(f&&f.length){for(var u=!1,h=0;h<f.length;h++){var g=f[h];i.state=g;var m=g.options,b=g.methods,x=b.beforeEnd&&b.beforeEnd(i);if(x)return this.endResult=x,!1;u=u||!u&&this.shouldDo(m,!0,i.phase,!0)}u&&s.move({event:l,preEnd:!0})}}},{key:"stop",value:function(i){var s=i.interaction;if(this.states&&this.states.length){var l=(0,I.default)({states:this.states,interactable:s.interactable,element:s.element,rect:null},i);this.fillArg(l);for(var f=0;f<this.states.length;f++){var u=this.states[f];l.state=u,u.methods.stop&&u.methods.stop(l)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(i){this.states=[];for(var s=0;s<i.length;s++){var l=i[s],f=l.options,u=l.methods,h=l.name;this.states.push({options:f,methods:u,index:s,name:h})}return this.states}},{key:"restoreInteractionCoords",value:function(i){var s=i.interaction,l=s.coords,f=s.rect,u=s.modification;if(u.result){for(var h=u.startDelta,g=u.result,m=g.delta,b=g.rectDelta,x=[[l.start,h],[l.cur,m]],k=0;k<x.length;k++){var _=Ni(x[k],2),S=_[0],M=_[1];S.page.x-=M.x,S.page.y-=M.y,S.client.x-=M.x,S.client.y-=M.y}f.left-=b.left,f.right-=b.right,f.top-=b.top,f.bottom-=b.bottom}}},{key:"shouldDo",value:function(i,s,l,f){return!(!i||i.enabled===!1||f&&!i.endOnly||i.endOnly&&!s||l==="start"&&!i.setStart)}},{key:"copyFrom",value:function(i){this.startOffset=i.startOffset,this.startDelta=i.startDelta,this.edges=i.edges,this.states=i.states.map(function(s){return(0,_t.default)(s)}),this.result=Rn((0,I.default)({},i.result.coords),(0,I.default)({},i.result.rect))}},{key:"destroy",value:function(){for(var i in this)this[i]=null}}])&&La(t.prototype,n),e}();function Rn(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Yi(e,t){return e?{left:t.x-e.left,top:t.y-e.top,right:e.right-t.x,bottom:e.bottom-t.y}:{left:0,top:0,right:0,bottom:0}}wt.default=Ba;var ye={};function zn(e){var t=e.iEvent,n=e.interaction.modification.result;n&&(t.modifiers=n.eventProps)}Object.defineProperty(ye,"__esModule",{value:!0}),ye.makeModifier=function(e,t){var n=e.defaults,i={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop},s=function(l){var f=l||{};for(var u in f.enabled=f.enabled!==!1,n)u in f||(f[u]=n[u]);var h={options:f,methods:i,name:t,enable:function(){return f.enabled=!0,h},disable:function(){return f.enabled=!1,h}};return h};return t&&typeof t=="string"&&(s._defaults=n,s._methods=i),s},ye.addEventModifiers=zn,ye.default=void 0;var Fa={id:"modifiers/base",before:["actions"],install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){var t=e.interaction;t.modification=new wt.default(t)},"interactions:before-action-start":function(e){var t=e.interaction.modification;t.start(e,e.interaction.coords.start.page),e.interaction.edges=t.edges,t.applyToInteraction(e)},"interactions:before-action-move":function(e){return e.interaction.modification.setAndApply(e)},"interactions:before-action-end":function(e){return e.interaction.modification.beforeEnd(e)},"interactions:action-start":zn,"interactions:action-move":zn,"interactions:action-end":zn,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}}};ye.default=Fa;var en={};Object.defineProperty(en,"__esModule",{value:!0}),en.defaults=void 0,en.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var tn={};function qi(e){return(qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Na(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Hi(e,t){return(Hi=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(e,t)}function Xa(e,t){return!t||qi(t)!=="object"&&typeof t!="function"?Q(e):t}function Q(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mr(e){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(tn,"__esModule",{value:!0}),tn.InteractEvent=void 0;var Wi=function(e){(function(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),h&&Hi(u,h)})(f,e);var t,n,i,s,l=(i=f,s=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var u,h=Mr(i);if(s){var g=Mr(this).constructor;u=Reflect.construct(h,arguments,g)}else u=h.apply(this,arguments);return Xa(this,u)});function f(u,h,g,m,b,x,k){var _;(function(ae,U){if(!(ae instanceof U))throw new TypeError("Cannot call a class as a function")})(this,f),ee(Q(_=l.call(this,u)),"target",void 0),ee(Q(_),"currentTarget",void 0),ee(Q(_),"relatedTarget",null),ee(Q(_),"screenX",void 0),ee(Q(_),"screenY",void 0),ee(Q(_),"button",void 0),ee(Q(_),"buttons",void 0),ee(Q(_),"ctrlKey",void 0),ee(Q(_),"shiftKey",void 0),ee(Q(_),"altKey",void 0),ee(Q(_),"metaKey",void 0),ee(Q(_),"page",void 0),ee(Q(_),"client",void 0),ee(Q(_),"delta",void 0),ee(Q(_),"rect",void 0),ee(Q(_),"x0",void 0),ee(Q(_),"y0",void 0),ee(Q(_),"t0",void 0),ee(Q(_),"dt",void 0),ee(Q(_),"duration",void 0),ee(Q(_),"clientX0",void 0),ee(Q(_),"clientY0",void 0),ee(Q(_),"velocity",void 0),ee(Q(_),"speed",void 0),ee(Q(_),"swipe",void 0),ee(Q(_),"timeStamp",void 0),ee(Q(_),"axes",void 0),ee(Q(_),"preEnd",void 0),b=b||u.element;var S=u.interactable,M=(S&&S.options||en.defaults).deltaSource,O=(0,Ke.default)(S,b,g),A=m==="start",B=m==="end",H=A?Q(_):u.prevEvent,K=A?u.coords.start:B?{page:H.page,client:H.client,timeStamp:u.coords.cur.timeStamp}:u.coords.cur;return _.page=(0,I.default)({},K.page),_.client=(0,I.default)({},K.client),_.rect=(0,I.default)({},u.rect),_.timeStamp=K.timeStamp,B||(_.page.x-=O.x,_.page.y-=O.y,_.client.x-=O.x,_.client.y-=O.y),_.ctrlKey=h.ctrlKey,_.altKey=h.altKey,_.shiftKey=h.shiftKey,_.metaKey=h.metaKey,_.button=h.button,_.buttons=h.buttons,_.target=b,_.currentTarget=b,_.preEnd=x,_.type=k||g+(m||""),_.interactable=S,_.t0=A?u.pointers[u.pointers.length-1].downTime:H.t0,_.x0=u.coords.start.page.x-O.x,_.y0=u.coords.start.page.y-O.y,_.clientX0=u.coords.start.client.x-O.x,_.clientY0=u.coords.start.client.y-O.y,_.delta=A||B?{x:0,y:0}:{x:_[M].x-H[M].x,y:_[M].y-H[M].y},_.dt=u.coords.delta.timeStamp,_.duration=_.timeStamp-_.t0,_.velocity=(0,I.default)({},u.coords.velocity[M]),_.speed=(0,We.default)(_.velocity.x,_.velocity.y),_.swipe=B||m==="inertiastart"?_.getSwipe():null,_}return t=f,(n=[{key:"getSwipe",value:function(){var u=this._interaction;if(u.prevEvent.speed<600||this.timeStamp-u.prevEvent.timeStamp>150)return null;var h=180*Math.atan2(u.prevEvent.velocityY,u.prevEvent.velocityX)/Math.PI;h<0&&(h+=360);var g=112.5<=h&&h<247.5,m=202.5<=h&&h<337.5;return{up:m,down:!m&&22.5<=h&&h<157.5,left:g,right:!g&&(292.5<=h||h<67.5),angle:h,speed:u.prevEvent.speed,velocity:{x:u.prevEvent.velocityX,y:u.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&Na(t.prototype,n),f}(At.BaseEvent);tn.InteractEvent=Wi,Object.defineProperties(Wi.prototype,{pageX:{get:function(){return this.page.x},set:function(e){this.page.x=e}},pageY:{get:function(){return this.page.y},set:function(e){this.page.y=e}},clientX:{get:function(){return this.client.x},set:function(e){this.client.x=e}},clientY:{get:function(){return this.client.y},set:function(e){this.client.y=e}},dx:{get:function(){return this.delta.x},set:function(e){this.delta.x=e}},dy:{get:function(){return this.delta.y},set:function(e){this.delta.y=e}},velocityX:{get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},velocityY:{get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}});var nn={};function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(nn,"__esModule",{value:!0}),nn.PointerInfo=void 0,nn.PointerInfo=function e(t,n,i,s,l){(function(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),rn(this,"id",void 0),rn(this,"pointer",void 0),rn(this,"event",void 0),rn(this,"downTime",void 0),rn(this,"downTarget",void 0),this.id=t,this.pointer=n,this.event=i,this.downTime=s,this.downTarget=l};var Ln,Bn,Pe={};function Ya(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Pe,"__esModule",{value:!0}),Object.defineProperty(Pe,"PointerInfo",{enumerable:!0,get:function(){return nn.PointerInfo}}),Pe.default=Pe.Interaction=Pe._ProxyMethods=Pe._ProxyValues=void 0,Pe._ProxyValues=Ln,function(e){e.interactable="",e.element="",e.prepared="",e.pointerIsDown="",e.pointerWasMoved="",e._proxy=""}(Ln||(Pe._ProxyValues=Ln={})),Pe._ProxyMethods=Bn,function(e){e.start="",e.move="",e.end="",e.stop="",e.interacting=""}(Bn||(Pe._ProxyMethods=Bn={}));var qa=0,Vi=function(){function e(i){var s=this,l=i.pointerType,f=i.scopeFire;(function(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")})(this,e),le(this,"interactable",null),le(this,"element",null),le(this,"rect",void 0),le(this,"_rects",void 0),le(this,"edges",void 0),le(this,"_scopeFire",void 0),le(this,"prepared",{name:null,axis:null,edges:null}),le(this,"pointerType",void 0),le(this,"pointers",[]),le(this,"downEvent",null),le(this,"downPointer",{}),le(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),le(this,"prevEvent",null),le(this,"pointerIsDown",!1),le(this,"pointerWasMoved",!1),le(this,"_interacting",!1),le(this,"_ending",!1),le(this,"_stopped",!0),le(this,"_proxy",null),le(this,"simulation",null),le(this,"doMove",(0,Te.warnOnce)(function(x){this.move(x)},"The interaction.doMove() method has been renamed to interaction.move()")),le(this,"coords",{start:j.newCoords(),prev:j.newCoords(),cur:j.newCoords(),delta:j.newCoords(),velocity:j.newCoords()}),le(this,"_id",qa++),this._scopeFire=f,this.pointerType=l;var u=this;this._proxy={};var h=function(x){Object.defineProperty(s._proxy,x,{get:function(){return u[x]}})};for(var g in Ln)h(g);var m=function(x){Object.defineProperty(s._proxy,x,{value:function(){return u[x].apply(u,arguments)}})};for(var b in Bn)m(b);this._scopeFire("interactions:new",{interaction:this})}var t,n;return t=e,(n=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(i,s,l){var f=this.updatePointer(i,s,l,!0),u=this.pointers[f];this._scopeFire("interactions:down",{pointer:i,event:s,eventTarget:l,pointerIndex:f,pointerInfo:u,type:"down",interaction:this})}},{key:"start",value:function(i,s,l){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(i.name==="gesture"?2:1)||!s.options[i.name].enabled)&&((0,Te.copyAction)(this.prepared,i),this.interactable=s,this.element=l,this.rect=s.getRect(l),this.edges=this.prepared.edges?(0,I.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(i,s,l){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(i,s,l,!1);var f,u,h=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(f=this.coords.cur.client.x-this.coords.start.client.x,u=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,We.default)(f,u)>this.pointerMoveTolerance);var g=this.getPointerIndex(i),m={pointer:i,pointerIndex:g,pointerInfo:this.pointers[g],event:s,type:"move",eventTarget:l,dx:f,dy:u,duplicate:h,interaction:this};h||j.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",m),h||this.simulation||(this.interacting()&&(m.type=null,this.move(m)),this.pointerWasMoved&&j.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(i){i&&i.event||j.setZeroCoords(this.coords.delta),(i=(0,I.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},i||{})).phase="move",this._doPhase(i)}},{key:"pointerUp",value:function(i,s,l,f){var u=this.getPointerIndex(i);u===-1&&(u=this.updatePointer(i,s,l,!1));var h=/cancel$/i.test(s.type)?"cancel":"up";this._scopeFire("interactions:".concat(h),{pointer:i,pointerIndex:u,pointerInfo:this.pointers[u],event:s,eventTarget:l,type:h,curEventTarget:f,interaction:this}),this.simulation||this.end(s),this.removePointer(i,s)}},{key:"documentBlur",value:function(i){this.end(i),this._scopeFire("interactions:blur",{event:i,type:"blur",interaction:this})}},{key:"end",value:function(i){var s;this._ending=!0,i=i||this._latestPointer.event,this.interacting()&&(s=this._doPhase({event:i,interaction:this,phase:"end"})),this._ending=!1,s===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(i){var s=j.getPointerId(i);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:re.findIndex(this.pointers,function(l){return l.id===s})}},{key:"getPointerInfo",value:function(i){return this.pointers[this.getPointerIndex(i)]}},{key:"updatePointer",value:function(i,s,l,f){var u=j.getPointerId(i),h=this.getPointerIndex(i),g=this.pointers[h];return f=f!==!1&&(f||/(down|start)$/i.test(s.type)),g?g.pointer=i:(g=new nn.PointerInfo(u,i,s,null,null),h=this.pointers.length,this.pointers.push(g)),j.setCoords(this.coords.cur,this.pointers.map(function(m){return m.pointer}),this._now()),j.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),f&&(this.pointerIsDown=!0,g.downTime=this.coords.cur.timeStamp,g.downTarget=l,j.pointerExtend(this.downPointer,i),this.interacting()||(j.copyCoords(this.coords.start,this.coords.cur),j.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=s,this.pointerWasMoved=!1)),this._updateLatestPointer(i,s,l),this._scopeFire("interactions:update-pointer",{pointer:i,event:s,eventTarget:l,down:f,pointerInfo:g,pointerIndex:h,interaction:this}),h}},{key:"removePointer",value:function(i,s){var l=this.getPointerIndex(i);if(l!==-1){var f=this.pointers[l];this._scopeFire("interactions:remove-pointer",{pointer:i,event:s,eventTarget:null,pointerIndex:l,pointerInfo:f,interaction:this}),this.pointers.splice(l,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(i,s,l){this._latestPointer.pointer=i,this._latestPointer.event=s,this._latestPointer.eventTarget=l}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(i,s,l,f){return new tn.InteractEvent(this,i,this.prepared.name,s,this.element,l,f)}},{key:"_fireEvent",value:function(i){this.interactable.fire(i),(!this.prevEvent||i.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=i)}},{key:"_doPhase",value:function(i){var s=i.event,l=i.phase,f=i.preEnd,u=i.type,h=this.rect;if(h&&l==="move"&&(G.addEdges(this.edges,h,this.coords.delta[this.interactable.options.deltaSource]),h.width=h.right-h.left,h.height=h.bottom-h.top),this._scopeFire("interactions:before-action-".concat(l),i)===!1)return!1;var g=i.iEvent=this._createPreparedEvent(s,l,f,u);return this._scopeFire("interactions:action-".concat(l),i),l==="start"&&(this.prevEvent=g),this._fireEvent(g),this._scopeFire("interactions:after-action-".concat(l),i),!0}},{key:"_now",value:function(){return Date.now()}}])&&Ya(t.prototype,n),e}();Pe.Interaction=Vi;var Ha=Vi;Pe.default=Ha;var Et={};function Ui(e){e.pointerIsDown&&(Ir(e.coords.cur,e.offset.total),e.offset.pending.x=0,e.offset.pending.y=0)}function Gi(e){Dr(e.interaction)}function Dr(e){if(!function(n){return!(!n.offset.pending.x&&!n.offset.pending.y)}(e))return!1;var t=e.offset.pending;return Ir(e.coords.cur,t),Ir(e.coords.delta,t),G.addEdges(e.edges,e.rect,t),t.x=0,t.y=0,!0}function Wa(e){var t=e.x,n=e.y;this.offset.pending.x+=t,this.offset.pending.y+=n,this.offset.total.x+=t,this.offset.total.y+=n}function Ir(e,t){var n=e.page,i=e.client,s=t.x,l=t.y;n.x+=s,n.y+=l,i.x+=s,i.y+=l}Object.defineProperty(Et,"__esModule",{value:!0}),Et.addTotal=Ui,Et.applyPending=Dr,Et.default=void 0,Pe._ProxyMethods.offsetBy="";var Va={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(e){e.Interaction.prototype.offsetBy=Wa},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return Ui(e.interaction)},"interactions:before-action-start":Gi,"interactions:before-action-move":Gi,"interactions:before-action-end":function(e){var t=e.interaction;if(Dr(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function(e){var t=e.interaction;t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}};Et.default=Va;var zt={};function Ua(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(zt,"__esModule",{value:!0}),zt.default=zt.InertiaState=void 0;var $i=function(){function e(i){(function(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),ge(this,"active",!1),ge(this,"isModified",!1),ge(this,"smoothEnd",!1),ge(this,"allowResume",!1),ge(this,"modification",void 0),ge(this,"modifierCount",0),ge(this,"modifierArg",void 0),ge(this,"startCoords",void 0),ge(this,"t0",0),ge(this,"v0",0),ge(this,"te",0),ge(this,"targetOffset",void 0),ge(this,"modifiedOffset",void 0),ge(this,"currentOffset",void 0),ge(this,"lambda_v0",0),ge(this,"one_ve_v0",0),ge(this,"timeout",void 0),ge(this,"interaction",void 0),this.interaction=i}var t,n;return t=e,(n=[{key:"start",value:function(i){var s=this.interaction,l=Fn(s);if(!l||!l.enabled)return!1;var f=s.coords.velocity.client,u=(0,We.default)(f.x,f.y),h=this.modification||(this.modification=new wt.default(s));if(h.copyFrom(s.modification),this.t0=s._now(),this.allowResume=l.allowResume,this.v0=u,this.currentOffset={x:0,y:0},this.startCoords=s.coords.cur.page,this.modifierArg=h.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-s.coords.cur.timeStamp<50&&u>l.minSpeed&&u>l.endSpeed)this.startInertia();else{if(h.result=h.setAll(this.modifierArg),!h.result.changed)return!1;this.startSmoothEnd()}return s.modification.result.rect=null,s.offsetBy(this.targetOffset),s._doPhase({interaction:s,event:i,phase:"inertiastart"}),s.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),s.modification.result.rect=null,this.active=!0,s.simulation=this,!0}},{key:"startInertia",value:function(){var i=this,s=this.interaction.coords.velocity.client,l=Fn(this.interaction),f=l.resistance,u=-Math.log(l.endSpeed/this.v0)/f;this.targetOffset={x:(s.x-u)/f,y:(s.y-u)/f},this.te=u,this.lambda_v0=f/this.v0,this.one_ve_v0=1-l.endSpeed/this.v0;var h=this.modification,g=this.modifierArg;g.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},h.result=h.setAll(g),h.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+h.result.delta.x,y:this.targetOffset.y+h.result.delta.y}),this.onNextFrame(function(){return i.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var i=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return i.smoothEndTick()})}},{key:"onNextFrame",value:function(i){var s=this;this.timeout=Ne.default.request(function(){s.active&&i()})}},{key:"inertiaTick",value:function(){var i,s,l,f,u,h=this,g=this.interaction,m=Fn(g).resistance,b=(g._now()-this.t0)/1e3;if(b<this.te){var x,k=1-(Math.exp(-m*b)-this.lambda_v0)/this.one_ve_v0;this.isModified?(i=this.targetOffset.x,s=this.targetOffset.y,l=this.modifiedOffset.x,f=this.modifiedOffset.y,x={x:Ki(u=k,0,i,l),y:Ki(u,0,s,f)}):x={x:this.targetOffset.x*k,y:this.targetOffset.y*k};var _={x:x.x-this.currentOffset.x,y:x.y-this.currentOffset.y};this.currentOffset.x+=_.x,this.currentOffset.y+=_.y,g.offsetBy(_),g.move(),this.onNextFrame(function(){return h.inertiaTick()})}else g.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var i=this,s=this.interaction,l=s._now()-this.t0,f=Fn(s).smoothEndDuration;if(l<f){var u={x:Zi(l,0,this.targetOffset.x,f),y:Zi(l,0,this.targetOffset.y,f)},h={x:u.x-this.currentOffset.x,y:u.y-this.currentOffset.y};this.currentOffset.x+=h.x,this.currentOffset.y+=h.y,s.offsetBy(h),s.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return i.smoothEndTick()})}else s.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(i){var s=i.pointer,l=i.event,f=i.eventTarget,u=this.interaction;u.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),u.updatePointer(s,l,f,!0),u._doPhase({interaction:u,event:l,phase:"resume"}),(0,j.copyCoords)(u.coords.prev,u.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Ne.default.cancel(this.timeout)}}])&&Ua(t.prototype,n),e}();function Fn(e){var t=e.interactable,n=e.prepared;return t&&t.options&&n.name&&t.options[n.name].inertia}function Ki(e,t,n,i){var s=1-e;return s*s*t+2*s*e*n+e*e*i}function Zi(e,t,n,i){return-n*(e/=i)*(e-2)+t}zt.InertiaState=$i;var Ga={id:"inertia",before:["modifiers","actions"],install:function(e){var t=e.defaults;e.usePlugin(Et.default),e.usePlugin(ye.default),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){var t=e.interaction;t.inertia=new $i(t)},"interactions:before-action-end":function(e){var t=e.interaction,n=e.event;return(!t._interacting||t.simulation||!t.inertia.start(n))&&null},"interactions:down":function(e){var t=e.interaction,n=e.eventTarget,i=t.inertia;if(i.active)for(var s=n;v.default.element(s);){if(s===t.element){i.resume(e);break}s=R.parentNode(s)}},"interactions:stop":function(e){var t=e.interaction.inertia;t.active&&t.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":ye.addEventModifiers,"interactions:action-inertiastart":ye.addEventModifiers,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};zt.default=Ga;var on={};function $a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function an(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ji(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(e.immediatePropagationStopped)break;i(e)}}Object.defineProperty(on,"__esModule",{value:!0}),on.Eventable=void 0;var Ka=function(){function e(i){(function(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),an(this,"options",void 0),an(this,"types",{}),an(this,"propagationStopped",!1),an(this,"immediatePropagationStopped",!1),an(this,"global",void 0),this.options=(0,I.default)({},i||{})}var t,n;return t=e,(n=[{key:"fire",value:function(i){var s,l=this.global;(s=this.types[i.type])&&Ji(i,s),!i.propagationStopped&&l&&(s=l[i.type])&&Ji(i,s)}},{key:"on",value:function(i,s){var l=(0,yt.default)(i,s);for(i in l)this.types[i]=re.merge(this.types[i]||[],l[i])}},{key:"off",value:function(i,s){var l=(0,yt.default)(i,s);for(i in l){var f=this.types[i];if(f&&f.length)for(var u=0;u<l[i].length;u++){var h=l[i][u],g=f.indexOf(h);g!==-1&&f.splice(g,1)}}}},{key:"getRect",value:function(i){return null}}])&&$a(t.prototype,n),e}();on.Eventable=Ka;var sn={};Object.defineProperty(sn,"__esModule",{value:!0}),sn.default=function(e,t){if(t.phaselessTypes[e])return!0;for(var n in t.map)if(e.indexOf(n)===0&&e.substr(n.length)in t.phases)return!0;return!1};var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.createInteractStatic=function(e){var t=function n(i,s){var l=e.interactables.get(i,s);return l||((l=e.interactables.new(i,s)).events.global=n.globalEvents),l};return t.getPointerAverage=j.pointerAverage,t.getTouchBBox=j.touchBBox,t.getTouchDistance=j.touchDistance,t.getTouchAngle=j.touchAngle,t.getElementRect=R.getElementRect,t.getElementClientRect=R.getElementClientRect,t.matchesSelector=R.matchesSelector,t.closest=R.closest,t.globalEvents={},t.version="1.10.11",t.scope=e,t.use=function(n,i){return this.scope.usePlugin(n,i),this},t.isSet=function(n,i){return!!this.scope.interactables.get(n,i&&i.context)},t.on=(0,Te.warnOnce)(function(n,i,s){if(v.default.string(n)&&n.search(" ")!==-1&&(n=n.trim().split(/ +/)),v.default.array(n)){for(var l=0;l<n.length;l++){var f=n[l];this.on(f,i,s)}return this}if(v.default.object(n)){for(var u in n)this.on(u,n[u],i);return this}return(0,sn.default)(n,this.scope.actions)?this.globalEvents[n]?this.globalEvents[n].push(i):this.globalEvents[n]=[i]:this.scope.events.add(this.scope.document,n,i,{options:s}),this},"The interact.on() method is being deprecated"),t.off=(0,Te.warnOnce)(function(n,i,s){if(v.default.string(n)&&n.search(" ")!==-1&&(n=n.trim().split(/ +/)),v.default.array(n)){for(var l=0;l<n.length;l++){var f=n[l];this.off(f,i,s)}return this}if(v.default.object(n)){for(var u in n)this.off(u,n[u],i);return this}var h;return(0,sn.default)(n,this.scope.actions)?n in this.globalEvents&&(h=this.globalEvents[n].indexOf(i))!==-1&&this.globalEvents[n].splice(h,1):this.scope.events.remove(this.scope.document,n,i,s),this},"The interact.off() method is being deprecated"),t.debug=function(){return this.scope},t.supportsTouch=function(){return ie.default.supportsTouch},t.supportsPointerEvent=function(){return ie.default.supportsPointerEvent},t.stop=function(){for(var n=0;n<this.scope.interactions.list.length;n++)this.scope.interactions.list[n].stop();return this},t.pointerMoveTolerance=function(n){return v.default.number(n)?(this.scope.interactions.pointerMoveTolerance=n,this):this.scope.interactions.pointerMoveTolerance},t.addDocument=function(n,i){this.scope.addDocument(n,i)},t.removeDocument=function(n){this.scope.removeDocument(n)},t};var Nn={};function Za(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.Interactable=void 0;var Ja=function(){function e(i,s,l,f){(function(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")})(this,e),tt(this,"options",void 0),tt(this,"_actions",void 0),tt(this,"target",void 0),tt(this,"events",new on.Eventable),tt(this,"_context",void 0),tt(this,"_win",void 0),tt(this,"_doc",void 0),tt(this,"_scopeEvents",void 0),tt(this,"_rectChecker",void 0),this._actions=s.actions,this.target=i,this._context=s.context||l,this._win=(0,a.getWindow)((0,R.trySelector)(i)?this._context:i),this._doc=this._win.document,this._scopeEvents=f,this.set(s)}var t,n;return t=e,(n=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(i,s){return v.default.func(s.onstart)&&this.on("".concat(i,"start"),s.onstart),v.default.func(s.onmove)&&this.on("".concat(i,"move"),s.onmove),v.default.func(s.onend)&&this.on("".concat(i,"end"),s.onend),v.default.func(s.oninertiastart)&&this.on("".concat(i,"inertiastart"),s.oninertiastart),this}},{key:"updatePerActionListeners",value:function(i,s,l){(v.default.array(s)||v.default.object(s))&&this.off(i,s),(v.default.array(l)||v.default.object(l))&&this.on(i,l)}},{key:"setPerAction",value:function(i,s){var l=this._defaults;for(var f in s){var u=f,h=this.options[i],g=s[u];u==="listeners"&&this.updatePerActionListeners(i,h.listeners,g),v.default.array(g)?h[u]=re.from(g):v.default.plainObject(g)?(h[u]=(0,I.default)(h[u]||{},(0,_t.default)(g)),v.default.object(l.perAction[u])&&"enabled"in l.perAction[u]&&(h[u].enabled=g.enabled!==!1)):v.default.bool(g)&&v.default.object(l.perAction[u])?h[u].enabled=g:h[u]=g}}},{key:"getRect",value:function(i){return i=i||(v.default.element(this.target)?this.target:null),v.default.string(this.target)&&(i=i||this._context.querySelector(this.target)),(0,R.getElementRect)(i)}},{key:"rectChecker",value:function(i){var s=this;return v.default.func(i)?(this._rectChecker=i,this.getRect=function(l){var f=(0,I.default)({},s._rectChecker(l));return"width"in f||(f.width=f.right-f.left,f.height=f.bottom-f.top),f},this):i===null?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(i,s){if((0,R.trySelector)(s)||v.default.object(s)){for(var l in this.options[i]=s,this._actions.map)this.options[l][i]=s;return this}return this.options[i]}},{key:"origin",value:function(i){return this._backCompatOption("origin",i)}},{key:"deltaSource",value:function(i){return i==="page"||i==="client"?(this.options.deltaSource=i,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(i){return this._context===i.ownerDocument||(0,R.nodeContains)(this._context,i)}},{key:"testIgnoreAllow",value:function(i,s,l){return!this.testIgnore(i.ignoreFrom,s,l)&&this.testAllow(i.allowFrom,s,l)}},{key:"testAllow",value:function(i,s,l){return!i||!!v.default.element(l)&&(v.default.string(i)?(0,R.matchesUpTo)(l,i,s):!!v.default.element(i)&&(0,R.nodeContains)(i,l))}},{key:"testIgnore",value:function(i,s,l){return!(!i||!v.default.element(l))&&(v.default.string(i)?(0,R.matchesUpTo)(l,i,s):!!v.default.element(i)&&(0,R.nodeContains)(i,l))}},{key:"fire",value:function(i){return this.events.fire(i),this}},{key:"_onOff",value:function(i,s,l,f){v.default.object(s)&&!v.default.array(s)&&(f=l,l=null);var u=i==="on"?"add":"remove",h=(0,yt.default)(s,l);for(var g in h){g==="wheel"&&(g=ie.default.wheelEvent);for(var m=0;m<h[g].length;m++){var b=h[g][m];(0,sn.default)(g,this._actions)?this.events[i](g,b):v.default.string(this.target)?this._scopeEvents["".concat(u,"Delegate")](this.target,this._context,g,b,f):this._scopeEvents[u](this.target,g,b,f)}}return this}},{key:"on",value:function(i,s,l){return this._onOff("on",i,s,l)}},{key:"off",value:function(i,s,l){return this._onOff("off",i,s,l)}},{key:"set",value:function(i){var s=this._defaults;for(var l in v.default.object(i)||(i={}),this.options=(0,_t.default)(s.base),this._actions.methodDict){var f=l,u=this._actions.methodDict[f];this.options[f]={},this.setPerAction(f,(0,I.default)((0,I.default)({},s.perAction),s.actions[f])),this[u](i[f])}for(var h in i)v.default.func(this[h])&&this[h](i[h]);return this}},{key:"unset",value:function(){if(v.default.string(this.target))for(var i in this._scopeEvents.delegatedEvents)for(var s=this._scopeEvents.delegatedEvents[i],l=s.length-1;l>=0;l--){var f=s[l],u=f.selector,h=f.context,g=f.listeners;u===this.target&&h===this._context&&s.splice(l,1);for(var m=g.length-1;m>=0;m--)this._scopeEvents.removeDelegate(this.target,this._context,i,g[m][0],g[m][1])}else this._scopeEvents.remove(this.target,"all")}}])&&Za(t.prototype,n),e}();Nn.Interactable=Ja;var Xn={};function Qa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.InteractableSet=void 0;var es=function(){function e(i){var s=this;(function(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")})(this,e),jr(this,"list",[]),jr(this,"selectorMap",{}),jr(this,"scope",void 0),this.scope=i,i.addListeners({"interactable:unset":function(l){var f=l.interactable,u=f.target,h=f._context,g=v.default.string(u)?s.selectorMap[u]:u[s.scope.id],m=re.findIndex(g,function(b){return b.context===h});g[m]&&(g[m].context=null,g[m].interactable=null),g.splice(m,1)}})}var t,n;return t=e,(n=[{key:"new",value:function(i,s){s=(0,I.default)(s||{},{actions:this.scope.actions});var l=new this.scope.Interactable(i,s,this.scope.document,this.scope.events),f={context:l._context,interactable:l};return this.scope.addDocument(l._doc),this.list.push(l),v.default.string(i)?(this.selectorMap[i]||(this.selectorMap[i]=[]),this.selectorMap[i].push(f)):(l.target[this.scope.id]||Object.defineProperty(i,this.scope.id,{value:[],configurable:!0}),i[this.scope.id].push(f)),this.scope.fire("interactable:new",{target:i,options:s,interactable:l,win:this.scope._win}),l}},{key:"get",value:function(i,s){var l=s&&s.context||this.scope.document,f=v.default.string(i),u=f?this.selectorMap[i]:i[this.scope.id];if(!u)return null;var h=re.find(u,function(g){return g.context===l&&(f||g.interactable.inContext(i))});return h&&h.interactable}},{key:"forEachMatch",value:function(i,s){for(var l=0;l<this.list.length;l++){var f=this.list[l],u=void 0;if((v.default.string(f.target)?v.default.element(i)&&R.matchesSelector(i,f.target):i===f.target)&&f.inContext(i)&&(u=s(f)),u!==void 0)return u}}}])&&Qa(t.prototype,n),e}();Xn.InteractableSet=es;var Yn={};function ts(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zr(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(n)){var s=[],l=!0,f=!1,u=void 0;try{for(var h,g=n[Symbol.iterator]();!(l=(h=g.next()).done)&&(s.push(h.value),!i||s.length!==i);l=!0);}catch(m){f=!0,u=m}finally{try{l||g.return==null||g.return()}finally{if(f)throw u}}return s}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Qi(n,i);var s=Object.prototype.toString.call(n).slice(8,-1);return s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set"?Array.from(n):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Qi(n,i):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qi(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.default=void 0;var ns=function(){function e(i){(function(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),Rr(this,"currentTarget",void 0),Rr(this,"originalEvent",void 0),Rr(this,"type",void 0),this.originalEvent=i,(0,Kt.default)(this,i)}var t,n;return t=e,(n=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&ts(t.prototype,n),e}();function ln(e){if(!v.default.object(e))return{capture:!!e,passive:!1};var t=(0,I.default)({},e);return t.capture=!!e.capture,t.passive=!!e.passive,t}var rs={id:"events",install:function(e){var t,n=[],i={},s=[],l={add:f,remove:u,addDelegate:function(m,b,x,k,_){var S=ln(_);if(!i[x]){i[x]=[];for(var M=0;M<s.length;M++){var O=s[M];f(O,x,h),f(O,x,g,!0)}}var A=i[x],B=re.find(A,function(H){return H.selector===m&&H.context===b});B||(B={selector:m,context:b,listeners:[]},A.push(B)),B.listeners.push([k,S])},removeDelegate:function(m,b,x,k,_){var S,M=ln(_),O=i[x],A=!1;if(O)for(S=O.length-1;S>=0;S--){var B=O[S];if(B.selector===m&&B.context===b){for(var H=B.listeners,K=H.length-1;K>=0;K--){var ae=zr(H[K],2),U=ae[0],te=ae[1],Le=te.capture,rt=te.passive;if(U===k&&Le===M.capture&&rt===M.passive){H.splice(K,1),H.length||(O.splice(S,1),u(b,x,h),u(b,x,g,!0)),A=!0;break}}if(A)break}}},delegateListener:h,delegateUseCapture:g,delegatedEvents:i,documents:s,targets:n,supportsOptions:!1,supportsPassive:!1};function f(m,b,x,k){var _=ln(k),S=re.find(n,function(M){return M.eventTarget===m});S||(S={eventTarget:m,events:{}},n.push(S)),S.events[b]||(S.events[b]=[]),m.addEventListener&&!re.contains(S.events[b],x)&&(m.addEventListener(b,x,l.supportsOptions?_:_.capture),S.events[b].push(x))}function u(m,b,x,k){var _=ln(k),S=re.findIndex(n,function(K){return K.eventTarget===m}),M=n[S];if(M&&M.events)if(b!=="all"){var O=!1,A=M.events[b];if(A){if(x==="all"){for(var B=A.length-1;B>=0;B--)u(m,b,A[B],_);return}for(var H=0;H<A.length;H++)if(A[H]===x){m.removeEventListener(b,x,l.supportsOptions?_:_.capture),A.splice(H,1),A.length===0&&(delete M.events[b],O=!0);break}}O&&!Object.keys(M.events).length&&n.splice(S,1)}else for(b in M.events)M.events.hasOwnProperty(b)&&u(m,b,"all")}function h(m,b){for(var x=ln(b),k=new ns(m),_=i[m.type],S=zr(j.getEventTargets(m),1)[0],M=S;v.default.element(M);){for(var O=0;O<_.length;O++){var A=_[O],B=A.selector,H=A.context;if(R.matchesSelector(M,B)&&R.nodeContains(H,S)&&R.nodeContains(H,M)){var K=A.listeners;k.currentTarget=M;for(var ae=0;ae<K.length;ae++){var U=zr(K[ae],2),te=U[0],Le=U[1],rt=Le.capture,$r=Le.passive;rt===x.capture&&$r===x.passive&&te(k)}}}M=R.parentNode(M)}}function g(m){return h(m,!0)}return(t=e.document)==null||t.createElement("div").addEventListener("test",null,{get capture(){return l.supportsOptions=!0},get passive(){return l.supportsPassive=!0}}),e.events=l,l}};Yn.default=rs;var qn={};Object.defineProperty(qn,"__esModule",{value:!0}),qn.default=void 0;var Hn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0;t<Hn.methodOrder.length;t++){var n;n=Hn.methodOrder[t];var i=Hn[n](e);if(i)return i}return null},simulationResume:function(e){var t=e.pointerType,n=e.eventType,i=e.eventTarget,s=e.scope;if(!/down|start/i.test(n))return null;for(var l=0;l<s.interactions.list.length;l++){var f=s.interactions.list[l],u=i;if(f.simulation&&f.simulation.allowResume&&f.pointerType===t)for(;u;){if(u===f.element)return f;u=R.parentNode(u)}}return null},mouseOrPen:function(e){var t,n=e.pointerId,i=e.pointerType,s=e.eventType,l=e.scope;if(i!=="mouse"&&i!=="pen")return null;for(var f=0;f<l.interactions.list.length;f++){var u=l.interactions.list[f];if(u.pointerType===i){if(u.simulation&&!eo(u,n))continue;if(u.interacting())return u;t||(t=u)}}if(t)return t;for(var h=0;h<l.interactions.list.length;h++){var g=l.interactions.list[h];if(!(g.pointerType!==i||/down/i.test(s)&&g.simulation))return g}return null},hasPointer:function(e){for(var t=e.pointerId,n=e.scope,i=0;i<n.interactions.list.length;i++){var s=n.interactions.list[i];if(eo(s,t))return s}return null},idle:function(e){for(var t=e.pointerType,n=e.scope,i=0;i<n.interactions.list.length;i++){var s=n.interactions.list[i];if(s.pointers.length===1){var l=s.interactable;if(l&&(!l.options.gesture||!l.options.gesture.enabled))continue}else if(s.pointers.length>=2)continue;if(!s.interacting()&&t===s.pointerType)return s}return null}};function eo(e,t){return e.pointers.some(function(n){return n.id===t})}var is=Hn;qn.default=is;var Wn={};function to(e){return(to=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function no(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(n)){var s=[],l=!0,f=!1,u=void 0;try{for(var h,g=n[Symbol.iterator]();!(l=(h=g.next()).done)&&(s.push(h.value),!i||s.length!==i);l=!0);}catch(m){f=!0,u=m}finally{try{l||g.return==null||g.return()}finally{if(f)throw u}}return s}}(e,t)||function(n,i){if(n){if(typeof n=="string")return ro(n,i);var s=Object.prototype.toString.call(n).slice(8,-1);return s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set"?Array.from(n):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?ro(n,i):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ro(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function os(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function as(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function io(e,t){return(io=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(e,t)}function ss(e,t){return!t||to(t)!=="object"&&typeof t!="function"?function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e):t}function Lr(e){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.default=void 0;var Br=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function oo(e,t){return function(n){var i=t.interactions.list,s=j.getPointerType(n),l=no(j.getEventTargets(n),2),f=l[0],u=l[1],h=[];if(/^touch/.test(n.type)){t.prevTouchTime=t.now();for(var g=0;g<n.changedTouches.length;g++){var m=n.changedTouches[g],b={pointer:m,pointerId:j.getPointerId(m),pointerType:s,eventType:n.type,eventTarget:f,curEventTarget:u,scope:t},x=ao(b);h.push([b.pointer,b.eventTarget,b.curEventTarget,x])}}else{var k=!1;if(!ie.default.supportsPointerEvent&&/mouse/.test(n.type)){for(var _=0;_<i.length&&!k;_++)k=i[_].pointerType!=="mouse"&&i[_].pointerIsDown;k=k||t.now()-t.prevTouchTime<500||n.timeStamp===0}if(!k){var S={pointer:n,pointerId:j.getPointerId(n),pointerType:s,eventType:n.type,curEventTarget:u,eventTarget:f,scope:t},M=ao(S);h.push([S.pointer,S.eventTarget,S.curEventTarget,M])}}for(var O=0;O<h.length;O++){var A=no(h[O],4),B=A[0],H=A[1],K=A[2];A[3][e](B,n,H,K)}}}function ao(e){var t=e.pointerType,n=e.scope,i={interaction:qn.default.search(e),searchDetails:e};return n.fire("interactions:find",i),i.interaction||n.interactions.new({pointerType:t})}function Fr(e,t){var n=e.doc,i=e.scope,s=e.options,l=i.interactions.docEvents,f=i.events,u=f[t];for(var h in i.browser.isIOS&&!s.events&&(s.events={passive:!1}),f.delegatedEvents)u(n,h,f.delegateListener),u(n,h,f.delegateUseCapture,!0);for(var g=s&&s.events,m=0;m<l.length;m++){var b=l[m];u(n,b.type,b.listener,g)}}var ls={id:"core/interactions",install:function(e){for(var t={},n=0;n<Br.length;n++){var i=Br[n];t[i]=oo(i,e)}var s,l=ie.default.pEventTypes;function f(){for(var u=0;u<e.interactions.list.length;u++){var h=e.interactions.list[u];if(h.pointerIsDown&&h.pointerType==="touch"&&!h._interacting)for(var g=function(){var b=h.pointers[m];e.documents.some(function(x){var k=x.doc;return(0,R.nodeContains)(k,b.downTarget)})||h.removePointer(b.pointer,b.event)},m=0;m<h.pointers.length;m++)g()}}(s=V.default.PointerEvent?[{type:l.down,listener:f},{type:l.down,listener:t.pointerDown},{type:l.move,listener:t.pointerMove},{type:l.up,listener:t.pointerUp},{type:l.cancel,listener:t.pointerUp}]:[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:f},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}]).push({type:"blur",listener:function(u){for(var h=0;h<e.interactions.list.length;h++)e.interactions.list[h].documentBlur(u)}}),e.prevTouchTime=0,e.Interaction=function(u){(function(_,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(S&&S.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),S&&io(_,S)})(k,u);var h,g,m,b,x=(m=k,b=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _,S=Lr(m);if(b){var M=Lr(this).constructor;_=Reflect.construct(S,arguments,M)}else _=S.apply(this,arguments);return ss(this,_)});function k(){return os(this,k),x.apply(this,arguments)}return h=k,(g=[{key:"pointerMoveTolerance",get:function(){return e.interactions.pointerMoveTolerance},set:function(_){e.interactions.pointerMoveTolerance=_}},{key:"_now",value:function(){return e.now()}}])&&as(h.prototype,g),k}(Pe.default),e.interactions={list:[],new:function(u){u.scopeFire=function(g,m){return e.fire(g,m)};var h=new e.Interaction(u);return e.interactions.list.push(h),h},listeners:t,docEvents:s,pointerMoveTolerance:1},e.usePlugin(Rt.default)},listeners:{"scope:add-document":function(e){return Fr(e,"add")},"scope:remove-document":function(e){return Fr(e,"remove")},"interactable:unset":function(e,t){for(var n=e.interactable,i=t.interactions.list.length-1;i>=0;i--){var s=t.interactions.list[i];s.interactable===n&&(s.stop(),t.fire("interactions:destroy",{interaction:s}),s.destroy(),t.interactions.list.length>2&&t.interactions.list.splice(i,1))}}},onDocSignal:Fr,doOnInteractions:oo,methodNames:Br};Wn.default=ls;var cn={};function so(e){return(so=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Nr(e,t,n){return(Nr=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(i,s,l){var f=function(h,g){for(;!Object.prototype.hasOwnProperty.call(h,g)&&(h=Lt(h))!==null;);return h}(i,s);if(f){var u=Object.getOwnPropertyDescriptor(f,s);return u.get?u.get.call(l):u.value}})(e,t,n||e)}function lo(e,t){return(lo=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(e,t)}function cs(e,t){return!t||so(t)!=="object"&&typeof t!="function"?function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e):t}function Lt(e){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fo(e,t,n){return t&&uo(e.prototype,t),n&&uo(e,n),e}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(cn,"__esModule",{value:!0}),cn.initScope=ho,cn.Scope=void 0;var us=function(){function e(){var t=this;co(this,e),be(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),be(this,"isInitialized",!1),be(this,"listenerMaps",[]),be(this,"browser",ie.default),be(this,"defaults",(0,_t.default)(en.defaults)),be(this,"Eventable",on.Eventable),be(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),be(this,"interactStatic",(0,Ar.createInteractStatic)(this)),be(this,"InteractEvent",tn.InteractEvent),be(this,"Interactable",void 0),be(this,"interactables",new Xn.InteractableSet(this)),be(this,"_win",void 0),be(this,"document",void 0),be(this,"window",void 0),be(this,"documents",[]),be(this,"_plugins",{list:[],map:{}}),be(this,"onWindowUnload",function(i){return t.removeDocument(i.target)});var n=this;this.Interactable=function(i){(function(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&lo(h,g)})(u,i);var s,l,f=(s=u,l=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var h,g=Lt(s);if(l){var m=Lt(this).constructor;h=Reflect.construct(g,arguments,m)}else h=g.apply(this,arguments);return cs(this,h)});function u(){return co(this,u),f.apply(this,arguments)}return fo(u,[{key:"_defaults",get:function(){return n.defaults}},{key:"set",value:function(h){return Nr(Lt(u.prototype),"set",this).call(this,h),n.fire("interactable:set",{options:h,interactable:this}),this}},{key:"unset",value:function(){Nr(Lt(u.prototype),"unset",this).call(this),n.interactables.list.splice(n.interactables.list.indexOf(this),1),n.fire("interactable:unset",{interactable:this})}}]),u}(Nn.Interactable)}return fo(e,[{key:"addListeners",value:function(t,n){this.listenerMaps.push({id:n,map:t})}},{key:"fire",value:function(t,n){for(var i=0;i<this.listenerMaps.length;i++){var s=this.listenerMaps[i].map[t];if(s&&s(n,this,t)===!1)return!1}}},{key:"init",value:function(t){return this.isInitialized?this:ho(this,t)}},{key:"pluginIsInstalled",value:function(t){return this._plugins.map[t.id]||this._plugins.list.indexOf(t)!==-1}},{key:"usePlugin",value:function(t,n){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,n),t.listeners&&t.before){for(var i=0,s=this.listenerMaps.length,l=t.before.reduce(function(u,h){return u[h]=!0,u[po(h)]=!0,u},{});i<s;i++){var f=this.listenerMaps[i].id;if(l[f]||l[po(f)])break}this.listenerMaps.splice(i,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}},{key:"addDocument",value:function(t,n){if(this.getDocIndex(t)!==-1)return!1;var i=a.getWindow(t);n=n?(0,I.default)({},n):{},this.documents.push({doc:t,options:n}),this.events.documents.push(t),t!==this.document&&this.events.add(i,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:i,scope:this,options:n})}},{key:"removeDocument",value:function(t){var n=this.getDocIndex(t),i=a.getWindow(t),s=this.documents[n].options;this.events.remove(i,"unload",this.onWindowUnload),this.documents.splice(n,1),this.events.documents.splice(n,1),this.fire("scope:remove-document",{doc:t,window:i,scope:this,options:s})}},{key:"getDocIndex",value:function(t){for(var n=0;n<this.documents.length;n++)if(this.documents[n].doc===t)return n;return-1}},{key:"getDocOptions",value:function(t){var n=this.getDocIndex(t);return n===-1?null:this.documents[n].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),e}();function ho(e,t){return e.isInitialized=!0,v.default.window(t)&&a.init(t),V.default.init(t),ie.default.init(t),Ne.default.init(t),e.window=t,e.document=t.document,e.usePlugin(Wn.default),e.usePlugin(Yn.default),e}function po(e){return e&&e.replace(/\/.*$/,"")}cn.Scope=us;var we={};Object.defineProperty(we,"__esModule",{value:!0}),we.default=void 0;var vo=new cn.Scope,ds=vo.interactStatic;we.default=ds;var fs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:void 0;vo.init(fs);var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.default=void 0,Vn.default=function(){};var Un={};Object.defineProperty(Un,"__esModule",{value:!0}),Un.default=void 0,Un.default=function(){};var Gn={};function go(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(n)){var s=[],l=!0,f=!1,u=void 0;try{for(var h,g=n[Symbol.iterator]();!(l=(h=g.next()).done)&&(s.push(h.value),!i||s.length!==i);l=!0);}catch(m){f=!0,u=m}finally{try{l||g.return==null||g.return()}finally{if(f)throw u}}return s}}(e,t)||function(n,i){if(n){if(typeof n=="string")return mo(n,i);var s=Object.prototype.toString.call(n).slice(8,-1);return s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set"?Array.from(n):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?mo(n,i):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mo(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.default=void 0,Gn.default=function(e){var t=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(i){var s=go(i,2),l=s[0],f=s[1];return l in e||f in e}),n=function(i,s){for(var l=e.range,f=e.limits,u=f===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:f,h=e.offset,g=h===void 0?{x:0,y:0}:h,m={range:l,grid:e,x:null,y:null},b=0;b<t.length;b++){var x=go(t[b],2),k=x[0],_=x[1],S=Math.round((i-g.x)/e[k]),M=Math.round((s-g.y)/e[_]);m[k]=Math.max(u.left,Math.min(u.right,S*e[k]+g.x)),m[_]=Math.max(u.top,Math.min(u.bottom,M*e[_]+g.y))}return m};return n.grid=e,n.coordFields=t,n};var un={};Object.defineProperty(un,"__esModule",{value:!0}),Object.defineProperty(un,"edgeTarget",{enumerable:!0,get:function(){return Vn.default}}),Object.defineProperty(un,"elements",{enumerable:!0,get:function(){return Un.default}}),Object.defineProperty(un,"grid",{enumerable:!0,get:function(){return Gn.default}});var $n={};Object.defineProperty($n,"__esModule",{value:!0}),$n.default=void 0;var hs={id:"snappers",install:function(e){var t=e.interactStatic;t.snappers=(0,I.default)(t.snappers||{},un),t.createSnapGrid=t.snappers.grid}};$n.default=hs;var Bt={};function yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yo(Object(n),!0).forEach(function(i){ps(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yo(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function ps(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.aspectRatio=Bt.default=void 0;var bo={start:function(e){var t=e.state,n=e.rect,i=e.edges,s=e.pageCoords,l=t.options.ratio,f=t.options,u=f.equalDelta,h=f.modifiers;l==="preserve"&&(l=n.width/n.height),t.startCoords=(0,I.default)({},s),t.startRect=(0,I.default)({},n),t.ratio=l,t.equalDelta=u;var g=t.linkedEdges={top:i.top||i.left&&!i.bottom,left:i.left||i.top&&!i.right,bottom:i.bottom||i.right&&!i.top,right:i.right||i.bottom&&!i.left};if(t.xIsPrimaryAxis=!(!i.left&&!i.right),t.equalDelta)t.edgeSign=(g.left?1:-1)*(g.top?1:-1);else{var m=t.xIsPrimaryAxis?g.top:g.left;t.edgeSign=m?-1:1}if((0,I.default)(e.edges,g),h&&h.length){var b=new wt.default(e.interaction);b.copyFrom(e.interaction.modification),b.prepareStates(h),t.subModification=b,b.startAll(Xr({},e))}},set:function(e){var t=e.state,n=e.rect,i=e.coords,s=(0,I.default)({},i),l=t.equalDelta?vs:gs;if(l(t,t.xIsPrimaryAxis,i,n),!t.subModification)return null;var f=(0,I.default)({},n);(0,G.addEdges)(t.linkedEdges,f,{x:i.x-s.x,y:i.y-s.y});var u=t.subModification.setAll(Xr(Xr({},e),{},{rect:f,edges:t.linkedEdges,pageCoords:i,prevCoords:i,prevRect:f})),h=u.delta;return u.changed&&(l(t,Math.abs(h.x)>Math.abs(h.y),u.coords,u.rect),(0,I.default)(i,u.coords)),u.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function vs(e,t,n){var i=e.startCoords,s=e.edgeSign;t?n.y=i.y+(n.x-i.x)*s:n.x=i.x+(n.y-i.y)*s}function gs(e,t,n,i){var s=e.startRect,l=e.startCoords,f=e.ratio,u=e.edgeSign;if(t){var h=i.width/f;n.y=l.y+(h-s.height)*u}else{var g=i.height*f;n.x=l.x+(g-s.width)*u}}Bt.aspectRatio=bo;var ms=(0,ye.makeModifier)(bo,"aspectRatio");Bt.default=ms;var kt={};Object.defineProperty(kt,"__esModule",{value:!0}),kt.default=void 0;var _o=function(){};_o._defaults={};var ys=_o;kt.default=ys;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0}),Object.defineProperty(Yr,"default",{enumerable:!0,get:function(){return kt.default}});var Ee={};function qr(e,t,n){return v.default.func(e)?G.resolveRectLike(e,t.interactable,t.element,[n.x,n.y,t]):G.resolveRectLike(e,t.interactable,t.element)}Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.getRestrictionRect=qr,Ee.restrict=Ee.default=void 0;var wo={start:function(e){var t=e.rect,n=e.startOffset,i=e.state,s=e.interaction,l=e.pageCoords,f=i.options,u=f.elementRect,h=(0,I.default)({left:0,top:0,right:0,bottom:0},f.offset||{});if(t&&u){var g=qr(f.restriction,s,l);if(g){var m=g.right-g.left-t.width,b=g.bottom-g.top-t.height;m<0&&(h.left+=m,h.right+=m),b<0&&(h.top+=b,h.bottom+=b)}h.left+=n.left-t.width*u.left,h.top+=n.top-t.height*u.top,h.right+=n.right-t.width*(1-u.right),h.bottom+=n.bottom-t.height*(1-u.bottom)}i.offset=h},set:function(e){var t=e.coords,n=e.interaction,i=e.state,s=i.options,l=i.offset,f=qr(s.restriction,n,t);if(f){var u=G.xywhToTlbr(f);t.x=Math.max(Math.min(u.right-l.right,t.x),u.left+l.left),t.y=Math.max(Math.min(u.bottom-l.bottom,t.y),u.top+l.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};Ee.restrict=wo;var bs=(0,ye.makeModifier)(wo,"restrict");Ee.default=bs;var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.restrictEdges=Ve.default=void 0;var xo={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Eo={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function ko(e,t){for(var n=["top","left","bottom","right"],i=0;i<n.length;i++){var s=n[i];s in e||(e[s]=t[s])}return e}var So={noInner:xo,noOuter:Eo,start:function(e){var t,n=e.interaction,i=e.startOffset,s=e.state,l=s.options;if(l){var f=(0,Ee.getRestrictionRect)(l.offset,n,n.coords.start.page);t=G.rectToXY(f)}t=t||{x:0,y:0},s.offset={top:t.y+i.top,left:t.x+i.left,bottom:t.y-i.bottom,right:t.x-i.right}},set:function(e){var t=e.coords,n=e.edges,i=e.interaction,s=e.state,l=s.offset,f=s.options;if(n){var u=(0,I.default)({},t),h=(0,Ee.getRestrictionRect)(f.inner,i,u)||{},g=(0,Ee.getRestrictionRect)(f.outer,i,u)||{};ko(h,xo),ko(g,Eo),n.top?t.y=Math.min(Math.max(g.top+l.top,u.y),h.top+l.top):n.bottom&&(t.y=Math.max(Math.min(g.bottom+l.bottom,u.y),h.bottom+l.bottom)),n.left?t.x=Math.min(Math.max(g.left+l.left,u.x),h.left+l.left):n.right&&(t.x=Math.max(Math.min(g.right+l.right,u.x),h.right+l.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};Ve.restrictEdges=So;var _s=(0,ye.makeModifier)(So,"restrictEdges");Ve.default=_s;var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.restrictRect=Ft.default=void 0;var ws=(0,I.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},Ee.restrict.defaults),Po={start:Ee.restrict.start,set:Ee.restrict.set,defaults:ws};Ft.restrictRect=Po;var xs=(0,ye.makeModifier)(Po,"restrictRect");Ft.default=xs;var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.restrictSize=Nt.default=void 0;var Es={width:-1/0,height:-1/0},ks={width:1/0,height:1/0},Oo={start:function(e){return Ve.restrictEdges.start(e)},set:function(e){var t=e.interaction,n=e.state,i=e.rect,s=e.edges,l=n.options;if(s){var f=G.tlbrToXywh((0,Ee.getRestrictionRect)(l.min,t,e.coords))||Es,u=G.tlbrToXywh((0,Ee.getRestrictionRect)(l.max,t,e.coords))||ks;n.options={endOnly:l.endOnly,inner:(0,I.default)({},Ve.restrictEdges.noInner),outer:(0,I.default)({},Ve.restrictEdges.noOuter)},s.top?(n.options.inner.top=i.bottom-f.height,n.options.outer.top=i.bottom-u.height):s.bottom&&(n.options.inner.bottom=i.top+f.height,n.options.outer.bottom=i.top+u.height),s.left?(n.options.inner.left=i.right-f.width,n.options.outer.left=i.right-u.width):s.right&&(n.options.inner.right=i.left+f.width,n.options.outer.right=i.left+u.width),Ve.restrictEdges.set(e),n.options=l}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Nt.restrictSize=Oo;var Ss=(0,ye.makeModifier)(Oo,"restrictSize");Nt.default=Ss;var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0}),Object.defineProperty(Hr,"default",{enumerable:!0,get:function(){return kt.default}});var ft={};Object.defineProperty(ft,"__esModule",{value:!0}),ft.snap=ft.default=void 0;var Co={start:function(e){var t,n=e.interaction,i=e.interactable,s=e.element,l=e.rect,f=e.state,u=e.startOffset,h=f.options,g=h.offsetWithOrigin?function(x){var k=x.interaction.element;return(0,G.rectToXY)((0,G.resolveRectLike)(x.state.options.origin,null,null,[k]))||(0,Ke.default)(x.interactable,k,x.interaction.prepared.name)}(e):{x:0,y:0};if(h.offset==="startCoords")t={x:n.coords.start.page.x,y:n.coords.start.page.y};else{var m=(0,G.resolveRectLike)(h.offset,i,s,[n]);(t=(0,G.rectToXY)(m)||{x:0,y:0}).x+=g.x,t.y+=g.y}var b=h.relativePoints;f.offsets=l&&b&&b.length?b.map(function(x,k){return{index:k,relativePoint:x,x:u.left-l.width*x.x+t.x,y:u.top-l.height*x.y+t.y}}):[{index:0,relativePoint:null,x:t.x,y:t.y}]},set:function(e){var t=e.interaction,n=e.coords,i=e.state,s=i.options,l=i.offsets,f=(0,Ke.default)(t.interactable,t.element,t.prepared.name),u=(0,I.default)({},n),h=[];s.offsetWithOrigin||(u.x-=f.x,u.y-=f.y);for(var g=0;g<l.length;g++)for(var m=l[g],b=u.x-m.x,x=u.y-m.y,k=0,_=s.targets.length;k<_;k++){var S,M=s.targets[k];(S=v.default.func(M)?M(b,x,t._proxy,m,k):M)&&h.push({x:(v.default.number(S.x)?S.x:b)+m.x,y:(v.default.number(S.y)?S.y:x)+m.y,range:v.default.number(S.range)?S.range:s.range,source:M,index:k,offset:m})}for(var O={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},A=0;A<h.length;A++){var B=h[A],H=B.range,K=B.x-u.x,ae=B.y-u.y,U=(0,We.default)(K,ae),te=U<=H;H===1/0&&O.inRange&&O.range!==1/0&&(te=!1),O.target&&!(te?O.inRange&&H!==1/0?U/H<O.distance/O.range:H===1/0&&O.range!==1/0||U<O.distance:!O.inRange&&U<O.distance)||(O.target=B,O.distance=U,O.range=H,O.inRange=te,O.delta.x=K,O.delta.y=ae)}return O.inRange&&(n.x=O.target.x,n.y=O.target.y),i.closest=O,O},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};ft.snap=Co;var Ps=(0,ye.makeModifier)(Co,"snap");ft.default=Ps;var nt={};function To(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(nt,"__esModule",{value:!0}),nt.snapSize=nt.default=void 0;var Mo={start:function(e){var t=e.state,n=e.edges,i=t.options;if(!n)return null;e.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:i.offset||"self",origin:{x:0,y:0},range:i.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],ft.snap.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t,n,i=e.interaction,s=e.state,l=e.coords,f=s.options,u=s.offsets,h={x:l.x-u[0].x,y:l.y-u[0].y};s.options=(0,I.default)({},f),s.options.targets=[];for(var g=0;g<(f.targets||[]).length;g++){var m=(f.targets||[])[g],b=void 0;if(b=v.default.func(m)?m(h.x,h.y,i):m){for(var x=0;x<s.targetFields.length;x++){var k=(t=s.targetFields[x],n=2,function(O){if(Array.isArray(O))return O}(t)||function(O,A){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(O)){var B=[],H=!0,K=!1,ae=void 0;try{for(var U,te=O[Symbol.iterator]();!(H=(U=te.next()).done)&&(B.push(U.value),!A||B.length!==A);H=!0);}catch(Le){K=!0,ae=Le}finally{try{H||te.return==null||te.return()}finally{if(K)throw ae}}return B}}(t,n)||function(O,A){if(O){if(typeof O=="string")return To(O,A);var B=Object.prototype.toString.call(O).slice(8,-1);return B==="Object"&&O.constructor&&(B=O.constructor.name),B==="Map"||B==="Set"?Array.from(O):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?To(O,A):void 0}}(t,n)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),_=k[0],S=k[1];if(_ in b||S in b){b.x=b[_],b.y=b[S];break}}s.options.targets.push(b)}}var M=ft.snap.set(e);return s.options=f,M},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};nt.snapSize=Mo;var Os=(0,ye.makeModifier)(Mo,"snapSize");nt.default=Os;var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.snapEdges=Xt.default=void 0;var Do={start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],nt.snapSize.start(e)):null},set:nt.snapSize.set,defaults:(0,I.default)((0,_t.default)(nt.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};Xt.snapEdges=Do;var Cs=(0,ye.makeModifier)(Do,"snapEdges");Xt.default=Cs;var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0}),Object.defineProperty(Wr,"default",{enumerable:!0,get:function(){return kt.default}});var Vr={};Object.defineProperty(Vr,"__esModule",{value:!0}),Object.defineProperty(Vr,"default",{enumerable:!0,get:function(){return kt.default}});var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.default=void 0;var Ts={aspectRatio:Bt.default,restrictEdges:Ve.default,restrict:Ee.default,restrictRect:Ft.default,restrictSize:Nt.default,snapEdges:Xt.default,snap:ft.default,snapSize:nt.default,spring:Wr.default,avoid:Yr.default,transform:Vr.default,rubberband:Hr.default};Yt.default=Ts;var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.default=void 0;var Ms={id:"modifiers",install:function(e){var t=e.interactStatic;for(var n in e.usePlugin(ye.default),e.usePlugin($n.default),t.modifiers=Yt.default,Yt.default){var i=Yt.default[n],s=i._defaults,l=i._methods;s._methods=l,e.defaults.perAction[n]=s}}};Kn.default=Ms;var St={};function Io(e){return(Io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Ds(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ao(e,t){return(Ao=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(e,t)}function Is(e,t){return!t||Io(t)!=="object"&&typeof t!="function"?Oe(e):t}function Oe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ur(e){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(St,"__esModule",{value:!0}),St.PointerEvent=St.default=void 0;var As=function(e){(function(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),h&&Ao(u,h)})(f,e);var t,n,i,s,l=(i=f,s=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var u,h=Ur(i);if(s){var g=Ur(this).constructor;u=Reflect.construct(h,arguments,g)}else u=h.apply(this,arguments);return Is(this,u)});function f(u,h,g,m,b,x){var k;if(function(M,O){if(!(M instanceof O))throw new TypeError("Cannot call a class as a function")}(this,f),Xe(Oe(k=l.call(this,b)),"type",void 0),Xe(Oe(k),"originalEvent",void 0),Xe(Oe(k),"pointerId",void 0),Xe(Oe(k),"pointerType",void 0),Xe(Oe(k),"double",void 0),Xe(Oe(k),"pageX",void 0),Xe(Oe(k),"pageY",void 0),Xe(Oe(k),"clientX",void 0),Xe(Oe(k),"clientY",void 0),Xe(Oe(k),"dt",void 0),Xe(Oe(k),"eventable",void 0),j.pointerExtend(Oe(k),g),g!==h&&j.pointerExtend(Oe(k),h),k.timeStamp=x,k.originalEvent=g,k.type=u,k.pointerId=j.getPointerId(h),k.pointerType=j.getPointerType(h),k.target=m,k.currentTarget=null,u==="tap"){var _=b.getPointerIndex(h);k.dt=k.timeStamp-b.pointers[_].downTime;var S=k.timeStamp-b.tapTime;k.double=!!(b.prevTap&&b.prevTap.type!=="doubletap"&&b.prevTap.target===k.target&&S<500)}else u==="doubletap"&&(k.dt=h.timeStamp-b.tapTime);return k}return t=f,(n=[{key:"_subtractOrigin",value:function(u){var h=u.x,g=u.y;return this.pageX-=h,this.pageY-=g,this.clientX-=h,this.clientY-=g,this}},{key:"_addOrigin",value:function(u){var h=u.x,g=u.y;return this.pageX+=h,this.pageY+=g,this.clientX+=h,this.clientY+=g,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&Ds(t.prototype,n),f}(At.BaseEvent);St.PointerEvent=St.default=As;var dn={};Object.defineProperty(dn,"__esModule",{value:!0}),dn.default=void 0;var Zn={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(e){e.pointerEvents=Zn,e.defaults.actions.pointerEvents=Zn.defaults,(0,I.default)(e.actions.phaselessTypes,Zn.types)},listeners:{"interactions:new":function(e){var t=e.interaction;t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,n=e.pointerInfo;!t&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var n=e.interaction,i=e.pointer,s=e.event,l=e.eventTarget;e.duplicate||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&Gr(e),ht({interaction:n,pointer:i,event:s,eventTarget:l,type:"move"},t))},"interactions:down":function(e,t){(function(n,i){for(var s=n.interaction,l=n.pointer,f=n.event,u=n.eventTarget,h=n.pointerIndex,g=s.pointers[h].hold,m=R.getPath(u),b={interaction:s,pointer:l,event:f,eventTarget:u,type:"hold",targets:[],path:m,node:null},x=0;x<m.length;x++){var k=m[x];b.node=k,i.fire("pointerEvents:collect-targets",b)}if(b.targets.length){for(var _=1/0,S=0;S<b.targets.length;S++){var M=b.targets[S].eventable.options.holdDuration;M<_&&(_=M)}g.duration=_,g.timeout=setTimeout(function(){ht({interaction:s,eventTarget:u,pointer:l,event:f,type:"hold"},i)},_)}})(e,t),ht(e,t)},"interactions:up":function(e,t){Gr(e),ht(e,t),function(n,i){var s=n.interaction,l=n.pointer,f=n.event,u=n.eventTarget;s.pointerWasMoved||ht({interaction:s,eventTarget:u,pointer:l,event:f,type:"tap"},i)}(e,t)},"interactions:cancel":function(e,t){Gr(e),ht(e,t)}},PointerEvent:St.PointerEvent,fire:ht,collectEventTargets:jo,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function ht(e,t){var n=e.interaction,i=e.pointer,s=e.event,l=e.eventTarget,f=e.type,u=e.targets,h=u===void 0?jo(e,t):u,g=new St.PointerEvent(f,i,s,l,n,t.now());t.fire("pointerEvents:new",{pointerEvent:g});for(var m={interaction:n,pointer:i,event:s,eventTarget:l,targets:h,type:f,pointerEvent:g},b=0;b<h.length;b++){var x=h[b];for(var k in x.props||{})g[k]=x.props[k];var _=(0,Ke.default)(x.eventable,x.node);if(g._subtractOrigin(_),g.eventable=x.eventable,g.currentTarget=x.node,x.eventable.fire(g),g._addOrigin(_),g.immediatePropagationStopped||g.propagationStopped&&b+1<h.length&&h[b+1].node!==g.currentTarget)break}if(t.fire("pointerEvents:fired",m),f==="tap"){var S=g.double?ht({interaction:n,pointer:i,event:s,eventTarget:l,type:"doubletap"},t):g;n.prevTap=S,n.tapTime=S.timeStamp}return g}function jo(e,t){var n=e.interaction,i=e.pointer,s=e.event,l=e.eventTarget,f=e.type,u=n.getPointerIndex(i),h=n.pointers[u];if(f==="tap"&&(n.pointerWasMoved||!h||h.downTarget!==l))return[];for(var g=R.getPath(l),m={interaction:n,pointer:i,event:s,eventTarget:l,type:f,path:g,targets:[],node:null},b=0;b<g.length;b++){var x=g[b];m.node=x,t.fire("pointerEvents:collect-targets",m)}return f==="hold"&&(m.targets=m.targets.filter(function(k){var _;return k.eventable.options.holdDuration===((_=n.pointers[u])==null?void 0:_.hold.duration)})),m.targets}function Gr(e){var t=e.interaction,n=e.pointerIndex,i=t.pointers[n].hold;i&&i.timeout&&(clearTimeout(i.timeout),i.timeout=null)}var js=Zn;dn.default=js;var Jn={};function Rs(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.default=void 0;var zs={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(dn.default);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(e,t){return e["pointerEvents:".concat(t)]=Rs,e},{"pointerEvents:new":function(e){var t=e.pointerEvent;t.type==="hold"&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function(e,t){var n=e.interaction,i=e.pointerEvent,s=e.eventTarget,l=e.targets;if(i.type==="hold"&&l.length){var f=l[0].eventable.options.holdRepeatInterval;f<=0||(n.holdIntervalHandle=setTimeout(function(){t.pointerEvents.fire({interaction:n,eventTarget:s,type:"hold",pointer:i,event:i},t)},f))}}})};Jn.default=zs;var Qn={};function Ls(e){return(0,I.default)(this.events.options,e),this}Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.default=void 0;var Bs={id:"pointer-events/interactableTargets",install:function(e){var t=e.Interactable;t.prototype.pointerEvents=Ls;var n=t.prototype._backCompatOption;t.prototype._backCompatOption=function(i,s){var l=n.call(this,i,s);return l===this&&(this.events.options[i]=s),l}},listeners:{"pointerEvents:collect-targets":function(e,t){var n=e.targets,i=e.node,s=e.type,l=e.eventTarget;t.interactables.forEachMatch(i,function(f){var u=f.events,h=u.options;u.types[s]&&u.types[s].length&&f.testIgnoreAllow(h,i,l)&&n.push({node:i,eventable:u,props:{interactable:f}})})},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(n){return t.getRect(n)}},"interactable:set":function(e,t){var n=e.interactable,i=e.options;(0,I.default)(n.events.options,t.pointerEvents.defaults),(0,I.default)(n.events.options,i.pointerEvents||{})}}};Qn.default=Bs;var er={};Object.defineProperty(er,"__esModule",{value:!0}),er.default=void 0;var Fs={id:"pointer-events",install:function(e){e.usePlugin(dn),e.usePlugin(Jn.default),e.usePlugin(Qn.default)}};er.default=Fs;var fn={};function Ro(e){var t=e.Interactable;e.actions.phases.reflow=!0,t.prototype.reflow=function(n){return function(i,s,l){for(var f=v.default.string(i.target)?re.from(i._context.querySelectorAll(i.target)):[i.target],u=l.window.Promise,h=u?[]:null,g=function(){var b=f[m],x=i.getRect(b);if(!x)return"break";var k=re.find(l.interactions.list,function(A){return A.interacting()&&A.interactable===i&&A.element===b&&A.prepared.name===s.name}),_=void 0;if(k)k.move(),h&&(_=k._reflowPromise||new u(function(A){k._reflowResolve=A}));else{var S=(0,G.tlbrToXywh)(x),M={page:{x:S.x,y:S.y},client:{x:S.x,y:S.y},timeStamp:l.now()},O=j.coordsToEvent(M);_=function(A,B,H,K,ae){var U=A.interactions.new({pointerType:"reflow"}),te={interaction:U,event:ae,pointer:ae,eventTarget:H,phase:"reflow"};U.interactable=B,U.element=H,U.prevEvent=ae,U.updatePointer(ae,ae,H,!0),j.setZeroCoords(U.coords.delta),(0,Te.copyAction)(U.prepared,K),U._doPhase(te);var Le=A.window.Promise,rt=Le?new Le(function($r){U._reflowResolve=$r}):void 0;return U._reflowPromise=rt,U.start(K,B,H),U._interacting?(U.move(te),U.end(ae)):(U.stop(),U._reflowResolve()),U.removePointer(ae,ae),rt}(l,i,b,s,O)}h&&h.push(_)},m=0;m<f.length&&g()!=="break";m++);return h&&u.all(h).then(function(){return i})}(this,n,e)}}Object.defineProperty(fn,"__esModule",{value:!0}),fn.install=Ro,fn.default=void 0;var Ns={id:"reflow",install:Ro,listeners:{"interactions:stop":function(e,t){var n=e.interaction;n.pointerType==="reflow"&&(n._reflowResolve&&n._reflowResolve(),re.remove(t.interactions.list,n))}}};fn.default=Ns;var ze={exports:{}};function zo(e){return(zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(ze.exports,"__esModule",{value:!0}),ze.exports.default=void 0,we.default.use(Rt.default),we.default.use(Et.default),we.default.use(er.default),we.default.use(zt.default),we.default.use(Kn.default),we.default.use(jn.default),we.default.use(Cn.default),we.default.use(dt.default),we.default.use(fn.default);var Xs=we.default;if(ze.exports.default=Xs,zo(ze)==="object"&&ze)try{ze.exports=we.default}catch{}we.default.default=we.default,ze=ze.exports;var Pt={exports:{}};function Lo(e){return(Lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(Pt.exports,"__esModule",{value:!0}),Pt.exports.default=void 0;var Ys=ze.default;if(Pt.exports.default=Ys,Lo(Pt)==="object"&&Pt)try{Pt.exports=ze.default}catch{}return ze.default.default=ze.default,Pt.exports})})(Qo);var ul=cl(Qo.exports);class dl{constructor(r){L(this,"_clickObservers",new Ot);L(this,"_rightClickObservers",new Ot);L(this,"_dragObservers",new Ot);L(this,"_pointerMoveObservers",new Ot);L(this,"_pointerUpObservers",new Ot);L(this,"_pointerOutObservers",new Ot);L(this,"_zoomObservers",new Ot);L(this,"_evtCache",[]);L(this,"_oldPos",null);L(this,"_initPos",null);L(this,"_buttonDown",null);L(this,"_inGesture",!1);ul(r).gesturable({onmove:o=>{if(o.scale!==1){const a={x:o.client.x,y:o.client.y};this._zoomObservers.notify({pos:a,factor:o.scale})}o.stopPropagation()},onstart:o=>{this._inGesture=!0},onend:o=>{this._inGesture=!1}}),r.addEventListener("pointerdown",o=>{this._inGesture||this._handleTouch(o)}),document.addEventListener("pointermove",o=>{this._inGesture||this._handleDrag(o)}),document.addEventListener("pointerup",o=>{this._initPos&&this._pointerUpObservers.notify({button:o.button,initPos:this._initPos,newPos:{x:o.clientX,y:o.clientY}}),this._handleOut(o)}),document.addEventListener("pointercancel",o=>{this._handleOut(o)}),r.addEventListener("wheel",o=>{const a={x:o.clientX,y:o.clientY},c=-Math.sign(o.deltaY);this._zoomObservers.notify({pos:a,dir:c})}),r.addEventListener("contextmenu",o=>o.preventDefault())}_handleTouch(r){if(this._evtCache.push(r),this._evtCache.length===1){const o={x:r.clientX,y:r.clientY};this._buttonDown=r.button,this._oldPos=o,r.button===2&&this._rightClickObservers.notify(o),r.button===0&&(this._initPos=o,this._clickObservers.notify(o))}}_handleDrag(r){const o={x:r.clientX,y:r.clientY};this._buttonDown===null?this._pointerMoveObservers.notify({oldPos:this._oldPos||{x:-1,y:-1},newPos:o}):this._buttonDown!==null&&this._oldPos&&(this._dragObservers.notify({oldPos:this._oldPos,newPos:o,button:this._buttonDown,initPos:this._initPos||{x:0,y:0}}),this._oldPos=o)}_handleOut(r){const o={x:r.clientX,y:r.clientY};this._buttonDown=null,this._pointerOutObservers.notify(o),this._evtCache=this._evtCache.filter(a=>a.pointerId!==r.pointerId),this._initPos=null}addObserver(r,o){switch(r){case"click":return this._clickObservers.subscribe(o);case"rightClick":return this._rightClickObservers.subscribe(o);case"drag":return this._dragObservers.subscribe(o);case"pointerMove":return this._pointerMoveObservers.subscribe(o);case"pointerUp":return this._pointerUpObservers.subscribe(o);case"pointerOut":return this._pointerOutObservers.subscribe(o);case"zoom":return this._zoomObservers.subscribe(o);default:return-1}}removeObserver(r,o){switch(r){case"click":return this._clickObservers.unsubscribe(o);case"rightClick":return this._rightClickObservers.unsubscribe(o);case"drag":return this._dragObservers.unsubscribe(o);case"pointerMove":return this._pointerMoveObservers.unsubscribe(o);case"pointerUp":return this._pointerUpObservers.unsubscribe(o);case"pointerOut":return this._pointerOutObservers.unsubscribe(o);case"zoom":return this._zoomObservers.unsubscribe(o);default:return null}}}class Fe{constructor(r,o,a){L(this,"_sketch");L(this,"_layers");L(this,"_cursor");this._sketch=r,this._layers=o,this._cursor=a}get drawing(){return this._layers.currentDrawing()}init(){}click(r){}rightClick(r){var o;(o=this.drawing)==null||o.erase(this._sketch.gridCoordinate(r),this._sketch.size),this._sketch.updatePreview(),this._cursor.actif=!1,this._cursor.clear()}drag(r){}move(r){}unClick(r){}out(r){}zoom(r){this._sketch.camera.zoom(this._sketch.gridCoordinate(r.pos),r.dir,r.factor)}exit(){}}class fl extends Fe{click(r){var a;const o=this._sketch.gridCoordinate(r);o.x>0&&o.y>0&&o.x<this._sketch.width&&o.y<this._sketch.height&&((a=this.drawing)==null||a.bucket(o,this._sketch.color),this._sketch.updatePreview())}}class hl extends Fe{drag(r){this._sketch.camera.drag(r.oldPos,r.newPos)}}class pl extends Fe{click(r){var o;(o=this.drawing)==null||o.erase(this._sketch.gridCoordinate(r),this._sketch.size),this._sketch.updatePreview()}drag({newPos:r}){var o;(o=this.drawing)==null||o.erase(this._sketch.gridCoordinate(r),this._sketch.size),this._sketch.updatePreview()}}class vl extends Fe{drag({initPos:r,newPos:o}){this._cursor.actif=!0,this._cursor.clear(),this._cursor.line(this._sketch.gridCoordinate(r),this._sketch.gridCoordinate(o),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}unClick({initPos:r,newPos:o}){var a;(a=this.drawing)==null||a.line(this._sketch.gridCoordinate(r),this._sketch.gridCoordinate(o),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}move(r){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(r.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class gl extends Fe{click(r){var o;(o=this.drawing)==null||o.paint(this._sketch.gridCoordinate(r),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}drag({oldPos:r,newPos:o}){var a;(a=this.drawing)==null||a.line(this._sketch.gridCoordinate(r),this._sketch.gridCoordinate(o),this._sketch.size,this._sketch.color),this._sketch.updatePreview(),this._cursor.actif=!1}move(r){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(r.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class ml extends Fe{click(r){this._sketch.camera.zoom(this._sketch.gridCoordinate(r),-1)}}class yl extends Fe{click(r){this._sketch.camera.zoom(this._sketch.gridCoordinate(r))}}class bl extends Fe{drag({initPos:r,newPos:o}){this._cursor.actif=!0,this._cursor.clear();const a=this._sketch.gridCoordinate(r),c=this._sketch.gridCoordinate(o);this._cursor.rect(a,c.x-a.x,c.y-a.y,this._sketch.size,this._sketch.color),this._sketch.updatePreview()}unClick({initPos:r,newPos:o}){var p;const a=this._sketch.gridCoordinate(r),c=this._sketch.gridCoordinate(o);(p=this.drawing)==null||p.rect(a,c.x-a.x,c.y-a.y,this._sketch.size,this._sketch.color),this._sketch.updatePreview()}move(r){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(r.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class _l extends Fe{drag({initPos:r,newPos:o}){this._cursor.actif=!0,this._cursor.clear(),this._ellipse(r,o,this._cursor)}unClick({initPos:r,newPos:o}){this.drawing&&this._ellipse(r,o,this.drawing)}move(r){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(r.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}_ellipse(r,o,a){const c=this._sketch.gridCoordinate(r),p=this._sketch.gridCoordinate(o),y=Math.abs(p.x-c.x),v=Math.abs(p.y-c.y),w=Math.sign(p.x-c.x),E=Math.sign(p.y-c.y),C={x:Math.floor(c.x+y/2*w),y:Math.floor(c.y+v/2*E)};a.ellipse(C,y,v,this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class wl extends Fe{constructor(){super(...arguments);L(this,"_img",null)}click(o){var a;this._img=((a=this.drawing)==null?void 0:a.getImgData())||null}drag({initPos:o,newPos:a}){var w;const c=this._sketch.gridCoordinate(o),p=this._sketch.gridCoordinate(a),y=p.x-c.x,v=p.y-c.y;this._img&&((w=this.drawing)==null||w.putDatas(this._img,y,v),this._sketch.updatePreview())}}class xl extends Fe{constructor(){super(...arguments);L(this,"_bgColor","#000000AA")}drag({initPos:o,newPos:a}){this._cursor.actif=!0,this._cursor.clear();const c=this._sketch.gridCoordinate({x:Math.min(o.x,a.x),y:Math.min(o.y,a.y)}),p=this._sketch.gridCoordinate({x:Math.max(o.x,a.x),y:Math.max(o.y,a.y)});this._cursor.fillRect({x:0,y:0},c.x,this._cursor.height,this._bgColor),this._cursor.fillRect({x:c.x,y:0},this._cursor.width,c.y,this._bgColor),this._cursor.fillRect({x:c.x,y:p.y},this._cursor.width-c.x,this._cursor.height-p.y,this._bgColor),this._cursor.fillRect({x:p.x,y:c.y},this._cursor.width-p.x,p.y-c.y,this._bgColor),this._sketch.updatePreview()}unClick({initPos:o,newPos:a}){var C,P;const c=this._sketch.gridCoordinate({x:Math.min(o.x,a.x),y:Math.min(o.y,a.y)}),p=this._sketch.gridCoordinate({x:Math.max(o.x,a.x),y:Math.max(o.y,a.y)}),y=Math.max(c.x,0),v=Math.max(c.y,0),w=Math.min(p.x-y,((C=this.drawing)==null?void 0:C.width)||0-y),E=Math.min(p.y-v,((P=this.drawing)==null?void 0:P.height)||0-v);this._cursor.clear(),w>0&&E>0&&this._sketch.crop(y,v,w,E)}}class El extends Fe{click(r){this._sketch.dispatchEvent(new CustomEvent("inactif-click"))}}class kl{constructor(r,o,a){L(this,"_eventsManager");L(this,"_tools");L(this,"_currentTool");L(this,"_sketch");L(this,"_cursor");this._sketch=r,this._cursor=a,this._tools={paint:new gl(r,o,a),erase:new pl(r,o,a),line:new vl(r,o,a),rect:new bl(r,o,a),circle:new _l(r,o,a),bucket:new fl(r,o,a),crop:new xl(r,o,a),zoom:new yl(r,o,a),unzoom:new ml(r,o,a),drag:new wl(r,o,a),handle:new hl(r,o,a),inactif:new El(r,o,a)},this._currentTool=this._tools.paint,this._eventsManager=new dl(r),this._addEvents()}set tool(r){this._tools[r]&&(this._currentTool.exit(),this._currentTool=this._tools[r],this._currentTool.init())}get currentTool(){return this._sketch.actif?this._currentTool:this._tools.inactif}_addEvents(){this._eventsManager.addObserver("click",r=>{this.currentTool.click(r)}),this._eventsManager.addObserver("rightClick",r=>{this.currentTool.rightClick(r)}),this._eventsManager.addObserver("pointerUp",r=>{this.currentTool.unClick(r)}),this._eventsManager.addObserver("drag",r=>{const{button:o,oldPos:a,newPos:c}=r;switch(o){case 1:this._sketch.camera.drag(a,c);break;case 2:this.currentTool.rightClick(c);break;default:this.currentTool.drag(r);break}}),this._eventsManager.addObserver("pointerMove",r=>{this.currentTool.move(r)}),this._eventsManager.addObserver("pointerOut",()=>{this._cursor.actif=!1,this._sketch.updatePreview()}),this._eventsManager.addObserver("zoom",r=>{this.currentTool.zoom(r)})}}class Sl{constructor(r){L(this,"layers");L(this,"_layerIndex",1);L(this,"_sketch");this.layers=[{id:1,drawing:new fi}],this._sketch=r}get actif(){var r,o;return(o=(r=this.layers.find(a=>a.id===this._layerIndex))==null?void 0:r.drawing.actif)!=null?o:!1}newLayer(r,o){const a={id:r,drawing:new fi(this._sketch.width,this._sketch.height)};this.layers.splice(o,0,a)}selectLayer(r){this._layerIndex=r}removeLayer(r){this.layers=this.layers.filter(o=>o.id!==r)}sortLayer(r){const o=[];r.forEach(a=>{const c=this.layers.find(p=>p.id===a);c&&o.push(c)}),this.layers=o}setLayerVisible(r,o){const a=this.layers.find(c=>c.id===r);a&&(a.drawing.actif=o),this._sketch.updatePreview()}currentDrawing(){var r;return(r=this.layers.find(o=>o.id===this._layerIndex))==null?void 0:r.drawing}clear(){this.layers.forEach(r=>r.drawing.clear())}resize(r,o,a=-1,c=-1){this.layers.forEach(p=>{p.drawing.resize(r,o,a,c)})}crop(r,o,a,c){this.layers.forEach(p=>p.drawing.crop(r,o,a,c))}}class Pl extends HTMLElement{constructor(){super();L(this,"_canvas");L(this,"_ctx");L(this,"layers");L(this,"_cursor");L(this,"_background");L(this,"camera");L(this,"size",1);L(this,"color","#000000");L(this,"_tools");this._canvas=this._createCanvas(),this._ctx=this._canvas.getContext("2d"),this.layers=new Sl(this),this._cursor=new fi,this._background=new ll,this.camera=new ol(this,this._canvas),this._tools=new kl(this,this.layers,this._cursor)}connectedCallback(){this.camera.fitSketch(),this.updatePreview()}_createCanvas(){const o=this.attachShadow({mode:"open"}),a=document.createElement("canvas"),c=document.createElement("style");return c.textContent=`
        canvas{
			-ms-interpolation-mode: nearest-neighbor;
			image-rendering: pixelated;    
			background-color: #ffff;
			cursor:crosshair;
			pointer-events:none;
        }
        `,o.appendChild(a),o.appendChild(c),a}get width(){return this._canvas.width}get height(){return this._canvas.height}set tool(o){this._tools.tool=o}get actif(){return this.layers.actif}static get observedAttributes(){return["width","height"]}crop(o,a,c,p){this._canvas.width=c,this._canvas.height=p,this.layers.crop(o,a,c,p),this._cursor.resize(c,p),this._background.resize(c,p),this._background.clear(),this.camera.fitSketch(),this.updatePreview()}resize(o,a,c,p){this._canvas.width=o,this._canvas.height=a,this.layers.resize(o,a,c,p),this._cursor.resize(o,a),this._background.resize(o,a),this._background.clear(),this.camera.fitSketch(),this.updatePreview()}attributeChangedCallback(o,a,c){if(!c||isNaN(Number(c)))return;const p=Number(c);switch(o){case"width":p>=1&&(this._canvas.width=p,this.layers.resize(p,this._canvas.height),this._cursor.resize(p,this._canvas.height),this._background.resize(p,this._canvas.height),this._background.clear(),this.camera.fitSketch(),this.updatePreview());break;case"height":this._canvas.height=p,this.layers.resize(this._canvas.width,p),this._cursor.resize(this._canvas.width,p),this._background.resize(this._canvas.width,p),this._background.clear(),this.camera.fitSketch(),this.updatePreview();break;default:return}}updatePreview(){this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._ctx.drawImage(this._background.canvas,0,0);for(let o=this.layers.layers.length-1;o>=0;o--){const a=this.layers.layers[o];a.drawing.actif&&this._ctx.drawImage(a.drawing.canvas,0,0)}this._ctx.drawImage(this._cursor.canvas,0,0)}clear(){this._background.clear(),this.layers.clear(),this._cursor.clear(),this.updatePreview()}gridCoordinate({x:o,y:a}){const{left:c,top:p}=this._canvas.getBoundingClientRect(),y=(o-c)/this.camera.zoomValue,v=(a-p)/this.camera.zoomValue;return{x:Math.floor(y),y:Math.floor(v)}}}class Ol{static init(r,o){document.querySelectorAll(r).forEach(c=>{c.addEventListener("click",p=>{o.tool=c.value})})}}class Cl{static init(r,o){document.querySelectorAll(r).forEach(c=>{c.addEventListener("click",p=>{o.size=Number(c.value)})})}}const Tl={paint:{en:"Pencil",fr:"Crayon"},eraser:{en:"Eraser",fr:"Gomme"},line:{en:"Line",fr:"Ligne"},rect:{en:"Rectangle",fr:"Rectangle"},circle:{en:"Circle",fr:"Cercle"},bucket:{en:"Bucket",fr:"Pot de peinture"},move:{en:"Drag",fr:"Glisser"},crop:{en:"Crop",fr:"Recadrer"},zoom:{en:"Zoom",fr:"Zoom"},unzoom:{en:"Unzoom",fr:"D\xE9zoom"},handle:{en:"Handle",fr:"D\xE9placer"},size1:{fr:"D\xE9finir la taille \xE0 1px",en:"Set size to 1px"},size2:{fr:"D\xE9finir la taille \xE0 2px",en:"Set size to 2px"},size3:{fr:"D\xE9finir la taille \xE0 3px",en:"Set size to 3px"},size4:{fr:"D\xE9finir la taille \xE0 4px",en:"Set size to 4px"},color:{fr:"Choisir une couleur",en:"Choose a color"},fit:{fr:"Ajuster \xE0 la taille de l'\xE9cran",en:"Fit to screen size"},undo:{fr:"Annuler",en:"Undo"},redo:{fr:"R\xE9tablir",en:"Redo"},clear:{fr:"Effacer",en:"Clear"},resize:{fr:"Redimensionner",en:"Resize"},open:{fr:"Ouvrir",en:"Open"},save:{fr:"Enregistrer",en:"Save"},download:{fr:"Exporter",en:"Download"},addLayer:{en:"Add layer",fr:"Ajouter un calque"},removeLayer:{en:"Remove layer",fr:"Supprimer le calque"}};class Ml{static init(){const r=window.location.search,a=new URLSearchParams(r).get("lang")==="fr"?"fr":"en";document.querySelectorAll("[helper]").forEach(p=>{var v;const y=p.getAttribute("helper");if(y){const w=(v=Tl[y])==null?void 0:v[a];p.setAttribute("helper-text",w)}})}}function Dl(d,r){for(var o=0;o<r.length;o++){var a=r[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function tr(d){return function(r){if(Array.isArray(r))return Zr(r)}(d)||function(r){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(r))return Array.from(r)}(d)||function(r,o){if(!!r){if(typeof r=="string")return Zr(r,o);var a=Object.prototype.toString.call(r).slice(8,-1);if(a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set")return Array.from(r);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Zr(r,o)}}(d)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zr(d,r){(r==null||r>d.length)&&(r=d.length);for(var o=0,a=new Array(r);o<r;o++)a[o]=d[o];return a}var No,Jr,Ct,Qr,Xo,gr=(No=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],Jr=function(){function d(a){var c=a.targetModal,p=a.triggers,y=p===void 0?[]:p,v=a.onShow,w=v===void 0?function(){}:v,E=a.onClose,C=E===void 0?function(){}:E,P=a.openTrigger,D=P===void 0?"data-micromodal-trigger":P,z=a.closeTrigger,q=z===void 0?"data-micromodal-close":z,Y=a.openClass,de=Y===void 0?"is-open":Y,V=a.disableScroll,J=V!==void 0&&V,fe=a.disableFocus,me=fe!==void 0&&fe,ie=a.awaitCloseAnimation,oe=ie!==void 0&&ie,Ae=a.awaitOpenAnimation,R=Ae!==void 0&&Ae,he=a.debugMode,je=he!==void 0&&he;(function(Se,qe){if(!(Se instanceof qe))throw new TypeError("Cannot call a class as a function")})(this,d),this.modal=document.getElementById(c),this.config={debugMode:je,disableScroll:J,openTrigger:D,closeTrigger:q,openClass:de,onShow:w,onClose:C,awaitCloseAnimation:oe,awaitOpenAnimation:R,disableFocus:me},y.length>0&&this.registerTriggers.apply(this,tr(y)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var r,o;return r=d,(o=[{key:"registerTriggers",value:function(){for(var a=this,c=arguments.length,p=new Array(c),y=0;y<c;y++)p[y]=arguments[y];p.filter(Boolean).forEach(function(v){v.addEventListener("click",function(w){return a.showModal(w)})})}},{key:"showModal",value:function(){var a=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var p=function y(){a.modal.removeEventListener("animationend",y,!1),a.setFocusToFirstNode()};this.modal.addEventListener("animationend",p,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,c)}},{key:"closeModal",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,c=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,a),this.config.awaitCloseAnimation){var p=this.config.openClass;this.modal.addEventListener("animationend",function y(){c.classList.remove(p),c.removeEventListener("animationend",y,!1)},!1)}else c.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(a){this.modal=document.getElementById(a),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(a){if(this.config.disableScroll){var c=document.querySelector("body");switch(a){case"enable":Object.assign(c.style,{overflow:""});break;case"disable":Object.assign(c.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(a){(a.target.hasAttribute(this.config.closeTrigger)||a.target.parentNode.hasAttribute(this.config.closeTrigger))&&(a.preventDefault(),a.stopPropagation(),this.closeModal(a))}},{key:"onKeydown",value:function(a){a.keyCode===27&&this.closeModal(a),a.keyCode===9&&this.retainFocus(a)}},{key:"getFocusableNodes",value:function(){var a=this.modal.querySelectorAll(No);return Array.apply(void 0,tr(a))}},{key:"setFocusToFirstNode",value:function(){var a=this;if(!this.config.disableFocus){var c=this.getFocusableNodes();if(c.length!==0){var p=c.filter(function(y){return!y.hasAttribute(a.config.closeTrigger)});p.length>0&&p[0].focus(),p.length===0&&c[0].focus()}}}},{key:"retainFocus",value:function(a){var c=this.getFocusableNodes();if(c.length!==0)if(c=c.filter(function(y){return y.offsetParent!==null}),this.modal.contains(document.activeElement)){var p=c.indexOf(document.activeElement);a.shiftKey&&p===0&&(c[c.length-1].focus(),a.preventDefault()),!a.shiftKey&&c.length>0&&p===c.length-1&&(c[0].focus(),a.preventDefault())}else c[0].focus()}}])&&Dl(r.prototype,o),d}(),Ct=null,Qr=function(d){if(!document.getElementById(d))return console.warn("MicroModal: \u2757Seems like you have missed %c'".concat(d,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(d,'"></div>')),!1},Xo=function(d,r){if(function(a){a.length<=0&&(console.warn("MicroModal: \u2757Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(d),!r)return!0;for(var o in r)Qr(o);return!0},{init:function(d){var r=Object.assign({},{openTrigger:"data-micromodal-trigger"},d),o=tr(document.querySelectorAll("[".concat(r.openTrigger,"]"))),a=function(y,v){var w=[];return y.forEach(function(E){var C=E.attributes[v].value;w[C]===void 0&&(w[C]=[]),w[C].push(E)}),w}(o,r.openTrigger);if(r.debugMode!==!0||Xo(o,a)!==!1)for(var c in a){var p=a[c];r.targetModal=c,r.triggers=tr(p),Ct=new Jr(r)}},show:function(d,r){var o=r||{};o.targetModal=d,o.debugMode===!0&&Qr(d)===!1||(Ct&&Ct.removeEventListeners(),(Ct=new Jr(o)).showModal())},close:function(d){d?Ct.closeModalById(d):Ct.closeModal()}});typeof window!="undefined"&&(window.MicroModal=gr);class Il{static init(r,o){document.querySelectorAll(r).forEach(c=>{c.addEventListener("click",p=>{switch(c.id){case"fit":o.camera.fitSketch();break;case"clear":o.clear();break;case"resize":gr.show("resize-modal");break}})})}}class Al{static init(r,o){const a=document.querySelector(r),c=document.querySelector("color-picker");a==null||a.addEventListener("click",p=>{c==null||c.open()}),c==null||c.addEventListener("color-change",p=>{o.color=p.detail,a&&(a.style.backgroundColor=p.detail)})}}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Yo(d,r){var o=Object.keys(d);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(d);r&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(d,c).enumerable})),o.push.apply(o,a)}return o}function $e(d){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Yo(Object(o),!0).forEach(function(a){jl(d,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(o)):Yo(Object(o)).forEach(function(a){Object.defineProperty(d,a,Object.getOwnPropertyDescriptor(o,a))})}return d}function ar(d){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ar=function(r){return typeof r}:ar=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ar(d)}function jl(d,r,o){return r in d?Object.defineProperty(d,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):d[r]=o,d}function ot(){return ot=Object.assign||function(d){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(d[a]=o[a])}return d},ot.apply(this,arguments)}function Rl(d,r){if(d==null)return{};var o={},a=Object.keys(d),c,p;for(p=0;p<a.length;p++)c=a[p],!(r.indexOf(c)>=0)&&(o[c]=d[c]);return o}function zl(d,r){if(d==null)return{};var o=Rl(d,r),a,c;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(d);for(c=0;c<p.length;c++)a=p[c],!(r.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(d,a)||(o[a]=d[a]))}return o}var Ll="1.15.0";function it(d){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(d)}var at=it(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),xn=it(/Edge/i),qo=it(/firefox/i),mn=it(/safari/i)&&!it(/chrome/i)&&!it(/android/i),ea=it(/iP(ad|od|hone)/i),ta=it(/chrome/i)&&it(/android/i),na={capture:!1,passive:!1};function Z(d,r,o){d.addEventListener(r,o,!at&&na)}function $(d,r,o){d.removeEventListener(r,o,!at&&na)}function dr(d,r){if(!!r){if(r[0]===">"&&(r=r.substring(1)),d)try{if(d.matches)return d.matches(r);if(d.msMatchesSelector)return d.msMatchesSelector(r);if(d.webkitMatchesSelector)return d.webkitMatchesSelector(r)}catch{return!1}return!1}}function Bl(d){return d.host&&d!==document&&d.host.nodeType?d.host:d.parentNode}function Ue(d,r,o,a){if(d){o=o||document;do{if(r!=null&&(r[0]===">"?d.parentNode===o&&dr(d,r):dr(d,r))||a&&d===o)return d;if(d===o)break}while(d=Bl(d))}return null}var Ho=/\s+/g;function Me(d,r,o){if(d&&r)if(d.classList)d.classList[o?"add":"remove"](r);else{var a=(" "+d.className+" ").replace(Ho," ").replace(" "+r+" "," ");d.className=(a+(o?" "+r:"")).replace(Ho," ")}}function F(d,r,o){var a=d&&d.style;if(a){if(o===void 0)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(d,""):d.currentStyle&&(o=d.currentStyle),r===void 0?o:o[r];!(r in a)&&r.indexOf("webkit")===-1&&(r="-webkit-"+r),a[r]=o+(typeof o=="string"?"":"px")}}function Ut(d,r){var o="";if(typeof d=="string")o=d;else do{var a=F(d,"transform");a&&a!=="none"&&(o=a+" "+o)}while(!r&&(d=d.parentNode));var c=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return c&&new c(o)}function ra(d,r,o){if(d){var a=d.getElementsByTagName(r),c=0,p=a.length;if(o)for(;c<p;c++)o(a[c],c);return a}return[]}function Ge(){var d=document.scrollingElement;return d||document.documentElement}function ve(d,r,o,a,c){if(!(!d.getBoundingClientRect&&d!==window)){var p,y,v,w,E,C,P;if(d!==window&&d.parentNode&&d!==Ge()?(p=d.getBoundingClientRect(),y=p.top,v=p.left,w=p.bottom,E=p.right,C=p.height,P=p.width):(y=0,v=0,w=window.innerHeight,E=window.innerWidth,C=window.innerHeight,P=window.innerWidth),(r||o)&&d!==window&&(c=c||d.parentNode,!at))do if(c&&c.getBoundingClientRect&&(F(c,"transform")!=="none"||o&&F(c,"position")!=="static")){var D=c.getBoundingClientRect();y-=D.top+parseInt(F(c,"border-top-width")),v-=D.left+parseInt(F(c,"border-left-width")),w=y+p.height,E=v+p.width;break}while(c=c.parentNode);if(a&&d!==window){var z=Ut(c||d),q=z&&z.a,Y=z&&z.d;z&&(y/=Y,v/=q,P/=q,C/=Y,w=y+C,E=v+P)}return{top:y,left:v,bottom:w,right:E,width:P,height:C}}}function Wo(d,r,o){for(var a=gt(d,!0),c=ve(d)[r];a;){var p=ve(a)[o],y=void 0;if(o==="top"||o==="left"?y=c>=p:y=c<=p,!y)return a;if(a===Ge())break;a=gt(a,!1)}return!1}function Gt(d,r,o,a){for(var c=0,p=0,y=d.children;p<y.length;){if(y[p].style.display!=="none"&&y[p]!==N.ghost&&(a||y[p]!==N.dragged)&&Ue(y[p],o.draggable,d,!1)){if(c===r)return y[p];c++}p++}return null}function mi(d,r){for(var o=d.lastElementChild;o&&(o===N.ghost||F(o,"display")==="none"||r&&!dr(o,r));)o=o.previousElementSibling;return o||null}function Be(d,r){var o=0;if(!d||!d.parentNode)return-1;for(;d=d.previousElementSibling;)d.nodeName.toUpperCase()!=="TEMPLATE"&&d!==N.clone&&(!r||dr(d,r))&&o++;return o}function Vo(d){var r=0,o=0,a=Ge();if(d)do{var c=Ut(d),p=c.a,y=c.d;r+=d.scrollLeft*p,o+=d.scrollTop*y}while(d!==a&&(d=d.parentNode));return[r,o]}function Fl(d,r){for(var o in d)if(!!d.hasOwnProperty(o)){for(var a in r)if(r.hasOwnProperty(a)&&r[a]===d[o][a])return Number(o)}return-1}function gt(d,r){if(!d||!d.getBoundingClientRect)return Ge();var o=d,a=!1;do if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var c=F(o);if(o.clientWidth<o.scrollWidth&&(c.overflowX=="auto"||c.overflowX=="scroll")||o.clientHeight<o.scrollHeight&&(c.overflowY=="auto"||c.overflowY=="scroll")){if(!o.getBoundingClientRect||o===document.body)return Ge();if(a||r)return o;a=!0}}while(o=o.parentNode);return Ge()}function Nl(d,r){if(d&&r)for(var o in r)r.hasOwnProperty(o)&&(d[o]=r[o]);return d}function ei(d,r){return Math.round(d.top)===Math.round(r.top)&&Math.round(d.left)===Math.round(r.left)&&Math.round(d.height)===Math.round(r.height)&&Math.round(d.width)===Math.round(r.width)}var yn;function ia(d,r){return function(){if(!yn){var o=arguments,a=this;o.length===1?d.call(a,o[0]):d.apply(a,o),yn=setTimeout(function(){yn=void 0},r)}}}function Xl(){clearTimeout(yn),yn=void 0}function oa(d,r,o){d.scrollLeft+=r,d.scrollTop+=o}function aa(d){var r=window.Polymer,o=window.jQuery||window.Zepto;return r&&r.dom?r.dom(d).cloneNode(!0):o?o(d).clone(!0)[0]:d.cloneNode(!0)}var Ie="Sortable"+new Date().getTime();function Yl(){var d=[],r;return{captureAnimationState:function(){if(d=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(c){if(!(F(c,"display")==="none"||c===N.ghost)){d.push({target:c,rect:ve(c)});var p=$e({},d[d.length-1].rect);if(c.thisAnimationDuration){var y=Ut(c,!0);y&&(p.top-=y.f,p.left-=y.e)}c.fromRect=p}})}},addAnimationState:function(a){d.push(a)},removeAnimationState:function(a){d.splice(Fl(d,{target:a}),1)},animateAll:function(a){var c=this;if(!this.options.animation){clearTimeout(r),typeof a=="function"&&a();return}var p=!1,y=0;d.forEach(function(v){var w=0,E=v.target,C=E.fromRect,P=ve(E),D=E.prevFromRect,z=E.prevToRect,q=v.rect,Y=Ut(E,!0);Y&&(P.top-=Y.f,P.left-=Y.e),E.toRect=P,E.thisAnimationDuration&&ei(D,P)&&!ei(C,P)&&(q.top-P.top)/(q.left-P.left)===(C.top-P.top)/(C.left-P.left)&&(w=Hl(q,D,z,c.options)),ei(P,C)||(E.prevFromRect=C,E.prevToRect=P,w||(w=c.options.animation),c.animate(E,q,P,w)),w&&(p=!0,y=Math.max(y,w),clearTimeout(E.animationResetTimer),E.animationResetTimer=setTimeout(function(){E.animationTime=0,E.prevFromRect=null,E.fromRect=null,E.prevToRect=null,E.thisAnimationDuration=null},w),E.thisAnimationDuration=w)}),clearTimeout(r),p?r=setTimeout(function(){typeof a=="function"&&a()},y):typeof a=="function"&&a(),d=[]},animate:function(a,c,p,y){if(y){F(a,"transition",""),F(a,"transform","");var v=Ut(this.el),w=v&&v.a,E=v&&v.d,C=(c.left-p.left)/(w||1),P=(c.top-p.top)/(E||1);a.animatingX=!!C,a.animatingY=!!P,F(a,"transform","translate3d("+C+"px,"+P+"px,0)"),this.forRepaintDummy=ql(a),F(a,"transition","transform "+y+"ms"+(this.options.easing?" "+this.options.easing:"")),F(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){F(a,"transition",""),F(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},y)}}}}function ql(d){return d.offsetWidth}function Hl(d,r,o,a){return Math.sqrt(Math.pow(r.top-d.top,2)+Math.pow(r.left-d.left,2))/Math.sqrt(Math.pow(r.top-o.top,2)+Math.pow(r.left-o.left,2))*a.animation}var qt=[],ti={initializeByDefault:!0},En={mount:function(r){for(var o in ti)ti.hasOwnProperty(o)&&!(o in r)&&(r[o]=ti[o]);qt.forEach(function(a){if(a.pluginName===r.pluginName)throw"Sortable: Cannot mount plugin ".concat(r.pluginName," more than once")}),qt.push(r)},pluginEvent:function(r,o,a){var c=this;this.eventCanceled=!1,a.cancel=function(){c.eventCanceled=!0};var p=r+"Global";qt.forEach(function(y){!o[y.pluginName]||(o[y.pluginName][p]&&o[y.pluginName][p]($e({sortable:o},a)),o.options[y.pluginName]&&o[y.pluginName][r]&&o[y.pluginName][r]($e({sortable:o},a)))})},initializePlugins:function(r,o,a,c){qt.forEach(function(v){var w=v.pluginName;if(!(!r.options[w]&&!v.initializeByDefault)){var E=new v(r,o,r.options);E.sortable=r,E.options=r.options,r[w]=E,ot(a,E.defaults)}});for(var p in r.options)if(!!r.options.hasOwnProperty(p)){var y=this.modifyOption(r,p,r.options[p]);typeof y!="undefined"&&(r.options[p]=y)}},getEventProperties:function(r,o){var a={};return qt.forEach(function(c){typeof c.eventProperties=="function"&&ot(a,c.eventProperties.call(o[c.pluginName],r))}),a},modifyOption:function(r,o,a){var c;return qt.forEach(function(p){!r[p.pluginName]||p.optionListeners&&typeof p.optionListeners[o]=="function"&&(c=p.optionListeners[o].call(r[p.pluginName],a))}),c}};function Wl(d){var r=d.sortable,o=d.rootEl,a=d.name,c=d.targetEl,p=d.cloneEl,y=d.toEl,v=d.fromEl,w=d.oldIndex,E=d.newIndex,C=d.oldDraggableIndex,P=d.newDraggableIndex,D=d.originalEvent,z=d.putSortable,q=d.extraEventProperties;if(r=r||o&&o[Ie],!!r){var Y,de=r.options,V="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!at&&!xn?Y=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(Y=document.createEvent("Event"),Y.initEvent(a,!0,!0)),Y.to=y||o,Y.from=v||o,Y.item=c||o,Y.clone=p,Y.oldIndex=w,Y.newIndex=E,Y.oldDraggableIndex=C,Y.newDraggableIndex=P,Y.originalEvent=D,Y.pullMode=z?z.lastPutMode:void 0;var J=$e($e({},q),En.getEventProperties(a,r));for(var fe in J)Y[fe]=J[fe];o&&o.dispatchEvent(Y),de[V]&&de[V].call(r,Y)}}var Vl=["evt"],Ce=function(r,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=a.evt,p=zl(a,Vl);En.pluginEvent.bind(N)(r,o,$e({dragEl:T,parentEl:ue,ghostEl:W,rootEl:se,nextEl:Dt,lastDownEl:sr,cloneEl:ce,cloneHidden:vt,dragStarted:hn,putSortable:_e,activeSortable:N.active,originalEvent:c,oldIndex:Vt,oldDraggableIndex:bn,newIndex:De,newDraggableIndex:pt,hideGhostForTarget:ua,unhideGhostForTarget:da,cloneNowHidden:function(){vt=!0},cloneNowShown:function(){vt=!1},dispatchSortableEvent:function(v){ke({sortable:o,name:v,originalEvent:c})}},p))};function ke(d){Wl($e({putSortable:_e,cloneEl:ce,targetEl:T,rootEl:se,oldIndex:Vt,oldDraggableIndex:bn,newIndex:De,newDraggableIndex:pt},d))}var T,ue,W,se,Dt,sr,ce,vt,Vt,De,bn,pt,nr,_e,Wt=!1,fr=!1,hr=[],Tt,Ye,ni,ri,Uo,Go,hn,Ht,_n,wn=!1,rr=!1,lr,xe,ii=[],hi=!1,pr=[],mr=typeof document!="undefined",ir=ea,$o=xn||at?"cssFloat":"float",Ul=mr&&!ta&&!ea&&"draggable"in document.createElement("div"),sa=function(){if(!!mr){if(at)return!1;var d=document.createElement("x");return d.style.cssText="pointer-events:auto",d.style.pointerEvents==="auto"}}(),la=function(r,o){var a=F(r),c=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),p=Gt(r,0,o),y=Gt(r,1,o),v=p&&F(p),w=y&&F(y),E=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+ve(p).width,C=w&&parseInt(w.marginLeft)+parseInt(w.marginRight)+ve(y).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(p&&v.float&&v.float!=="none"){var P=v.float==="left"?"left":"right";return y&&(w.clear==="both"||w.clear===P)?"vertical":"horizontal"}return p&&(v.display==="block"||v.display==="flex"||v.display==="table"||v.display==="grid"||E>=c&&a[$o]==="none"||y&&a[$o]==="none"&&E+C>c)?"vertical":"horizontal"},Gl=function(r,o,a){var c=a?r.left:r.top,p=a?r.right:r.bottom,y=a?r.width:r.height,v=a?o.left:o.top,w=a?o.right:o.bottom,E=a?o.width:o.height;return c===v||p===w||c+y/2===v+E/2},$l=function(r,o){var a;return hr.some(function(c){var p=c[Ie].options.emptyInsertThreshold;if(!(!p||mi(c))){var y=ve(c),v=r>=y.left-p&&r<=y.right+p,w=o>=y.top-p&&o<=y.bottom+p;if(v&&w)return a=c}}),a},ca=function(r){function o(p,y){return function(v,w,E,C){var P=v.options.group.name&&w.options.group.name&&v.options.group.name===w.options.group.name;if(p==null&&(y||P))return!0;if(p==null||p===!1)return!1;if(y&&p==="clone")return p;if(typeof p=="function")return o(p(v,w,E,C),y)(v,w,E,C);var D=(y?v:w).options.group.name;return p===!0||typeof p=="string"&&p===D||p.join&&p.indexOf(D)>-1}}var a={},c=r.group;(!c||ar(c)!="object")&&(c={name:c}),a.name=c.name,a.checkPull=o(c.pull,!0),a.checkPut=o(c.put),a.revertClone=c.revertClone,r.group=a},ua=function(){!sa&&W&&F(W,"display","none")},da=function(){!sa&&W&&F(W,"display","")};mr&&!ta&&document.addEventListener("click",function(d){if(fr)return d.preventDefault(),d.stopPropagation&&d.stopPropagation(),d.stopImmediatePropagation&&d.stopImmediatePropagation(),fr=!1,!1},!0);var Mt=function(r){if(T){r=r.touches?r.touches[0]:r;var o=$l(r.clientX,r.clientY);if(o){var a={};for(var c in r)r.hasOwnProperty(c)&&(a[c]=r[c]);a.target=a.rootEl=o,a.preventDefault=void 0,a.stopPropagation=void 0,o[Ie]._onDragOver(a)}}},Kl=function(r){T&&T.parentNode[Ie]._isOutsideThisEl(r.target)};function N(d,r){if(!(d&&d.nodeType&&d.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(d));this.el=d,this.options=r=ot({},r),d[Ie]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(d.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return la(d,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(y,v){y.setData("Text",v.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:N.supportPointer!==!1&&"PointerEvent"in window&&!mn,emptyInsertThreshold:5};En.initializePlugins(this,d,o);for(var a in o)!(a in r)&&(r[a]=o[a]);ca(r);for(var c in this)c.charAt(0)==="_"&&typeof this[c]=="function"&&(this[c]=this[c].bind(this));this.nativeDraggable=r.forceFallback?!1:Ul,this.nativeDraggable&&(this.options.touchStartThreshold=1),r.supportPointer?Z(d,"pointerdown",this._onTapStart):(Z(d,"mousedown",this._onTapStart),Z(d,"touchstart",this._onTapStart)),this.nativeDraggable&&(Z(d,"dragover",this),Z(d,"dragenter",this)),hr.push(this.el),r.store&&r.store.get&&this.sort(r.store.get(this)||[]),ot(this,Yl())}N.prototype={constructor:N,_isOutsideThisEl:function(r){!this.el.contains(r)&&r!==this.el&&(Ht=null)},_getDirection:function(r,o){return typeof this.options.direction=="function"?this.options.direction.call(this,r,o,T):this.options.direction},_onTapStart:function(r){if(!!r.cancelable){var o=this,a=this.el,c=this.options,p=c.preventOnFilter,y=r.type,v=r.touches&&r.touches[0]||r.pointerType&&r.pointerType==="touch"&&r,w=(v||r).target,E=r.target.shadowRoot&&(r.path&&r.path[0]||r.composedPath&&r.composedPath()[0])||w,C=c.filter;if(ic(a),!T&&!(/mousedown|pointerdown/.test(y)&&r.button!==0||c.disabled)&&!E.isContentEditable&&!(!this.nativeDraggable&&mn&&w&&w.tagName.toUpperCase()==="SELECT")&&(w=Ue(w,c.draggable,a,!1),!(w&&w.animated)&&sr!==w)){if(Vt=Be(w),bn=Be(w,c.draggable),typeof C=="function"){if(C.call(this,r,w,this)){ke({sortable:o,rootEl:E,name:"filter",targetEl:w,toEl:a,fromEl:a}),Ce("filter",o,{evt:r}),p&&r.cancelable&&r.preventDefault();return}}else if(C&&(C=C.split(",").some(function(P){if(P=Ue(E,P.trim(),a,!1),P)return ke({sortable:o,rootEl:P,name:"filter",targetEl:w,fromEl:a,toEl:a}),Ce("filter",o,{evt:r}),!0}),C)){p&&r.cancelable&&r.preventDefault();return}c.handle&&!Ue(E,c.handle,a,!1)||this._prepareDragStart(r,v,w)}}},_prepareDragStart:function(r,o,a){var c=this,p=c.el,y=c.options,v=p.ownerDocument,w;if(a&&!T&&a.parentNode===p){var E=ve(a);if(se=p,T=a,ue=T.parentNode,Dt=T.nextSibling,sr=a,nr=y.group,N.dragged=T,Tt={target:T,clientX:(o||r).clientX,clientY:(o||r).clientY},Uo=Tt.clientX-E.left,Go=Tt.clientY-E.top,this._lastX=(o||r).clientX,this._lastY=(o||r).clientY,T.style["will-change"]="all",w=function(){if(Ce("delayEnded",c,{evt:r}),N.eventCanceled){c._onDrop();return}c._disableDelayedDragEvents(),!qo&&c.nativeDraggable&&(T.draggable=!0),c._triggerDragStart(r,o),ke({sortable:c,name:"choose",originalEvent:r}),Me(T,y.chosenClass,!0)},y.ignore.split(",").forEach(function(C){ra(T,C.trim(),oi)}),Z(v,"dragover",Mt),Z(v,"mousemove",Mt),Z(v,"touchmove",Mt),Z(v,"mouseup",c._onDrop),Z(v,"touchend",c._onDrop),Z(v,"touchcancel",c._onDrop),qo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,T.draggable=!0),Ce("delayStart",this,{evt:r}),y.delay&&(!y.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(xn||at))){if(N.eventCanceled){this._onDrop();return}Z(v,"mouseup",c._disableDelayedDrag),Z(v,"touchend",c._disableDelayedDrag),Z(v,"touchcancel",c._disableDelayedDrag),Z(v,"mousemove",c._delayedDragTouchMoveHandler),Z(v,"touchmove",c._delayedDragTouchMoveHandler),y.supportPointer&&Z(v,"pointermove",c._delayedDragTouchMoveHandler),c._dragStartTimer=setTimeout(w,y.delay)}else w()}},_delayedDragTouchMoveHandler:function(r){var o=r.touches?r.touches[0]:r;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){T&&oi(T),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var r=this.el.ownerDocument;$(r,"mouseup",this._disableDelayedDrag),$(r,"touchend",this._disableDelayedDrag),$(r,"touchcancel",this._disableDelayedDrag),$(r,"mousemove",this._delayedDragTouchMoveHandler),$(r,"touchmove",this._delayedDragTouchMoveHandler),$(r,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(r,o){o=o||r.pointerType=="touch"&&r,!this.nativeDraggable||o?this.options.supportPointer?Z(document,"pointermove",this._onTouchMove):o?Z(document,"touchmove",this._onTouchMove):Z(document,"mousemove",this._onTouchMove):(Z(T,"dragend",this),Z(se,"dragstart",this._onDragStart));try{document.selection?cr(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(r,o){if(Wt=!1,se&&T){Ce("dragStarted",this,{evt:o}),this.nativeDraggable&&Z(document,"dragover",Kl);var a=this.options;!r&&Me(T,a.dragClass,!1),Me(T,a.ghostClass,!0),N.active=this,r&&this._appendGhost(),ke({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(Ye){this._lastX=Ye.clientX,this._lastY=Ye.clientY,ua();for(var r=document.elementFromPoint(Ye.clientX,Ye.clientY),o=r;r&&r.shadowRoot&&(r=r.shadowRoot.elementFromPoint(Ye.clientX,Ye.clientY),r!==o);)o=r;if(T.parentNode[Ie]._isOutsideThisEl(r),o)do{if(o[Ie]){var a=void 0;if(a=o[Ie]._onDragOver({clientX:Ye.clientX,clientY:Ye.clientY,target:r,rootEl:o}),a&&!this.options.dragoverBubble)break}r=o}while(o=o.parentNode);da()}},_onTouchMove:function(r){if(Tt){var o=this.options,a=o.fallbackTolerance,c=o.fallbackOffset,p=r.touches?r.touches[0]:r,y=W&&Ut(W,!0),v=W&&y&&y.a,w=W&&y&&y.d,E=ir&&xe&&Vo(xe),C=(p.clientX-Tt.clientX+c.x)/(v||1)+(E?E[0]-ii[0]:0)/(v||1),P=(p.clientY-Tt.clientY+c.y)/(w||1)+(E?E[1]-ii[1]:0)/(w||1);if(!N.active&&!Wt){if(a&&Math.max(Math.abs(p.clientX-this._lastX),Math.abs(p.clientY-this._lastY))<a)return;this._onDragStart(r,!0)}if(W){y?(y.e+=C-(ni||0),y.f+=P-(ri||0)):y={a:1,b:0,c:0,d:1,e:C,f:P};var D="matrix(".concat(y.a,",").concat(y.b,",").concat(y.c,",").concat(y.d,",").concat(y.e,",").concat(y.f,")");F(W,"webkitTransform",D),F(W,"mozTransform",D),F(W,"msTransform",D),F(W,"transform",D),ni=C,ri=P,Ye=p}r.cancelable&&r.preventDefault()}},_appendGhost:function(){if(!W){var r=this.options.fallbackOnBody?document.body:se,o=ve(T,!0,ir,!0,r),a=this.options;if(ir){for(xe=r;F(xe,"position")==="static"&&F(xe,"transform")==="none"&&xe!==document;)xe=xe.parentNode;xe!==document.body&&xe!==document.documentElement?(xe===document&&(xe=Ge()),o.top+=xe.scrollTop,o.left+=xe.scrollLeft):xe=Ge(),ii=Vo(xe)}W=T.cloneNode(!0),Me(W,a.ghostClass,!1),Me(W,a.fallbackClass,!0),Me(W,a.dragClass,!0),F(W,"transition",""),F(W,"transform",""),F(W,"box-sizing","border-box"),F(W,"margin",0),F(W,"top",o.top),F(W,"left",o.left),F(W,"width",o.width),F(W,"height",o.height),F(W,"opacity","0.8"),F(W,"position",ir?"absolute":"fixed"),F(W,"zIndex","100000"),F(W,"pointerEvents","none"),N.ghost=W,r.appendChild(W),F(W,"transform-origin",Uo/parseInt(W.style.width)*100+"% "+Go/parseInt(W.style.height)*100+"%")}},_onDragStart:function(r,o){var a=this,c=r.dataTransfer,p=a.options;if(Ce("dragStart",this,{evt:r}),N.eventCanceled){this._onDrop();return}Ce("setupClone",this),N.eventCanceled||(ce=aa(T),ce.removeAttribute("id"),ce.draggable=!1,ce.style["will-change"]="",this._hideClone(),Me(ce,this.options.chosenClass,!1),N.clone=ce),a.cloneId=cr(function(){Ce("clone",a),!N.eventCanceled&&(a.options.removeCloneOnHide||se.insertBefore(ce,T),a._hideClone(),ke({sortable:a,name:"clone"}))}),!o&&Me(T,p.dragClass,!0),o?(fr=!0,a._loopId=setInterval(a._emulateDragOver,50)):($(document,"mouseup",a._onDrop),$(document,"touchend",a._onDrop),$(document,"touchcancel",a._onDrop),c&&(c.effectAllowed="move",p.setData&&p.setData.call(a,c,T)),Z(document,"drop",a),F(T,"transform","translateZ(0)")),Wt=!0,a._dragStartId=cr(a._dragStarted.bind(a,o,r)),Z(document,"selectstart",a),hn=!0,mn&&F(document.body,"user-select","none")},_onDragOver:function(r){var o=this.el,a=r.target,c,p,y,v=this.options,w=v.group,E=N.active,C=nr===w,P=v.sort,D=_e||E,z,q=this,Y=!1;if(hi)return;function de(lt,Ke){Ce(lt,q,$e({evt:r,isOwner:C,axis:z?"vertical":"horizontal",revert:y,dragRect:c,targetRect:p,canSort:P,fromSortable:D,target:a,completed:J,onMove:function($t,We){return or(se,o,T,c,$t,ve($t),r,We)},changed:fe},Ke))}function V(){de("dragOverAnimationCapture"),q.captureAnimationState(),q!==D&&D.captureAnimationState()}function J(lt){return de("dragOverCompleted",{insertion:lt}),lt&&(C?E._hideClone():E._showClone(q),q!==D&&(Me(T,_e?_e.options.ghostClass:E.options.ghostClass,!1),Me(T,v.ghostClass,!0)),_e!==q&&q!==N.active?_e=q:q===N.active&&_e&&(_e=null),D===q&&(q._ignoreWhileAnimating=a),q.animateAll(function(){de("dragOverAnimationComplete"),q._ignoreWhileAnimating=null}),q!==D&&(D.animateAll(),D._ignoreWhileAnimating=null)),(a===T&&!T.animated||a===o&&!a.animated)&&(Ht=null),!v.dragoverBubble&&!r.rootEl&&a!==document&&(T.parentNode[Ie]._isOutsideThisEl(r.target),!lt&&Mt(r)),!v.dragoverBubble&&r.stopPropagation&&r.stopPropagation(),Y=!0}function fe(){De=Be(T),pt=Be(T,v.draggable),ke({sortable:q,name:"change",toEl:o,newIndex:De,newDraggableIndex:pt,originalEvent:r})}if(r.preventDefault!==void 0&&r.cancelable&&r.preventDefault(),a=Ue(a,v.draggable,o,!0),de("dragOver"),N.eventCanceled)return Y;if(T.contains(r.target)||a.animated&&a.animatingX&&a.animatingY||q._ignoreWhileAnimating===a)return J(!1);if(fr=!1,E&&!v.disabled&&(C?P||(y=ue!==se):_e===this||(this.lastPutMode=nr.checkPull(this,E,T,r))&&w.checkPut(this,E,T,r))){if(z=this._getDirection(r,a)==="vertical",c=ve(T),de("dragOverValid"),N.eventCanceled)return Y;if(y)return ue=se,V(),this._hideClone(),de("revert"),N.eventCanceled||(Dt?se.insertBefore(T,Dt):se.appendChild(T)),J(!0);var me=mi(o,v.draggable);if(!me||ec(r,z,this)&&!me.animated){if(me===T)return J(!1);if(me&&o===r.target&&(a=me),a&&(p=ve(a)),or(se,o,T,c,a,p,r,!!a)!==!1)return V(),me&&me.nextSibling?o.insertBefore(T,me.nextSibling):o.appendChild(T),ue=o,fe(),J(!0)}else if(me&&Ql(r,z,this)){var ie=Gt(o,0,v,!0);if(ie===T)return J(!1);if(a=ie,p=ve(a),or(se,o,T,c,a,p,r,!1)!==!1)return V(),o.insertBefore(T,ie),ue=o,fe(),J(!0)}else if(a.parentNode===o){p=ve(a);var oe=0,Ae,R=T.parentNode!==o,he=!Gl(T.animated&&T.toRect||c,a.animated&&a.toRect||p,z),je=z?"top":"left",Se=Wo(a,"top","top")||Wo(T,"top","top"),qe=Se?Se.scrollTop:void 0;Ht!==a&&(Ae=p[je],wn=!1,rr=!he&&v.invertSwap||R),oe=tc(r,a,p,z,he?1:v.swapThreshold,v.invertedSwapThreshold==null?v.swapThreshold:v.invertedSwapThreshold,rr,Ht===a);var Re;if(oe!==0){var He=Be(T);do He-=oe,Re=ue.children[He];while(Re&&(F(Re,"display")==="none"||Re===W))}if(oe===0||Re===a)return J(!1);Ht=a,_n=oe;var I=a.nextElementSibling,G=!1;G=oe===1;var st=or(se,o,T,c,a,p,r,G);if(st!==!1)return(st===1||st===-1)&&(G=st===1),hi=!0,setTimeout(Jl,30),V(),G&&!I?o.appendChild(T):a.parentNode.insertBefore(T,G?I:a),Se&&oa(Se,0,qe-Se.scrollTop),ue=T.parentNode,Ae!==void 0&&!rr&&(lr=Math.abs(Ae-ve(a)[je])),fe(),J(!0)}if(o.contains(T))return J(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){$(document,"mousemove",this._onTouchMove),$(document,"touchmove",this._onTouchMove),$(document,"pointermove",this._onTouchMove),$(document,"dragover",Mt),$(document,"mousemove",Mt),$(document,"touchmove",Mt)},_offUpEvents:function(){var r=this.el.ownerDocument;$(r,"mouseup",this._onDrop),$(r,"touchend",this._onDrop),$(r,"pointerup",this._onDrop),$(r,"touchcancel",this._onDrop),$(document,"selectstart",this)},_onDrop:function(r){var o=this.el,a=this.options;if(De=Be(T),pt=Be(T,a.draggable),Ce("drop",this,{evt:r}),ue=T&&T.parentNode,De=Be(T),pt=Be(T,a.draggable),N.eventCanceled){this._nulling();return}Wt=!1,rr=!1,wn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),pi(this.cloneId),pi(this._dragStartId),this.nativeDraggable&&($(document,"drop",this),$(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),mn&&F(document.body,"user-select",""),F(T,"transform",""),r&&(hn&&(r.cancelable&&r.preventDefault(),!a.dropBubble&&r.stopPropagation()),W&&W.parentNode&&W.parentNode.removeChild(W),(se===ue||_e&&_e.lastPutMode!=="clone")&&ce&&ce.parentNode&&ce.parentNode.removeChild(ce),T&&(this.nativeDraggable&&$(T,"dragend",this),oi(T),T.style["will-change"]="",hn&&!Wt&&Me(T,_e?_e.options.ghostClass:this.options.ghostClass,!1),Me(T,this.options.chosenClass,!1),ke({sortable:this,name:"unchoose",toEl:ue,newIndex:null,newDraggableIndex:null,originalEvent:r}),se!==ue?(De>=0&&(ke({rootEl:ue,name:"add",toEl:ue,fromEl:se,originalEvent:r}),ke({sortable:this,name:"remove",toEl:ue,originalEvent:r}),ke({rootEl:ue,name:"sort",toEl:ue,fromEl:se,originalEvent:r}),ke({sortable:this,name:"sort",toEl:ue,originalEvent:r})),_e&&_e.save()):De!==Vt&&De>=0&&(ke({sortable:this,name:"update",toEl:ue,originalEvent:r}),ke({sortable:this,name:"sort",toEl:ue,originalEvent:r})),N.active&&((De==null||De===-1)&&(De=Vt,pt=bn),ke({sortable:this,name:"end",toEl:ue,originalEvent:r}),this.save()))),this._nulling()},_nulling:function(){Ce("nulling",this),se=T=ue=W=Dt=ce=sr=vt=Tt=Ye=hn=De=pt=Vt=bn=Ht=_n=_e=nr=N.dragged=N.ghost=N.clone=N.active=null,pr.forEach(function(r){r.checked=!0}),pr.length=ni=ri=0},handleEvent:function(r){switch(r.type){case"drop":case"dragend":this._onDrop(r);break;case"dragenter":case"dragover":T&&(this._onDragOver(r),Zl(r));break;case"selectstart":r.preventDefault();break}},toArray:function(){for(var r=[],o,a=this.el.children,c=0,p=a.length,y=this.options;c<p;c++)o=a[c],Ue(o,y.draggable,this.el,!1)&&r.push(o.getAttribute(y.dataIdAttr)||rc(o));return r},sort:function(r,o){var a={},c=this.el;this.toArray().forEach(function(p,y){var v=c.children[y];Ue(v,this.options.draggable,c,!1)&&(a[p]=v)},this),o&&this.captureAnimationState(),r.forEach(function(p){a[p]&&(c.removeChild(a[p]),c.appendChild(a[p]))}),o&&this.animateAll()},save:function(){var r=this.options.store;r&&r.set&&r.set(this)},closest:function(r,o){return Ue(r,o||this.options.draggable,this.el,!1)},option:function(r,o){var a=this.options;if(o===void 0)return a[r];var c=En.modifyOption(this,r,o);typeof c!="undefined"?a[r]=c:a[r]=o,r==="group"&&ca(a)},destroy:function(){Ce("destroy",this);var r=this.el;r[Ie]=null,$(r,"mousedown",this._onTapStart),$(r,"touchstart",this._onTapStart),$(r,"pointerdown",this._onTapStart),this.nativeDraggable&&($(r,"dragover",this),$(r,"dragenter",this)),Array.prototype.forEach.call(r.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),hr.splice(hr.indexOf(this.el),1),this.el=r=null},_hideClone:function(){if(!vt){if(Ce("hideClone",this),N.eventCanceled)return;F(ce,"display","none"),this.options.removeCloneOnHide&&ce.parentNode&&ce.parentNode.removeChild(ce),vt=!0}},_showClone:function(r){if(r.lastPutMode!=="clone"){this._hideClone();return}if(vt){if(Ce("showClone",this),N.eventCanceled)return;T.parentNode==se&&!this.options.group.revertClone?se.insertBefore(ce,T):Dt?se.insertBefore(ce,Dt):se.appendChild(ce),this.options.group.revertClone&&this.animate(T,ce),F(ce,"display",""),vt=!1}}};function Zl(d){d.dataTransfer&&(d.dataTransfer.dropEffect="move"),d.cancelable&&d.preventDefault()}function or(d,r,o,a,c,p,y,v){var w,E=d[Ie],C=E.options.onMove,P;return window.CustomEvent&&!at&&!xn?w=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent("move",!0,!0)),w.to=r,w.from=d,w.dragged=o,w.draggedRect=a,w.related=c||r,w.relatedRect=p||ve(r),w.willInsertAfter=v,w.originalEvent=y,d.dispatchEvent(w),C&&(P=C.call(E,w,y)),P}function oi(d){d.draggable=!1}function Jl(){hi=!1}function Ql(d,r,o){var a=ve(Gt(o.el,0,o.options,!0)),c=10;return r?d.clientX<a.left-c||d.clientY<a.top&&d.clientX<a.right:d.clientY<a.top-c||d.clientY<a.bottom&&d.clientX<a.left}function ec(d,r,o){var a=ve(mi(o.el,o.options.draggable)),c=10;return r?d.clientX>a.right+c||d.clientX<=a.right&&d.clientY>a.bottom&&d.clientX>=a.left:d.clientX>a.right&&d.clientY>a.top||d.clientX<=a.right&&d.clientY>a.bottom+c}function tc(d,r,o,a,c,p,y,v){var w=a?d.clientY:d.clientX,E=a?o.height:o.width,C=a?o.top:o.left,P=a?o.bottom:o.right,D=!1;if(!y){if(v&&lr<E*c){if(!wn&&(_n===1?w>C+E*p/2:w<P-E*p/2)&&(wn=!0),wn)D=!0;else if(_n===1?w<C+lr:w>P-lr)return-_n}else if(w>C+E*(1-c)/2&&w<P-E*(1-c)/2)return nc(r)}return D=D||y,D&&(w<C+E*p/2||w>P-E*p/2)?w>C+E/2?1:-1:0}function nc(d){return Be(T)<Be(d)?1:-1}function rc(d){for(var r=d.tagName+d.className+d.src+d.href+d.textContent,o=r.length,a=0;o--;)a+=r.charCodeAt(o);return a.toString(36)}function ic(d){pr.length=0;for(var r=d.getElementsByTagName("input"),o=r.length;o--;){var a=r[o];a.checked&&pr.push(a)}}function cr(d){return setTimeout(d,0)}function pi(d){return clearTimeout(d)}mr&&Z(document,"touchmove",function(d){(N.active||Wt)&&d.cancelable&&d.preventDefault()});N.utils={on:Z,off:$,css:F,find:ra,is:function(r,o){return!!Ue(r,o,r,!1)},extend:Nl,throttle:ia,closest:Ue,toggleClass:Me,clone:aa,index:Be,nextTick:cr,cancelNextTick:pi,detectDirection:la,getChild:Gt};N.get=function(d){return d[Ie]};N.mount=function(){for(var d=arguments.length,r=new Array(d),o=0;o<d;o++)r[o]=arguments[o];r[0].constructor===Array&&(r=r[0]),r.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(N.utils=$e($e({},N.utils),a.utils)),En.mount(a)})};N.create=function(d,r){return new N(d,r)};N.version=Ll;var pe=[],pn,vi,gi=!1,ai,si,vr,vn;function oc(){function d(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this))}return d.prototype={dragStarted:function(o){var a=o.originalEvent;this.sortable.nativeDraggable?Z(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Z(document,"pointermove",this._handleFallbackAutoScroll):a.touches?Z(document,"touchmove",this._handleFallbackAutoScroll):Z(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var a=o.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?$(document,"dragover",this._handleAutoScroll):($(document,"pointermove",this._handleFallbackAutoScroll),$(document,"touchmove",this._handleFallbackAutoScroll),$(document,"mousemove",this._handleFallbackAutoScroll)),Ko(),ur(),Xl()},nulling:function(){vr=vi=pn=gi=vn=ai=si=null,pe.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,a){var c=this,p=(o.touches?o.touches[0]:o).clientX,y=(o.touches?o.touches[0]:o).clientY,v=document.elementFromPoint(p,y);if(vr=o,a||this.options.forceAutoScrollFallback||xn||at||mn){li(o,this.options,v,a);var w=gt(v,!0);gi&&(!vn||p!==ai||y!==si)&&(vn&&Ko(),vn=setInterval(function(){var E=gt(document.elementFromPoint(p,y),!0);E!==w&&(w=E,ur()),li(o,c.options,E,a)},10),ai=p,si=y)}else{if(!this.options.bubbleScroll||gt(v,!0)===Ge()){ur();return}li(o,this.options,gt(v,!1),!1)}}},ot(d,{pluginName:"scroll",initializeByDefault:!0})}function ur(){pe.forEach(function(d){clearInterval(d.pid)}),pe=[]}function Ko(){clearInterval(vn)}var li=ia(function(d,r,o,a){if(!!r.scroll){var c=(d.touches?d.touches[0]:d).clientX,p=(d.touches?d.touches[0]:d).clientY,y=r.scrollSensitivity,v=r.scrollSpeed,w=Ge(),E=!1,C;vi!==o&&(vi=o,ur(),pn=r.scroll,C=r.scrollFn,pn===!0&&(pn=gt(o,!0)));var P=0,D=pn;do{var z=D,q=ve(z),Y=q.top,de=q.bottom,V=q.left,J=q.right,fe=q.width,me=q.height,ie=void 0,oe=void 0,Ae=z.scrollWidth,R=z.scrollHeight,he=F(z),je=z.scrollLeft,Se=z.scrollTop;z===w?(ie=fe<Ae&&(he.overflowX==="auto"||he.overflowX==="scroll"||he.overflowX==="visible"),oe=me<R&&(he.overflowY==="auto"||he.overflowY==="scroll"||he.overflowY==="visible")):(ie=fe<Ae&&(he.overflowX==="auto"||he.overflowX==="scroll"),oe=me<R&&(he.overflowY==="auto"||he.overflowY==="scroll"));var qe=ie&&(Math.abs(J-c)<=y&&je+fe<Ae)-(Math.abs(V-c)<=y&&!!je),Re=oe&&(Math.abs(de-p)<=y&&Se+me<R)-(Math.abs(Y-p)<=y&&!!Se);if(!pe[P])for(var He=0;He<=P;He++)pe[He]||(pe[He]={});(pe[P].vx!=qe||pe[P].vy!=Re||pe[P].el!==z)&&(pe[P].el=z,pe[P].vx=qe,pe[P].vy=Re,clearInterval(pe[P].pid),(qe!=0||Re!=0)&&(E=!0,pe[P].pid=setInterval(function(){a&&this.layer===0&&N.active._onTouchMove(vr);var I=pe[this.layer].vy?pe[this.layer].vy*v:0,G=pe[this.layer].vx?pe[this.layer].vx*v:0;typeof C=="function"&&C.call(N.dragged.parentNode[Ie],G,I,d,vr,pe[this.layer].el)!=="continue"||oa(pe[this.layer].el,G,I)}.bind({layer:P}),24))),P++}while(r.bubbleScroll&&D!==w&&(D=gt(D,!1)));gi=E}},30),fa=function(r){var o=r.originalEvent,a=r.putSortable,c=r.dragEl,p=r.activeSortable,y=r.dispatchSortableEvent,v=r.hideGhostForTarget,w=r.unhideGhostForTarget;if(!!o){var E=a||p;v();var C=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,P=document.elementFromPoint(C.clientX,C.clientY);w(),E&&!E.el.contains(P)&&(y("spill"),this.onSpill({dragEl:c,putSortable:a}))}};function yi(){}yi.prototype={startIndex:null,dragStart:function(r){var o=r.oldDraggableIndex;this.startIndex=o},onSpill:function(r){var o=r.dragEl,a=r.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var c=Gt(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(o,c):this.sortable.el.appendChild(o),this.sortable.animateAll(),a&&a.animateAll()},drop:fa};ot(yi,{pluginName:"revertOnSpill"});function bi(){}bi.prototype={onSpill:function(r){var o=r.dragEl,a=r.putSortable,c=a||this.sortable;c.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),c.animateAll()},drop:fa};ot(bi,{pluginName:"removeOnSpill"});N.mount(new oc);N.mount(bi,yi);class gn{static init(r,o){var p,y,v,w;this._window=document.querySelector(r),this._sketch=o;const a=(p=this._window)==null?void 0:p.querySelector("#newLayer-js"),c=(y=this._window)==null?void 0:y.querySelector("#deleteLayer-js");this._layers=((v=this._window)==null?void 0:v.querySelector("ul"))||null,this._layers&&(this._sortable=N.create(this._layers,{animation:100,dataIdAttr:"data-id",onEnd:this._moveLayer.bind(this)})),(w=this._layers)==null||w.addEventListener("click",this._layerClick.bind(this)),a==null||a.addEventListener("click",this._addLayer.bind(this)),c==null||c.addEventListener("click",this._removeLayer.bind(this)),this._addLayer()}static _addLayer(){var v,w,E,C;const r=(v=this._layers)==null?void 0:v.querySelector(".selected"),o=document.createElement("li"),a=this.newId();o.classList.add("layers_item"),o.classList.add("selected"),o.setAttribute("data-id",a.toString()),o.textContent="Layer "+a,r?(w=this._layers)==null||w.insertBefore(o,r):(E=this._layers)==null||E.appendChild(o),r==null||r.classList.remove("selected");const c=document.createElement("input");c.setAttribute("type","checkbox"),c.checked=!0,c.setAttribute("name","visible"),c.classList.add("layers_checkbox"),c.addEventListener("change",this._checkBoxChange.bind(this)),o.insertAdjacentElement("afterbegin",c);const y=Array.from(((C=this._layers)==null?void 0:C.querySelectorAll("li"))||[]).indexOf(o);this._sketch.layers.newLayer(a,y),this._updateSelectedLayer(),this._sketch.updatePreview()}static _removeLayer(){var p,y,v,w;const r=(p=this._layers)==null?void 0:p.querySelectorAll("li");if(!r||r.length<=1)return;const o=(y=this._layers)==null?void 0:y.querySelector(".selected"),a=o==null?void 0:o.nextElementSibling;o==null||o.remove(),a?a==null||a.classList.add("selected"):(w=(v=this._layers)==null?void 0:v.lastElementChild)==null||w.classList.add("selected");const c=Number(o==null?void 0:o.getAttribute("data-id"));c&&this._sketch.layers.removeLayer(c),this._updateSelectedLayer(),this._sketch.updatePreview()}static _updateSelectedLayer(){var o;const r=(o=this._layers)==null?void 0:o.querySelector(".selected");if(r){const a=Number(r==null?void 0:r.getAttribute("data-id"));a&&this._sketch.layers.selectLayer(a)}}static _moveLayer(r){var a,c,p;this._sketch.layers.sortLayer(((a=this._sortable)==null?void 0:a.toArray().map(Number))||[]),this._sketch.updatePreview();const o=r.item;o&&((p=(c=this._window)==null?void 0:c.querySelector(".selected"))==null||p.classList.remove("selected"),o.classList.add("selected"),this._updateSelectedLayer())}static _layerClick(r){var a,c;const o=r.target;o.nodeName==="LI"&&((c=(a=this._window)==null?void 0:a.querySelector(".selected"))==null||c.classList.remove("selected"),o.classList.add("selected")),this._updateSelectedLayer()}static _checkBoxChange(r){const o=r.target,a=o.closest("li"),c=Number(a==null?void 0:a.getAttribute("data-id")),p=o.checked;c&&this._sketch.layers.setLayerVisible(c,p)}static newId(){var a;const r=Array.from(((a=this._layers)==null?void 0:a.querySelectorAll("li"))||[]),o=Math.max(...r.map(c=>Number(c.getAttribute("data-id"))));return o>0?o+1:1}}L(gn,"_sketch"),L(gn,"_window"),L(gn,"_layers"),L(gn,"_sortable",null);const ac={resize:{fr:"Redimensionner"},width:{fr:"Largeur"},height:{fr:"Hauteur"},px:{fr:"px"},activLayerNotVisible:{fr:"Calque actuel inactif. "},inactiveClick:{fr:"Activez-le pour pouvoir le modifier."}};class sc{static init(){const r=window.location.search,a=new URLSearchParams(r).get("lang")==="fr"?"fr":"en";a!=="en"&&document.querySelectorAll("[translate]").forEach(p=>{const y=p.getAttribute("translate");if(y){const v=ac[y];v&&(p.textContent=v[a])}})}}customElements.define("sketch-app",Pl);const mt=document.querySelector("sketch-app");Ol.init("#tools-js input[type=radio]",mt);Cl.init("#sizes-js input[type=radio]",mt);Il.init(".actions_btn",mt);Al.init("#colorBtn-js",mt);gn.init("#layers-js",mt);Ml.init();sc.init();const ci=document.querySelector("#resizeForm-js"),ui=document.querySelector("#width-js"),di=document.querySelector("#height-js");ci==null||ci.addEventListener("submit",d=>{var y;d.preventDefault();const r=ui==null?void 0:ui.valueAsNumber,o=di==null?void 0:di.valueAsNumber,a=(y=document.querySelector("#align-js input:checked"))==null?void 0:y.value;let c=0,p=0;a&&([c,p]=JSON.parse(a)),r&&o&&mt.resize(r,o,c,p),gr.close("resize-modal")});mt.addEventListener("inactif-click",()=>gr.show("inactifClick-modal"));mt.camera.fitSketch();

var qs=Object.defineProperty;var Vs=(d,n,o)=>n in d?qs(d,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[n]=o;var T=(d,n,o)=>(Vs(d,typeof n!="symbol"?n+"":n,o),o);const Hs=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const p of l)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function o(l){const p={};return l.integrity&&(p.integrity=l.integrity),l.referrerpolicy&&(p.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?p.credentials="include":l.crossorigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function a(l){if(l.ep)return;l.ep=!0;const p=o(l);fetch(l.href,p)}};Hs();var Zs=Object.defineProperty,Js=(d,n,o)=>n in d?Zs(d,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[n]=o,ne=(d,n,o)=>(Js(d,typeof n!="symbol"?n+"":n,o),o);function Ks(d,n,o){d/=255,n/=255,o/=255;const a={h:0,s:0,b:0};var l=0,p=0;if(d>=n&&d>=o?(p=d,l=n>o?o:n):n>=o&&n>=d?(p=n,l=d>o?o:d):(p=o,l=n>d?d:n),a.b=p,a.s=p?(p-l)/p:0,!a.s)a.h=0;else{const m=p-l;d==p?a.h=(n-o)/m:n==p?a.h=2+(o-d)/m:a.h=4+(d-n)/m,a.h=Math.floor(a.h*60),a.h<0&&(a.h+=360)}return a.s=Math.floor(a.s*100),a.b=Math.floor(a.b*100),a}function jt(d,n,o){let a=0,l=0,p=0;if(n==0)o==0?a=l=p=0:a=l=p=Math.floor(o*255/100);else{d==360&&(d=0),d/=60,n=n/100,o=o/100;var m=Math.floor(d),v=d-m,_=o*(1-n),x=o*(1-n*v),S=o*(1-n*(1-v));switch(m){case 0:a=o,l=S,p=_;break;case 1:a=x,l=o,p=_;break;case 2:a=_,l=o,p=S;break;case 3:a=_,l=x,p=o;break;case 4:a=S,l=_,p=o;break;case 5:a=o,l=_,p=x;break}a=Math.floor(a*255),l=Math.floor(l*255),p=Math.floor(p*255)}return Qs(a,l,p)}function Qs(d,n,o){return"#"+[d,n,o].map(a=>("0"+a.toString(16)).slice(-2)).join("")}function $s(d){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function el(d){const n=$s(d);return n?Ks(n[0],n[1],n[2]):null}function Fo(d){return/(^#[0-9A-F]{6}$)/i.test(d)}class tl{constructor(n,o,a){ne(this,"elements"),ne(this,"confirmBtn"),ne(this,"cancelBtn"),this._colorPicker=n,this.elements=document.createElement("div"),this.elements.classList.add("btns"),this.confirmBtn=document.createElement("button"),this.confirmBtn.classList.add("btns_ok"),this.confirmBtn.textContent=o,this.elements.appendChild(this.confirmBtn),this.cancelBtn=document.createElement("button"),this.cancelBtn.classList.add("btns_cancel"),this.cancelBtn.textContent=a,this.elements.appendChild(this.cancelBtn),this.cancelBtn.addEventListener("click",()=>this._cancel()),this.cancelBtn.addEventListener("keydown",l=>this._keyDown(l)),this.confirmBtn.addEventListener("click",()=>this._confirm())}_cancel(){this._colorPicker.exit()}_confirm(){this._colorPicker.close();const n=jt(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness);this._colorPicker.dispatchEvent(new CustomEvent("color-change",{detail:n}))}_keyDown(n){var o,a;n.code==="Tab"&&!n.shiftKey&&((a=(o=this._colorPicker.shadowRoot)==null?void 0:o.querySelector(".picker"))==null||a.focus(),n.preventDefault())}}function nl(){const d=document.createElement("style");return d.textContent=`
            :host {
				display:flex;
				flex-direction: column;
				align-items: center;
                position: relative;
                padding:.5rem;
                gap:.7rem;
                background-color:var(--bg,#3f3e3e);
                border-radius:0.3125rem;
                display:none;
                z-index:10;
            }
            .picker{
                width:100%;
                height:auto;
                padding-top:100%;
                position:relative;
                cursor:pointer;
            }
            .picker::after{
                content:"";
                position:absolute;
                inset:0;
                background-image: linear-gradient(to right, #fff, rgba(204, 154, 129, 0));
            }
            .picker::before{
                content:"";
                position:absolute;
                inset:0;
                z-index:1;
                background-image: linear-gradient(to top, #000, rgba(204, 154, 129, 0));
            }
            .picker_cursor{
                position:absolute;
                width:.6rem;
                height:.6rem;
                border-radius:50%;
                border:2px solid #fff;
                mix-blend-mode:difference;
                left:100%;
                transform:translate(-50%,-50%);
                z-index:2;
            }
            .range-wrapper{
                display:flex;
                align-items:center;
                justify-content:space-between;
                width:100%;
                gap:.5rem;
            }
            .hueRange{
				-webkit-appearance :none;
                width:100%;
                height:.8rem;
                outline: 0;
                border-radius:0.5rem;
                box-sizing:border-box;
                background: linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%);
                cursor:pointer;
				padding:0;
            }
            .hueRange:focus{
                outline:1px solid;
            }
            .preview{
                width:1.5rem;
                height:1.2rem;
                outline:1px solid white;
            }
            input[type=range]::-webkit-slider-thumb {
                -webkit-appearance: none;
                border: 2px solid #ffff;
                height: 1rem;
                width: .35rem;
                background: transparent;
                cursor: pointer;
              }
              
              input[type=range]::-moz-range-thumb {
                -webkit-appearance: none;
                border: 2px solid #ffff;
                height: 1rem;
                width: .35rem;
                background: transparent;
                cursor: pointer;
              }
			  .pallet{
				  width:100%;
                display:grid;
                grid-template-columns:repeat(8,1fr);
                align-content:center;
				gap:.2rem;
            }
            .colorBtn{
                display: none;
            }
            .colorLabel{
                cursor:pointer;
                border-radius:0.125rem;
				width:100%;
                padding-top:100%;
            }
            .colorLabel:hover,.colorLabel:focus{
                transform:scale(1.1);
            }
            .colorBtn:checked + .colorLabel{
                outline:1px solid white;
                outline-offset: 1px;
            }
            .hexInput{
                grid-row:2;
                grid-column:2 / -1;
                display:block;
                width:100%;
                margin:0;
                box-sizing:border-box;
                background-color:var(--bg-input,#282828);
                color:var(--font-color,white);
                font-size:.8em;
                border:0;
                padding:.4rem;
            }
            .hexInput.error{
                background-color: var(--bg-error,#7b0000);
            }
            .btns{
                display:flex;
                width:100%;
                gap:.3125rem;
            }
            .btns_ok,.btns_cancel{
                width:100%;
                cursor:pointer;
                background-color:var(--bg-input,#282828);
                color:var(--font-color,white);
                border:0;
                padding:0.2rem;
            }
        `,d}class il{constructor(n,o){ne(this,"element"),this._colorPicker=n,this._onChange=o,this.element=document.createElement("input"),this.element.classList.add("hexInput"),this.element.setAttribute("type","text"),this.element.setAttribute("maxlength","7"),this.update(),this.element.addEventListener("input",a=>this._onInput(a))}update(){const n=jt(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness);this.element.value=n}_onInput(n){const o=n.target;/^#([A-Fa-f0-9]{6})$/.test(o.value)?(this.element.classList.remove("error"),this._onChange(o.value)):this.element.classList.add("error")}}class rl{constructor(n,o){ne(this,"element"),this._colorPicker=n,this._onChange=o,this.element=document.createElement("input"),this.element.classList.add("hueRange"),this.element.setAttribute("type","range"),this.element.setAttribute("min","0"),this.element.setAttribute("max","360"),this.element.setAttribute("value","0"),this.element.addEventListener("input",a=>this._hueRangeChange())}_hueRangeChange(){this._onChange(this.value)}update(){this.value=this._colorPicker.hue}get value(){return parseInt(this.element.value)}set value(n){this.element.value=n.toString()}}class Bo{constructor(n,o,a){ne(this,"element"),ne(this,"selected"),this._colorPicker=n,this._onChange=a,this.element=document.createElement("div"),this.element.classList.add("pallet"),this._init(o),this.selected=this.element.querySelector('input[type="radio"]')}_init(n){const o=this.element.querySelector("input:checked");this.element.innerHTML="",n.forEach((l,p)=>{const m=document.createElement("input");m.setAttribute("type","radio"),m.setAttribute("name","color"),m.setAttribute("value",l),m.id=`clrBtn-${p}`,m.classList.add("colorBtn");const v=document.createElement("label");v.setAttribute("for",`clrBtn-${p}`),v.classList.add("colorLabel"),v.style.backgroundColor=l,v.setAttribute("tabindex","0"),v.addEventListener("keydown",_=>{_.code==="Space"&&v.click()}),m.addEventListener("click",_=>this._clrBtnClick(_)),this.element.appendChild(m),this.element.appendChild(v)});const a=o?this.element.querySelector(`#${o.id}`):null;a?(this.selected=a,this.selected&&(this.selected.checked=!0)):(this.selected=o||this.element.querySelector('input[type="radio"]'),this.selected.checked=!0),this._onChange(this.selected.value)}_clrBtnClick(n){const o=n.target;this.selected=o,this._onChange(o.value)}setColors(n){this._init(n)}update(){const n=jt(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness),o=this.element.querySelector(`label[for="${this.selected.id}"]`);this.selected.value=n,o&&o.style.setProperty("background-color",n)}get clrs(){const n=[];return this.element.querySelectorAll(".colorBtn").forEach(a=>{n.push(a.value)}),n}}class ol{constructor(n,o){ne(this,"element"),ne(this,"cursor"),this._colorPicker=n,this._onChange=o,this.element=document.createElement("div"),this.element.classList.add("picker"),this.element.addEventListener("click",a=>this._onClick(a)),this.element.addEventListener("mousemove",a=>this._onMove(a)),this.element.setAttribute("tabindex","0"),this.cursor=document.createElement("span"),this.cursor.classList.add("picker_cursor"),this.element.appendChild(this.cursor),this.element.addEventListener("keydown",a=>this._pickerKeyDown(a))}_onClick(n){const{left:o,top:a,width:l,height:p}=this.element.getBoundingClientRect(),m=n.clientX-o,v=n.clientY-a;this.cursor.style.setProperty("left",`${m}px`),this.cursor.style.setProperty("top",`${v}px`),this._colorPicker.brightness=Math.min(100,Math.max(0,100-v/p*100)),this._colorPicker.saturation=Math.min(100,Math.max(0,m/l*100)),this._onChange()}_onMove(n){if(n.buttons===1){n.preventDefault();const{left:o,top:a,width:l,height:p}=this.element.getBoundingClientRect(),m=Math.min(l,Math.max(0,n.clientX-o)),v=Math.min(p,Math.max(0,n.clientY-a));this.cursor.style.setProperty("left",`${m}px`),this.cursor.style.setProperty("top",`${v}px`),this._colorPicker.brightness=Math.min(100,Math.max(0,100-v/p*100)),this._colorPicker.saturation=Math.min(100,Math.max(0,m/l*100)),this._onChange()}}_pickerKeyDown(n){var o,a;switch(n.key){case"ArrowUp":this._colorPicker.brightness=Math.min(100,this._colorPicker.brightness+10),this._onChange();break;case"ArrowDown":this._colorPicker.brightness=Math.max(0,this._colorPicker.brightness-10),this._onChange();break;case"ArrowLeft":this._colorPicker.saturation=Math.max(0,this._colorPicker.saturation-10),this._onChange();break;case"ArrowRight":this._colorPicker.saturation=Math.min(100,this._colorPicker.saturation+10),this._onChange();break;case"Tab":n.shiftKey&&((a=(o=this._colorPicker.shadowRoot)==null?void 0:o.querySelector(".btns_cancel"))==null||a.focus(),n.preventDefault());break}this.update()}update(){this.element.style.setProperty("background-color",jt(this._colorPicker.hue,100,100));const{width:n,height:o}=this.element.getBoundingClientRect(),a=this._colorPicker.saturation/100*n,l=(1-this._colorPicker.brightness/100)*o;this.cursor.style.setProperty("left",`${a}px`),this.cursor.style.setProperty("top",`${l}px`)}}class al{constructor(n){ne(this,"element"),this._colorPicker=n,this.element=document.createElement("div"),this.element.classList.add("preview")}update(){const n=jt(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness);this.element.style.backgroundColor=n}}class sl extends HTMLElement{constructor(){var n;super(),ne(this,"_picker"),ne(this,"_hueRange"),ne(this,"_hexInput"),ne(this,"_preview"),ne(this,"_rangeWrapper"),ne(this,"_btns"),ne(this,"_pallet",null),ne(this,"_selectedClr",null),ne(this,"_palletClr",null),ne(this,"_savedPalletClr",null),ne(this,"_savedSelected",null),ne(this,"_value"),ne(this,"_savedValue",null),ne(this,"hue",0),ne(this,"saturation",0),ne(this,"brightness",0),ne(this,"_backdrop"),ne(this,"_openBtn",null);const o=this.attachShadow({mode:"open"});this._definePalletClr(),this._picker=new ol(this,this._onPickerChange.bind(this)),this._hueRange=new rl(this,this._onHueRangeChange.bind(this)),this._preview=new al(this),this._rangeWrapper=document.createElement("div"),this._rangeWrapper.classList.add("range-wrapper"),this._rangeWrapper.appendChild(this._hueRange.element),this._palletClr&&(this._pallet=new Bo(this,this._palletClr,this._onPalletChange.bind(this))),this._hexInput=new il(this,this._onHexInputChange.bind(this)),this._btns=new tl(this,this.getAttribute("confirm-label")||"Ok",this.getAttribute("cancel-label")||"Cancel"),o.appendChild(this._picker.element),o.appendChild(this._rangeWrapper),this._pallet?(o.appendChild(this._pallet.element),this._palletClr&&(this.updateHSB(this._palletClr[0]),this._selectedClr=this._pallet.element.querySelector(`input[value="${this._palletClr[0]}"]`))):(this._rangeWrapper.insertBefore(this._preview.element,this._hueRange.element),this._preview.update()),this._value=((n=this._selectedClr)==null?void 0:n.value)||"#000000",o.appendChild(this._hexInput.element),o.appendChild(this._btns.elements),this._picker.update(),this.setAttribute("aria-label","Color Picker"),this.setAttribute("role","dialog"),this.setAttribute("tabindex","0"),o.appendChild(nl()),this._backdrop=this._createBackdrop()}static get observedAttributes(){return["confirm-label","cancel-label","pallet"]}attributeChangedCallback(n,o,a){n==="pallet"?(this._definePalletClr(),this._resetPallet()):n==="confirm-label"?this._btns.confirmBtn.textContent=a:n==="cancel-label"&&(this._btns.cancelBtn.textContent=a)}_resetPallet(){var n,o;const a=this._rangeWrapper.querySelector(".preview");a&&this._rangeWrapper.removeChild(a),this._palletClr?(this._pallet||(this._pallet=new Bo(this,this._palletClr,this._onPalletChange),(n=this.shadowRoot)==null||n.insertBefore(this._pallet.element,this._hexInput.element),this._selectedClr=this._pallet.element.querySelector(`input[value="${this._palletClr[0]}"]`),this._selectedClr&&(this._selectedClr.checked=!0)),(o=this._pallet)==null||o.setColors(this._palletClr)):(this._rangeWrapper.insertBefore(this._preview.element,this._hueRange.element),this._preview.update())}get value(){return this._value}set value(n){var o;if(!Fo(n))throw new Error("Invalid hex color");if(this._value=jt(this.hue,this.saturation,this.brightness),this._savedValue=this._value,this._hexInput.update(),this._preview.update(),this._picker.update(),this._hueRange.update(),this.updateHSB(n),this._pallet){(o=this._pallet)==null||o.update();const a=Array.from(this._pallet.element.querySelectorAll('input[type="radio"]'));this._palletClr=a.map(l=>l.value),this._savedPalletClr=[...this._palletClr]}}open(){var n,o;this._openBtn=document.activeElement,this.style.display="flex",this.setAttribute("aria-hidden","false"),this._picker.element.focus(),this.addEventListener("keydown",a=>this._keyDown(a)),this._picker.update(),this._hexInput.update(),this._resetPallet(),this._palletClr&&(this._savedPalletClr=[...this._palletClr]),this._savedValue=this.value,this._savedSelected=((o=(n=this._pallet)==null?void 0:n.element.querySelector("input:checked"))==null?void 0:o.id)||null,document.body.appendChild(this._backdrop)}_createBackdrop(){const n=document.createElement("div");return n.classList.add("backdrop"),n.addEventListener("click",()=>this.exit()),n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.zIndex="1",n.style.backgroundColor="rgba(0,0,0,0.5)",n.id="clrpckr-backdrop",n}close(){var n;this.style.display="none",this.setAttribute("aria-hidden","true"),this.removeEventListener("keydown",a=>this._keyDown(a)),this._pallet&&(this._palletClr=this._pallet.clrs),this._value=jt(this.hue,this.saturation,this.brightness);const o=document.getElementById("clrpckr-backdrop");o&&o.remove(),(n=this._openBtn)==null||n.focus()}exit(){var n;this.close(),this._savedPalletClr&&(this._palletClr=[...this._savedPalletClr]),this._savedValue&&(this.value=this._savedValue);const o=(n=this._pallet)==null?void 0:n.element.querySelector(`#${this._savedSelected}`);o&&(o.checked=!0)}_definePalletClr(){const n=this.getAttribute("pallet");let o=[];n&&JSON.parse(n).forEach(l=>{typeof l=="string"&&Fo(l)&&o.push(l)}),this._palletClr=o.length>0?o:null}_keyDown(n){n.code==="Escape"?this.exit():n.code==="Enter"&&this.close()}updateHSB(n){const o=el(n);o&&(this.hue=o.h,this.saturation=o.s,this.brightness=o.b)}_onPalletChange(n){var o,a,l,p;this.updateHSB(n),(o=this._picker)==null||o.update(),(a=this._hueRange)==null||a.update(),(l=this._hexInput)==null||l.update(),(p=this._preview)==null||p.update()}_onHexInputChange(n){var o,a,l,p;this.updateHSB(n),(o=this._picker)==null||o.update(),(a=this._hueRange)==null||a.update(),(l=this._pallet)==null||l.update(),(p=this._preview)==null||p.update()}_onHueRangeChange(n){var o,a,l,p;this.hue=n,(o=this._picker)==null||o.update(),(a=this._pallet)==null||a.update(),(l=this._hexInput)==null||l.update(),(p=this._preview)==null||p.update()}_onPickerChange(){var n;(n=this._pallet)==null||n.update(),this._hexInput.update(),this._preview.update()}}customElements.define("color-picker",sl);class ll{constructor(n,o){T(this,"_zoomValue",1);T(this,"_translate",{x:0,y:0});this._frame=n,this._canvas=o,document.addEventListener("fullscreenchange",a=>{this.fitSketch()})}get zoomValue(){return this._zoomValue}set zoomValue(n){this._zoomValue=n,this._canvas.style.width=this._canvas.width*this._zoomValue+"px";const o=this._frame.getBoundingClientRect();this.translate={x:-(o.width-this._canvas.width*this._zoomValue)/2,y:-(o.height-this._canvas.height*this._zoomValue)/2}}get translate(){return this._translate}set translate(n){this._translate=n,this._canvas.style.setProperty("transform",`translate(${-this._translate.x}px,${-this._translate.y}px)`)}fitSketch(){const{width:n,height:o}=this._frame.getBoundingClientRect(),a=this._canvas.width/this._canvas.height,l=n/o;this.zoomValue=a<l?o/this._canvas.height:n/this._canvas.width}zoom(n,o,a){let l=this._zoomValue>1?this._zoomValue+1:this._zoomValue*2;if(o&&o<0&&(l=this._zoomValue>1?this._zoomValue-1:this._zoomValue*.999999),a&&(l=a>1?this._zoomValue+.25:this._zoomValue-.25),l=Math.max(1,Math.min(50,l)),n){n.x=Math.min(Math.max(n.x,0),this._canvas.width),n.y=Math.min(Math.max(n.y,0),this._canvas.width);const p=n.x*l-n.x*this._zoomValue+this._translate.x,m=n.y*l-n.y*this._zoomValue+this._translate.y;this._translate={x:p,y:m}}this._zoomValue=l,this._canvas.style.width=this._canvas.width*this._zoomValue+"px",this._canvas.style.setProperty("transform",`translate(${-this._translate.x}px,${-this._translate.y}px)`)}drag(n,o){const a=o.x-n.x,l=o.y-n.y;this.translate={x:this.translate.x-a,y:this.translate.y-l}}}class $o{constructor(){T(this,"rgba",[0,0,0,255])}get hex(){return"#"+this.rgba.map(n=>("00"+n.toString(16)).slice(-2)).join("")}}class cl extends $o{constructor(n){var a;super();const o=((a=n.replace("#","").match(/(..?)/g))==null?void 0:a.map(l=>parseInt(l,16)))||[];this.rgba=this.rgba.map((l,p)=>o[p]||l)}}class ul extends $o{constructor(n){super(),this.rgba=n}}function er(d){return typeof d=="string"?new cl(d):new ul(d)}class ea{constructor(n,o,a){T(this,"_canvas");T(this,"actif",!0);T(this,"_ctx");this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),n&&(this._canvas.width=n),o&&(this._canvas.height=o),a&&this._ctx.drawImage(a,0,0)}set width(n){this._canvas.width=n}get width(){return this._canvas.width}set height(n){this._canvas.height=n}get height(){return this._canvas.height}get canvas(){return this._canvas}getImgData(n=0,o=0,a=this.width,l=this.height){return new ImageData(new Uint8ClampedArray(this._ctx.getImageData(n,o,a,l).data),a,l)}get imgData(){return this._ctx.getImageData(0,0,this.width,this.height)}crop(n,o,a,l){const p=this._ctx.getImageData(n,o,a,l);this.width=a,this.height=l,this._ctx.putImageData(p,0,0)}putDatas(n,o,a){this.clear(),this._ctx.putImageData(n,o,a)}resize(n,o,a=-1,l=-1){const p=this._ctx.getImageData(0,0,this.width,this.height);this.width=n,this.height=o,this._ctx.putImageData(p,0,0)}paint(n,o,a){this._ctx.fillStyle=a||"#000000";const l=o>1?n.x-o/2:n.x,p=o>1?n.y-o/2:n.y;this._ctx.fillRect(Math.floor(l),Math.floor(p),o,o)}erase(n,o){const a=o>1?n.x-o/2:n.x,l=o>1?n.y-o/2:n.y;this._ctx.clearRect(Math.floor(a),Math.floor(l),o,o)}_getColor(n){const[o,a,l,p]=this._ctx.getImageData(n.x,n.y,1,1).data;return[o,a,l,p].join("-")}_getHexColor(n){const[o,a,l,p]=this._ctx.getImageData(n.x,n.y,1,1).data;return p===0?null:"#"+((1<<24)+(o<<16)+(a<<8)+l).toString(16).slice(1)}_hexToRgba(n){var a;const o=((a=n.replace("#","").match(/(..?)/g))==null?void 0:a.map(l=>parseInt(l,16)))||[];for(let l=o.length;l<4;l++)o.push(l===3?255:0);return o}}class ci extends ea{clear(){this._ctx.clearRect(0,0,this.width,this.height)}bucket(n,o){const a=n.y*this.width+n.x,l=this.getImgData().data,p=er([...l.slice(4*a,4*a+4)]);if(er(o).hex===p.hex)return;const v=new Set([a]),_=v.values();let x=_.next();for(;!x.done;){if(er([...l.slice(4*x.value,4*x.value+4)]).hex===p.hex){const O=x.value%this.width,I=Math.floor(x.value/this.width);O>0&&v.add(x.value-1),O<this.width-1&&v.add(x.value+1),I>0&&v.add(x.value-this.width),I<this.height-1&&v.add(x.value+this.width),this.paint({x:O,y:I},1,o)}x=_.next()}}line(n,o,a,l){const p=Math.floor(n.x),m=Math.floor(n.y),v=Math.floor(o.x),_=Math.floor(o.y);if(p===v&&m===_){this.paint(n,a,l);return}const x=Math.abs(v-p),S=Math.abs(_-m),O=Math.sign(v-p),I=Math.sign(_-m);if(S===0)for(let z=p;z!==v+O;z+=O)this.paint({x:z,y:m},a,l);else if(x===0)for(let z=m;z!==_+I;z+=I)this.paint({x:p,y:z},a,l);else if(x>=S){const z=2*S,W=-2*x;let X=-x,de=m;for(let q=p;q!==v+O;q+=O)this.paint({x:q,y:de},a,l),X+=z,X>=0&&(de+=I,X+=W)}else{const z=2*x,W=-2*S;let X=-S,de=p;for(let q=m;q!==_+I;q+=I)this.paint({x:de,y:q},a,l),X+=z,X>=0&&(de+=O,X+=W)}}fillRect(n,o,a,l){this._ctx.fillStyle=l,this._ctx.fillRect(n.x,n.y,o,a)}rect(n,o,a,l,p){this.line({x:n.x,y:n.y},{x:n.x+o,y:n.y},l,p),this.line({x:n.x+o,y:n.y},{x:n.x+o,y:n.y+a},l,p),this.line({x:n.x,y:n.y+a},{x:n.x+o,y:n.y+a},l,p),this.line({x:n.x,y:n.y},{x:n.x,y:n.y+a},l,p)}ellipse(n,o,a,l,p){this._ctx.fillStyle=p;const m=Math.floor(o/2),v=Math.floor(a/2);let _=0,x=v,S=v*v-m*m*v+.25*m*m,O=2*v*v*_,I=2*m*m*x;for(;O<I;)this._ctx.fillRect(_+n.x,x+n.y,l,l),this._ctx.fillRect(-_+n.x,x+n.y,l,l),this._ctx.fillRect(_+n.x,-x+n.y,l,l),this._ctx.fillRect(-_+n.x,-x+n.y,l,l),S<0?(_++,O=O+2*v*v,S=S+O+v*v):(_++,x--,O=O+2*v*v,I=I-2*m*m,S=S+O-I+v*v);let z=v*v*((_+.5)*(_+.5))+m*m*((x-1)*(x-1))-m*m*v*v;for(;x>=0;)this._ctx.fillRect(_+n.x,x+n.y,l,l),this._ctx.fillRect(-_+n.x,x+n.y,l,l),this._ctx.fillRect(_+n.x,-x+n.y,l,l),this._ctx.fillRect(-_+n.x,-x+n.y,l,l),z>0?(x--,I=I-2*m*m,z=z+m*m-I):(x--,_++,O=O+2*v*v,I=I-2*m*m,z=z+O-I+m*m)}resize(n,o,a=-1,l=-1){let p=0,m=0;a===0?p=(n-this.width)/2:a===1&&(p=n-this.width),l===0?m=(o-this.height)/2:l===1&&(m=o-this.height);const v=this._ctx.getImageData(0,0,this.width,this.height);this.width=n,this.height=o,this._ctx.putImageData(v,p,m)}drawImg(n){this._ctx.drawImage(n,0,0)}}class dl extends ea{constructor(){super();T(this,"_colors",["#909090","#C0C0C0"]);T(this,"_size",4);this.clear()}clear(){for(let o=0;o<=Math.ceil(this.height/this._size);o++)for(let a=0;a<=Math.ceil(this.width/this._size);a++){const l=(a+o)%2;this.paint({x:a*this._size,y:o*this._size},this._size,this._colors[l])}}}class Ct{constructor(){T(this,"_observers",[]);T(this,"_newId",function*(){let n=0;for(;;)yield n,n++}())}subscribe(n){const o=this._newId.next().value;return this._observers.push({id:o,callback:n}),o}unsubscribe(n){this._observers=this._observers.filter(o=>o.id!==n)}notify(n){this._observers.forEach(o=>o.callback(n))}}function hl(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var ta={exports:{}};(function(d,n){(function(o){d.exports=o()})(function(){var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default=function(e){return!(!e||!e.Window)&&e instanceof e.Window};var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.init=m,a.getWindow=function(e){return(0,o.default)(e)?e:(e.ownerDocument||e).defaultView||p.window},a.window=a.realWindow=void 0;var l=void 0;a.realWindow=l;var p=void 0;function m(e){a.realWindow=l=e;var t=e.document.createTextNode("");t.ownerDocument!==e.document&&typeof e.wrap=="function"&&e.wrap(t)===t&&(e=e.wrap(e)),a.window=p=e}a.window=p,typeof window!="undefined"&&window&&m(window);var v={};function _(e){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=function(e){return!!e&&_(e)==="object"},S=function(e){return typeof e=="function"},O={window:function(e){return e===a.window||(0,o.default)(e)},docFrag:function(e){return x(e)&&e.nodeType===11},object:x,func:S,number:function(e){return typeof e=="number"},bool:function(e){return typeof e=="boolean"},string:function(e){return typeof e=="string"},element:function(e){if(!e||_(e)!=="object")return!1;var t=a.getWindow(e)||a.window;return/object|function/.test(_(t.Element))?e instanceof t.Element:e.nodeType===1&&typeof e.nodeName=="string"},plainObject:function(e){return x(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},array:function(e){return x(e)&&e.length!==void 0&&S(e.splice)}};v.default=O;var I={};function z(e){var t=e.interaction;if(t.prepared.name==="drag"){var i=t.prepared.axis;i==="x"?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):i==="y"&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function W(e){var t=e.iEvent,i=e.interaction;if(i.prepared.name==="drag"){var r=i.prepared.axis;if(r==="x"||r==="y"){var s=r==="x"?"y":"x";t.page[s]=i.coords.start.page[s],t.client[s]=i.coords.start.client[s],t.delta[s]=0}}}Object.defineProperty(I,"__esModule",{value:!0}),I.default=void 0;var X={id:"actions/drag",install:function(e){var t=e.actions,i=e.Interactable,r=e.defaults;i.prototype.draggable=X.draggable,t.map.drag=X,t.methodDict.drag="draggable",r.actions.drag=X.defaults},listeners:{"interactions:before-action-move":z,"interactions:action-resume":z,"interactions:action-move":W,"auto-start:check":function(e){var t=e.interaction,i=e.interactable,r=e.buttons,s=i.options.drag;if(s&&s.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(r&i.options.drag.mouseButtons)!=0))return e.action={name:"drag",axis:s.lockAxis==="start"?s.startAxis:s.lockAxis},!1}},draggable:function(e){return v.default.object(e)?(this.options.drag.enabled=e.enabled!==!1,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):v.default.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:z,move:W,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},de=X;I.default=de;var q={};Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var Q={init:function(e){var t=e;Q.document=t.document,Q.DocumentFragment=t.DocumentFragment||he,Q.SVGElement=t.SVGElement||he,Q.SVGSVGElement=t.SVGSVGElement||he,Q.SVGElementInstance=t.SVGElementInstance||he,Q.Element=t.Element||he,Q.HTMLElement=t.HTMLElement||Q.Element,Q.Event=t.Event,Q.Touch=t.Touch||he,Q.PointerEvent=t.PointerEvent||t.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function he(){}var me=Q;q.default=me;var re={};Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;var oe={init:function(e){var t=q.default.Element,i=e.navigator||{};oe.supportsTouch="ontouchstart"in e||v.default.func(e.DocumentTouch)&&q.default.document instanceof e.DocumentTouch,oe.supportsPointerEvent=i.pointerEnabled!==!1&&!!q.default.PointerEvent,oe.isIOS=/iP(hone|od|ad)/.test(i.platform),oe.isIOS7=/iP(hone|od|ad)/.test(i.platform)&&/OS 7[^\d]/.test(i.appVersion),oe.isIe9=/MSIE 9/.test(i.userAgent),oe.isOperaMobile=i.appName==="Opera"&&oe.supportsTouch&&/Presto/.test(i.userAgent),oe.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",oe.pEventTypes=oe.supportsPointerEvent?q.default.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,oe.wheelEvent=q.default.document&&"onmousewheel"in q.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},De=oe;re.default=De;var R={};function fe(e){var t=e.parentNode;if(v.default.docFrag(t)){for(;(t=t.host)&&v.default.docFrag(t););return t}return t}function je(e,t){return a.window!==a.realWindow&&(t=t.replace(/\/deep\//g," ")),e[re.default.prefixedMatchesSelector](t)}Object.defineProperty(R,"__esModule",{value:!0}),R.nodeContains=function(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1},R.closest=function(e,t){for(;v.default.element(e);){if(je(e,t))return e;e=fe(e)}return null},R.parentNode=fe,R.matchesSelector=je,R.indexOfDeepestElement=function(e){for(var t,i=[],r=0;r<e.length;r++){var s=e[r],c=e[t];if(s&&r!==t)if(c){var h=Se(s),u=Se(c);if(h!==s.ownerDocument)if(u!==s.ownerDocument)if(h!==u){i=i.length?i:Ge(c);var f=void 0;if(c instanceof q.default.HTMLElement&&s instanceof q.default.SVGElement&&!(s instanceof q.default.SVGSVGElement)){if(s===u)continue;f=s.ownerSVGElement}else f=s;for(var g=Ge(f,c.ownerDocument),y=0;g[y]&&g[y]===i[y];)y++;var b=[g[y-1],g[y],i[y]];if(b[0])for(var E=b[0].lastChild;E;){if(E===b[1]){t=r,i=g;break}if(E===b[2])break;E=E.previousSibling}}else k=s,w=c,(parseInt(a.getWindow(k).getComputedStyle(k).zIndex,10)||0)>=(parseInt(a.getWindow(w).getComputedStyle(w).zIndex,10)||0)&&(t=r);else t=r}else t=r}var k,w;return t},R.matchesUpTo=function(e,t,i){for(;v.default.element(e);){if(je(e,t))return!0;if((e=fe(e))===i)return je(e,t)}return!1},R.getActualElement=function(e){return e.correspondingUseElement||e},R.getScrollXY=Le,R.getElementClientRect=Ue,R.getElementRect=function(e){var t=Ue(e);if(!re.default.isIOS7&&t){var i=Le(a.getWindow(e));t.left+=i.x,t.right+=i.x,t.top+=i.y,t.bottom+=i.y}return t},R.getPath=function(e){for(var t=[];e;)t.push(e),e=fe(e);return t},R.trySelector=function(e){return!!v.default.string(e)&&(q.default.document.querySelector(e),!0)};var Se=function(e){return e.parentNode||e.host};function Ge(e,t){for(var i,r=[],s=e;(i=Se(s))&&s!==t&&i!==s.ownerDocument;)r.unshift(s),s=i;return r}function Le(e){return{x:(e=e||a.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function Ue(e){var t=e instanceof q.default.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}var D={};Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(e,t){for(var i in t)e[i]=t[i];return e};var H={};function ct(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}function ut(e,t,i){return e==="parent"?(0,R.parentNode)(i):e==="self"?t.getRect(i):(0,R.closest)(i,e)}Object.defineProperty(H,"__esModule",{value:!0}),H.getStringOptionResult=ut,H.resolveRectLike=function(e,t,i,r){var s,c=e;return v.default.string(c)?c=ut(c,t,i):v.default.func(c)&&(c=c.apply(void 0,function(h){if(Array.isArray(h))return ct(h)}(s=r)||function(h){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(h))return Array.from(h)}(s)||function(h,u){if(h){if(typeof h=="string")return ct(h,u);var f=Object.prototype.toString.call(h).slice(8,-1);return f==="Object"&&h.constructor&&(f=h.constructor.name),f==="Map"||f==="Set"?Array.from(h):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?ct(h,u):void 0}}(s)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())),v.default.element(c)&&(c=(0,R.getElementRect)(c)),c},H.rectToXY=function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},H.xywhToTlbr=function(e){return!e||"left"in e&&"top"in e||((e=(0,D.default)({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e},H.tlbrToXywh=function(e){return!e||"x"in e&&"y"in e||((e=(0,D.default)({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||(e.right||0)-e.x,e.height=e.height||(e.bottom||0)-e.y),e},H.addEdges=function(e,t,i){e.left&&(t.left+=i.x),e.right&&(t.right+=i.x),e.top&&(t.top+=i.y),e.bottom&&(t.bottom+=i.y),t.width=t.right-t.left,t.height=t.bottom-t.top};var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.default=function(e,t,i){var r=e.options[i],s=r&&r.origin||e.options.origin,c=(0,H.resolveRectLike)(s,e,t,[e&&t]);return(0,H.rectToXY)(c)||{x:0,y:0}};var bt={};function Kt(e){return e.trim().split(/ +/)}Object.defineProperty(bt,"__esModule",{value:!0}),bt.default=function e(t,i,r){if(r=r||{},v.default.string(t)&&t.search(" ")!==-1&&(t=Kt(t)),v.default.array(t))return t.reduce(function(f,g){return(0,D.default)(f,e(g,i,r))},r);if(v.default.object(t)&&(i=t,t=""),v.default.func(i))r[t]=r[t]||[],r[t].push(i);else if(v.default.array(i))for(var s=0;s<i.length;s++){var c;c=i[s],e(t,c,r)}else if(v.default.object(i))for(var h in i){var u=Kt(h).map(function(f){return"".concat(t).concat(f)});e(u,i[h],r)}return r};var qe={};Object.defineProperty(qe,"__esModule",{value:!0}),qe.default=void 0,qe.default=function(e,t){return Math.sqrt(e*e+t*t)};var Qt={};function xi(e,t){for(var i in t){var r=xi.prefixedPropREs,s=!1;for(var c in r)if(i.indexOf(c)===0&&r[c].test(i)){s=!0;break}s||typeof t[i]=="function"||(e[i]=t[i])}return e}Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.default=void 0,xi.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/};var ga=xi;Qt.default=ga;var L={};function Ei(e){return e instanceof q.default.Event||e instanceof q.default.Touch}function $t(e,t,i){return e=e||"page",(i=i||{}).x=t[e+"X"],i.y=t[e+"Y"],i}function _r(e,t){return t=t||{x:0,y:0},re.default.isOperaMobile&&Ei(e)?($t("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):$t("page",e,t),t}function wr(e,t){return t=t||{},re.default.isOperaMobile&&Ei(e)?$t("screen",e,t):$t("client",e,t),t}function On(e){var t=[];return v.default.array(e)?(t[0]=e[0],t[1]=e[1]):e.type==="touchend"?e.touches.length===1?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):e.touches.length===0&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function xr(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},i=0;i<e.length;i++){var r=e[i];for(var s in t)t[s]+=r[s]}for(var c in t)t[c]/=e.length;return t}Object.defineProperty(L,"__esModule",{value:!0}),L.copyCoords=function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},L.setCoordDeltas=function(e,t,i){e.page.x=i.page.x-t.page.x,e.page.y=i.page.y-t.page.y,e.client.x=i.client.x-t.client.x,e.client.y=i.client.y-t.client.y,e.timeStamp=i.timeStamp-t.timeStamp},L.setCoordVelocity=function(e,t){var i=Math.max(t.timeStamp/1e3,.001);e.page.x=t.page.x/i,e.page.y=t.page.y/i,e.client.x=t.client.x/i,e.client.y=t.client.y/i,e.timeStamp=i},L.setZeroCoords=function(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0},L.isNativePointer=Ei,L.getXY=$t,L.getPageXY=_r,L.getClientXY=wr,L.getPointerId=function(e){return v.default.number(e.pointerId)?e.pointerId:e.identifier},L.setCoords=function(e,t,i){var r=t.length>1?xr(t):t[0];_r(r,e.page),wr(r,e.client),e.timeStamp=i},L.getTouchPair=On,L.pointerAverage=xr,L.touchBBox=function(e){if(!e.length)return null;var t=On(e),i=Math.min(t[0].pageX,t[1].pageX),r=Math.min(t[0].pageY,t[1].pageY),s=Math.max(t[0].pageX,t[1].pageX),c=Math.max(t[0].pageY,t[1].pageY);return{x:i,y:r,left:i,top:r,right:s,bottom:c,width:s-i,height:c-r}},L.touchDistance=function(e,t){var i=t+"X",r=t+"Y",s=On(e),c=s[0][i]-s[1][i],h=s[0][r]-s[1][r];return(0,qe.default)(c,h)},L.touchAngle=function(e,t){var i=t+"X",r=t+"Y",s=On(e),c=s[1][i]-s[0][i],h=s[1][r]-s[0][r];return 180*Math.atan2(h,c)/Math.PI},L.getPointerType=function(e){return v.default.string(e.pointerType)?e.pointerType:v.default.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type||"")||e instanceof q.default.Touch?"touch":"mouse"},L.getEventTargets=function(e){var t=v.default.func(e.composedPath)?e.composedPath():e.path;return[R.getActualElement(t?t[0]:e.target),R.getActualElement(e.currentTarget)]},L.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},L.coordsToEvent=function(e){return{coords:e,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(L,"pointerExtend",{enumerable:!0,get:function(){return Qt.default}});var Lt={};function ma(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.BaseEvent=void 0;var Er=function(){function e(r){(function(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")})(this,e),dt(this,"type",void 0),dt(this,"target",void 0),dt(this,"currentTarget",void 0),dt(this,"interactable",void 0),dt(this,"_interaction",void 0),dt(this,"timeStamp",void 0),dt(this,"immediatePropagationStopped",!1),dt(this,"propagationStopped",!1),this._interaction=r}var t,i;return t=e,(i=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&ma(t.prototype,i),e}();Lt.BaseEvent=Er,Object.defineProperty(Er.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var ie={};Object.defineProperty(ie,"__esModule",{value:!0}),ie.find=ie.findIndex=ie.from=ie.merge=ie.remove=ie.contains=void 0,ie.contains=function(e,t){return e.indexOf(t)!==-1},ie.remove=function(e,t){return e.splice(e.indexOf(t),1)};var kr=function(e,t){for(var i=0;i<t.length;i++){var r=t[i];e.push(r)}return e};ie.merge=kr,ie.from=function(e){return kr([],e)};var Sr=function(e,t){for(var i=0;i<e.length;i++)if(t(e[i],i,e))return i;return-1};ie.findIndex=Sr,ie.find=function(e,t){return e[Sr(e,t)]};var Qe={};function Pr(e){return(Pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ya(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Or(e,t){return(Or=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i})(e,t)}function ba(e,t){return!t||Pr(t)!=="object"&&typeof t!="function"?$e(e):t}function $e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ki(e){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ht(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.DropEvent=void 0;var _a=function(e){(function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),f&&Or(u,f)})(h,e);var t,i,r,s,c=(r=h,s=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var u,f=ki(r);if(s){var g=ki(this).constructor;u=Reflect.construct(f,arguments,g)}else u=f.apply(this,arguments);return ba(this,u)});function h(u,f,g){var y;(function(w,P){if(!(w instanceof P))throw new TypeError("Cannot call a class as a function")})(this,h),ht($e(y=c.call(this,f._interaction)),"target",void 0),ht($e(y),"dropzone",void 0),ht($e(y),"dragEvent",void 0),ht($e(y),"relatedTarget",void 0),ht($e(y),"draggable",void 0),ht($e(y),"timeStamp",void 0),ht($e(y),"propagationStopped",!1),ht($e(y),"immediatePropagationStopped",!1);var b=g==="dragleave"?u.prev:u.cur,E=b.element,k=b.dropzone;return y.type=g,y.target=E,y.currentTarget=E,y.dropzone=k,y.dragEvent=f,y.relatedTarget=f.target,y.draggable=f.interactable,y.timeStamp=f.timeStamp,y}return t=h,(i=[{key:"reject",value:function(){var u=this,f=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&f.cur.dropzone===this.dropzone&&f.cur.element===this.target)if(f.prev.dropzone=this.dropzone,f.prev.element=this.target,f.rejected=!0,f.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var g=f.activeDrops,y=ie.findIndex(g,function(E){var k=E.dropzone,w=E.element;return k===u.dropzone&&w===u.target});f.activeDrops.splice(y,1);var b=new h(f,this.dragEvent,"dropdeactivate");b.dropzone=this.dropzone,b.target=this.target,this.dropzone.fire(b)}else this.dropzone.fire(new h(f,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&ya(t.prototype,i),h}(Lt.BaseEvent);Qe.DropEvent=_a;var Cn={};function Cr(e,t){for(var i=0;i<e.slice().length;i++){var r=e.slice()[i],s=r.dropzone,c=r.element;t.dropzone=s,t.target=c,s.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function Si(e,t){for(var i=function(c,h){for(var u=c.interactables,f=[],g=0;g<u.list.length;g++){var y=u.list[g];if(y.options.drop.enabled){var b=y.options.drop.accept;if(!(v.default.element(b)&&b!==h||v.default.string(b)&&!R.matchesSelector(h,b)||v.default.func(b)&&!b({dropzone:y,draggableElement:h})))for(var E=v.default.string(y.target)?y._context.querySelectorAll(y.target):v.default.array(y.target)?y.target:[y.target],k=0;k<E.length;k++){var w=E[k];w!==h&&f.push({dropzone:y,element:w,rect:y.getRect(w)})}}}return f}(e,t),r=0;r<i.length;r++){var s=i[r];s.rect=s.dropzone.getRect(s.element)}return i}function Mr(e,t,i){for(var r=e.dropState,s=e.interactable,c=e.element,h=[],u=0;u<r.activeDrops.length;u++){var f=r.activeDrops[u],g=f.dropzone,y=f.element,b=f.rect;h.push(g.dropCheck(t,i,s,c,y,b)?y:null)}var E=R.indexOfDeepestElement(h);return r.activeDrops[E]||null}function Pi(e,t,i){var r=e.dropState,s={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return i.type==="dragstart"&&(s.activate=new Qe.DropEvent(r,i,"dropactivate"),s.activate.target=null,s.activate.dropzone=null),i.type==="dragend"&&(s.deactivate=new Qe.DropEvent(r,i,"dropdeactivate"),s.deactivate.target=null,s.deactivate.dropzone=null),r.rejected||(r.cur.element!==r.prev.element&&(r.prev.dropzone&&(s.leave=new Qe.DropEvent(r,i,"dragleave"),i.dragLeave=s.leave.target=r.prev.element,i.prevDropzone=s.leave.dropzone=r.prev.dropzone),r.cur.dropzone&&(s.enter=new Qe.DropEvent(r,i,"dragenter"),i.dragEnter=r.cur.element,i.dropzone=r.cur.dropzone)),i.type==="dragend"&&r.cur.dropzone&&(s.drop=new Qe.DropEvent(r,i,"drop"),i.dropzone=r.cur.dropzone,i.relatedTarget=r.cur.element),i.type==="dragmove"&&r.cur.dropzone&&(s.move=new Qe.DropEvent(r,i,"dropmove"),s.move.dragmove=i,i.dropzone=r.cur.dropzone)),s}function Oi(e,t){var i=e.dropState,r=i.activeDrops,s=i.cur,c=i.prev;t.leave&&c.dropzone.fire(t.leave),t.enter&&s.dropzone.fire(t.enter),t.move&&s.dropzone.fire(t.move),t.drop&&s.dropzone.fire(t.drop),t.deactivate&&Cr(r,t.deactivate),i.prev.dropzone=s.dropzone,i.prev.element=s.element}function Ar(e,t){var i=e.interaction,r=e.iEvent,s=e.event;if(r.type==="dragmove"||r.type==="dragend"){var c=i.dropState;t.dynamicDrop&&(c.activeDrops=Si(t,i.element));var h=r,u=Mr(i,h,s);c.rejected=c.rejected&&!!u&&u.dropzone===c.cur.dropzone&&u.element===c.cur.element,c.cur.dropzone=u&&u.dropzone,c.cur.element=u&&u.element,c.events=Pi(i,0,h)}}Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.default=void 0;var Tr={id:"actions/drop",install:function(e){var t=e.actions,i=e.interactStatic,r=e.Interactable,s=e.defaults;e.usePlugin(I.default),r.prototype.dropzone=function(c){return function(h,u){if(v.default.object(u)){if(h.options.drop.enabled=u.enabled!==!1,u.listeners){var f=(0,bt.default)(u.listeners),g=Object.keys(f).reduce(function(y,b){return y[/^(enter|leave)/.test(b)?"drag".concat(b):/^(activate|deactivate|move)/.test(b)?"drop".concat(b):b]=f[b],y},{});h.off(h.options.drop.listeners),h.on(g),h.options.drop.listeners=g}return v.default.func(u.ondrop)&&h.on("drop",u.ondrop),v.default.func(u.ondropactivate)&&h.on("dropactivate",u.ondropactivate),v.default.func(u.ondropdeactivate)&&h.on("dropdeactivate",u.ondropdeactivate),v.default.func(u.ondragenter)&&h.on("dragenter",u.ondragenter),v.default.func(u.ondragleave)&&h.on("dragleave",u.ondragleave),v.default.func(u.ondropmove)&&h.on("dropmove",u.ondropmove),/^(pointer|center)$/.test(u.overlap)?h.options.drop.overlap=u.overlap:v.default.number(u.overlap)&&(h.options.drop.overlap=Math.max(Math.min(1,u.overlap),0)),"accept"in u&&(h.options.drop.accept=u.accept),"checker"in u&&(h.options.drop.checker=u.checker),h}return v.default.bool(u)?(h.options.drop.enabled=u,h):h.options.drop}(this,c)},r.prototype.dropCheck=function(c,h,u,f,g,y){return function(b,E,k,w,P,A,C){var j=!1;if(!(C=C||b.getRect(A)))return!!b.options.drop.checker&&b.options.drop.checker(E,k,j,b,A,w,P);var B=b.options.drop.overlap;if(B==="pointer"){var G=(0,Ke.default)(w,P,"drag"),J=L.getPageXY(E);J.x+=G.x,J.y+=G.y;var ae=J.x>C.left&&J.x<C.right,V=J.y>C.top&&J.y<C.bottom;j=ae&&V}var te=w.getRect(P);if(te&&B==="center"){var ze=te.left+te.width/2,rt=te.top+te.height/2;j=ze>=C.left&&ze<=C.right&&rt>=C.top&&rt<=C.bottom}return te&&v.default.number(B)&&(j=Math.max(0,Math.min(C.right,te.right)-Math.max(C.left,te.left))*Math.max(0,Math.min(C.bottom,te.bottom)-Math.max(C.top,te.top))/(te.width*te.height)>=B),b.options.drop.checker&&(j=b.options.drop.checker(E,k,j,b,A,w,P)),j}(this,c,h,u,f,g,y)},i.dynamicDrop=function(c){return v.default.bool(c)?(e.dynamicDrop=c,i):e.dynamicDrop},(0,D.default)(t.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),t.methodDict.drop="dropzone",e.dynamicDrop=!1,s.actions.drop=Tr.defaults},listeners:{"interactions:before-action-start":function(e){var t=e.interaction;t.prepared.name==="drag"&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var i=e.interaction,r=(e.event,e.iEvent);if(i.prepared.name==="drag"){var s=i.dropState;s.activeDrops=null,s.events=null,s.activeDrops=Si(t,i.element),s.events=Pi(i,0,r),s.events.activate&&(Cr(s.activeDrops,s.events.activate),t.fire("actions/drop:start",{interaction:i,dragEvent:r}))}},"interactions:action-move":Ar,"interactions:after-action-move":function(e,t){var i=e.interaction,r=e.iEvent;i.prepared.name==="drag"&&(Oi(i,i.dropState.events),t.fire("actions/drop:move",{interaction:i,dragEvent:r}),i.dropState.events={})},"interactions:action-end":function(e,t){if(e.interaction.prepared.name==="drag"){var i=e.interaction,r=e.iEvent;Ar(e,t),Oi(i,i.dropState.events),t.fire("actions/drop:end",{interaction:i,dragEvent:r})}},"interactions:stop":function(e){var t=e.interaction;if(t.prepared.name==="drag"){var i=t.dropState;i&&(i.activeDrops=null,i.events=null,i.cur.dropzone=null,i.cur.element=null,i.prev.dropzone=null,i.prev.element=null,i.rejected=!1)}}},getActiveDrops:Si,getDrop:Mr,getDropEvents:Pi,fireDropEvents:Oi,defaults:{enabled:!1,accept:null,overlap:"pointer"}},wa=Tr;Cn.default=wa;var Mn={};function Ci(e){var t=e.interaction,i=e.iEvent,r=e.phase;if(t.prepared.name==="gesture"){var s=t.pointers.map(function(g){return g.pointer}),c=r==="start",h=r==="end",u=t.interactable.options.deltaSource;if(i.touches=[s[0],s[1]],c)i.distance=L.touchDistance(s,u),i.box=L.touchBBox(s),i.scale=1,i.ds=0,i.angle=L.touchAngle(s,u),i.da=0,t.gesture.startDistance=i.distance,t.gesture.startAngle=i.angle;else if(h){var f=t.prevEvent;i.distance=f.distance,i.box=f.box,i.scale=f.scale,i.ds=0,i.angle=f.angle,i.da=0}else i.distance=L.touchDistance(s,u),i.box=L.touchBBox(s),i.scale=i.distance/t.gesture.startDistance,i.angle=L.touchAngle(s,u),i.ds=i.scale-t.gesture.scale,i.da=i.angle-t.gesture.angle;t.gesture.distance=i.distance,t.gesture.angle=i.angle,v.default.number(i.scale)&&i.scale!==1/0&&!isNaN(i.scale)&&(t.gesture.scale=i.scale)}}Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.default=void 0;var Mi={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,i=e.Interactable,r=e.defaults;i.prototype.gesturable=function(s){return v.default.object(s)?(this.options.gesture.enabled=s.enabled!==!1,this.setPerAction("gesture",s),this.setOnEvents("gesture",s),this):v.default.bool(s)?(this.options.gesture.enabled=s,this):this.options.gesture},t.map.gesture=Mi,t.methodDict.gesture="gesturable",r.actions.gesture=Mi.defaults},listeners:{"interactions:action-start":Ci,"interactions:action-move":Ci,"interactions:action-end":Ci,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return e.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},xa=Mi;Mn.default=xa;var An={};function Ea(e,t,i,r,s,c,h){if(!t)return!1;if(t===!0){var u=v.default.number(c.width)?c.width:c.right-c.left,f=v.default.number(c.height)?c.height:c.bottom-c.top;if(h=Math.min(h,Math.abs((e==="left"||e==="right"?u:f)/2)),u<0&&(e==="left"?e="right":e==="right"&&(e="left")),f<0&&(e==="top"?e="bottom":e==="bottom"&&(e="top")),e==="left")return i.x<(u>=0?c.left:c.right)+h;if(e==="top")return i.y<(f>=0?c.top:c.bottom)+h;if(e==="right")return i.x>(u>=0?c.right:c.left)-h;if(e==="bottom")return i.y>(f>=0?c.bottom:c.top)-h}return!!v.default.element(r)&&(v.default.element(t)?t===r:R.matchesUpTo(r,t,s))}function Ir(e){var t=e.iEvent,i=e.interaction;if(i.prepared.name==="resize"&&i.resizeAxes){var r=t;i.interactable.options.resize.square?(i.resizeAxes==="y"?r.delta.x=r.delta.y:r.delta.y=r.delta.x,r.axes="xy"):(r.axes=i.resizeAxes,i.resizeAxes==="x"?r.delta.y=0:i.resizeAxes==="y"&&(r.delta.x=0))}}Object.defineProperty(An,"__esModule",{value:!0}),An.default=void 0;var et={id:"actions/resize",before:["actions/drag"],install:function(e){var t=e.actions,i=e.browser,r=e.Interactable,s=e.defaults;et.cursors=function(c){return c.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(i),et.defaultMargin=i.supportsTouch||i.supportsPointerEvent?20:10,r.prototype.resizable=function(c){return function(h,u,f){return v.default.object(u)?(h.options.resize.enabled=u.enabled!==!1,h.setPerAction("resize",u),h.setOnEvents("resize",u),v.default.string(u.axis)&&/^x$|^y$|^xy$/.test(u.axis)?h.options.resize.axis=u.axis:u.axis===null&&(h.options.resize.axis=f.defaults.actions.resize.axis),v.default.bool(u.preserveAspectRatio)?h.options.resize.preserveAspectRatio=u.preserveAspectRatio:v.default.bool(u.square)&&(h.options.resize.square=u.square),h):v.default.bool(u)?(h.options.resize.enabled=u,h):h.options.resize}(this,c,e)},t.map.resize=et,t.methodDict.resize="resizable",s.actions.resize=et.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(e){(function(t){var i=t.iEvent,r=t.interaction;if(r.prepared.name==="resize"&&r.prepared.edges){var s=i,c=r.rect;r._rects={start:(0,D.default)({},c),corrected:(0,D.default)({},c),previous:(0,D.default)({},c),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},s.edges=r.prepared.edges,s.rect=r._rects.corrected,s.deltaRect=r._rects.delta}})(e),Ir(e)},"interactions:action-move":function(e){(function(t){var i=t.iEvent,r=t.interaction;if(r.prepared.name==="resize"&&r.prepared.edges){var s=i,c=r.interactable.options.resize.invert,h=c==="reposition"||c==="negate",u=r.rect,f=r._rects,g=f.start,y=f.corrected,b=f.delta,E=f.previous;if((0,D.default)(E,y),h){if((0,D.default)(y,u),c==="reposition"){if(y.top>y.bottom){var k=y.top;y.top=y.bottom,y.bottom=k}if(y.left>y.right){var w=y.left;y.left=y.right,y.right=w}}}else y.top=Math.min(u.top,g.bottom),y.bottom=Math.max(u.bottom,g.top),y.left=Math.min(u.left,g.right),y.right=Math.max(u.right,g.left);for(var P in y.width=y.right-y.left,y.height=y.bottom-y.top,y)b[P]=y[P]-E[P];s.edges=r.prepared.edges,s.rect=y,s.deltaRect=b}})(e),Ir(e)},"interactions:action-end":function(e){var t=e.iEvent,i=e.interaction;if(i.prepared.name==="resize"&&i.prepared.edges){var r=t;r.edges=i.prepared.edges,r.rect=i._rects.corrected,r.deltaRect=i._rects.delta}},"auto-start:check":function(e){var t=e.interaction,i=e.interactable,r=e.element,s=e.rect,c=e.buttons;if(s){var h=(0,D.default)({},t.coords.cur.page),u=i.options.resize;if(u&&u.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(c&u.mouseButtons)!=0)){if(v.default.object(u.edges)){var f={left:!1,right:!1,top:!1,bottom:!1};for(var g in f)f[g]=Ea(g,u.edges[g],h,t._latestPointer.eventTarget,r,s,u.margin||et.defaultMargin);f.left=f.left&&!f.right,f.top=f.top&&!f.bottom,(f.left||f.right||f.top||f.bottom)&&(e.action={name:"resize",edges:f})}else{var y=u.axis!=="y"&&h.x>s.right-et.defaultMargin,b=u.axis!=="x"&&h.y>s.bottom-et.defaultMargin;(y||b)&&(e.action={name:"resize",axes:(y?"x":"")+(b?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,i=e.axis,r=e.name,s=et.cursors,c=null;if(i)c=s[r+i];else if(t){for(var h="",u=["top","bottom","left","right"],f=0;f<u.length;f++){var g=u[f];t[g]&&(h+=g)}c=s[h]}return c},defaultMargin:null},ka=et;An.default=ka;var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.default=void 0;var Sa={id:"actions",install:function(e){e.usePlugin(Mn.default),e.usePlugin(An.default),e.usePlugin(I.default),e.usePlugin(Cn.default)}};Tn.default=Sa;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.default=void 0;var tt,_t,Dr=0,Pa={request:function(e){return tt(e)},cancel:function(e){return _t(e)},init:function(e){if(tt=e.requestAnimationFrame,_t=e.cancelAnimationFrame,!tt)for(var t=["ms","moz","webkit","o"],i=0;i<t.length;i++){var r=t[i];tt=e["".concat(r,"RequestAnimationFrame")],_t=e["".concat(r,"CancelAnimationFrame")]||e["".concat(r,"CancelRequestAnimationFrame")]}tt=tt&&tt.bind(e),_t=_t&&_t.bind(e),tt||(tt=function(s){var c=Date.now(),h=Math.max(0,16-(c-Dr)),u=e.setTimeout(function(){s(c+h)},h);return Dr=c+h,u},_t=function(s){return clearTimeout(s)})}};Ne.default=Pa;var ft={};Object.defineProperty(ft,"__esModule",{value:!0}),ft.getContainer=In,ft.getScroll=en,ft.getScrollSize=function(e){return v.default.window(e)&&(e=window.document.body),{x:e.scrollWidth,y:e.scrollHeight}},ft.getScrollSizeDelta=function(e,t){var i=e.interaction,r=e.element,s=i&&i.interactable.options[i.prepared.name].autoScroll;if(!s||!s.enabled)return t(),{x:0,y:0};var c=In(s.container,i.interactable,r),h=en(c);t();var u=en(c);return{x:u.x-h.x,y:u.y-h.y}},ft.default=void 0;var Y={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){Y.isScrolling=!0,Ne.default.cancel(Y.i),e.autoScroll=Y,Y.interaction=e,Y.prevTime=Y.now(),Y.i=Ne.default.request(Y.scroll)},stop:function(){Y.isScrolling=!1,Y.interaction&&(Y.interaction.autoScroll=null),Ne.default.cancel(Y.i)},scroll:function(){var e=Y.interaction,t=e.interactable,i=e.element,r=e.prepared.name,s=t.options[r].autoScroll,c=In(s.container,t,i),h=Y.now(),u=(h-Y.prevTime)/1e3,f=s.speed*u;if(f>=1){var g={x:Y.x*f,y:Y.y*f};if(g.x||g.y){var y=en(c);v.default.window(c)?c.scrollBy(g.x,g.y):c&&(c.scrollLeft+=g.x,c.scrollTop+=g.y);var b=en(c),E={x:b.x-y.x,y:b.y-y.y};(E.x||E.y)&&t.fire({type:"autoscroll",target:i,interactable:t,delta:E,interaction:e,container:c})}Y.prevTime=h}Y.isScrolling&&(Ne.default.cancel(Y.i),Y.i=Ne.default.request(Y.scroll))},check:function(e,t){var i;return(i=e.options[t].autoScroll)==null?void 0:i.enabled},onInteractionMove:function(e){var t=e.interaction,i=e.pointer;if(t.interacting()&&Y.check(t.interactable,t.prepared.name))if(t.simulation)Y.x=Y.y=0;else{var r,s,c,h,u=t.interactable,f=t.element,g=t.prepared.name,y=u.options[g].autoScroll,b=In(y.container,u,f);if(v.default.window(b))h=i.clientX<Y.margin,r=i.clientY<Y.margin,s=i.clientX>b.innerWidth-Y.margin,c=i.clientY>b.innerHeight-Y.margin;else{var E=R.getElementClientRect(b);h=i.clientX<E.left+Y.margin,r=i.clientY<E.top+Y.margin,s=i.clientX>E.right-Y.margin,c=i.clientY>E.bottom-Y.margin}Y.x=s?1:h?-1:0,Y.y=c?1:r?-1:0,Y.isScrolling||(Y.margin=y.margin,Y.speed=y.speed,Y.start(t))}}};function In(e,t,i){return(v.default.string(e)?(0,H.getStringOptionResult)(e,t,i):e)||(0,a.getWindow)(i)}function en(e){return v.default.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var Oa={id:"auto-scroll",install:function(e){var t=e.defaults,i=e.actions;e.autoScroll=Y,Y.now=function(){return e.now()},i.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=Y.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,Y.stop(),Y.interaction&&(Y.interaction=null)},"interactions:stop":Y.stop,"interactions:action-move":function(e){return Y.onInteractionMove(e)}}};ft.default=Oa;var Me={};Object.defineProperty(Me,"__esModule",{value:!0}),Me.warnOnce=function(e,t){var i=!1;return function(){return i||(a.window.console.warn(t),i=!0),e.apply(this,arguments)}},Me.copyAction=function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e},Me.sign=void 0,Me.sign=function(e){return e>=0?1:-1};var Dn={};function Ca(e){return v.default.bool(e)?(this.options.styleCursor=e,this):e===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Ma(e){return v.default.func(e)?(this.options.actionChecker=e,this):e===null?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.default=void 0;var Aa={id:"auto-start/interactableMethods",install:function(e){var t=e.Interactable;t.prototype.getAction=function(i,r,s,c){var h=function(u,f,g,y,b){var E=u.getRect(y),k={action:null,interactable:u,interaction:g,element:y,rect:E,buttons:f.buttons||{0:1,1:4,3:8,4:16}[f.button]};return b.fire("auto-start:check",k),k.action}(this,r,s,c,e);return this.options.actionChecker?this.options.actionChecker(i,r,h,this,c,s):h},t.prototype.ignoreFrom=(0,Me.warnOnce)(function(i){return this._backCompatOption("ignoreFrom",i)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=(0,Me.warnOnce)(function(i){return this._backCompatOption("allowFrom",i)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=Ma,t.prototype.styleCursor=Ca}};Dn.default=Aa;var Rt={};function jr(e,t,i,r,s){return t.testIgnoreAllow(t.options[e.name],i,r)&&t.options[e.name].enabled&&jn(t,i,e,s)?e:null}function Ta(e,t,i,r,s,c,h){for(var u=0,f=r.length;u<f;u++){var g=r[u],y=s[u],b=g.getAction(t,i,e,y);if(b){var E=jr(b,g,y,c,h);if(E)return{action:E,interactable:g,element:y}}}return{action:null,interactable:null,element:null}}function Lr(e,t,i,r,s){var c=[],h=[],u=r;function f(y){c.push(y),h.push(u)}for(;v.default.element(u);){c=[],h=[],s.interactables.forEachMatch(u,f);var g=Ta(e,t,i,c,h,r,s);if(g.action&&!g.interactable.options[g.action.name].manualStart)return g;u=R.parentNode(u)}return{action:null,interactable:null,element:null}}function Rr(e,t,i){var r=t.action,s=t.interactable,c=t.element;r=r||{name:null},e.interactable=s,e.element=c,(0,Me.copyAction)(e.prepared,r),e.rect=s&&r.name?s.getRect(c):null,Fr(e,i),i.fire("autoStart:prepared",{interaction:e})}function jn(e,t,i,r){var s=e.options,c=s[i.name].max,h=s[i.name].maxPerElement,u=r.autoStart.maxInteractions,f=0,g=0,y=0;if(!(c&&h&&u))return!1;for(var b=0;b<r.interactions.list.length;b++){var E=r.interactions.list[b],k=E.prepared.name;if(E.interacting()&&(++f>=u||E.interactable===e&&((g+=k===i.name?1:0)>=c||E.element===t&&(y++,k===i.name&&y>=h))))return!1}return u>0}function zr(e,t){return v.default.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function Ai(e,t,i){var r=i.autoStart.cursorElement;r&&r!==e&&(r.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,i.autoStart.cursorElement=t?e:null}function Fr(e,t){var i=e.interactable,r=e.element,s=e.prepared;if(e.pointerType==="mouse"&&i&&i.options.styleCursor){var c="";if(s.name){var h=i.options[s.name].cursorChecker;c=v.default.func(h)?h(s,i,r,e._interacting):t.actions.map[s.name].getCursor(s)}Ai(e.element,c||"",t)}else t.autoStart.cursorElement&&Ai(t.autoStart.cursorElement,"",t)}Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=void 0;var Ia={id:"auto-start/base",before:["actions"],install:function(e){var t=e.interactStatic,i=e.defaults;e.usePlugin(Dn.default),i.base.actionChecker=null,i.base.styleCursor=!0,(0,D.default)(i.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=function(r){return zr(r,e)},e.autoStart={maxInteractions:1/0,withinInteractionLimit:jn,cursorElement:null}},listeners:{"interactions:down":function(e,t){var i=e.interaction,r=e.pointer,s=e.event,c=e.eventTarget;i.interacting()||Rr(i,Lr(i,r,s,c,t),t)},"interactions:move":function(e,t){(function(i,r){var s=i.interaction,c=i.pointer,h=i.event,u=i.eventTarget;s.pointerType!=="mouse"||s.pointerIsDown||s.interacting()||Rr(s,Lr(s,c,h,u,r),r)})(e,t),function(i,r){var s=i.interaction;if(s.pointerIsDown&&!s.interacting()&&s.pointerWasMoved&&s.prepared.name){r.fire("autoStart:before-start",i);var c=s.interactable,h=s.prepared.name;h&&c&&(c.options[h].manualStart||!jn(c,s.element,s.prepared,r)?s.stop():(s.start(s.prepared,c,s.element),Fr(s,r)))}}(e,t)},"interactions:stop":function(e,t){var i=e.interaction,r=i.interactable;r&&r.options.styleCursor&&Ai(i.element,"",t)}},maxInteractions:zr,withinInteractionLimit:jn,validateAction:jr};Rt.default=Ia;var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.default=void 0;var Da={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,t){var i=e.interaction,r=e.eventTarget,s=e.dx,c=e.dy;if(i.prepared.name==="drag"){var h=Math.abs(s),u=Math.abs(c),f=i.interactable.options.drag,g=f.startAxis,y=h>u?"x":h<u?"y":"xy";if(i.prepared.axis=f.lockAxis==="start"?y[0]:f.lockAxis,y!=="xy"&&g!=="xy"&&g!==y){i.prepared.name=null;for(var b=r,E=function(w){if(w!==i.interactable){var P=i.interactable.options.drag;if(!P.manualStart&&w.testIgnoreAllow(P,b,r)){var A=w.getAction(i.downPointer,i.downEvent,i,b);if(A&&A.name==="drag"&&function(C,j){if(!j)return!1;var B=j.options.drag.startAxis;return C==="xy"||B==="xy"||B===C}(y,w)&&Rt.default.validateAction(A,w,b,r,t))return w}}};v.default.element(b);){var k=t.interactables.forEachMatch(b,E);if(k){i.prepared.name="drag",i.interactable=k,i.element=b;break}b=(0,R.parentNode)(b)}}}}}};Ln.default=Da;var Rn={};function Ti(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var i=e.interactable.options;return i[t].hold||i[t].delay}Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.default=void 0;var ja={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(Rt.default),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,i=Ti(t);i>0&&(t.autoStartHoldTimer=setTimeout(function(){t.start(t.prepared,t.interactable,t.element)},i))},"interactions:move":function(e){var t=e.interaction,i=e.duplicate;t.autoStartHoldTimer&&t.pointerWasMoved&&!i&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":function(e){var t=e.interaction;Ti(t)>0&&(t.prepared.name=null)}},getHoldDuration:Ti};Rn.default=ja;var zn={};Object.defineProperty(zn,"__esModule",{value:!0}),zn.default=void 0;var La={id:"auto-start",install:function(e){e.usePlugin(Rt.default),e.usePlugin(Rn.default),e.usePlugin(Ln.default)}};zn.default=La;var zt={};function Ra(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):v.default.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault}function za(e){var t=e.interaction,i=e.event;t.interactable&&t.interactable.checkAndPreventDefault(i)}function Br(e){var t=e.Interactable;t.prototype.preventDefault=Ra,t.prototype.checkAndPreventDefault=function(i){return function(r,s,c){var h=r.options.preventDefault;if(h!=="never")if(h!=="always"){if(s.events.supportsPassive&&/^touch(start|move)$/.test(c.type)){var u=(0,a.getWindow)(c.target).document,f=s.getDocOptions(u);if(!f||!f.events||f.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(c.type)||v.default.element(c.target)&&(0,R.matchesSelector)(c.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||c.preventDefault()}else c.preventDefault()}(this,e,i)},e.interactions.docEvents.push({type:"dragstart",listener:function(i){for(var r=0;r<e.interactions.list.length;r++){var s=e.interactions.list[r];if(s.element&&(s.element===i.target||(0,R.nodeContains)(s.element,i.target)))return void s.interactable.checkAndPreventDefault(i)}}})}Object.defineProperty(zt,"__esModule",{value:!0}),zt.install=Br,zt.default=void 0;var Fa={id:"core/interactablePreventDefault",install:Br,listeners:["down","move","up","cancel"].reduce(function(e,t){return e["interactions:".concat(t)]=za,e},{})};zt.default=Fa;var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.default=void 0,Ii.default={};var tn,Di={};Object.defineProperty(Di,"__esModule",{value:!0}),Di.default=void 0,function(e){e.touchAction="touchAction",e.boxSizing="boxSizing",e.noListeners="noListeners"}(tn||(tn={})),tn.touchAction,tn.boxSizing,tn.noListeners;var Ba={id:"dev-tools",install:function(){}};Di.default=Ba;var wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=function e(t){var i={};for(var r in t){var s=t[r];v.default.plainObject(s)?i[r]=e(s):v.default.array(s)?i[r]=ie.from(s):i[r]=s}return i};var xt={};function Nr(e,t){return function(i){if(Array.isArray(i))return i}(e)||function(i,r){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(i)){var s=[],c=!0,h=!1,u=void 0;try{for(var f,g=i[Symbol.iterator]();!(c=(f=g.next()).done)&&(s.push(f.value),!r||s.length!==r);c=!0);}catch(y){h=!0,u=y}finally{try{c||g.return==null||g.return()}finally{if(h)throw u}}return s}}(e,t)||function(i,r){if(i){if(typeof i=="string")return Yr(i,r);var s=Object.prototype.toString.call(i).slice(8,-1);return s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set"?Array.from(i):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Yr(i,r):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yr(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}function Na(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Et(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(xt,"__esModule",{value:!0}),xt.getRectOffset=Xr,xt.default=void 0;var Ya=function(){function e(r){(function(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")})(this,e),Et(this,"states",[]),Et(this,"startOffset",{left:0,right:0,top:0,bottom:0}),Et(this,"startDelta",void 0),Et(this,"result",void 0),Et(this,"endResult",void 0),Et(this,"edges",void 0),Et(this,"interaction",void 0),this.interaction=r,this.result=Fn()}var t,i;return t=e,(i=[{key:"start",value:function(r,s){var c=r.phase,h=this.interaction,u=function(g){var y=g.interactable.options[g.prepared.name],b=y.modifiers;return b&&b.length?b:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(E){var k=y[E];return k&&k.enabled&&{options:k,methods:k._methods}}).filter(function(E){return!!E})}(h);this.prepareStates(u),this.edges=(0,D.default)({},h.edges),this.startOffset=Xr(h.rect,s),this.startDelta={x:0,y:0};var f=this.fillArg({phase:c,pageCoords:s,preEnd:!1});return this.result=Fn(),this.startAll(f),this.result=this.setAll(f)}},{key:"fillArg",value:function(r){var s=this.interaction;return r.interaction=s,r.interactable=s.interactable,r.element=s.element,r.rect=r.rect||s.rect,r.edges=this.edges,r.startOffset=this.startOffset,r}},{key:"startAll",value:function(r){for(var s=0;s<this.states.length;s++){var c=this.states[s];c.methods.start&&(r.state=c,c.methods.start(r))}}},{key:"setAll",value:function(r){var s=r.phase,c=r.preEnd,h=r.skipModifiers,u=r.rect;r.coords=(0,D.default)({},r.pageCoords),r.rect=(0,D.default)({},u);for(var f=h?this.states.slice(h):this.states,g=Fn(r.coords,r.rect),y=0;y<f.length;y++){var b,E=f[y],k=E.options,w=(0,D.default)({},r.coords),P=null;(b=E.methods)!=null&&b.set&&this.shouldDo(k,c,s)&&(r.state=E,P=E.methods.set(r),H.addEdges(this.interaction.edges,r.rect,{x:r.coords.x-w.x,y:r.coords.y-w.y})),g.eventProps.push(P)}g.delta.x=r.coords.x-r.pageCoords.x,g.delta.y=r.coords.y-r.pageCoords.y,g.rectDelta.left=r.rect.left-u.left,g.rectDelta.right=r.rect.right-u.right,g.rectDelta.top=r.rect.top-u.top,g.rectDelta.bottom=r.rect.bottom-u.bottom;var A=this.result.coords,C=this.result.rect;if(A&&C){var j=g.rect.left!==C.left||g.rect.right!==C.right||g.rect.top!==C.top||g.rect.bottom!==C.bottom;g.changed=j||A.x!==g.coords.x||A.y!==g.coords.y}return g}},{key:"applyToInteraction",value:function(r){var s=this.interaction,c=r.phase,h=s.coords.cur,u=s.coords.start,f=this.result,g=this.startDelta,y=f.delta;c==="start"&&(0,D.default)(this.startDelta,f.delta);for(var b=0;b<[[u,g],[h,y]].length;b++){var E=Nr([[u,g],[h,y]][b],2),k=E[0],w=E[1];k.page.x+=w.x,k.page.y+=w.y,k.client.x+=w.x,k.client.y+=w.y}var P=this.result.rectDelta,A=r.rect||s.rect;A.left+=P.left,A.right+=P.right,A.top+=P.top,A.bottom+=P.bottom,A.width=A.right-A.left,A.height=A.bottom-A.top}},{key:"setAndApply",value:function(r){var s=this.interaction,c=r.phase,h=r.preEnd,u=r.skipModifiers,f=this.setAll(this.fillArg({preEnd:h,phase:c,pageCoords:r.modifiedCoords||s.coords.cur.page}));if(this.result=f,!f.changed&&(!u||u<this.states.length)&&s.interacting())return!1;if(r.modifiedCoords){var g=s.coords.cur.page,y={x:r.modifiedCoords.x-g.x,y:r.modifiedCoords.y-g.y};f.coords.x+=y.x,f.coords.y+=y.y,f.delta.x+=y.x,f.delta.y+=y.y}this.applyToInteraction(r)}},{key:"beforeEnd",value:function(r){var s=r.interaction,c=r.event,h=this.states;if(h&&h.length){for(var u=!1,f=0;f<h.length;f++){var g=h[f];r.state=g;var y=g.options,b=g.methods,E=b.beforeEnd&&b.beforeEnd(r);if(E)return this.endResult=E,!1;u=u||!u&&this.shouldDo(y,!0,r.phase,!0)}u&&s.move({event:c,preEnd:!0})}}},{key:"stop",value:function(r){var s=r.interaction;if(this.states&&this.states.length){var c=(0,D.default)({states:this.states,interactable:s.interactable,element:s.element,rect:null},r);this.fillArg(c);for(var h=0;h<this.states.length;h++){var u=this.states[h];c.state=u,u.methods.stop&&u.methods.stop(c)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(r){this.states=[];for(var s=0;s<r.length;s++){var c=r[s],h=c.options,u=c.methods,f=c.name;this.states.push({options:h,methods:u,index:s,name:f})}return this.states}},{key:"restoreInteractionCoords",value:function(r){var s=r.interaction,c=s.coords,h=s.rect,u=s.modification;if(u.result){for(var f=u.startDelta,g=u.result,y=g.delta,b=g.rectDelta,E=[[c.start,f],[c.cur,y]],k=0;k<E.length;k++){var w=Nr(E[k],2),P=w[0],A=w[1];P.page.x-=A.x,P.page.y-=A.y,P.client.x-=A.x,P.client.y-=A.y}h.left-=b.left,h.right-=b.right,h.top-=b.top,h.bottom-=b.bottom}}},{key:"shouldDo",value:function(r,s,c,h){return!(!r||r.enabled===!1||h&&!r.endOnly||r.endOnly&&!s||c==="start"&&!r.setStart)}},{key:"copyFrom",value:function(r){this.startOffset=r.startOffset,this.startDelta=r.startDelta,this.edges=r.edges,this.states=r.states.map(function(s){return(0,wt.default)(s)}),this.result=Fn((0,D.default)({},r.result.coords),(0,D.default)({},r.result.rect))}},{key:"destroy",value:function(){for(var r in this)this[r]=null}}])&&Na(t.prototype,i),e}();function Fn(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Xr(e,t){return e?{left:t.x-e.left,top:t.y-e.top,right:e.right-t.x,bottom:e.bottom-t.y}:{left:0,top:0,right:0,bottom:0}}xt.default=Ya;var ye={};function Bn(e){var t=e.iEvent,i=e.interaction.modification.result;i&&(t.modifiers=i.eventProps)}Object.defineProperty(ye,"__esModule",{value:!0}),ye.makeModifier=function(e,t){var i=e.defaults,r={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop},s=function(c){var h=c||{};for(var u in h.enabled=h.enabled!==!1,i)u in h||(h[u]=i[u]);var f={options:h,methods:r,name:t,enable:function(){return h.enabled=!0,f},disable:function(){return h.enabled=!1,f}};return f};return t&&typeof t=="string"&&(s._defaults=i,s._methods=r),s},ye.addEventModifiers=Bn,ye.default=void 0;var Xa={id:"modifiers/base",before:["actions"],install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){var t=e.interaction;t.modification=new xt.default(t)},"interactions:before-action-start":function(e){var t=e.interaction.modification;t.start(e,e.interaction.coords.start.page),e.interaction.edges=t.edges,t.applyToInteraction(e)},"interactions:before-action-move":function(e){return e.interaction.modification.setAndApply(e)},"interactions:before-action-end":function(e){return e.interaction.modification.beforeEnd(e)},"interactions:action-start":Bn,"interactions:action-move":Bn,"interactions:action-end":Bn,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}}};ye.default=Xa;var nn={};Object.defineProperty(nn,"__esModule",{value:!0}),nn.defaults=void 0,nn.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var rn={};function Wr(e){return(Wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Wa(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i})(e,t)}function Ga(e,t){return!t||Wr(t)!=="object"&&typeof t!="function"?$(e):t}function $(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ji(e){return(ji=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ee(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(rn,"__esModule",{value:!0}),rn.InteractEvent=void 0;var Ur=function(e){(function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),f&&Gr(u,f)})(h,e);var t,i,r,s,c=(r=h,s=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var u,f=ji(r);if(s){var g=ji(this).constructor;u=Reflect.construct(f,arguments,g)}else u=f.apply(this,arguments);return Ga(this,u)});function h(u,f,g,y,b,E,k){var w;(function(ae,V){if(!(ae instanceof V))throw new TypeError("Cannot call a class as a function")})(this,h),ee($(w=c.call(this,u)),"target",void 0),ee($(w),"currentTarget",void 0),ee($(w),"relatedTarget",null),ee($(w),"screenX",void 0),ee($(w),"screenY",void 0),ee($(w),"button",void 0),ee($(w),"buttons",void 0),ee($(w),"ctrlKey",void 0),ee($(w),"shiftKey",void 0),ee($(w),"altKey",void 0),ee($(w),"metaKey",void 0),ee($(w),"page",void 0),ee($(w),"client",void 0),ee($(w),"delta",void 0),ee($(w),"rect",void 0),ee($(w),"x0",void 0),ee($(w),"y0",void 0),ee($(w),"t0",void 0),ee($(w),"dt",void 0),ee($(w),"duration",void 0),ee($(w),"clientX0",void 0),ee($(w),"clientY0",void 0),ee($(w),"velocity",void 0),ee($(w),"speed",void 0),ee($(w),"swipe",void 0),ee($(w),"timeStamp",void 0),ee($(w),"axes",void 0),ee($(w),"preEnd",void 0),b=b||u.element;var P=u.interactable,A=(P&&P.options||nn.defaults).deltaSource,C=(0,Ke.default)(P,b,g),j=y==="start",B=y==="end",G=j?$(w):u.prevEvent,J=j?u.coords.start:B?{page:G.page,client:G.client,timeStamp:u.coords.cur.timeStamp}:u.coords.cur;return w.page=(0,D.default)({},J.page),w.client=(0,D.default)({},J.client),w.rect=(0,D.default)({},u.rect),w.timeStamp=J.timeStamp,B||(w.page.x-=C.x,w.page.y-=C.y,w.client.x-=C.x,w.client.y-=C.y),w.ctrlKey=f.ctrlKey,w.altKey=f.altKey,w.shiftKey=f.shiftKey,w.metaKey=f.metaKey,w.button=f.button,w.buttons=f.buttons,w.target=b,w.currentTarget=b,w.preEnd=E,w.type=k||g+(y||""),w.interactable=P,w.t0=j?u.pointers[u.pointers.length-1].downTime:G.t0,w.x0=u.coords.start.page.x-C.x,w.y0=u.coords.start.page.y-C.y,w.clientX0=u.coords.start.client.x-C.x,w.clientY0=u.coords.start.client.y-C.y,w.delta=j||B?{x:0,y:0}:{x:w[A].x-G[A].x,y:w[A].y-G[A].y},w.dt=u.coords.delta.timeStamp,w.duration=w.timeStamp-w.t0,w.velocity=(0,D.default)({},u.coords.velocity[A]),w.speed=(0,qe.default)(w.velocity.x,w.velocity.y),w.swipe=B||y==="inertiastart"?w.getSwipe():null,w}return t=h,(i=[{key:"getSwipe",value:function(){var u=this._interaction;if(u.prevEvent.speed<600||this.timeStamp-u.prevEvent.timeStamp>150)return null;var f=180*Math.atan2(u.prevEvent.velocityY,u.prevEvent.velocityX)/Math.PI;f<0&&(f+=360);var g=112.5<=f&&f<247.5,y=202.5<=f&&f<337.5;return{up:y,down:!y&&22.5<=f&&f<157.5,left:g,right:!g&&(292.5<=f||f<67.5),angle:f,speed:u.prevEvent.speed,velocity:{x:u.prevEvent.velocityX,y:u.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&Wa(t.prototype,i),h}(Lt.BaseEvent);rn.InteractEvent=Ur,Object.defineProperties(Ur.prototype,{pageX:{get:function(){return this.page.x},set:function(e){this.page.x=e}},pageY:{get:function(){return this.page.y},set:function(e){this.page.y=e}},clientX:{get:function(){return this.client.x},set:function(e){this.client.x=e}},clientY:{get:function(){return this.client.y},set:function(e){this.client.y=e}},dx:{get:function(){return this.delta.x},set:function(e){this.delta.x=e}},dy:{get:function(){return this.delta.y},set:function(e){this.delta.y=e}},velocityX:{get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},velocityY:{get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}});var on={};function an(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(on,"__esModule",{value:!0}),on.PointerInfo=void 0,on.PointerInfo=function e(t,i,r,s,c){(function(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),an(this,"id",void 0),an(this,"pointer",void 0),an(this,"event",void 0),an(this,"downTime",void 0),an(this,"downTarget",void 0),this.id=t,this.pointer=i,this.event=r,this.downTime=s,this.downTarget=c};var Nn,Yn,Pe={};function Ua(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(Pe,"__esModule",{value:!0}),Object.defineProperty(Pe,"PointerInfo",{enumerable:!0,get:function(){return on.PointerInfo}}),Pe.default=Pe.Interaction=Pe._ProxyMethods=Pe._ProxyValues=void 0,Pe._ProxyValues=Nn,function(e){e.interactable="",e.element="",e.prepared="",e.pointerIsDown="",e.pointerWasMoved="",e._proxy=""}(Nn||(Pe._ProxyValues=Nn={})),Pe._ProxyMethods=Yn,function(e){e.start="",e.move="",e.end="",e.stop="",e.interacting=""}(Yn||(Pe._ProxyMethods=Yn={}));var qa=0,qr=function(){function e(r){var s=this,c=r.pointerType,h=r.scopeFire;(function(E,k){if(!(E instanceof k))throw new TypeError("Cannot call a class as a function")})(this,e),le(this,"interactable",null),le(this,"element",null),le(this,"rect",void 0),le(this,"_rects",void 0),le(this,"edges",void 0),le(this,"_scopeFire",void 0),le(this,"prepared",{name:null,axis:null,edges:null}),le(this,"pointerType",void 0),le(this,"pointers",[]),le(this,"downEvent",null),le(this,"downPointer",{}),le(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),le(this,"prevEvent",null),le(this,"pointerIsDown",!1),le(this,"pointerWasMoved",!1),le(this,"_interacting",!1),le(this,"_ending",!1),le(this,"_stopped",!0),le(this,"_proxy",null),le(this,"simulation",null),le(this,"doMove",(0,Me.warnOnce)(function(E){this.move(E)},"The interaction.doMove() method has been renamed to interaction.move()")),le(this,"coords",{start:L.newCoords(),prev:L.newCoords(),cur:L.newCoords(),delta:L.newCoords(),velocity:L.newCoords()}),le(this,"_id",qa++),this._scopeFire=h,this.pointerType=c;var u=this;this._proxy={};var f=function(E){Object.defineProperty(s._proxy,E,{get:function(){return u[E]}})};for(var g in Nn)f(g);var y=function(E){Object.defineProperty(s._proxy,E,{value:function(){return u[E].apply(u,arguments)}})};for(var b in Yn)y(b);this._scopeFire("interactions:new",{interaction:this})}var t,i;return t=e,(i=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(r,s,c){var h=this.updatePointer(r,s,c,!0),u=this.pointers[h];this._scopeFire("interactions:down",{pointer:r,event:s,eventTarget:c,pointerIndex:h,pointerInfo:u,type:"down",interaction:this})}},{key:"start",value:function(r,s,c){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(r.name==="gesture"?2:1)||!s.options[r.name].enabled)&&((0,Me.copyAction)(this.prepared,r),this.interactable=s,this.element=c,this.rect=s.getRect(c),this.edges=this.prepared.edges?(0,D.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(r,s,c){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(r,s,c,!1);var h,u,f=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(h=this.coords.cur.client.x-this.coords.start.client.x,u=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,qe.default)(h,u)>this.pointerMoveTolerance);var g=this.getPointerIndex(r),y={pointer:r,pointerIndex:g,pointerInfo:this.pointers[g],event:s,type:"move",eventTarget:c,dx:h,dy:u,duplicate:f,interaction:this};f||L.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",y),f||this.simulation||(this.interacting()&&(y.type=null,this.move(y)),this.pointerWasMoved&&L.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(r){r&&r.event||L.setZeroCoords(this.coords.delta),(r=(0,D.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},r||{})).phase="move",this._doPhase(r)}},{key:"pointerUp",value:function(r,s,c,h){var u=this.getPointerIndex(r);u===-1&&(u=this.updatePointer(r,s,c,!1));var f=/cancel$/i.test(s.type)?"cancel":"up";this._scopeFire("interactions:".concat(f),{pointer:r,pointerIndex:u,pointerInfo:this.pointers[u],event:s,eventTarget:c,type:f,curEventTarget:h,interaction:this}),this.simulation||this.end(s),this.removePointer(r,s)}},{key:"documentBlur",value:function(r){this.end(r),this._scopeFire("interactions:blur",{event:r,type:"blur",interaction:this})}},{key:"end",value:function(r){var s;this._ending=!0,r=r||this._latestPointer.event,this.interacting()&&(s=this._doPhase({event:r,interaction:this,phase:"end"})),this._ending=!1,s===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(r){var s=L.getPointerId(r);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:ie.findIndex(this.pointers,function(c){return c.id===s})}},{key:"getPointerInfo",value:function(r){return this.pointers[this.getPointerIndex(r)]}},{key:"updatePointer",value:function(r,s,c,h){var u=L.getPointerId(r),f=this.getPointerIndex(r),g=this.pointers[f];return h=h!==!1&&(h||/(down|start)$/i.test(s.type)),g?g.pointer=r:(g=new on.PointerInfo(u,r,s,null,null),f=this.pointers.length,this.pointers.push(g)),L.setCoords(this.coords.cur,this.pointers.map(function(y){return y.pointer}),this._now()),L.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),h&&(this.pointerIsDown=!0,g.downTime=this.coords.cur.timeStamp,g.downTarget=c,L.pointerExtend(this.downPointer,r),this.interacting()||(L.copyCoords(this.coords.start,this.coords.cur),L.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=s,this.pointerWasMoved=!1)),this._updateLatestPointer(r,s,c),this._scopeFire("interactions:update-pointer",{pointer:r,event:s,eventTarget:c,down:h,pointerInfo:g,pointerIndex:f,interaction:this}),f}},{key:"removePointer",value:function(r,s){var c=this.getPointerIndex(r);if(c!==-1){var h=this.pointers[c];this._scopeFire("interactions:remove-pointer",{pointer:r,event:s,eventTarget:null,pointerIndex:c,pointerInfo:h,interaction:this}),this.pointers.splice(c,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(r,s,c){this._latestPointer.pointer=r,this._latestPointer.event=s,this._latestPointer.eventTarget=c}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(r,s,c,h){return new rn.InteractEvent(this,r,this.prepared.name,s,this.element,c,h)}},{key:"_fireEvent",value:function(r){this.interactable.fire(r),(!this.prevEvent||r.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=r)}},{key:"_doPhase",value:function(r){var s=r.event,c=r.phase,h=r.preEnd,u=r.type,f=this.rect;if(f&&c==="move"&&(H.addEdges(this.edges,f,this.coords.delta[this.interactable.options.deltaSource]),f.width=f.right-f.left,f.height=f.bottom-f.top),this._scopeFire("interactions:before-action-".concat(c),r)===!1)return!1;var g=r.iEvent=this._createPreparedEvent(s,c,h,u);return this._scopeFire("interactions:action-".concat(c),r),c==="start"&&(this.prevEvent=g),this._fireEvent(g),this._scopeFire("interactions:after-action-".concat(c),r),!0}},{key:"_now",value:function(){return Date.now()}}])&&Ua(t.prototype,i),e}();Pe.Interaction=qr;var Va=qr;Pe.default=Va;var kt={};function Vr(e){e.pointerIsDown&&(Ri(e.coords.cur,e.offset.total),e.offset.pending.x=0,e.offset.pending.y=0)}function Hr(e){Li(e.interaction)}function Li(e){if(!function(i){return!(!i.offset.pending.x&&!i.offset.pending.y)}(e))return!1;var t=e.offset.pending;return Ri(e.coords.cur,t),Ri(e.coords.delta,t),H.addEdges(e.edges,e.rect,t),t.x=0,t.y=0,!0}function Ha(e){var t=e.x,i=e.y;this.offset.pending.x+=t,this.offset.pending.y+=i,this.offset.total.x+=t,this.offset.total.y+=i}function Ri(e,t){var i=e.page,r=e.client,s=t.x,c=t.y;i.x+=s,i.y+=c,r.x+=s,r.y+=c}Object.defineProperty(kt,"__esModule",{value:!0}),kt.addTotal=Vr,kt.applyPending=Li,kt.default=void 0,Pe._ProxyMethods.offsetBy="";var Za={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(e){e.Interaction.prototype.offsetBy=Ha},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return Vr(e.interaction)},"interactions:before-action-start":Hr,"interactions:before-action-move":Hr,"interactions:before-action-end":function(e){var t=e.interaction;if(Li(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function(e){var t=e.interaction;t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}};kt.default=Za;var Ft={};function Ja(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.default=Ft.InertiaState=void 0;var Zr=function(){function e(r){(function(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")})(this,e),ge(this,"active",!1),ge(this,"isModified",!1),ge(this,"smoothEnd",!1),ge(this,"allowResume",!1),ge(this,"modification",void 0),ge(this,"modifierCount",0),ge(this,"modifierArg",void 0),ge(this,"startCoords",void 0),ge(this,"t0",0),ge(this,"v0",0),ge(this,"te",0),ge(this,"targetOffset",void 0),ge(this,"modifiedOffset",void 0),ge(this,"currentOffset",void 0),ge(this,"lambda_v0",0),ge(this,"one_ve_v0",0),ge(this,"timeout",void 0),ge(this,"interaction",void 0),this.interaction=r}var t,i;return t=e,(i=[{key:"start",value:function(r){var s=this.interaction,c=Xn(s);if(!c||!c.enabled)return!1;var h=s.coords.velocity.client,u=(0,qe.default)(h.x,h.y),f=this.modification||(this.modification=new xt.default(s));if(f.copyFrom(s.modification),this.t0=s._now(),this.allowResume=c.allowResume,this.v0=u,this.currentOffset={x:0,y:0},this.startCoords=s.coords.cur.page,this.modifierArg=f.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-s.coords.cur.timeStamp<50&&u>c.minSpeed&&u>c.endSpeed)this.startInertia();else{if(f.result=f.setAll(this.modifierArg),!f.result.changed)return!1;this.startSmoothEnd()}return s.modification.result.rect=null,s.offsetBy(this.targetOffset),s._doPhase({interaction:s,event:r,phase:"inertiastart"}),s.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),s.modification.result.rect=null,this.active=!0,s.simulation=this,!0}},{key:"startInertia",value:function(){var r=this,s=this.interaction.coords.velocity.client,c=Xn(this.interaction),h=c.resistance,u=-Math.log(c.endSpeed/this.v0)/h;this.targetOffset={x:(s.x-u)/h,y:(s.y-u)/h},this.te=u,this.lambda_v0=h/this.v0,this.one_ve_v0=1-c.endSpeed/this.v0;var f=this.modification,g=this.modifierArg;g.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},f.result=f.setAll(g),f.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+f.result.delta.x,y:this.targetOffset.y+f.result.delta.y}),this.onNextFrame(function(){return r.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var r=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return r.smoothEndTick()})}},{key:"onNextFrame",value:function(r){var s=this;this.timeout=Ne.default.request(function(){s.active&&r()})}},{key:"inertiaTick",value:function(){var r,s,c,h,u,f=this,g=this.interaction,y=Xn(g).resistance,b=(g._now()-this.t0)/1e3;if(b<this.te){var E,k=1-(Math.exp(-y*b)-this.lambda_v0)/this.one_ve_v0;this.isModified?(r=this.targetOffset.x,s=this.targetOffset.y,c=this.modifiedOffset.x,h=this.modifiedOffset.y,E={x:Jr(u=k,0,r,c),y:Jr(u,0,s,h)}):E={x:this.targetOffset.x*k,y:this.targetOffset.y*k};var w={x:E.x-this.currentOffset.x,y:E.y-this.currentOffset.y};this.currentOffset.x+=w.x,this.currentOffset.y+=w.y,g.offsetBy(w),g.move(),this.onNextFrame(function(){return f.inertiaTick()})}else g.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var r=this,s=this.interaction,c=s._now()-this.t0,h=Xn(s).smoothEndDuration;if(c<h){var u={x:Kr(c,0,this.targetOffset.x,h),y:Kr(c,0,this.targetOffset.y,h)},f={x:u.x-this.currentOffset.x,y:u.y-this.currentOffset.y};this.currentOffset.x+=f.x,this.currentOffset.y+=f.y,s.offsetBy(f),s.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return r.smoothEndTick()})}else s.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(r){var s=r.pointer,c=r.event,h=r.eventTarget,u=this.interaction;u.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),u.updatePointer(s,c,h,!0),u._doPhase({interaction:u,event:c,phase:"resume"}),(0,L.copyCoords)(u.coords.prev,u.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Ne.default.cancel(this.timeout)}}])&&Ja(t.prototype,i),e}();function Xn(e){var t=e.interactable,i=e.prepared;return t&&t.options&&i.name&&t.options[i.name].inertia}function Jr(e,t,i,r){var s=1-e;return s*s*t+2*s*e*i+e*e*r}function Kr(e,t,i,r){return-i*(e/=r)*(e-2)+t}Ft.InertiaState=Zr;var Ka={id:"inertia",before:["modifiers","actions"],install:function(e){var t=e.defaults;e.usePlugin(kt.default),e.usePlugin(ye.default),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){var t=e.interaction;t.inertia=new Zr(t)},"interactions:before-action-end":function(e){var t=e.interaction,i=e.event;return(!t._interacting||t.simulation||!t.inertia.start(i))&&null},"interactions:down":function(e){var t=e.interaction,i=e.eventTarget,r=t.inertia;if(r.active)for(var s=i;v.default.element(s);){if(s===t.element){r.resume(e);break}s=R.parentNode(s)}},"interactions:stop":function(e){var t=e.interaction.inertia;t.active&&t.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":ye.addEventModifiers,"interactions:action-inertiastart":ye.addEventModifiers,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};Ft.default=Ka;var sn={};function Qa(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ln(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Qr(e,t){for(var i=0;i<t.length;i++){var r=t[i];if(e.immediatePropagationStopped)break;r(e)}}Object.defineProperty(sn,"__esModule",{value:!0}),sn.Eventable=void 0;var $a=function(){function e(r){(function(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")})(this,e),ln(this,"options",void 0),ln(this,"types",{}),ln(this,"propagationStopped",!1),ln(this,"immediatePropagationStopped",!1),ln(this,"global",void 0),this.options=(0,D.default)({},r||{})}var t,i;return t=e,(i=[{key:"fire",value:function(r){var s,c=this.global;(s=this.types[r.type])&&Qr(r,s),!r.propagationStopped&&c&&(s=c[r.type])&&Qr(r,s)}},{key:"on",value:function(r,s){var c=(0,bt.default)(r,s);for(r in c)this.types[r]=ie.merge(this.types[r]||[],c[r])}},{key:"off",value:function(r,s){var c=(0,bt.default)(r,s);for(r in c){var h=this.types[r];if(h&&h.length)for(var u=0;u<c[r].length;u++){var f=c[r][u],g=h.indexOf(f);g!==-1&&h.splice(g,1)}}}},{key:"getRect",value:function(r){return null}}])&&Qa(t.prototype,i),e}();sn.Eventable=$a;var cn={};Object.defineProperty(cn,"__esModule",{value:!0}),cn.default=function(e,t){if(t.phaselessTypes[e])return!0;for(var i in t.map)if(e.indexOf(i)===0&&e.substr(i.length)in t.phases)return!0;return!1};var zi={};Object.defineProperty(zi,"__esModule",{value:!0}),zi.createInteractStatic=function(e){var t=function i(r,s){var c=e.interactables.get(r,s);return c||((c=e.interactables.new(r,s)).events.global=i.globalEvents),c};return t.getPointerAverage=L.pointerAverage,t.getTouchBBox=L.touchBBox,t.getTouchDistance=L.touchDistance,t.getTouchAngle=L.touchAngle,t.getElementRect=R.getElementRect,t.getElementClientRect=R.getElementClientRect,t.matchesSelector=R.matchesSelector,t.closest=R.closest,t.globalEvents={},t.version="1.10.11",t.scope=e,t.use=function(i,r){return this.scope.usePlugin(i,r),this},t.isSet=function(i,r){return!!this.scope.interactables.get(i,r&&r.context)},t.on=(0,Me.warnOnce)(function(i,r,s){if(v.default.string(i)&&i.search(" ")!==-1&&(i=i.trim().split(/ +/)),v.default.array(i)){for(var c=0;c<i.length;c++){var h=i[c];this.on(h,r,s)}return this}if(v.default.object(i)){for(var u in i)this.on(u,i[u],r);return this}return(0,cn.default)(i,this.scope.actions)?this.globalEvents[i]?this.globalEvents[i].push(r):this.globalEvents[i]=[r]:this.scope.events.add(this.scope.document,i,r,{options:s}),this},"The interact.on() method is being deprecated"),t.off=(0,Me.warnOnce)(function(i,r,s){if(v.default.string(i)&&i.search(" ")!==-1&&(i=i.trim().split(/ +/)),v.default.array(i)){for(var c=0;c<i.length;c++){var h=i[c];this.off(h,r,s)}return this}if(v.default.object(i)){for(var u in i)this.off(u,i[u],r);return this}var f;return(0,cn.default)(i,this.scope.actions)?i in this.globalEvents&&(f=this.globalEvents[i].indexOf(r))!==-1&&this.globalEvents[i].splice(f,1):this.scope.events.remove(this.scope.document,i,r,s),this},"The interact.off() method is being deprecated"),t.debug=function(){return this.scope},t.supportsTouch=function(){return re.default.supportsTouch},t.supportsPointerEvent=function(){return re.default.supportsPointerEvent},t.stop=function(){for(var i=0;i<this.scope.interactions.list.length;i++)this.scope.interactions.list[i].stop();return this},t.pointerMoveTolerance=function(i){return v.default.number(i)?(this.scope.interactions.pointerMoveTolerance=i,this):this.scope.interactions.pointerMoveTolerance},t.addDocument=function(i,r){this.scope.addDocument(i,r)},t.removeDocument=function(i){this.scope.removeDocument(i)},t};var Wn={};function es(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.Interactable=void 0;var ts=function(){function e(r,s,c,h){(function(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")})(this,e),nt(this,"options",void 0),nt(this,"_actions",void 0),nt(this,"target",void 0),nt(this,"events",new sn.Eventable),nt(this,"_context",void 0),nt(this,"_win",void 0),nt(this,"_doc",void 0),nt(this,"_scopeEvents",void 0),nt(this,"_rectChecker",void 0),this._actions=s.actions,this.target=r,this._context=s.context||c,this._win=(0,a.getWindow)((0,R.trySelector)(r)?this._context:r),this._doc=this._win.document,this._scopeEvents=h,this.set(s)}var t,i;return t=e,(i=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(r,s){return v.default.func(s.onstart)&&this.on("".concat(r,"start"),s.onstart),v.default.func(s.onmove)&&this.on("".concat(r,"move"),s.onmove),v.default.func(s.onend)&&this.on("".concat(r,"end"),s.onend),v.default.func(s.oninertiastart)&&this.on("".concat(r,"inertiastart"),s.oninertiastart),this}},{key:"updatePerActionListeners",value:function(r,s,c){(v.default.array(s)||v.default.object(s))&&this.off(r,s),(v.default.array(c)||v.default.object(c))&&this.on(r,c)}},{key:"setPerAction",value:function(r,s){var c=this._defaults;for(var h in s){var u=h,f=this.options[r],g=s[u];u==="listeners"&&this.updatePerActionListeners(r,f.listeners,g),v.default.array(g)?f[u]=ie.from(g):v.default.plainObject(g)?(f[u]=(0,D.default)(f[u]||{},(0,wt.default)(g)),v.default.object(c.perAction[u])&&"enabled"in c.perAction[u]&&(f[u].enabled=g.enabled!==!1)):v.default.bool(g)&&v.default.object(c.perAction[u])?f[u].enabled=g:f[u]=g}}},{key:"getRect",value:function(r){return r=r||(v.default.element(this.target)?this.target:null),v.default.string(this.target)&&(r=r||this._context.querySelector(this.target)),(0,R.getElementRect)(r)}},{key:"rectChecker",value:function(r){var s=this;return v.default.func(r)?(this._rectChecker=r,this.getRect=function(c){var h=(0,D.default)({},s._rectChecker(c));return"width"in h||(h.width=h.right-h.left,h.height=h.bottom-h.top),h},this):r===null?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(r,s){if((0,R.trySelector)(s)||v.default.object(s)){for(var c in this.options[r]=s,this._actions.map)this.options[c][r]=s;return this}return this.options[r]}},{key:"origin",value:function(r){return this._backCompatOption("origin",r)}},{key:"deltaSource",value:function(r){return r==="page"||r==="client"?(this.options.deltaSource=r,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(r){return this._context===r.ownerDocument||(0,R.nodeContains)(this._context,r)}},{key:"testIgnoreAllow",value:function(r,s,c){return!this.testIgnore(r.ignoreFrom,s,c)&&this.testAllow(r.allowFrom,s,c)}},{key:"testAllow",value:function(r,s,c){return!r||!!v.default.element(c)&&(v.default.string(r)?(0,R.matchesUpTo)(c,r,s):!!v.default.element(r)&&(0,R.nodeContains)(r,c))}},{key:"testIgnore",value:function(r,s,c){return!(!r||!v.default.element(c))&&(v.default.string(r)?(0,R.matchesUpTo)(c,r,s):!!v.default.element(r)&&(0,R.nodeContains)(r,c))}},{key:"fire",value:function(r){return this.events.fire(r),this}},{key:"_onOff",value:function(r,s,c,h){v.default.object(s)&&!v.default.array(s)&&(h=c,c=null);var u=r==="on"?"add":"remove",f=(0,bt.default)(s,c);for(var g in f){g==="wheel"&&(g=re.default.wheelEvent);for(var y=0;y<f[g].length;y++){var b=f[g][y];(0,cn.default)(g,this._actions)?this.events[r](g,b):v.default.string(this.target)?this._scopeEvents["".concat(u,"Delegate")](this.target,this._context,g,b,h):this._scopeEvents[u](this.target,g,b,h)}}return this}},{key:"on",value:function(r,s,c){return this._onOff("on",r,s,c)}},{key:"off",value:function(r,s,c){return this._onOff("off",r,s,c)}},{key:"set",value:function(r){var s=this._defaults;for(var c in v.default.object(r)||(r={}),this.options=(0,wt.default)(s.base),this._actions.methodDict){var h=c,u=this._actions.methodDict[h];this.options[h]={},this.setPerAction(h,(0,D.default)((0,D.default)({},s.perAction),s.actions[h])),this[u](r[h])}for(var f in r)v.default.func(this[f])&&this[f](r[f]);return this}},{key:"unset",value:function(){if(v.default.string(this.target))for(var r in this._scopeEvents.delegatedEvents)for(var s=this._scopeEvents.delegatedEvents[r],c=s.length-1;c>=0;c--){var h=s[c],u=h.selector,f=h.context,g=h.listeners;u===this.target&&f===this._context&&s.splice(c,1);for(var y=g.length-1;y>=0;y--)this._scopeEvents.removeDelegate(this.target,this._context,r,g[y][0],g[y][1])}else this._scopeEvents.remove(this.target,"all")}}])&&es(t.prototype,i),e}();Wn.Interactable=ts;var Gn={};function ns(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.InteractableSet=void 0;var is=function(){function e(r){var s=this;(function(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")})(this,e),Fi(this,"list",[]),Fi(this,"selectorMap",{}),Fi(this,"scope",void 0),this.scope=r,r.addListeners({"interactable:unset":function(c){var h=c.interactable,u=h.target,f=h._context,g=v.default.string(u)?s.selectorMap[u]:u[s.scope.id],y=ie.findIndex(g,function(b){return b.context===f});g[y]&&(g[y].context=null,g[y].interactable=null),g.splice(y,1)}})}var t,i;return t=e,(i=[{key:"new",value:function(r,s){s=(0,D.default)(s||{},{actions:this.scope.actions});var c=new this.scope.Interactable(r,s,this.scope.document,this.scope.events),h={context:c._context,interactable:c};return this.scope.addDocument(c._doc),this.list.push(c),v.default.string(r)?(this.selectorMap[r]||(this.selectorMap[r]=[]),this.selectorMap[r].push(h)):(c.target[this.scope.id]||Object.defineProperty(r,this.scope.id,{value:[],configurable:!0}),r[this.scope.id].push(h)),this.scope.fire("interactable:new",{target:r,options:s,interactable:c,win:this.scope._win}),c}},{key:"get",value:function(r,s){var c=s&&s.context||this.scope.document,h=v.default.string(r),u=h?this.selectorMap[r]:r[this.scope.id];if(!u)return null;var f=ie.find(u,function(g){return g.context===c&&(h||g.interactable.inContext(r))});return f&&f.interactable}},{key:"forEachMatch",value:function(r,s){for(var c=0;c<this.list.length;c++){var h=this.list[c],u=void 0;if((v.default.string(h.target)?v.default.element(r)&&R.matchesSelector(r,h.target):r===h.target)&&h.inContext(r)&&(u=s(h)),u!==void 0)return u}}}])&&ns(t.prototype,i),e}();Gn.InteractableSet=is;var Un={};function rs(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ni(e,t){return function(i){if(Array.isArray(i))return i}(e)||function(i,r){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(i)){var s=[],c=!0,h=!1,u=void 0;try{for(var f,g=i[Symbol.iterator]();!(c=(f=g.next()).done)&&(s.push(f.value),!r||s.length!==r);c=!0);}catch(y){h=!0,u=y}finally{try{c||g.return==null||g.return()}finally{if(h)throw u}}return s}}(e,t)||function(i,r){if(i){if(typeof i=="string")return $r(i,r);var s=Object.prototype.toString.call(i).slice(8,-1);return s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set"?Array.from(i):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?$r(i,r):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $r(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}Object.defineProperty(Un,"__esModule",{value:!0}),Un.default=void 0;var os=function(){function e(r){(function(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")})(this,e),Bi(this,"currentTarget",void 0),Bi(this,"originalEvent",void 0),Bi(this,"type",void 0),this.originalEvent=r,(0,Qt.default)(this,r)}var t,i;return t=e,(i=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&rs(t.prototype,i),e}();function un(e){if(!v.default.object(e))return{capture:!!e,passive:!1};var t=(0,D.default)({},e);return t.capture=!!e.capture,t.passive=!!e.passive,t}var as={id:"events",install:function(e){var t,i=[],r={},s=[],c={add:h,remove:u,addDelegate:function(y,b,E,k,w){var P=un(w);if(!r[E]){r[E]=[];for(var A=0;A<s.length;A++){var C=s[A];h(C,E,f),h(C,E,g,!0)}}var j=r[E],B=ie.find(j,function(G){return G.selector===y&&G.context===b});B||(B={selector:y,context:b,listeners:[]},j.push(B)),B.listeners.push([k,P])},removeDelegate:function(y,b,E,k,w){var P,A=un(w),C=r[E],j=!1;if(C)for(P=C.length-1;P>=0;P--){var B=C[P];if(B.selector===y&&B.context===b){for(var G=B.listeners,J=G.length-1;J>=0;J--){var ae=Ni(G[J],2),V=ae[0],te=ae[1],ze=te.capture,rt=te.passive;if(V===k&&ze===A.capture&&rt===A.passive){G.splice(J,1),G.length||(C.splice(P,1),u(b,E,f),u(b,E,g,!0)),j=!0;break}}if(j)break}}},delegateListener:f,delegateUseCapture:g,delegatedEvents:r,documents:s,targets:i,supportsOptions:!1,supportsPassive:!1};function h(y,b,E,k){var w=un(k),P=ie.find(i,function(A){return A.eventTarget===y});P||(P={eventTarget:y,events:{}},i.push(P)),P.events[b]||(P.events[b]=[]),y.addEventListener&&!ie.contains(P.events[b],E)&&(y.addEventListener(b,E,c.supportsOptions?w:w.capture),P.events[b].push(E))}function u(y,b,E,k){var w=un(k),P=ie.findIndex(i,function(J){return J.eventTarget===y}),A=i[P];if(A&&A.events)if(b!=="all"){var C=!1,j=A.events[b];if(j){if(E==="all"){for(var B=j.length-1;B>=0;B--)u(y,b,j[B],w);return}for(var G=0;G<j.length;G++)if(j[G]===E){y.removeEventListener(b,E,c.supportsOptions?w:w.capture),j.splice(G,1),j.length===0&&(delete A.events[b],C=!0);break}}C&&!Object.keys(A.events).length&&i.splice(P,1)}else for(b in A.events)A.events.hasOwnProperty(b)&&u(y,b,"all")}function f(y,b){for(var E=un(b),k=new os(y),w=r[y.type],P=Ni(L.getEventTargets(y),1)[0],A=P;v.default.element(A);){for(var C=0;C<w.length;C++){var j=w[C],B=j.selector,G=j.context;if(R.matchesSelector(A,B)&&R.nodeContains(G,P)&&R.nodeContains(G,A)){var J=j.listeners;k.currentTarget=A;for(var ae=0;ae<J.length;ae++){var V=Ni(J[ae],2),te=V[0],ze=V[1],rt=ze.capture,$i=ze.passive;rt===E.capture&&$i===E.passive&&te(k)}}}A=R.parentNode(A)}}function g(y){return f(y,!0)}return(t=e.document)==null||t.createElement("div").addEventListener("test",null,{get capture(){return c.supportsOptions=!0},get passive(){return c.supportsPassive=!0}}),e.events=c,c}};Un.default=as;var qn={};Object.defineProperty(qn,"__esModule",{value:!0}),qn.default=void 0;var Vn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0;t<Vn.methodOrder.length;t++){var i;i=Vn.methodOrder[t];var r=Vn[i](e);if(r)return r}return null},simulationResume:function(e){var t=e.pointerType,i=e.eventType,r=e.eventTarget,s=e.scope;if(!/down|start/i.test(i))return null;for(var c=0;c<s.interactions.list.length;c++){var h=s.interactions.list[c],u=r;if(h.simulation&&h.simulation.allowResume&&h.pointerType===t)for(;u;){if(u===h.element)return h;u=R.parentNode(u)}}return null},mouseOrPen:function(e){var t,i=e.pointerId,r=e.pointerType,s=e.eventType,c=e.scope;if(r!=="mouse"&&r!=="pen")return null;for(var h=0;h<c.interactions.list.length;h++){var u=c.interactions.list[h];if(u.pointerType===r){if(u.simulation&&!eo(u,i))continue;if(u.interacting())return u;t||(t=u)}}if(t)return t;for(var f=0;f<c.interactions.list.length;f++){var g=c.interactions.list[f];if(!(g.pointerType!==r||/down/i.test(s)&&g.simulation))return g}return null},hasPointer:function(e){for(var t=e.pointerId,i=e.scope,r=0;r<i.interactions.list.length;r++){var s=i.interactions.list[r];if(eo(s,t))return s}return null},idle:function(e){for(var t=e.pointerType,i=e.scope,r=0;r<i.interactions.list.length;r++){var s=i.interactions.list[r];if(s.pointers.length===1){var c=s.interactable;if(c&&(!c.options.gesture||!c.options.gesture.enabled))continue}else if(s.pointers.length>=2)continue;if(!s.interacting()&&t===s.pointerType)return s}return null}};function eo(e,t){return e.pointers.some(function(i){return i.id===t})}var ss=Vn;qn.default=ss;var Hn={};function to(e){return(to=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function no(e,t){return function(i){if(Array.isArray(i))return i}(e)||function(i,r){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(i)){var s=[],c=!0,h=!1,u=void 0;try{for(var f,g=i[Symbol.iterator]();!(c=(f=g.next()).done)&&(s.push(f.value),!r||s.length!==r);c=!0);}catch(y){h=!0,u=y}finally{try{c||g.return==null||g.return()}finally{if(h)throw u}}return s}}(e,t)||function(i,r){if(i){if(typeof i=="string")return io(i,r);var s=Object.prototype.toString.call(i).slice(8,-1);return s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set"?Array.from(i):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?io(i,r):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function io(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}function ls(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cs(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ro(e,t){return(ro=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i})(e,t)}function us(e,t){return!t||to(t)!=="object"&&typeof t!="function"?function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(e):t}function Yi(e){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.default=void 0;var Xi=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function oo(e,t){return function(i){var r=t.interactions.list,s=L.getPointerType(i),c=no(L.getEventTargets(i),2),h=c[0],u=c[1],f=[];if(/^touch/.test(i.type)){t.prevTouchTime=t.now();for(var g=0;g<i.changedTouches.length;g++){var y=i.changedTouches[g],b={pointer:y,pointerId:L.getPointerId(y),pointerType:s,eventType:i.type,eventTarget:h,curEventTarget:u,scope:t},E=ao(b);f.push([b.pointer,b.eventTarget,b.curEventTarget,E])}}else{var k=!1;if(!re.default.supportsPointerEvent&&/mouse/.test(i.type)){for(var w=0;w<r.length&&!k;w++)k=r[w].pointerType!=="mouse"&&r[w].pointerIsDown;k=k||t.now()-t.prevTouchTime<500||i.timeStamp===0}if(!k){var P={pointer:i,pointerId:L.getPointerId(i),pointerType:s,eventType:i.type,curEventTarget:u,eventTarget:h,scope:t},A=ao(P);f.push([P.pointer,P.eventTarget,P.curEventTarget,A])}}for(var C=0;C<f.length;C++){var j=no(f[C],4),B=j[0],G=j[1],J=j[2];j[3][e](B,i,G,J)}}}function ao(e){var t=e.pointerType,i=e.scope,r={interaction:qn.default.search(e),searchDetails:e};return i.fire("interactions:find",r),r.interaction||i.interactions.new({pointerType:t})}function Wi(e,t){var i=e.doc,r=e.scope,s=e.options,c=r.interactions.docEvents,h=r.events,u=h[t];for(var f in r.browser.isIOS&&!s.events&&(s.events={passive:!1}),h.delegatedEvents)u(i,f,h.delegateListener),u(i,f,h.delegateUseCapture,!0);for(var g=s&&s.events,y=0;y<c.length;y++){var b=c[y];u(i,b.type,b.listener,g)}}var ds={id:"core/interactions",install:function(e){for(var t={},i=0;i<Xi.length;i++){var r=Xi[i];t[r]=oo(r,e)}var s,c=re.default.pEventTypes;function h(){for(var u=0;u<e.interactions.list.length;u++){var f=e.interactions.list[u];if(f.pointerIsDown&&f.pointerType==="touch"&&!f._interacting)for(var g=function(){var b=f.pointers[y];e.documents.some(function(E){var k=E.doc;return(0,R.nodeContains)(k,b.downTarget)})||f.removePointer(b.pointer,b.event)},y=0;y<f.pointers.length;y++)g()}}(s=q.default.PointerEvent?[{type:c.down,listener:h},{type:c.down,listener:t.pointerDown},{type:c.move,listener:t.pointerMove},{type:c.up,listener:t.pointerUp},{type:c.cancel,listener:t.pointerUp}]:[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:h},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}]).push({type:"blur",listener:function(u){for(var f=0;f<e.interactions.list.length;f++)e.interactions.list[f].documentBlur(u)}}),e.prevTouchTime=0,e.Interaction=function(u){(function(w,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(P&&P.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),P&&ro(w,P)})(k,u);var f,g,y,b,E=(y=k,b=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var w,P=Yi(y);if(b){var A=Yi(this).constructor;w=Reflect.construct(P,arguments,A)}else w=P.apply(this,arguments);return us(this,w)});function k(){return ls(this,k),E.apply(this,arguments)}return f=k,(g=[{key:"pointerMoveTolerance",get:function(){return e.interactions.pointerMoveTolerance},set:function(w){e.interactions.pointerMoveTolerance=w}},{key:"_now",value:function(){return e.now()}}])&&cs(f.prototype,g),k}(Pe.default),e.interactions={list:[],new:function(u){u.scopeFire=function(g,y){return e.fire(g,y)};var f=new e.Interaction(u);return e.interactions.list.push(f),f},listeners:t,docEvents:s,pointerMoveTolerance:1},e.usePlugin(zt.default)},listeners:{"scope:add-document":function(e){return Wi(e,"add")},"scope:remove-document":function(e){return Wi(e,"remove")},"interactable:unset":function(e,t){for(var i=e.interactable,r=t.interactions.list.length-1;r>=0;r--){var s=t.interactions.list[r];s.interactable===i&&(s.stop(),t.fire("interactions:destroy",{interaction:s}),s.destroy(),t.interactions.list.length>2&&t.interactions.list.splice(r,1))}}},onDocSignal:Wi,doOnInteractions:oo,methodNames:Xi};Hn.default=ds;var dn={};function so(e){return(so=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Gi(e,t,i){return(Gi=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(r,s,c){var h=function(f,g){for(;!Object.prototype.hasOwnProperty.call(f,g)&&(f=Bt(f))!==null;);return f}(r,s);if(h){var u=Object.getOwnPropertyDescriptor(h,s);return u.get?u.get.call(c):u.value}})(e,t,i||e)}function lo(e,t){return(lo=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i})(e,t)}function hs(e,t){return!t||so(t)!=="object"&&typeof t!="function"?function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(e):t}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uo(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ho(e,t,i){return t&&uo(e.prototype,t),i&&uo(e,i),e}function be(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(dn,"__esModule",{value:!0}),dn.initScope=fo,dn.Scope=void 0;var fs=function(){function e(){var t=this;co(this,e),be(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),be(this,"isInitialized",!1),be(this,"listenerMaps",[]),be(this,"browser",re.default),be(this,"defaults",(0,wt.default)(nn.defaults)),be(this,"Eventable",sn.Eventable),be(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),be(this,"interactStatic",(0,zi.createInteractStatic)(this)),be(this,"InteractEvent",rn.InteractEvent),be(this,"Interactable",void 0),be(this,"interactables",new Gn.InteractableSet(this)),be(this,"_win",void 0),be(this,"document",void 0),be(this,"window",void 0),be(this,"documents",[]),be(this,"_plugins",{list:[],map:{}}),be(this,"onWindowUnload",function(r){return t.removeDocument(r.target)});var i=this;this.Interactable=function(r){(function(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),g&&lo(f,g)})(u,r);var s,c,h=(s=u,c=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var f,g=Bt(s);if(c){var y=Bt(this).constructor;f=Reflect.construct(g,arguments,y)}else f=g.apply(this,arguments);return hs(this,f)});function u(){return co(this,u),h.apply(this,arguments)}return ho(u,[{key:"_defaults",get:function(){return i.defaults}},{key:"set",value:function(f){return Gi(Bt(u.prototype),"set",this).call(this,f),i.fire("interactable:set",{options:f,interactable:this}),this}},{key:"unset",value:function(){Gi(Bt(u.prototype),"unset",this).call(this),i.interactables.list.splice(i.interactables.list.indexOf(this),1),i.fire("interactable:unset",{interactable:this})}}]),u}(Wn.Interactable)}return ho(e,[{key:"addListeners",value:function(t,i){this.listenerMaps.push({id:i,map:t})}},{key:"fire",value:function(t,i){for(var r=0;r<this.listenerMaps.length;r++){var s=this.listenerMaps[r].map[t];if(s&&s(i,this,t)===!1)return!1}}},{key:"init",value:function(t){return this.isInitialized?this:fo(this,t)}},{key:"pluginIsInstalled",value:function(t){return this._plugins.map[t.id]||this._plugins.list.indexOf(t)!==-1}},{key:"usePlugin",value:function(t,i){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,i),t.listeners&&t.before){for(var r=0,s=this.listenerMaps.length,c=t.before.reduce(function(u,f){return u[f]=!0,u[po(f)]=!0,u},{});r<s;r++){var h=this.listenerMaps[r].id;if(c[h]||c[po(h)])break}this.listenerMaps.splice(r,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}},{key:"addDocument",value:function(t,i){if(this.getDocIndex(t)!==-1)return!1;var r=a.getWindow(t);i=i?(0,D.default)({},i):{},this.documents.push({doc:t,options:i}),this.events.documents.push(t),t!==this.document&&this.events.add(r,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:r,scope:this,options:i})}},{key:"removeDocument",value:function(t){var i=this.getDocIndex(t),r=a.getWindow(t),s=this.documents[i].options;this.events.remove(r,"unload",this.onWindowUnload),this.documents.splice(i,1),this.events.documents.splice(i,1),this.fire("scope:remove-document",{doc:t,window:r,scope:this,options:s})}},{key:"getDocIndex",value:function(t){for(var i=0;i<this.documents.length;i++)if(this.documents[i].doc===t)return i;return-1}},{key:"getDocOptions",value:function(t){var i=this.getDocIndex(t);return i===-1?null:this.documents[i].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),e}();function fo(e,t){return e.isInitialized=!0,v.default.window(t)&&a.init(t),q.default.init(t),re.default.init(t),Ne.default.init(t),e.window=t,e.document=t.document,e.usePlugin(Hn.default),e.usePlugin(Un.default),e}function po(e){return e&&e.replace(/\/.*$/,"")}dn.Scope=fs;var we={};Object.defineProperty(we,"__esModule",{value:!0}),we.default=void 0;var vo=new dn.Scope,ps=vo.interactStatic;we.default=ps;var vs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:void 0;vo.init(vs);var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.default=void 0,Zn.default=function(){};var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.default=void 0,Jn.default=function(){};var Kn={};function go(e,t){return function(i){if(Array.isArray(i))return i}(e)||function(i,r){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(i)){var s=[],c=!0,h=!1,u=void 0;try{for(var f,g=i[Symbol.iterator]();!(c=(f=g.next()).done)&&(s.push(f.value),!r||s.length!==r);c=!0);}catch(y){h=!0,u=y}finally{try{c||g.return==null||g.return()}finally{if(h)throw u}}return s}}(e,t)||function(i,r){if(i){if(typeof i=="string")return mo(i,r);var s=Object.prototype.toString.call(i).slice(8,-1);return s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set"?Array.from(i):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?mo(i,r):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mo(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.default=void 0,Kn.default=function(e){var t=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(r){var s=go(r,2),c=s[0],h=s[1];return c in e||h in e}),i=function(r,s){for(var c=e.range,h=e.limits,u=h===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:h,f=e.offset,g=f===void 0?{x:0,y:0}:f,y={range:c,grid:e,x:null,y:null},b=0;b<t.length;b++){var E=go(t[b],2),k=E[0],w=E[1],P=Math.round((r-g.x)/e[k]),A=Math.round((s-g.y)/e[w]);y[k]=Math.max(u.left,Math.min(u.right,P*e[k]+g.x)),y[w]=Math.max(u.top,Math.min(u.bottom,A*e[w]+g.y))}return y};return i.grid=e,i.coordFields=t,i};var hn={};Object.defineProperty(hn,"__esModule",{value:!0}),Object.defineProperty(hn,"edgeTarget",{enumerable:!0,get:function(){return Zn.default}}),Object.defineProperty(hn,"elements",{enumerable:!0,get:function(){return Jn.default}}),Object.defineProperty(hn,"grid",{enumerable:!0,get:function(){return Kn.default}});var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.default=void 0;var gs={id:"snappers",install:function(e){var t=e.interactStatic;t.snappers=(0,D.default)(t.snappers||{},hn),t.createSnapGrid=t.snappers.grid}};Qn.default=gs;var Nt={};function yo(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,r)}return i}function Ui(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?yo(Object(i),!0).forEach(function(r){ms(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):yo(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function ms(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.aspectRatio=Nt.default=void 0;var bo={start:function(e){var t=e.state,i=e.rect,r=e.edges,s=e.pageCoords,c=t.options.ratio,h=t.options,u=h.equalDelta,f=h.modifiers;c==="preserve"&&(c=i.width/i.height),t.startCoords=(0,D.default)({},s),t.startRect=(0,D.default)({},i),t.ratio=c,t.equalDelta=u;var g=t.linkedEdges={top:r.top||r.left&&!r.bottom,left:r.left||r.top&&!r.right,bottom:r.bottom||r.right&&!r.top,right:r.right||r.bottom&&!r.left};if(t.xIsPrimaryAxis=!(!r.left&&!r.right),t.equalDelta)t.edgeSign=(g.left?1:-1)*(g.top?1:-1);else{var y=t.xIsPrimaryAxis?g.top:g.left;t.edgeSign=y?-1:1}if((0,D.default)(e.edges,g),f&&f.length){var b=new xt.default(e.interaction);b.copyFrom(e.interaction.modification),b.prepareStates(f),t.subModification=b,b.startAll(Ui({},e))}},set:function(e){var t=e.state,i=e.rect,r=e.coords,s=(0,D.default)({},r),c=t.equalDelta?ys:bs;if(c(t,t.xIsPrimaryAxis,r,i),!t.subModification)return null;var h=(0,D.default)({},i);(0,H.addEdges)(t.linkedEdges,h,{x:r.x-s.x,y:r.y-s.y});var u=t.subModification.setAll(Ui(Ui({},e),{},{rect:h,edges:t.linkedEdges,pageCoords:r,prevCoords:r,prevRect:h})),f=u.delta;return u.changed&&(c(t,Math.abs(f.x)>Math.abs(f.y),u.coords,u.rect),(0,D.default)(r,u.coords)),u.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function ys(e,t,i){var r=e.startCoords,s=e.edgeSign;t?i.y=r.y+(i.x-r.x)*s:i.x=r.x+(i.y-r.y)*s}function bs(e,t,i,r){var s=e.startRect,c=e.startCoords,h=e.ratio,u=e.edgeSign;if(t){var f=r.width/h;i.y=c.y+(f-s.height)*u}else{var g=r.height*h;i.x=c.x+(g-s.width)*u}}Nt.aspectRatio=bo;var _s=(0,ye.makeModifier)(bo,"aspectRatio");Nt.default=_s;var St={};Object.defineProperty(St,"__esModule",{value:!0}),St.default=void 0;var _o=function(){};_o._defaults={};var ws=_o;St.default=ws;var qi={};Object.defineProperty(qi,"__esModule",{value:!0}),Object.defineProperty(qi,"default",{enumerable:!0,get:function(){return St.default}});var Ee={};function Vi(e,t,i){return v.default.func(e)?H.resolveRectLike(e,t.interactable,t.element,[i.x,i.y,t]):H.resolveRectLike(e,t.interactable,t.element)}Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.getRestrictionRect=Vi,Ee.restrict=Ee.default=void 0;var wo={start:function(e){var t=e.rect,i=e.startOffset,r=e.state,s=e.interaction,c=e.pageCoords,h=r.options,u=h.elementRect,f=(0,D.default)({left:0,top:0,right:0,bottom:0},h.offset||{});if(t&&u){var g=Vi(h.restriction,s,c);if(g){var y=g.right-g.left-t.width,b=g.bottom-g.top-t.height;y<0&&(f.left+=y,f.right+=y),b<0&&(f.top+=b,f.bottom+=b)}f.left+=i.left-t.width*u.left,f.top+=i.top-t.height*u.top,f.right+=i.right-t.width*(1-u.right),f.bottom+=i.bottom-t.height*(1-u.bottom)}r.offset=f},set:function(e){var t=e.coords,i=e.interaction,r=e.state,s=r.options,c=r.offset,h=Vi(s.restriction,i,t);if(h){var u=H.xywhToTlbr(h);t.x=Math.max(Math.min(u.right-c.right,t.x),u.left+c.left),t.y=Math.max(Math.min(u.bottom-c.bottom,t.y),u.top+c.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};Ee.restrict=wo;var xs=(0,ye.makeModifier)(wo,"restrict");Ee.default=xs;var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.restrictEdges=Ve.default=void 0;var xo={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Eo={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function ko(e,t){for(var i=["top","left","bottom","right"],r=0;r<i.length;r++){var s=i[r];s in e||(e[s]=t[s])}return e}var So={noInner:xo,noOuter:Eo,start:function(e){var t,i=e.interaction,r=e.startOffset,s=e.state,c=s.options;if(c){var h=(0,Ee.getRestrictionRect)(c.offset,i,i.coords.start.page);t=H.rectToXY(h)}t=t||{x:0,y:0},s.offset={top:t.y+r.top,left:t.x+r.left,bottom:t.y-r.bottom,right:t.x-r.right}},set:function(e){var t=e.coords,i=e.edges,r=e.interaction,s=e.state,c=s.offset,h=s.options;if(i){var u=(0,D.default)({},t),f=(0,Ee.getRestrictionRect)(h.inner,r,u)||{},g=(0,Ee.getRestrictionRect)(h.outer,r,u)||{};ko(f,xo),ko(g,Eo),i.top?t.y=Math.min(Math.max(g.top+c.top,u.y),f.top+c.top):i.bottom&&(t.y=Math.max(Math.min(g.bottom+c.bottom,u.y),f.bottom+c.bottom)),i.left?t.x=Math.min(Math.max(g.left+c.left,u.x),f.left+c.left):i.right&&(t.x=Math.max(Math.min(g.right+c.right,u.x),f.right+c.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};Ve.restrictEdges=So;var Es=(0,ye.makeModifier)(So,"restrictEdges");Ve.default=Es;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.restrictRect=Yt.default=void 0;var ks=(0,D.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},Ee.restrict.defaults),Po={start:Ee.restrict.start,set:Ee.restrict.set,defaults:ks};Yt.restrictRect=Po;var Ss=(0,ye.makeModifier)(Po,"restrictRect");Yt.default=Ss;var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.restrictSize=Xt.default=void 0;var Ps={width:-1/0,height:-1/0},Os={width:1/0,height:1/0},Oo={start:function(e){return Ve.restrictEdges.start(e)},set:function(e){var t=e.interaction,i=e.state,r=e.rect,s=e.edges,c=i.options;if(s){var h=H.tlbrToXywh((0,Ee.getRestrictionRect)(c.min,t,e.coords))||Ps,u=H.tlbrToXywh((0,Ee.getRestrictionRect)(c.max,t,e.coords))||Os;i.options={endOnly:c.endOnly,inner:(0,D.default)({},Ve.restrictEdges.noInner),outer:(0,D.default)({},Ve.restrictEdges.noOuter)},s.top?(i.options.inner.top=r.bottom-h.height,i.options.outer.top=r.bottom-u.height):s.bottom&&(i.options.inner.bottom=r.top+h.height,i.options.outer.bottom=r.top+u.height),s.left?(i.options.inner.left=r.right-h.width,i.options.outer.left=r.right-u.width):s.right&&(i.options.inner.right=r.left+h.width,i.options.outer.right=r.left+u.width),Ve.restrictEdges.set(e),i.options=c}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Xt.restrictSize=Oo;var Cs=(0,ye.makeModifier)(Oo,"restrictSize");Xt.default=Cs;var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0}),Object.defineProperty(Hi,"default",{enumerable:!0,get:function(){return St.default}});var pt={};Object.defineProperty(pt,"__esModule",{value:!0}),pt.snap=pt.default=void 0;var Co={start:function(e){var t,i=e.interaction,r=e.interactable,s=e.element,c=e.rect,h=e.state,u=e.startOffset,f=h.options,g=f.offsetWithOrigin?function(E){var k=E.interaction.element;return(0,H.rectToXY)((0,H.resolveRectLike)(E.state.options.origin,null,null,[k]))||(0,Ke.default)(E.interactable,k,E.interaction.prepared.name)}(e):{x:0,y:0};if(f.offset==="startCoords")t={x:i.coords.start.page.x,y:i.coords.start.page.y};else{var y=(0,H.resolveRectLike)(f.offset,r,s,[i]);(t=(0,H.rectToXY)(y)||{x:0,y:0}).x+=g.x,t.y+=g.y}var b=f.relativePoints;h.offsets=c&&b&&b.length?b.map(function(E,k){return{index:k,relativePoint:E,x:u.left-c.width*E.x+t.x,y:u.top-c.height*E.y+t.y}}):[{index:0,relativePoint:null,x:t.x,y:t.y}]},set:function(e){var t=e.interaction,i=e.coords,r=e.state,s=r.options,c=r.offsets,h=(0,Ke.default)(t.interactable,t.element,t.prepared.name),u=(0,D.default)({},i),f=[];s.offsetWithOrigin||(u.x-=h.x,u.y-=h.y);for(var g=0;g<c.length;g++)for(var y=c[g],b=u.x-y.x,E=u.y-y.y,k=0,w=s.targets.length;k<w;k++){var P,A=s.targets[k];(P=v.default.func(A)?A(b,E,t._proxy,y,k):A)&&f.push({x:(v.default.number(P.x)?P.x:b)+y.x,y:(v.default.number(P.y)?P.y:E)+y.y,range:v.default.number(P.range)?P.range:s.range,source:A,index:k,offset:y})}for(var C={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},j=0;j<f.length;j++){var B=f[j],G=B.range,J=B.x-u.x,ae=B.y-u.y,V=(0,qe.default)(J,ae),te=V<=G;G===1/0&&C.inRange&&C.range!==1/0&&(te=!1),C.target&&!(te?C.inRange&&G!==1/0?V/G<C.distance/C.range:G===1/0&&C.range!==1/0||V<C.distance:!C.inRange&&V<C.distance)||(C.target=B,C.distance=V,C.range=G,C.inRange=te,C.delta.x=J,C.delta.y=ae)}return C.inRange&&(i.x=C.target.x,i.y=C.target.y),r.closest=C,C},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};pt.snap=Co;var Ms=(0,ye.makeModifier)(Co,"snap");pt.default=Ms;var it={};function Mo(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}Object.defineProperty(it,"__esModule",{value:!0}),it.snapSize=it.default=void 0;var Ao={start:function(e){var t=e.state,i=e.edges,r=t.options;if(!i)return null;e.state={options:{targets:null,relativePoints:[{x:i.left?0:1,y:i.top?0:1}],offset:r.offset||"self",origin:{x:0,y:0},range:r.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],pt.snap.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t,i,r=e.interaction,s=e.state,c=e.coords,h=s.options,u=s.offsets,f={x:c.x-u[0].x,y:c.y-u[0].y};s.options=(0,D.default)({},h),s.options.targets=[];for(var g=0;g<(h.targets||[]).length;g++){var y=(h.targets||[])[g],b=void 0;if(b=v.default.func(y)?y(f.x,f.y,r):y){for(var E=0;E<s.targetFields.length;E++){var k=(t=s.targetFields[E],i=2,function(C){if(Array.isArray(C))return C}(t)||function(C,j){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(C)){var B=[],G=!0,J=!1,ae=void 0;try{for(var V,te=C[Symbol.iterator]();!(G=(V=te.next()).done)&&(B.push(V.value),!j||B.length!==j);G=!0);}catch(ze){J=!0,ae=ze}finally{try{G||te.return==null||te.return()}finally{if(J)throw ae}}return B}}(t,i)||function(C,j){if(C){if(typeof C=="string")return Mo(C,j);var B=Object.prototype.toString.call(C).slice(8,-1);return B==="Object"&&C.constructor&&(B=C.constructor.name),B==="Map"||B==="Set"?Array.from(C):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Mo(C,j):void 0}}(t,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),w=k[0],P=k[1];if(w in b||P in b){b.x=b[w],b.y=b[P];break}}s.options.targets.push(b)}}var A=pt.snap.set(e);return s.options=h,A},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};it.snapSize=Ao;var As=(0,ye.makeModifier)(Ao,"snapSize");it.default=As;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.snapEdges=Wt.default=void 0;var To={start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],it.snapSize.start(e)):null},set:it.snapSize.set,defaults:(0,D.default)((0,wt.default)(it.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};Wt.snapEdges=To;var Ts=(0,ye.makeModifier)(To,"snapEdges");Wt.default=Ts;var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0}),Object.defineProperty(Zi,"default",{enumerable:!0,get:function(){return St.default}});var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0}),Object.defineProperty(Ji,"default",{enumerable:!0,get:function(){return St.default}});var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.default=void 0;var Is={aspectRatio:Nt.default,restrictEdges:Ve.default,restrict:Ee.default,restrictRect:Yt.default,restrictSize:Xt.default,snapEdges:Wt.default,snap:pt.default,snapSize:it.default,spring:Zi.default,avoid:qi.default,transform:Ji.default,rubberband:Hi.default};Gt.default=Is;var $n={};Object.defineProperty($n,"__esModule",{value:!0}),$n.default=void 0;var Ds={id:"modifiers",install:function(e){var t=e.interactStatic;for(var i in e.usePlugin(ye.default),e.usePlugin(Qn.default),t.modifiers=Gt.default,Gt.default){var r=Gt.default[i],s=r._defaults,c=r._methods;s._methods=c,e.defaults.perAction[i]=s}}};$n.default=Ds;var Pt={};function Io(e){return(Io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function js(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Do(e,t){return(Do=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i})(e,t)}function Ls(e,t){return!t||Io(t)!=="object"&&typeof t!="function"?Oe(e):t}function Oe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ki(e){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Ye(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.PointerEvent=Pt.default=void 0;var Rs=function(e){(function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),f&&Do(u,f)})(h,e);var t,i,r,s,c=(r=h,s=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var u,f=Ki(r);if(s){var g=Ki(this).constructor;u=Reflect.construct(f,arguments,g)}else u=f.apply(this,arguments);return Ls(this,u)});function h(u,f,g,y,b,E){var k;if(function(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}(this,h),Ye(Oe(k=c.call(this,b)),"type",void 0),Ye(Oe(k),"originalEvent",void 0),Ye(Oe(k),"pointerId",void 0),Ye(Oe(k),"pointerType",void 0),Ye(Oe(k),"double",void 0),Ye(Oe(k),"pageX",void 0),Ye(Oe(k),"pageY",void 0),Ye(Oe(k),"clientX",void 0),Ye(Oe(k),"clientY",void 0),Ye(Oe(k),"dt",void 0),Ye(Oe(k),"eventable",void 0),L.pointerExtend(Oe(k),g),g!==f&&L.pointerExtend(Oe(k),f),k.timeStamp=E,k.originalEvent=g,k.type=u,k.pointerId=L.getPointerId(f),k.pointerType=L.getPointerType(f),k.target=y,k.currentTarget=null,u==="tap"){var w=b.getPointerIndex(f);k.dt=k.timeStamp-b.pointers[w].downTime;var P=k.timeStamp-b.tapTime;k.double=!!(b.prevTap&&b.prevTap.type!=="doubletap"&&b.prevTap.target===k.target&&P<500)}else u==="doubletap"&&(k.dt=f.timeStamp-b.tapTime);return k}return t=h,(i=[{key:"_subtractOrigin",value:function(u){var f=u.x,g=u.y;return this.pageX-=f,this.pageY-=g,this.clientX-=f,this.clientY-=g,this}},{key:"_addOrigin",value:function(u){var f=u.x,g=u.y;return this.pageX+=f,this.pageY+=g,this.clientX+=f,this.clientY+=g,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&js(t.prototype,i),h}(Lt.BaseEvent);Pt.PointerEvent=Pt.default=Rs;var fn={};Object.defineProperty(fn,"__esModule",{value:!0}),fn.default=void 0;var ei={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(e){e.pointerEvents=ei,e.defaults.actions.pointerEvents=ei.defaults,(0,D.default)(e.actions.phaselessTypes,ei.types)},listeners:{"interactions:new":function(e){var t=e.interaction;t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,i=e.pointerInfo;!t&&i.hold||(i.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var i=e.interaction,r=e.pointer,s=e.event,c=e.eventTarget;e.duplicate||i.pointerIsDown&&!i.pointerWasMoved||(i.pointerIsDown&&Qi(e),vt({interaction:i,pointer:r,event:s,eventTarget:c,type:"move"},t))},"interactions:down":function(e,t){(function(i,r){for(var s=i.interaction,c=i.pointer,h=i.event,u=i.eventTarget,f=i.pointerIndex,g=s.pointers[f].hold,y=R.getPath(u),b={interaction:s,pointer:c,event:h,eventTarget:u,type:"hold",targets:[],path:y,node:null},E=0;E<y.length;E++){var k=y[E];b.node=k,r.fire("pointerEvents:collect-targets",b)}if(b.targets.length){for(var w=1/0,P=0;P<b.targets.length;P++){var A=b.targets[P].eventable.options.holdDuration;A<w&&(w=A)}g.duration=w,g.timeout=setTimeout(function(){vt({interaction:s,eventTarget:u,pointer:c,event:h,type:"hold"},r)},w)}})(e,t),vt(e,t)},"interactions:up":function(e,t){Qi(e),vt(e,t),function(i,r){var s=i.interaction,c=i.pointer,h=i.event,u=i.eventTarget;s.pointerWasMoved||vt({interaction:s,eventTarget:u,pointer:c,event:h,type:"tap"},r)}(e,t)},"interactions:cancel":function(e,t){Qi(e),vt(e,t)}},PointerEvent:Pt.PointerEvent,fire:vt,collectEventTargets:jo,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function vt(e,t){var i=e.interaction,r=e.pointer,s=e.event,c=e.eventTarget,h=e.type,u=e.targets,f=u===void 0?jo(e,t):u,g=new Pt.PointerEvent(h,r,s,c,i,t.now());t.fire("pointerEvents:new",{pointerEvent:g});for(var y={interaction:i,pointer:r,event:s,eventTarget:c,targets:f,type:h,pointerEvent:g},b=0;b<f.length;b++){var E=f[b];for(var k in E.props||{})g[k]=E.props[k];var w=(0,Ke.default)(E.eventable,E.node);if(g._subtractOrigin(w),g.eventable=E.eventable,g.currentTarget=E.node,E.eventable.fire(g),g._addOrigin(w),g.immediatePropagationStopped||g.propagationStopped&&b+1<f.length&&f[b+1].node!==g.currentTarget)break}if(t.fire("pointerEvents:fired",y),h==="tap"){var P=g.double?vt({interaction:i,pointer:r,event:s,eventTarget:c,type:"doubletap"},t):g;i.prevTap=P,i.tapTime=P.timeStamp}return g}function jo(e,t){var i=e.interaction,r=e.pointer,s=e.event,c=e.eventTarget,h=e.type,u=i.getPointerIndex(r),f=i.pointers[u];if(h==="tap"&&(i.pointerWasMoved||!f||f.downTarget!==c))return[];for(var g=R.getPath(c),y={interaction:i,pointer:r,event:s,eventTarget:c,type:h,path:g,targets:[],node:null},b=0;b<g.length;b++){var E=g[b];y.node=E,t.fire("pointerEvents:collect-targets",y)}return h==="hold"&&(y.targets=y.targets.filter(function(k){var w;return k.eventable.options.holdDuration===((w=i.pointers[u])==null?void 0:w.hold.duration)})),y.targets}function Qi(e){var t=e.interaction,i=e.pointerIndex,r=t.pointers[i].hold;r&&r.timeout&&(clearTimeout(r.timeout),r.timeout=null)}var zs=ei;fn.default=zs;var ti={};function Fs(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}Object.defineProperty(ti,"__esModule",{value:!0}),ti.default=void 0;var Bs={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(fn.default);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(e,t){return e["pointerEvents:".concat(t)]=Fs,e},{"pointerEvents:new":function(e){var t=e.pointerEvent;t.type==="hold"&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function(e,t){var i=e.interaction,r=e.pointerEvent,s=e.eventTarget,c=e.targets;if(r.type==="hold"&&c.length){var h=c[0].eventable.options.holdRepeatInterval;h<=0||(i.holdIntervalHandle=setTimeout(function(){t.pointerEvents.fire({interaction:i,eventTarget:s,type:"hold",pointer:r,event:r},t)},h))}}})};ti.default=Bs;var ni={};function Ns(e){return(0,D.default)(this.events.options,e),this}Object.defineProperty(ni,"__esModule",{value:!0}),ni.default=void 0;var Ys={id:"pointer-events/interactableTargets",install:function(e){var t=e.Interactable;t.prototype.pointerEvents=Ns;var i=t.prototype._backCompatOption;t.prototype._backCompatOption=function(r,s){var c=i.call(this,r,s);return c===this&&(this.events.options[r]=s),c}},listeners:{"pointerEvents:collect-targets":function(e,t){var i=e.targets,r=e.node,s=e.type,c=e.eventTarget;t.interactables.forEachMatch(r,function(h){var u=h.events,f=u.options;u.types[s]&&u.types[s].length&&h.testIgnoreAllow(f,r,c)&&i.push({node:r,eventable:u,props:{interactable:h}})})},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(i){return t.getRect(i)}},"interactable:set":function(e,t){var i=e.interactable,r=e.options;(0,D.default)(i.events.options,t.pointerEvents.defaults),(0,D.default)(i.events.options,r.pointerEvents||{})}}};ni.default=Ys;var ii={};Object.defineProperty(ii,"__esModule",{value:!0}),ii.default=void 0;var Xs={id:"pointer-events",install:function(e){e.usePlugin(fn),e.usePlugin(ti.default),e.usePlugin(ni.default)}};ii.default=Xs;var pn={};function Lo(e){var t=e.Interactable;e.actions.phases.reflow=!0,t.prototype.reflow=function(i){return function(r,s,c){for(var h=v.default.string(r.target)?ie.from(r._context.querySelectorAll(r.target)):[r.target],u=c.window.Promise,f=u?[]:null,g=function(){var b=h[y],E=r.getRect(b);if(!E)return"break";var k=ie.find(c.interactions.list,function(j){return j.interacting()&&j.interactable===r&&j.element===b&&j.prepared.name===s.name}),w=void 0;if(k)k.move(),f&&(w=k._reflowPromise||new u(function(j){k._reflowResolve=j}));else{var P=(0,H.tlbrToXywh)(E),A={page:{x:P.x,y:P.y},client:{x:P.x,y:P.y},timeStamp:c.now()},C=L.coordsToEvent(A);w=function(j,B,G,J,ae){var V=j.interactions.new({pointerType:"reflow"}),te={interaction:V,event:ae,pointer:ae,eventTarget:G,phase:"reflow"};V.interactable=B,V.element=G,V.prevEvent=ae,V.updatePointer(ae,ae,G,!0),L.setZeroCoords(V.coords.delta),(0,Me.copyAction)(V.prepared,J),V._doPhase(te);var ze=j.window.Promise,rt=ze?new ze(function($i){V._reflowResolve=$i}):void 0;return V._reflowPromise=rt,V.start(J,B,G),V._interacting?(V.move(te),V.end(ae)):(V.stop(),V._reflowResolve()),V.removePointer(ae,ae),rt}(c,r,b,s,C)}f&&f.push(w)},y=0;y<h.length&&g()!=="break";y++);return f&&u.all(f).then(function(){return r})}(this,i,e)}}Object.defineProperty(pn,"__esModule",{value:!0}),pn.install=Lo,pn.default=void 0;var Ws={id:"reflow",install:Lo,listeners:{"interactions:stop":function(e,t){var i=e.interaction;i.pointerType==="reflow"&&(i._reflowResolve&&i._reflowResolve(),ie.remove(t.interactions.list,i))}}};pn.default=Ws;var Re={exports:{}};function Ro(e){return(Ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(Re.exports,"__esModule",{value:!0}),Re.exports.default=void 0,we.default.use(zt.default),we.default.use(kt.default),we.default.use(ii.default),we.default.use(Ft.default),we.default.use($n.default),we.default.use(zn.default),we.default.use(Tn.default),we.default.use(ft.default),we.default.use(pn.default);var Gs=we.default;if(Re.exports.default=Gs,Ro(Re)==="object"&&Re)try{Re.exports=we.default}catch{}we.default.default=we.default,Re=Re.exports;var Ot={exports:{}};function zo(e){return(zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(Ot.exports,"__esModule",{value:!0}),Ot.exports.default=void 0;var Us=Re.default;if(Ot.exports.default=Us,zo(Ot)==="object"&&Ot)try{Ot.exports=Re.default}catch{}return Re.default.default=Re.default,Ot.exports})})(ta);var fl=hl(ta.exports);class pl{constructor(n){T(this,"_clickObservers",new Ct);T(this,"_rightClickObservers",new Ct);T(this,"_dragObservers",new Ct);T(this,"_pointerMoveObservers",new Ct);T(this,"_pointerUpObservers",new Ct);T(this,"_pointerOutObservers",new Ct);T(this,"_zoomObservers",new Ct);T(this,"_evtCache",[]);T(this,"_oldPos",null);T(this,"_initPos",null);T(this,"_buttonDown",null);T(this,"_inGesture",!1);fl(n).gesturable({onmove:o=>{if(o.scale!==1){const a={x:o.client.x,y:o.client.y};this._zoomObservers.notify({pos:a,factor:o.scale})}o.stopPropagation()},onstart:o=>{this._inGesture=!0},onend:o=>{this._inGesture=!1}}),n.addEventListener("pointerdown",o=>{this._inGesture||this._handleTouch(o)}),document.addEventListener("pointermove",o=>{this._inGesture||this._handleDrag(o)}),document.addEventListener("pointerup",o=>{this._initPos&&this._pointerUpObservers.notify({button:o.button,initPos:this._initPos,newPos:{x:o.clientX,y:o.clientY}}),this._handleOut(o)}),document.addEventListener("pointercancel",o=>{this._handleOut(o)}),n.addEventListener("wheel",o=>{const a={x:o.clientX,y:o.clientY},l=-Math.sign(o.deltaY);this._zoomObservers.notify({pos:a,dir:l})}),n.addEventListener("contextmenu",o=>o.preventDefault())}_handleTouch(n){if(this._evtCache.push(n),this._evtCache.length===1){const o={x:n.clientX,y:n.clientY};this._buttonDown=n.button,this._oldPos=o,n.button===2&&this._rightClickObservers.notify(o),n.button===0&&(this._initPos=o,this._clickObservers.notify(o))}}_handleDrag(n){const o={x:n.clientX,y:n.clientY};this._buttonDown===null?this._pointerMoveObservers.notify({oldPos:this._oldPos||{x:-1,y:-1},newPos:o}):this._buttonDown!==null&&this._oldPos&&(this._dragObservers.notify({oldPos:this._oldPos,newPos:o,button:this._buttonDown,initPos:this._initPos||{x:0,y:0}}),this._oldPos=o)}_handleOut(n){const o={x:n.clientX,y:n.clientY};this._buttonDown=null,this._pointerOutObservers.notify(o),this._evtCache=this._evtCache.filter(a=>a.pointerId!==n.pointerId),this._initPos=null}addObserver(n,o){switch(n){case"click":return this._clickObservers.subscribe(o);case"rightClick":return this._rightClickObservers.subscribe(o);case"drag":return this._dragObservers.subscribe(o);case"pointerMove":return this._pointerMoveObservers.subscribe(o);case"pointerUp":return this._pointerUpObservers.subscribe(o);case"pointerOut":return this._pointerOutObservers.subscribe(o);case"zoom":return this._zoomObservers.subscribe(o);default:return-1}}removeObserver(n,o){switch(n){case"click":return this._clickObservers.unsubscribe(o);case"rightClick":return this._rightClickObservers.unsubscribe(o);case"drag":return this._dragObservers.unsubscribe(o);case"pointerMove":return this._pointerMoveObservers.unsubscribe(o);case"pointerUp":return this._pointerUpObservers.unsubscribe(o);case"pointerOut":return this._pointerOutObservers.unsubscribe(o);case"zoom":return this._zoomObservers.unsubscribe(o);default:return null}}}class Be{constructor(n,o,a){T(this,"_sketch");T(this,"_frames");T(this,"_cursor");this._sketch=n,this._frames=o,this._cursor=a}get drawing(){return this._frames.currentDrawing()}init(){}click(n){}rightClick(n){var o;(o=this.drawing)==null||o.erase(this._sketch.gridCoordinate(n),this._sketch.size),this._sketch.updatePreview(),this._cursor.actif=!1,this._cursor.clear()}drag(n){}move(n){}out(n){}zoom(n){this._sketch.camera.zoom(this._sketch.gridCoordinate(n.pos),n.dir,n.factor)}unClick(n){this._sketch.dispatchUpdate()}exit(){}}class vl extends Be{click(n){var a;const o=this._sketch.gridCoordinate(n);o.x>=0&&o.y>=0&&o.x<this._sketch.width&&o.y<this._sketch.height&&((a=this.drawing)==null||a.bucket(o,this._sketch.color),this._sketch.updatePreview())}}class gl extends Be{drag(n){this._sketch.camera.drag(n.oldPos,n.newPos)}}class ml extends Be{click(n){var o;(o=this.drawing)==null||o.erase(this._sketch.gridCoordinate(n),this._sketch.size),this._sketch.updatePreview()}drag({newPos:n}){var o;(o=this.drawing)==null||o.erase(this._sketch.gridCoordinate(n),this._sketch.size),this._sketch.updatePreview()}}class yl extends Be{drag({initPos:n,newPos:o}){this._cursor.actif=!0,this._cursor.clear(),this._cursor.line(this._sketch.gridCoordinate(n),this._sketch.gridCoordinate(o),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}unClick({initPos:n,newPos:o}){var a;(a=this.drawing)==null||a.line(this._sketch.gridCoordinate(n),this._sketch.gridCoordinate(o),this._sketch.size,this._sketch.color),this._sketch.updatePreview(),this._sketch.dispatchUpdate()}move(n){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(n.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class bl extends Be{click(n){var o;(o=this.drawing)==null||o.paint(this._sketch.gridCoordinate(n),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}drag({oldPos:n,newPos:o}){var a;(a=this.drawing)==null||a.line(this._sketch.gridCoordinate(n),this._sketch.gridCoordinate(o),this._sketch.size,this._sketch.color),this._sketch.updatePreview(),this._cursor.actif=!1}move(n){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(n.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class _l extends Be{click(n){this._sketch.camera.zoom(this._sketch.gridCoordinate(n),-1)}}class wl extends Be{click(n){this._sketch.camera.zoom(this._sketch.gridCoordinate(n))}}class xl extends Be{drag({initPos:n,newPos:o}){this._cursor.actif=!0,this._cursor.clear();const a=this._sketch.gridCoordinate(n),l=this._sketch.gridCoordinate(o);this._cursor.rect(a,l.x-a.x,l.y-a.y,this._sketch.size,this._sketch.color),this._sketch.updatePreview()}unClick({initPos:n,newPos:o}){var p;const a=this._sketch.gridCoordinate(n),l=this._sketch.gridCoordinate(o);(p=this.drawing)==null||p.rect(a,l.x-a.x,l.y-a.y,this._sketch.size,this._sketch.color),this._sketch.updatePreview(),this._sketch.dispatchUpdate()}move(n){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(n.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class El extends Be{drag({initPos:n,newPos:o}){this._cursor.actif=!0,this._cursor.clear(),this._ellipse(n,o,this._cursor)}unClick({initPos:n,newPos:o}){this.drawing&&(this._ellipse(n,o,this.drawing),this._sketch.dispatchUpdate())}move(n){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(n.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}_ellipse(n,o,a){const l=this._sketch.gridCoordinate(n),p=this._sketch.gridCoordinate(o),m=Math.abs(p.x-l.x),v=Math.abs(p.y-l.y),_=Math.sign(p.x-l.x),x=Math.sign(p.y-l.y),S={x:Math.floor(l.x+m/2*_),y:Math.floor(l.y+v/2*x)};a.ellipse(S,m,v,this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class kl extends Be{constructor(){super(...arguments);T(this,"_img",null)}click(o){var a;this._img=((a=this.drawing)==null?void 0:a.getImgData())||null}drag({initPos:o,newPos:a}){var _;const l=this._sketch.gridCoordinate(o),p=this._sketch.gridCoordinate(a),m=p.x-l.x,v=p.y-l.y;this._img&&((_=this.drawing)==null||_.putDatas(this._img,m,v),this._sketch.updatePreview())}}class Sl extends Be{constructor(){super(...arguments);T(this,"_bgColor","#000000AA")}drag({initPos:o,newPos:a}){this._cursor.actif=!0,this._cursor.clear();const l=this._sketch.gridCoordinate({x:Math.min(o.x,a.x),y:Math.min(o.y,a.y)}),p=this._sketch.gridCoordinate({x:Math.max(o.x,a.x),y:Math.max(o.y,a.y)});this._cursor.fillRect({x:0,y:0},l.x,this._cursor.height,this._bgColor),this._cursor.fillRect({x:l.x,y:0},this._cursor.width,l.y,this._bgColor),this._cursor.fillRect({x:l.x,y:p.y},this._cursor.width-l.x,this._cursor.height-p.y,this._bgColor),this._cursor.fillRect({x:p.x,y:l.y},this._cursor.width-p.x,p.y-l.y,this._bgColor),this._sketch.updatePreview()}unClick({initPos:o,newPos:a}){var S,O;const l=this._sketch.gridCoordinate({x:Math.min(o.x,a.x),y:Math.min(o.y,a.y)}),p=this._sketch.gridCoordinate({x:Math.max(o.x,a.x),y:Math.max(o.y,a.y)}),m=Math.max(l.x,0),v=Math.max(l.y,0),_=Math.min(p.x-m,((S=this.drawing)==null?void 0:S.width)||0-m),x=Math.min(p.y-v,((O=this.drawing)==null?void 0:O.height)||0-v);this._cursor.clear(),_>0&&x>0&&this._sketch.crop(m,v,_,x),this._sketch.dispatchUpdate()}}class Pl extends Be{click(n){this._sketch.dispatchEvent(new CustomEvent("inactif-click"))}}class Ol{constructor(n,o,a){T(this,"_eventsManager");T(this,"_tools");T(this,"_currentTool");T(this,"_sketch");T(this,"_cursor");this._sketch=n,this._cursor=a,this._tools={paint:new bl(n,o,a),erase:new ml(n,o,a),line:new yl(n,o,a),rect:new xl(n,o,a),circle:new El(n,o,a),bucket:new vl(n,o,a),crop:new Sl(n,o,a),zoom:new wl(n,o,a),unzoom:new _l(n,o,a),drag:new kl(n,o,a),handle:new gl(n,o,a),inactif:new Pl(n,o,a)},this._currentTool=this._tools.paint,this._eventsManager=new pl(n),this._addEvents()}set tool(n){this._tools[n]&&(this._currentTool.exit(),this._currentTool=this._tools[n],this._currentTool.init())}get currentTool(){return this._sketch.actif?this._currentTool:this._tools.inactif}_addEvents(){this._eventsManager.addObserver("click",n=>{this.currentTool.click(n)}),this._eventsManager.addObserver("rightClick",n=>{this.currentTool.rightClick(n)}),this._eventsManager.addObserver("pointerUp",n=>{this.currentTool.unClick(n)}),this._eventsManager.addObserver("drag",n=>{const{button:o,oldPos:a,newPos:l}=n;switch(o){case 1:this._sketch.camera.drag(a,l);break;case 2:this.currentTool.rightClick(l);break;default:this.currentTool.drag(n);break}}),this._eventsManager.addObserver("pointerMove",n=>{this.currentTool.move(n)}),this._eventsManager.addObserver("pointerOut",()=>{this._cursor.actif=!1,this._sketch.updatePreview()}),this._eventsManager.addObserver("zoom",n=>{this.currentTool.zoom(n)})}}class No{constructor(n,o,a){T(this,"layers",[]);T(this,"layerIndex",1);T(this,"_sketch");T(this,"id");this._sketch=n,this.id=o,a?a.layers.forEach(l=>{console.log(l);const p=new ci(this._sketch.width,this._sketch.height,l.drawing.canvas);this.layers.push({id:l.id,drawing:p})}):this.layers=[{id:1,drawing:new ci}]}get preview(){const n=document.createElement("canvas");n.width=this._sketch.width,n.height=this._sketch.height;const o=n.getContext("2d");for(let a=this.layers.length-1;a>=0;a--){const l=this.layers[a];l.drawing.actif&&o.drawImage(l.drawing.canvas,0,0)}return n}get actif(){var n,o;return(o=(n=this.layers.find(a=>a.id===this.layerIndex))==null?void 0:n.drawing.actif)!=null?o:!1}newLayer(n,o){const a={id:n,drawing:new ci(this._sketch.width,this._sketch.height)};this.layers.splice(o,0,a)}selectLayer(n){this.layerIndex=n}removeLayer(n){this.layers=this.layers.filter(o=>o.id!==n),this._sketch.dispatchUpdate(),this._sketch.updatePreview()}sortLayers(n){const o=[];n.forEach(a=>{const l=this.layers.find(p=>p.id===a);l&&o.push(l)}),this.layers=o,this._sketch.dispatchUpdate()}setLayerVisible(n,o){const a=this.layers.find(l=>l.id===n);a&&(a.drawing.actif=o),this._sketch.updatePreview(),this._sketch.dispatchUpdate()}mergeLayer(n,o){const a=this.layers.find(p=>p.id===n),l=this.layers.find(p=>p.id===o);a&&l&&(l==null||l.drawing.drawImg(a==null?void 0:a.drawing.canvas),this.removeLayer(n))}currentLayer(){var n;return(n=this.layers.find(o=>o.id===this.layerIndex))==null?void 0:n.drawing}clear(){this.layers.forEach(n=>n.drawing.clear())}resize(n,o,a=-1,l=-1){this.layers.forEach(p=>{p.drawing.resize(n,o,a,l)})}crop(n,o,a,l){this.layers.forEach(p=>p.drawing.crop(n,o,a,l))}}class Cl{constructor(n){T(this,"frames",[]);T(this,"_frameIndex",1);T(this,"_sketch");this._sketch=n}get actif(){var n,o;return(o=(n=this.currentFrame)==null?void 0:n.actif)!=null?o:!1}get currentFrame(){return this.frames.find(n=>n.id===this._frameIndex)}newFrame(n){this.frames.push(new No(this._sketch,n))}selectFrame(n){this._frameIndex=n}nextFrame(){let n=this.frames.findIndex(o=>o.id===this._frameIndex);n=(n+1)%this.frames.length,this.selectFrame(this.frames[n].id)}removeFrame(n){this.frames=this.frames.filter(o=>o.id!==n)}sortFrames(n){const o=[];n.forEach(a=>{const l=this.frames.find(p=>p.id===a);l&&o.push(l)}),this.frames=o}duplicate(n,o){const a=this.frames.find(l=>l.id===n);a&&this.frames.push(new No(this._sketch,o,a)),this._sketch.dispatchUpdate()}currentDrawing(){var n;return(n=this.currentFrame)==null?void 0:n.currentLayer()}get previousFrame(){var o;const n=this.frames.findIndex(a=>a.id===this._frameIndex);return(o=this.frames[n-1])!=null?o:null}clear(){var n;(n=this.currentFrame)==null||n.clear()}resize(n,o,a=-1,l=-1){this.frames.forEach(p=>p.resize(n,o,a,l))}crop(n,o,a,l){this.frames.forEach(p=>p.crop(n,o,a,l))}}class Ml extends HTMLElement{constructor(){super();T(this,"_canvas");T(this,"_ctx");T(this,"frameManager");T(this,"_cursor");T(this,"_background");T(this,"camera");T(this,"size",1);T(this,"color","#000000");T(this,"_tools");T(this,"onion",!1);T(this,"_animationFrame",null);T(this,"_nextFrame",null);T(this,"playing",!1);T(this,"_savedFrame",null);T(this,"fps",5);this._canvas=this._createCanvas(),this._ctx=this._canvas.getContext("2d"),this.frameManager=new Cl(this),this._cursor=new ci,this._background=new dl,this.camera=new ll(this,this._canvas),this._tools=new Ol(this,this.frameManager,this._cursor)}connectedCallback(){this.camera.fitSketch(),this.updatePreview()}_createCanvas(){const o=this.attachShadow({mode:"open"}),a=document.createElement("canvas"),l=document.createElement("style");return l.textContent=`
        canvas{
			-webkit-optimize-contrast: pixelated;
			-ms-interpolation-mode: nearest-neighbor;
			image-rendering: crisp-edges;  
			image-rendering: pixelated;    
			background-color: #ffff;
			cursor:crosshair;
			pointer-events:none;
        }
        `,o.appendChild(a),o.appendChild(l),a}get width(){return this._canvas.width}get height(){return this._canvas.height}set tool(o){this._tools.tool=o}get actif(){return this.frameManager.actif&&!this.playing}static get observedAttributes(){return["width","height"]}crop(o,a,l,p){this._canvas.width=l,this._canvas.height=p,this.frameManager.crop(o,a,l,p),this._cursor.resize(l,p),this._background.resize(l,p),this._background.clear(),this.camera.fitSketch(),this.updatePreview(),this.dispatchUpdate()}resize(o,a,l,p){this._canvas.width=o,this._canvas.height=a,this.frameManager.resize(o,a,l,p),this._cursor.resize(o,a),this._background.resize(o,a),this._background.clear(),this.camera.fitSketch(),this.updatePreview(),this.dispatchUpdate()}attributeChangedCallback(o,a,l){if(!l||isNaN(Number(l)))return;const p=Number(l);switch(o){case"width":p>=1&&(this._canvas.width=p,this.frameManager.resize(p,this._canvas.height),this._cursor.resize(p,this._canvas.height),this._background.resize(p,this._canvas.height),this._background.clear(),this.camera.fitSketch(),this.updatePreview());break;case"height":this._canvas.height=p,this.frameManager.resize(this._canvas.width,p),this._cursor.resize(this._canvas.width,p),this._background.resize(this._canvas.width,p),this._background.clear(),this.camera.fitSketch(),this.updatePreview();break;default:return}}updatePreview(){var a;const o=(a=this.frameManager.previousFrame)==null?void 0:a.preview;this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._ctx.drawImage(this._background.canvas,0,0),this._ctx.globalAlpha=.4,this.onion&&o&&!this.playing&&this._ctx.drawImage(o,0,0),this._ctx.globalAlpha=1,this.frameManager.currentFrame&&this._ctx.drawImage(this.frameManager.currentFrame.preview,0,0),this._ctx.drawImage(this._cursor.canvas,0,0)}clear(){this._background.clear(),this.frameManager.clear(),this._cursor.clear(),this.updatePreview(),this.dispatchUpdate()}gridCoordinate({x:o,y:a}){const{left:l,top:p}=this._canvas.getBoundingClientRect(),m=(o-l)/this.camera.zoomValue,v=(a-p)/this.camera.zoomValue;return{x:Math.floor(m),y:Math.floor(v)}}dispatchUpdate(){this.dispatchEvent(new CustomEvent("update"))}stop(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._savedFrame&&this.frameManager.selectFrame(this._savedFrame),this.updatePreview()),this.playing=!1}play(){var o,a;this._nextFrame=window.performance.now(),this._savedFrame=(a=(o=this.frameManager.currentFrame)==null?void 0:o.id)!=null?a:1,this._loop(),this.playing=!0}_loop(){var a;this._animationFrame=requestAnimationFrame(()=>this._loop());const o=window.performance.now();this._nextFrame=(a=this._nextFrame)!=null?a:o,!(o<this._nextFrame)&&(this.frameManager.nextFrame(),this.updatePreview(),this._nextFrame+=1e3/this.fps,this.updatePreview())}}class Al{static init(n,o){document.querySelectorAll(n).forEach(l=>{l.addEventListener("click",p=>{o.tool=l.value})})}}class Tl{static init(n,o){const a=document.querySelector(n),l=a==null?void 0:a.querySelector("input"),p=a==null?void 0:a.querySelector("label");l==null||l.addEventListener("input",m=>{const v=l==null?void 0:l.valueAsNumber;p&&(p.innerHTML=`size : <i>${v} px</i>`),o.size=v})}}const Il={resize:{fr:"Redimensionner"},width:{fr:"Largeur"},height:{fr:"Hauteur"},px:{fr:"px"},"Edition impossible":{fr:"Edition impossible"},inactiveClick:{fr:"Pour pouvoir utiliser cette fonctionnalit\xE9 le calque doit \xEAtre actif et l'animation doit \xEAtre stopp\xE9e.",en:"To use this feature the layer must be active and the animation must be stopped."},pencil:{fr:"Crayon"},eraser:{fr:"Gomme"},line:{fr:"Ligne"},rect:{fr:"Rectangle"},circle:{fr:"Cercle"},bucket:{fr:"Pot de peinture"},drag:{fr:"Glisser"},crop:{fr:"Recadrer"},zoom:{fr:"Zoom"},unzoom:{fr:"D\xE9zoom"},handle:{fr:"D\xE9placer"},"Set size to 1px":{fr:"D\xE9finir la taille \xE0 1px"},"Set size to 2px":{fr:"D\xE9finir la taille \xE0 2px"},"Set size to 3px":{fr:"D\xE9finir la taille \xE0 3px"},"Set size to 4px":{fr:"D\xE9finir la taille \xE0 4px"},"Choose a color":{fr:"Choisir une couleur"},"fit to screen size":{fr:"Ajuster \xE0 l'\xE9cran"},undo:{fr:"Annuler"},redo:{fr:"R\xE9tablir"},clear:{fr:"Effacer"},open:{fr:"Ouvrir"},save:{fr:"Enregistrer"},download:{fr:"T\xE9l\xE9charger"},"add layer":{fr:"Ajouter un calque"},"remove layer":{fr:"Supprimer un calque"},"add frame":{fr:"Nouvelle image"},"remove frame":{fr:"Supprimer l'image"},"If you leave before saving, your changes will be lost.":{fr:"Si vous quittez avant d'enregistrer, vos modifications seront perdues."}},Dl=window.location.search,jl=new URLSearchParams(Dl),Yo=jl.get("lang");function na(d){var o;const n=Il[d];return Yo&&(o=n==null?void 0:n[Yo])!=null?o:null}class Ll{static init(){document.querySelectorAll("[tooltip-text]").forEach(o=>{const a=o.getAttribute("tooltip-text");if(a){const l=na(a);l&&o.setAttribute("tooltip-text",l)}})}}function Rl(d,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function ri(d){return function(n){if(Array.isArray(n))return tr(n)}(d)||function(n){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(n))return Array.from(n)}(d)||function(n,o){if(!!n){if(typeof n=="string")return tr(n,o);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return tr(n,o)}}(d)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tr(d,n){(n==null||n>d.length)&&(n=d.length);for(var o=0,a=new Array(n);o<n;o++)a[o]=d[o];return a}var Xo,nr,Mt,ir,Wo,ot=(Xo=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],nr=function(){function d(a){var l=a.targetModal,p=a.triggers,m=p===void 0?[]:p,v=a.onShow,_=v===void 0?function(){}:v,x=a.onClose,S=x===void 0?function(){}:x,O=a.openTrigger,I=O===void 0?"data-micromodal-trigger":O,z=a.closeTrigger,W=z===void 0?"data-micromodal-close":z,X=a.openClass,de=X===void 0?"is-open":X,q=a.disableScroll,Q=q!==void 0&&q,he=a.disableFocus,me=he!==void 0&&he,re=a.awaitCloseAnimation,oe=re!==void 0&&re,De=a.awaitOpenAnimation,R=De!==void 0&&De,fe=a.debugMode,je=fe!==void 0&&fe;(function(Se,Ge){if(!(Se instanceof Ge))throw new TypeError("Cannot call a class as a function")})(this,d),this.modal=document.getElementById(l),this.config={debugMode:je,disableScroll:Q,openTrigger:I,closeTrigger:W,openClass:de,onShow:_,onClose:S,awaitCloseAnimation:oe,awaitOpenAnimation:R,disableFocus:me},m.length>0&&this.registerTriggers.apply(this,ri(m)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var n,o;return n=d,(o=[{key:"registerTriggers",value:function(){for(var a=this,l=arguments.length,p=new Array(l),m=0;m<l;m++)p[m]=arguments[m];p.filter(Boolean).forEach(function(v){v.addEventListener("click",function(_){return a.showModal(_)})})}},{key:"showModal",value:function(){var a=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var p=function m(){a.modal.removeEventListener("animationend",m,!1),a.setFocusToFirstNode()};this.modal.addEventListener("animationend",p,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,l)}},{key:"closeModal",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,l=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,a),this.config.awaitCloseAnimation){var p=this.config.openClass;this.modal.addEventListener("animationend",function m(){l.classList.remove(p),l.removeEventListener("animationend",m,!1)},!1)}else l.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(a){this.modal=document.getElementById(a),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(a){if(this.config.disableScroll){var l=document.querySelector("body");switch(a){case"enable":Object.assign(l.style,{overflow:""});break;case"disable":Object.assign(l.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(a){(a.target.hasAttribute(this.config.closeTrigger)||a.target.parentNode.hasAttribute(this.config.closeTrigger))&&(a.preventDefault(),a.stopPropagation(),this.closeModal(a))}},{key:"onKeydown",value:function(a){a.keyCode===27&&this.closeModal(a),a.keyCode===9&&this.retainFocus(a)}},{key:"getFocusableNodes",value:function(){var a=this.modal.querySelectorAll(Xo);return Array.apply(void 0,ri(a))}},{key:"setFocusToFirstNode",value:function(){var a=this;if(!this.config.disableFocus){var l=this.getFocusableNodes();if(l.length!==0){var p=l.filter(function(m){return!m.hasAttribute(a.config.closeTrigger)});p.length>0&&p[0].focus(),p.length===0&&l[0].focus()}}}},{key:"retainFocus",value:function(a){var l=this.getFocusableNodes();if(l.length!==0)if(l=l.filter(function(m){return m.offsetParent!==null}),this.modal.contains(document.activeElement)){var p=l.indexOf(document.activeElement);a.shiftKey&&p===0&&(l[l.length-1].focus(),a.preventDefault()),!a.shiftKey&&l.length>0&&p===l.length-1&&(l[0].focus(),a.preventDefault())}else l[0].focus()}}])&&Rl(n.prototype,o),d}(),Mt=null,ir=function(d){if(!document.getElementById(d))return console.warn("MicroModal: \u2757Seems like you have missed %c'".concat(d,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(d,'"></div>')),!1},Wo=function(d,n){if(function(a){a.length<=0&&(console.warn("MicroModal: \u2757Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(d),!n)return!0;for(var o in n)ir(o);return!0},{init:function(d){var n=Object.assign({},{openTrigger:"data-micromodal-trigger"},d),o=ri(document.querySelectorAll("[".concat(n.openTrigger,"]"))),a=function(m,v){var _=[];return m.forEach(function(x){var S=x.attributes[v].value;_[S]===void 0&&(_[S]=[]),_[S].push(x)}),_}(o,n.openTrigger);if(n.debugMode!==!0||Wo(o,a)!==!1)for(var l in a){var p=a[l];n.targetModal=l,n.triggers=ri(p),Mt=new nr(n)}},show:function(d,n){var o=n||{};o.targetModal=d,o.debugMode===!0&&ir(d)===!1||(Mt&&Mt.removeEventListeners(),(Mt=new nr(o)).showModal())},close:function(d){d?Mt.closeModalById(d):Mt.closeModal()}});typeof window!="undefined"&&(window.MicroModal=ot);class vi{static init(n,o){this._form=document.querySelector(n),this._sketch=o,this._form.addEventListener("submit",this._onSubmit.bind(this))}static _onSubmit(n){var _,x,S;n.preventDefault();const o=(_=this._form.querySelector("#width-js"))==null?void 0:_.valueAsNumber,a=(x=this._form.querySelector("#height-js"))==null?void 0:x.valueAsNumber,l=(S=this._form.querySelector("#align-js input:checked"))==null?void 0:S.value;if(!l)throw new Error("align is undefined");const p=JSON.parse(l),[m,v]=p;if(!o||!a)throw new Error("width or height is undefined");this._sketch.resize(o,a,m,v),ot.close("resize-modal")}static update(){const n=this._form.querySelector("#width-js"),o=this._form.querySelector("#height-js");n&&(n.value=this._sketch.width.toString()),o&&(o.value=this._sketch.height.toString())}}T(vi,"_form"),T(vi,"_sketch");class zl{static init(n,o){document.querySelectorAll(n).forEach(l=>{l.addEventListener("click",p=>{switch(l.id){case"fit":o.camera.fitSketch();break;case"clear":o.clear();break;case"resize":ot.show("resize-modal"),vi.update();break}})})}}class Fl{static init(n,o){const a=document.querySelector(n),l=document.querySelector("color-picker");a==null||a.addEventListener("click",p=>{l==null||l.open()}),l==null||l.addEventListener("color-change",p=>{o.color=p.detail,a&&(a.style.backgroundColor=p.detail)})}}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Go(d,n){var o=Object.keys(d);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(d);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(d,l).enumerable})),o.push.apply(o,a)}return o}function Je(d){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?Go(Object(o),!0).forEach(function(a){Bl(d,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(o)):Go(Object(o)).forEach(function(a){Object.defineProperty(d,a,Object.getOwnPropertyDescriptor(o,a))})}return d}function ui(d){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ui=function(n){return typeof n}:ui=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ui(d)}function Bl(d,n,o){return n in d?Object.defineProperty(d,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):d[n]=o,d}function st(){return st=Object.assign||function(d){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(d[a]=o[a])}return d},st.apply(this,arguments)}function Nl(d,n){if(d==null)return{};var o={},a=Object.keys(d),l,p;for(p=0;p<a.length;p++)l=a[p],!(n.indexOf(l)>=0)&&(o[l]=d[l]);return o}function Yl(d,n){if(d==null)return{};var o=Nl(d,n),a,l;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(d);for(l=0;l<p.length;l++)a=p[l],!(n.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(d,a)||(o[a]=d[a]))}return o}var Xl="1.15.0";function at(d){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(d)}var lt=at(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Sn=at(/Edge/i),Uo=at(/firefox/i),_n=at(/safari/i)&&!at(/chrome/i)&&!at(/android/i),ia=at(/iP(ad|od|hone)/i),ra=at(/chrome/i)&&at(/android/i),oa={capture:!1,passive:!1};function K(d,n,o){d.addEventListener(n,o,!lt&&oa)}function Z(d,n,o){d.removeEventListener(n,o,!lt&&oa)}function gi(d,n){if(!!n){if(n[0]===">"&&(n=n.substring(1)),d)try{if(d.matches)return d.matches(n);if(d.msMatchesSelector)return d.msMatchesSelector(n);if(d.webkitMatchesSelector)return d.webkitMatchesSelector(n)}catch{return!1}return!1}}function Wl(d){return d.host&&d!==document&&d.host.nodeType?d.host:d.parentNode}function He(d,n,o,a){if(d){o=o||document;do{if(n!=null&&(n[0]===">"?d.parentNode===o&&gi(d,n):gi(d,n))||a&&d===o)return d;if(d===o)break}while(d=Wl(d))}return null}var qo=/\s+/g;function Ae(d,n,o){if(d&&n)if(d.classList)d.classList[o?"add":"remove"](n);else{var a=(" "+d.className+" ").replace(qo," ").replace(" "+n+" "," ");d.className=(a+(o?" "+n:"")).replace(qo," ")}}function N(d,n,o){var a=d&&d.style;if(a){if(o===void 0)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(d,""):d.currentStyle&&(o=d.currentStyle),n===void 0?o:o[n];!(n in a)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),a[n]=o+(typeof o=="string"?"":"px")}}function Zt(d,n){var o="";if(typeof d=="string")o=d;else do{var a=N(d,"transform");a&&a!=="none"&&(o=a+" "+o)}while(!n&&(d=d.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(o)}function aa(d,n,o){if(d){var a=d.getElementsByTagName(n),l=0,p=a.length;if(o)for(;l<p;l++)o(a[l],l);return a}return[]}function Ze(){var d=document.scrollingElement;return d||document.documentElement}function ve(d,n,o,a,l){if(!(!d.getBoundingClientRect&&d!==window)){var p,m,v,_,x,S,O;if(d!==window&&d.parentNode&&d!==Ze()?(p=d.getBoundingClientRect(),m=p.top,v=p.left,_=p.bottom,x=p.right,S=p.height,O=p.width):(m=0,v=0,_=window.innerHeight,x=window.innerWidth,S=window.innerHeight,O=window.innerWidth),(n||o)&&d!==window&&(l=l||d.parentNode,!lt))do if(l&&l.getBoundingClientRect&&(N(l,"transform")!=="none"||o&&N(l,"position")!=="static")){var I=l.getBoundingClientRect();m-=I.top+parseInt(N(l,"border-top-width")),v-=I.left+parseInt(N(l,"border-left-width")),_=m+p.height,x=v+p.width;break}while(l=l.parentNode);if(a&&d!==window){var z=Zt(l||d),W=z&&z.a,X=z&&z.d;z&&(m/=X,v/=W,O/=W,S/=X,_=m+S,x=v+O)}return{top:m,left:v,bottom:_,right:x,width:O,height:S}}}function Vo(d,n,o){for(var a=yt(d,!0),l=ve(d)[n];a;){var p=ve(a)[o],m=void 0;if(o==="top"||o==="left"?m=l>=p:m=l<=p,!m)return a;if(a===Ze())break;a=yt(a,!1)}return!1}function Jt(d,n,o,a){for(var l=0,p=0,m=d.children;p<m.length;){if(m[p].style.display!=="none"&&m[p]!==F.ghost&&(a||m[p]!==F.dragged)&&He(m[p],o.draggable,d,!1)){if(l===n)return m[p];l++}p++}return null}function mr(d,n){for(var o=d.lastElementChild;o&&(o===F.ghost||N(o,"display")==="none"||n&&!gi(o,n));)o=o.previousElementSibling;return o||null}function Fe(d,n){var o=0;if(!d||!d.parentNode)return-1;for(;d=d.previousElementSibling;)d.nodeName.toUpperCase()!=="TEMPLATE"&&d!==F.clone&&(!n||gi(d,n))&&o++;return o}function Ho(d){var n=0,o=0,a=Ze();if(d)do{var l=Zt(d),p=l.a,m=l.d;n+=d.scrollLeft*p,o+=d.scrollTop*m}while(d!==a&&(d=d.parentNode));return[n,o]}function Gl(d,n){for(var o in d)if(!!d.hasOwnProperty(o)){for(var a in n)if(n.hasOwnProperty(a)&&n[a]===d[o][a])return Number(o)}return-1}function yt(d,n){if(!d||!d.getBoundingClientRect)return Ze();var o=d,a=!1;do if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var l=N(o);if(o.clientWidth<o.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||o.clientHeight<o.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!o.getBoundingClientRect||o===document.body)return Ze();if(a||n)return o;a=!0}}while(o=o.parentNode);return Ze()}function Ul(d,n){if(d&&n)for(var o in n)n.hasOwnProperty(o)&&(d[o]=n[o]);return d}function rr(d,n){return Math.round(d.top)===Math.round(n.top)&&Math.round(d.left)===Math.round(n.left)&&Math.round(d.height)===Math.round(n.height)&&Math.round(d.width)===Math.round(n.width)}var wn;function sa(d,n){return function(){if(!wn){var o=arguments,a=this;o.length===1?d.call(a,o[0]):d.apply(a,o),wn=setTimeout(function(){wn=void 0},n)}}}function ql(){clearTimeout(wn),wn=void 0}function la(d,n,o){d.scrollLeft+=n,d.scrollTop+=o}function ca(d){var n=window.Polymer,o=window.jQuery||window.Zepto;return n&&n.dom?n.dom(d).cloneNode(!0):o?o(d).clone(!0)[0]:d.cloneNode(!0)}var Ie="Sortable"+new Date().getTime();function Vl(){var d=[],n;return{captureAnimationState:function(){if(d=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(l){if(!(N(l,"display")==="none"||l===F.ghost)){d.push({target:l,rect:ve(l)});var p=Je({},d[d.length-1].rect);if(l.thisAnimationDuration){var m=Zt(l,!0);m&&(p.top-=m.f,p.left-=m.e)}l.fromRect=p}})}},addAnimationState:function(a){d.push(a)},removeAnimationState:function(a){d.splice(Gl(d,{target:a}),1)},animateAll:function(a){var l=this;if(!this.options.animation){clearTimeout(n),typeof a=="function"&&a();return}var p=!1,m=0;d.forEach(function(v){var _=0,x=v.target,S=x.fromRect,O=ve(x),I=x.prevFromRect,z=x.prevToRect,W=v.rect,X=Zt(x,!0);X&&(O.top-=X.f,O.left-=X.e),x.toRect=O,x.thisAnimationDuration&&rr(I,O)&&!rr(S,O)&&(W.top-O.top)/(W.left-O.left)===(S.top-O.top)/(S.left-O.left)&&(_=Zl(W,I,z,l.options)),rr(O,S)||(x.prevFromRect=S,x.prevToRect=O,_||(_=l.options.animation),l.animate(x,W,O,_)),_&&(p=!0,m=Math.max(m,_),clearTimeout(x.animationResetTimer),x.animationResetTimer=setTimeout(function(){x.animationTime=0,x.prevFromRect=null,x.fromRect=null,x.prevToRect=null,x.thisAnimationDuration=null},_),x.thisAnimationDuration=_)}),clearTimeout(n),p?n=setTimeout(function(){typeof a=="function"&&a()},m):typeof a=="function"&&a(),d=[]},animate:function(a,l,p,m){if(m){N(a,"transition",""),N(a,"transform","");var v=Zt(this.el),_=v&&v.a,x=v&&v.d,S=(l.left-p.left)/(_||1),O=(l.top-p.top)/(x||1);a.animatingX=!!S,a.animatingY=!!O,N(a,"transform","translate3d("+S+"px,"+O+"px,0)"),this.forRepaintDummy=Hl(a),N(a,"transition","transform "+m+"ms"+(this.options.easing?" "+this.options.easing:"")),N(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){N(a,"transition",""),N(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},m)}}}}function Hl(d){return d.offsetWidth}function Zl(d,n,o,a){return Math.sqrt(Math.pow(n.top-d.top,2)+Math.pow(n.left-d.left,2))/Math.sqrt(Math.pow(n.top-o.top,2)+Math.pow(n.left-o.left,2))*a.animation}var Ut=[],or={initializeByDefault:!0},Pn={mount:function(n){for(var o in or)or.hasOwnProperty(o)&&!(o in n)&&(n[o]=or[o]);Ut.forEach(function(a){if(a.pluginName===n.pluginName)throw"Sortable: Cannot mount plugin ".concat(n.pluginName," more than once")}),Ut.push(n)},pluginEvent:function(n,o,a){var l=this;this.eventCanceled=!1,a.cancel=function(){l.eventCanceled=!0};var p=n+"Global";Ut.forEach(function(m){!o[m.pluginName]||(o[m.pluginName][p]&&o[m.pluginName][p](Je({sortable:o},a)),o.options[m.pluginName]&&o[m.pluginName][n]&&o[m.pluginName][n](Je({sortable:o},a)))})},initializePlugins:function(n,o,a,l){Ut.forEach(function(v){var _=v.pluginName;if(!(!n.options[_]&&!v.initializeByDefault)){var x=new v(n,o,n.options);x.sortable=n,x.options=n.options,n[_]=x,st(a,x.defaults)}});for(var p in n.options)if(!!n.options.hasOwnProperty(p)){var m=this.modifyOption(n,p,n.options[p]);typeof m!="undefined"&&(n.options[p]=m)}},getEventProperties:function(n,o){var a={};return Ut.forEach(function(l){typeof l.eventProperties=="function"&&st(a,l.eventProperties.call(o[l.pluginName],n))}),a},modifyOption:function(n,o,a){var l;return Ut.forEach(function(p){!n[p.pluginName]||p.optionListeners&&typeof p.optionListeners[o]=="function"&&(l=p.optionListeners[o].call(n[p.pluginName],a))}),l}};function Jl(d){var n=d.sortable,o=d.rootEl,a=d.name,l=d.targetEl,p=d.cloneEl,m=d.toEl,v=d.fromEl,_=d.oldIndex,x=d.newIndex,S=d.oldDraggableIndex,O=d.newDraggableIndex,I=d.originalEvent,z=d.putSortable,W=d.extraEventProperties;if(n=n||o&&o[Ie],!!n){var X,de=n.options,q="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!lt&&!Sn?X=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(X=document.createEvent("Event"),X.initEvent(a,!0,!0)),X.to=m||o,X.from=v||o,X.item=l||o,X.clone=p,X.oldIndex=_,X.newIndex=x,X.oldDraggableIndex=S,X.newDraggableIndex=O,X.originalEvent=I,X.pullMode=z?z.lastPutMode:void 0;var Q=Je(Je({},W),Pn.getEventProperties(a,n));for(var he in Q)X[he]=Q[he];o&&o.dispatchEvent(X),de[q]&&de[q].call(n,X)}}var Kl=["evt"],Ce=function(n,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=a.evt,p=Yl(a,Kl);Pn.pluginEvent.bind(F)(n,o,Je({dragEl:M,parentEl:ue,ghostEl:U,rootEl:se,nextEl:It,lastDownEl:di,cloneEl:ce,cloneHidden:mt,dragStarted:vn,putSortable:_e,activeSortable:F.active,originalEvent:l,oldIndex:Ht,oldDraggableIndex:xn,newIndex:Te,newDraggableIndex:gt,hideGhostForTarget:fa,unhideGhostForTarget:pa,cloneNowHidden:function(){mt=!0},cloneNowShown:function(){mt=!1},dispatchSortableEvent:function(v){ke({sortable:o,name:v,originalEvent:l})}},p))};function ke(d){Jl(Je({putSortable:_e,cloneEl:ce,targetEl:M,rootEl:se,oldIndex:Ht,oldDraggableIndex:xn,newIndex:Te,newDraggableIndex:gt},d))}var M,ue,U,se,It,di,ce,mt,Ht,Te,xn,gt,oi,_e,Vt=!1,mi=!1,yi=[],At,Xe,ar,sr,Zo,Jo,vn,qt,En,kn=!1,ai=!1,hi,xe,lr=[],fr=!1,bi=[],wi=typeof document!="undefined",si=ia,Ko=Sn||lt?"cssFloat":"float",Ql=wi&&!ra&&!ia&&"draggable"in document.createElement("div"),ua=function(){if(!!wi){if(lt)return!1;var d=document.createElement("x");return d.style.cssText="pointer-events:auto",d.style.pointerEvents==="auto"}}(),da=function(n,o){var a=N(n),l=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),p=Jt(n,0,o),m=Jt(n,1,o),v=p&&N(p),_=m&&N(m),x=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+ve(p).width,S=_&&parseInt(_.marginLeft)+parseInt(_.marginRight)+ve(m).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(p&&v.float&&v.float!=="none"){var O=v.float==="left"?"left":"right";return m&&(_.clear==="both"||_.clear===O)?"vertical":"horizontal"}return p&&(v.display==="block"||v.display==="flex"||v.display==="table"||v.display==="grid"||x>=l&&a[Ko]==="none"||m&&a[Ko]==="none"&&x+S>l)?"vertical":"horizontal"},$l=function(n,o,a){var l=a?n.left:n.top,p=a?n.right:n.bottom,m=a?n.width:n.height,v=a?o.left:o.top,_=a?o.right:o.bottom,x=a?o.width:o.height;return l===v||p===_||l+m/2===v+x/2},ec=function(n,o){var a;return yi.some(function(l){var p=l[Ie].options.emptyInsertThreshold;if(!(!p||mr(l))){var m=ve(l),v=n>=m.left-p&&n<=m.right+p,_=o>=m.top-p&&o<=m.bottom+p;if(v&&_)return a=l}}),a},ha=function(n){function o(p,m){return function(v,_,x,S){var O=v.options.group.name&&_.options.group.name&&v.options.group.name===_.options.group.name;if(p==null&&(m||O))return!0;if(p==null||p===!1)return!1;if(m&&p==="clone")return p;if(typeof p=="function")return o(p(v,_,x,S),m)(v,_,x,S);var I=(m?v:_).options.group.name;return p===!0||typeof p=="string"&&p===I||p.join&&p.indexOf(I)>-1}}var a={},l=n.group;(!l||ui(l)!="object")&&(l={name:l}),a.name=l.name,a.checkPull=o(l.pull,!0),a.checkPut=o(l.put),a.revertClone=l.revertClone,n.group=a},fa=function(){!ua&&U&&N(U,"display","none")},pa=function(){!ua&&U&&N(U,"display","")};wi&&!ra&&document.addEventListener("click",function(d){if(mi)return d.preventDefault(),d.stopPropagation&&d.stopPropagation(),d.stopImmediatePropagation&&d.stopImmediatePropagation(),mi=!1,!1},!0);var Tt=function(n){if(M){n=n.touches?n.touches[0]:n;var o=ec(n.clientX,n.clientY);if(o){var a={};for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);a.target=a.rootEl=o,a.preventDefault=void 0,a.stopPropagation=void 0,o[Ie]._onDragOver(a)}}},tc=function(n){M&&M.parentNode[Ie]._isOutsideThisEl(n.target)};function F(d,n){if(!(d&&d.nodeType&&d.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(d));this.el=d,this.options=n=st({},n),d[Ie]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(d.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return da(d,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(m,v){m.setData("Text",v.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:F.supportPointer!==!1&&"PointerEvent"in window&&!_n,emptyInsertThreshold:5};Pn.initializePlugins(this,d,o);for(var a in o)!(a in n)&&(n[a]=o[a]);ha(n);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=n.forceFallback?!1:Ql,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?K(d,"pointerdown",this._onTapStart):(K(d,"mousedown",this._onTapStart),K(d,"touchstart",this._onTapStart)),this.nativeDraggable&&(K(d,"dragover",this),K(d,"dragenter",this)),yi.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),st(this,Vl())}F.prototype={constructor:F,_isOutsideThisEl:function(n){!this.el.contains(n)&&n!==this.el&&(qt=null)},_getDirection:function(n,o){return typeof this.options.direction=="function"?this.options.direction.call(this,n,o,M):this.options.direction},_onTapStart:function(n){if(!!n.cancelable){var o=this,a=this.el,l=this.options,p=l.preventOnFilter,m=n.type,v=n.touches&&n.touches[0]||n.pointerType&&n.pointerType==="touch"&&n,_=(v||n).target,x=n.target.shadowRoot&&(n.path&&n.path[0]||n.composedPath&&n.composedPath()[0])||_,S=l.filter;if(cc(a),!M&&!(/mousedown|pointerdown/.test(m)&&n.button!==0||l.disabled)&&!x.isContentEditable&&!(!this.nativeDraggable&&_n&&_&&_.tagName.toUpperCase()==="SELECT")&&(_=He(_,l.draggable,a,!1),!(_&&_.animated)&&di!==_)){if(Ht=Fe(_),xn=Fe(_,l.draggable),typeof S=="function"){if(S.call(this,n,_,this)){ke({sortable:o,rootEl:x,name:"filter",targetEl:_,toEl:a,fromEl:a}),Ce("filter",o,{evt:n}),p&&n.cancelable&&n.preventDefault();return}}else if(S&&(S=S.split(",").some(function(O){if(O=He(x,O.trim(),a,!1),O)return ke({sortable:o,rootEl:O,name:"filter",targetEl:_,fromEl:a,toEl:a}),Ce("filter",o,{evt:n}),!0}),S)){p&&n.cancelable&&n.preventDefault();return}l.handle&&!He(x,l.handle,a,!1)||this._prepareDragStart(n,v,_)}}},_prepareDragStart:function(n,o,a){var l=this,p=l.el,m=l.options,v=p.ownerDocument,_;if(a&&!M&&a.parentNode===p){var x=ve(a);if(se=p,M=a,ue=M.parentNode,It=M.nextSibling,di=a,oi=m.group,F.dragged=M,At={target:M,clientX:(o||n).clientX,clientY:(o||n).clientY},Zo=At.clientX-x.left,Jo=At.clientY-x.top,this._lastX=(o||n).clientX,this._lastY=(o||n).clientY,M.style["will-change"]="all",_=function(){if(Ce("delayEnded",l,{evt:n}),F.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!Uo&&l.nativeDraggable&&(M.draggable=!0),l._triggerDragStart(n,o),ke({sortable:l,name:"choose",originalEvent:n}),Ae(M,m.chosenClass,!0)},m.ignore.split(",").forEach(function(S){aa(M,S.trim(),cr)}),K(v,"dragover",Tt),K(v,"mousemove",Tt),K(v,"touchmove",Tt),K(v,"mouseup",l._onDrop),K(v,"touchend",l._onDrop),K(v,"touchcancel",l._onDrop),Uo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,M.draggable=!0),Ce("delayStart",this,{evt:n}),m.delay&&(!m.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(Sn||lt))){if(F.eventCanceled){this._onDrop();return}K(v,"mouseup",l._disableDelayedDrag),K(v,"touchend",l._disableDelayedDrag),K(v,"touchcancel",l._disableDelayedDrag),K(v,"mousemove",l._delayedDragTouchMoveHandler),K(v,"touchmove",l._delayedDragTouchMoveHandler),m.supportPointer&&K(v,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(_,m.delay)}else _()}},_delayedDragTouchMoveHandler:function(n){var o=n.touches?n.touches[0]:n;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){M&&cr(M),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var n=this.el.ownerDocument;Z(n,"mouseup",this._disableDelayedDrag),Z(n,"touchend",this._disableDelayedDrag),Z(n,"touchcancel",this._disableDelayedDrag),Z(n,"mousemove",this._delayedDragTouchMoveHandler),Z(n,"touchmove",this._delayedDragTouchMoveHandler),Z(n,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(n,o){o=o||n.pointerType=="touch"&&n,!this.nativeDraggable||o?this.options.supportPointer?K(document,"pointermove",this._onTouchMove):o?K(document,"touchmove",this._onTouchMove):K(document,"mousemove",this._onTouchMove):(K(M,"dragend",this),K(se,"dragstart",this._onDragStart));try{document.selection?fi(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(n,o){if(Vt=!1,se&&M){Ce("dragStarted",this,{evt:o}),this.nativeDraggable&&K(document,"dragover",tc);var a=this.options;!n&&Ae(M,a.dragClass,!1),Ae(M,a.ghostClass,!0),F.active=this,n&&this._appendGhost(),ke({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(Xe){this._lastX=Xe.clientX,this._lastY=Xe.clientY,fa();for(var n=document.elementFromPoint(Xe.clientX,Xe.clientY),o=n;n&&n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(Xe.clientX,Xe.clientY),n!==o);)o=n;if(M.parentNode[Ie]._isOutsideThisEl(n),o)do{if(o[Ie]){var a=void 0;if(a=o[Ie]._onDragOver({clientX:Xe.clientX,clientY:Xe.clientY,target:n,rootEl:o}),a&&!this.options.dragoverBubble)break}n=o}while(o=o.parentNode);pa()}},_onTouchMove:function(n){if(At){var o=this.options,a=o.fallbackTolerance,l=o.fallbackOffset,p=n.touches?n.touches[0]:n,m=U&&Zt(U,!0),v=U&&m&&m.a,_=U&&m&&m.d,x=si&&xe&&Ho(xe),S=(p.clientX-At.clientX+l.x)/(v||1)+(x?x[0]-lr[0]:0)/(v||1),O=(p.clientY-At.clientY+l.y)/(_||1)+(x?x[1]-lr[1]:0)/(_||1);if(!F.active&&!Vt){if(a&&Math.max(Math.abs(p.clientX-this._lastX),Math.abs(p.clientY-this._lastY))<a)return;this._onDragStart(n,!0)}if(U){m?(m.e+=S-(ar||0),m.f+=O-(sr||0)):m={a:1,b:0,c:0,d:1,e:S,f:O};var I="matrix(".concat(m.a,",").concat(m.b,",").concat(m.c,",").concat(m.d,",").concat(m.e,",").concat(m.f,")");N(U,"webkitTransform",I),N(U,"mozTransform",I),N(U,"msTransform",I),N(U,"transform",I),ar=S,sr=O,Xe=p}n.cancelable&&n.preventDefault()}},_appendGhost:function(){if(!U){var n=this.options.fallbackOnBody?document.body:se,o=ve(M,!0,si,!0,n),a=this.options;if(si){for(xe=n;N(xe,"position")==="static"&&N(xe,"transform")==="none"&&xe!==document;)xe=xe.parentNode;xe!==document.body&&xe!==document.documentElement?(xe===document&&(xe=Ze()),o.top+=xe.scrollTop,o.left+=xe.scrollLeft):xe=Ze(),lr=Ho(xe)}U=M.cloneNode(!0),Ae(U,a.ghostClass,!1),Ae(U,a.fallbackClass,!0),Ae(U,a.dragClass,!0),N(U,"transition",""),N(U,"transform",""),N(U,"box-sizing","border-box"),N(U,"margin",0),N(U,"top",o.top),N(U,"left",o.left),N(U,"width",o.width),N(U,"height",o.height),N(U,"opacity","0.8"),N(U,"position",si?"absolute":"fixed"),N(U,"zIndex","100000"),N(U,"pointerEvents","none"),F.ghost=U,n.appendChild(U),N(U,"transform-origin",Zo/parseInt(U.style.width)*100+"% "+Jo/parseInt(U.style.height)*100+"%")}},_onDragStart:function(n,o){var a=this,l=n.dataTransfer,p=a.options;if(Ce("dragStart",this,{evt:n}),F.eventCanceled){this._onDrop();return}Ce("setupClone",this),F.eventCanceled||(ce=ca(M),ce.removeAttribute("id"),ce.draggable=!1,ce.style["will-change"]="",this._hideClone(),Ae(ce,this.options.chosenClass,!1),F.clone=ce),a.cloneId=fi(function(){Ce("clone",a),!F.eventCanceled&&(a.options.removeCloneOnHide||se.insertBefore(ce,M),a._hideClone(),ke({sortable:a,name:"clone"}))}),!o&&Ae(M,p.dragClass,!0),o?(mi=!0,a._loopId=setInterval(a._emulateDragOver,50)):(Z(document,"mouseup",a._onDrop),Z(document,"touchend",a._onDrop),Z(document,"touchcancel",a._onDrop),l&&(l.effectAllowed="move",p.setData&&p.setData.call(a,l,M)),K(document,"drop",a),N(M,"transform","translateZ(0)")),Vt=!0,a._dragStartId=fi(a._dragStarted.bind(a,o,n)),K(document,"selectstart",a),vn=!0,_n&&N(document.body,"user-select","none")},_onDragOver:function(n){var o=this.el,a=n.target,l,p,m,v=this.options,_=v.group,x=F.active,S=oi===_,O=v.sort,I=_e||x,z,W=this,X=!1;if(fr)return;function de(ut,Ke){Ce(ut,W,Je({evt:n,isOwner:S,axis:z?"vertical":"horizontal",revert:m,dragRect:l,targetRect:p,canSort:O,fromSortable:I,target:a,completed:Q,onMove:function(Kt,qe){return li(se,o,M,l,Kt,ve(Kt),n,qe)},changed:he},Ke))}function q(){de("dragOverAnimationCapture"),W.captureAnimationState(),W!==I&&I.captureAnimationState()}function Q(ut){return de("dragOverCompleted",{insertion:ut}),ut&&(S?x._hideClone():x._showClone(W),W!==I&&(Ae(M,_e?_e.options.ghostClass:x.options.ghostClass,!1),Ae(M,v.ghostClass,!0)),_e!==W&&W!==F.active?_e=W:W===F.active&&_e&&(_e=null),I===W&&(W._ignoreWhileAnimating=a),W.animateAll(function(){de("dragOverAnimationComplete"),W._ignoreWhileAnimating=null}),W!==I&&(I.animateAll(),I._ignoreWhileAnimating=null)),(a===M&&!M.animated||a===o&&!a.animated)&&(qt=null),!v.dragoverBubble&&!n.rootEl&&a!==document&&(M.parentNode[Ie]._isOutsideThisEl(n.target),!ut&&Tt(n)),!v.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),X=!0}function he(){Te=Fe(M),gt=Fe(M,v.draggable),ke({sortable:W,name:"change",toEl:o,newIndex:Te,newDraggableIndex:gt,originalEvent:n})}if(n.preventDefault!==void 0&&n.cancelable&&n.preventDefault(),a=He(a,v.draggable,o,!0),de("dragOver"),F.eventCanceled)return X;if(M.contains(n.target)||a.animated&&a.animatingX&&a.animatingY||W._ignoreWhileAnimating===a)return Q(!1);if(mi=!1,x&&!v.disabled&&(S?O||(m=ue!==se):_e===this||(this.lastPutMode=oi.checkPull(this,x,M,n))&&_.checkPut(this,x,M,n))){if(z=this._getDirection(n,a)==="vertical",l=ve(M),de("dragOverValid"),F.eventCanceled)return X;if(m)return ue=se,q(),this._hideClone(),de("revert"),F.eventCanceled||(It?se.insertBefore(M,It):se.appendChild(M)),Q(!0);var me=mr(o,v.draggable);if(!me||oc(n,z,this)&&!me.animated){if(me===M)return Q(!1);if(me&&o===n.target&&(a=me),a&&(p=ve(a)),li(se,o,M,l,a,p,n,!!a)!==!1)return q(),me&&me.nextSibling?o.insertBefore(M,me.nextSibling):o.appendChild(M),ue=o,he(),Q(!0)}else if(me&&rc(n,z,this)){var re=Jt(o,0,v,!0);if(re===M)return Q(!1);if(a=re,p=ve(a),li(se,o,M,l,a,p,n,!1)!==!1)return q(),o.insertBefore(M,re),ue=o,he(),Q(!0)}else if(a.parentNode===o){p=ve(a);var oe=0,De,R=M.parentNode!==o,fe=!$l(M.animated&&M.toRect||l,a.animated&&a.toRect||p,z),je=z?"top":"left",Se=Vo(a,"top","top")||Vo(M,"top","top"),Ge=Se?Se.scrollTop:void 0;qt!==a&&(De=p[je],kn=!1,ai=!fe&&v.invertSwap||R),oe=ac(n,a,p,z,fe?1:v.swapThreshold,v.invertedSwapThreshold==null?v.swapThreshold:v.invertedSwapThreshold,ai,qt===a);var Le;if(oe!==0){var Ue=Fe(M);do Ue-=oe,Le=ue.children[Ue];while(Le&&(N(Le,"display")==="none"||Le===U))}if(oe===0||Le===a)return Q(!1);qt=a,En=oe;var D=a.nextElementSibling,H=!1;H=oe===1;var ct=li(se,o,M,l,a,p,n,H);if(ct!==!1)return(ct===1||ct===-1)&&(H=ct===1),fr=!0,setTimeout(ic,30),q(),H&&!D?o.appendChild(M):a.parentNode.insertBefore(M,H?D:a),Se&&la(Se,0,Ge-Se.scrollTop),ue=M.parentNode,De!==void 0&&!ai&&(hi=Math.abs(De-ve(a)[je])),he(),Q(!0)}if(o.contains(M))return Q(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Z(document,"mousemove",this._onTouchMove),Z(document,"touchmove",this._onTouchMove),Z(document,"pointermove",this._onTouchMove),Z(document,"dragover",Tt),Z(document,"mousemove",Tt),Z(document,"touchmove",Tt)},_offUpEvents:function(){var n=this.el.ownerDocument;Z(n,"mouseup",this._onDrop),Z(n,"touchend",this._onDrop),Z(n,"pointerup",this._onDrop),Z(n,"touchcancel",this._onDrop),Z(document,"selectstart",this)},_onDrop:function(n){var o=this.el,a=this.options;if(Te=Fe(M),gt=Fe(M,a.draggable),Ce("drop",this,{evt:n}),ue=M&&M.parentNode,Te=Fe(M),gt=Fe(M,a.draggable),F.eventCanceled){this._nulling();return}Vt=!1,ai=!1,kn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),pr(this.cloneId),pr(this._dragStartId),this.nativeDraggable&&(Z(document,"drop",this),Z(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_n&&N(document.body,"user-select",""),N(M,"transform",""),n&&(vn&&(n.cancelable&&n.preventDefault(),!a.dropBubble&&n.stopPropagation()),U&&U.parentNode&&U.parentNode.removeChild(U),(se===ue||_e&&_e.lastPutMode!=="clone")&&ce&&ce.parentNode&&ce.parentNode.removeChild(ce),M&&(this.nativeDraggable&&Z(M,"dragend",this),cr(M),M.style["will-change"]="",vn&&!Vt&&Ae(M,_e?_e.options.ghostClass:this.options.ghostClass,!1),Ae(M,this.options.chosenClass,!1),ke({sortable:this,name:"unchoose",toEl:ue,newIndex:null,newDraggableIndex:null,originalEvent:n}),se!==ue?(Te>=0&&(ke({rootEl:ue,name:"add",toEl:ue,fromEl:se,originalEvent:n}),ke({sortable:this,name:"remove",toEl:ue,originalEvent:n}),ke({rootEl:ue,name:"sort",toEl:ue,fromEl:se,originalEvent:n}),ke({sortable:this,name:"sort",toEl:ue,originalEvent:n})),_e&&_e.save()):Te!==Ht&&Te>=0&&(ke({sortable:this,name:"update",toEl:ue,originalEvent:n}),ke({sortable:this,name:"sort",toEl:ue,originalEvent:n})),F.active&&((Te==null||Te===-1)&&(Te=Ht,gt=xn),ke({sortable:this,name:"end",toEl:ue,originalEvent:n}),this.save()))),this._nulling()},_nulling:function(){Ce("nulling",this),se=M=ue=U=It=ce=di=mt=At=Xe=vn=Te=gt=Ht=xn=qt=En=_e=oi=F.dragged=F.ghost=F.clone=F.active=null,bi.forEach(function(n){n.checked=!0}),bi.length=ar=sr=0},handleEvent:function(n){switch(n.type){case"drop":case"dragend":this._onDrop(n);break;case"dragenter":case"dragover":M&&(this._onDragOver(n),nc(n));break;case"selectstart":n.preventDefault();break}},toArray:function(){for(var n=[],o,a=this.el.children,l=0,p=a.length,m=this.options;l<p;l++)o=a[l],He(o,m.draggable,this.el,!1)&&n.push(o.getAttribute(m.dataIdAttr)||lc(o));return n},sort:function(n,o){var a={},l=this.el;this.toArray().forEach(function(p,m){var v=l.children[m];He(v,this.options.draggable,l,!1)&&(a[p]=v)},this),o&&this.captureAnimationState(),n.forEach(function(p){a[p]&&(l.removeChild(a[p]),l.appendChild(a[p]))}),o&&this.animateAll()},save:function(){var n=this.options.store;n&&n.set&&n.set(this)},closest:function(n,o){return He(n,o||this.options.draggable,this.el,!1)},option:function(n,o){var a=this.options;if(o===void 0)return a[n];var l=Pn.modifyOption(this,n,o);typeof l!="undefined"?a[n]=l:a[n]=o,n==="group"&&ha(a)},destroy:function(){Ce("destroy",this);var n=this.el;n[Ie]=null,Z(n,"mousedown",this._onTapStart),Z(n,"touchstart",this._onTapStart),Z(n,"pointerdown",this._onTapStart),this.nativeDraggable&&(Z(n,"dragover",this),Z(n,"dragenter",this)),Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),yi.splice(yi.indexOf(this.el),1),this.el=n=null},_hideClone:function(){if(!mt){if(Ce("hideClone",this),F.eventCanceled)return;N(ce,"display","none"),this.options.removeCloneOnHide&&ce.parentNode&&ce.parentNode.removeChild(ce),mt=!0}},_showClone:function(n){if(n.lastPutMode!=="clone"){this._hideClone();return}if(mt){if(Ce("showClone",this),F.eventCanceled)return;M.parentNode==se&&!this.options.group.revertClone?se.insertBefore(ce,M):It?se.insertBefore(ce,It):se.appendChild(ce),this.options.group.revertClone&&this.animate(M,ce),N(ce,"display",""),mt=!1}}};function nc(d){d.dataTransfer&&(d.dataTransfer.dropEffect="move"),d.cancelable&&d.preventDefault()}function li(d,n,o,a,l,p,m,v){var _,x=d[Ie],S=x.options.onMove,O;return window.CustomEvent&&!lt&&!Sn?_=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent("move",!0,!0)),_.to=n,_.from=d,_.dragged=o,_.draggedRect=a,_.related=l||n,_.relatedRect=p||ve(n),_.willInsertAfter=v,_.originalEvent=m,d.dispatchEvent(_),S&&(O=S.call(x,_,m)),O}function cr(d){d.draggable=!1}function ic(){fr=!1}function rc(d,n,o){var a=ve(Jt(o.el,0,o.options,!0)),l=10;return n?d.clientX<a.left-l||d.clientY<a.top&&d.clientX<a.right:d.clientY<a.top-l||d.clientY<a.bottom&&d.clientX<a.left}function oc(d,n,o){var a=ve(mr(o.el,o.options.draggable)),l=10;return n?d.clientX>a.right+l||d.clientX<=a.right&&d.clientY>a.bottom&&d.clientX>=a.left:d.clientX>a.right&&d.clientY>a.top||d.clientX<=a.right&&d.clientY>a.bottom+l}function ac(d,n,o,a,l,p,m,v){var _=a?d.clientY:d.clientX,x=a?o.height:o.width,S=a?o.top:o.left,O=a?o.bottom:o.right,I=!1;if(!m){if(v&&hi<x*l){if(!kn&&(En===1?_>S+x*p/2:_<O-x*p/2)&&(kn=!0),kn)I=!0;else if(En===1?_<S+hi:_>O-hi)return-En}else if(_>S+x*(1-l)/2&&_<O-x*(1-l)/2)return sc(n)}return I=I||m,I&&(_<S+x*p/2||_>O-x*p/2)?_>S+x/2?1:-1:0}function sc(d){return Fe(M)<Fe(d)?1:-1}function lc(d){for(var n=d.tagName+d.className+d.src+d.href+d.textContent,o=n.length,a=0;o--;)a+=n.charCodeAt(o);return a.toString(36)}function cc(d){bi.length=0;for(var n=d.getElementsByTagName("input"),o=n.length;o--;){var a=n[o];a.checked&&bi.push(a)}}function fi(d){return setTimeout(d,0)}function pr(d){return clearTimeout(d)}wi&&K(document,"touchmove",function(d){(F.active||Vt)&&d.cancelable&&d.preventDefault()});F.utils={on:K,off:Z,css:N,find:aa,is:function(n,o){return!!He(n,o,n,!1)},extend:Ul,throttle:sa,closest:He,toggleClass:Ae,clone:ca,index:Fe,nextTick:fi,cancelNextTick:pr,detectDirection:da,getChild:Jt};F.get=function(d){return d[Ie]};F.mount=function(){for(var d=arguments.length,n=new Array(d),o=0;o<d;o++)n[o]=arguments[o];n[0].constructor===Array&&(n=n[0]),n.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(F.utils=Je(Je({},F.utils),a.utils)),Pn.mount(a)})};F.create=function(d,n){return new F(d,n)};F.version=Xl;var pe=[],gn,vr,gr=!1,ur,dr,_i,mn;function uc(){function d(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return d.prototype={dragStarted:function(o){var a=o.originalEvent;this.sortable.nativeDraggable?K(document,"dragover",this._handleAutoScroll):this.options.supportPointer?K(document,"pointermove",this._handleFallbackAutoScroll):a.touches?K(document,"touchmove",this._handleFallbackAutoScroll):K(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var a=o.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?Z(document,"dragover",this._handleAutoScroll):(Z(document,"pointermove",this._handleFallbackAutoScroll),Z(document,"touchmove",this._handleFallbackAutoScroll),Z(document,"mousemove",this._handleFallbackAutoScroll)),Qo(),pi(),ql()},nulling:function(){_i=vr=gn=gr=mn=ur=dr=null,pe.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,a){var l=this,p=(o.touches?o.touches[0]:o).clientX,m=(o.touches?o.touches[0]:o).clientY,v=document.elementFromPoint(p,m);if(_i=o,a||this.options.forceAutoScrollFallback||Sn||lt||_n){hr(o,this.options,v,a);var _=yt(v,!0);gr&&(!mn||p!==ur||m!==dr)&&(mn&&Qo(),mn=setInterval(function(){var x=yt(document.elementFromPoint(p,m),!0);x!==_&&(_=x,pi()),hr(o,l.options,x,a)},10),ur=p,dr=m)}else{if(!this.options.bubbleScroll||yt(v,!0)===Ze()){pi();return}hr(o,this.options,yt(v,!1),!1)}}},st(d,{pluginName:"scroll",initializeByDefault:!0})}function pi(){pe.forEach(function(d){clearInterval(d.pid)}),pe=[]}function Qo(){clearInterval(mn)}var hr=sa(function(d,n,o,a){if(!!n.scroll){var l=(d.touches?d.touches[0]:d).clientX,p=(d.touches?d.touches[0]:d).clientY,m=n.scrollSensitivity,v=n.scrollSpeed,_=Ze(),x=!1,S;vr!==o&&(vr=o,pi(),gn=n.scroll,S=n.scrollFn,gn===!0&&(gn=yt(o,!0)));var O=0,I=gn;do{var z=I,W=ve(z),X=W.top,de=W.bottom,q=W.left,Q=W.right,he=W.width,me=W.height,re=void 0,oe=void 0,De=z.scrollWidth,R=z.scrollHeight,fe=N(z),je=z.scrollLeft,Se=z.scrollTop;z===_?(re=he<De&&(fe.overflowX==="auto"||fe.overflowX==="scroll"||fe.overflowX==="visible"),oe=me<R&&(fe.overflowY==="auto"||fe.overflowY==="scroll"||fe.overflowY==="visible")):(re=he<De&&(fe.overflowX==="auto"||fe.overflowX==="scroll"),oe=me<R&&(fe.overflowY==="auto"||fe.overflowY==="scroll"));var Ge=re&&(Math.abs(Q-l)<=m&&je+he<De)-(Math.abs(q-l)<=m&&!!je),Le=oe&&(Math.abs(de-p)<=m&&Se+me<R)-(Math.abs(X-p)<=m&&!!Se);if(!pe[O])for(var Ue=0;Ue<=O;Ue++)pe[Ue]||(pe[Ue]={});(pe[O].vx!=Ge||pe[O].vy!=Le||pe[O].el!==z)&&(pe[O].el=z,pe[O].vx=Ge,pe[O].vy=Le,clearInterval(pe[O].pid),(Ge!=0||Le!=0)&&(x=!0,pe[O].pid=setInterval(function(){a&&this.layer===0&&F.active._onTouchMove(_i);var D=pe[this.layer].vy?pe[this.layer].vy*v:0,H=pe[this.layer].vx?pe[this.layer].vx*v:0;typeof S=="function"&&S.call(F.dragged.parentNode[Ie],H,D,d,_i,pe[this.layer].el)!=="continue"||la(pe[this.layer].el,H,D)}.bind({layer:O}),24))),O++}while(n.bubbleScroll&&I!==_&&(I=yt(I,!1)));gr=x}},30),va=function(n){var o=n.originalEvent,a=n.putSortable,l=n.dragEl,p=n.activeSortable,m=n.dispatchSortableEvent,v=n.hideGhostForTarget,_=n.unhideGhostForTarget;if(!!o){var x=a||p;v();var S=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,O=document.elementFromPoint(S.clientX,S.clientY);_(),x&&!x.el.contains(O)&&(m("spill"),this.onSpill({dragEl:l,putSortable:a}))}};function yr(){}yr.prototype={startIndex:null,dragStart:function(n){var o=n.oldDraggableIndex;this.startIndex=o},onSpill:function(n){var o=n.dragEl,a=n.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var l=Jt(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(o,l):this.sortable.el.appendChild(o),this.sortable.animateAll(),a&&a.animateAll()},drop:va};st(yr,{pluginName:"revertOnSpill"});function br(){}br.prototype={onSpill:function(n){var o=n.dragEl,a=n.putSortable,l=a||this.sortable;l.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),l.animateAll()},drop:va};st(br,{pluginName:"removeOnSpill"});F.mount(new uc);F.mount(br,yr);class Dt{static init(n,o){var m,v,_,x,S;this._window=document.querySelector(n),this._sketch=o;const a=(m=this._window)==null?void 0:m.querySelector("#newLayer-js"),l=(v=this._window)==null?void 0:v.querySelector("#deleteLayer-js"),p=(_=this._window)==null?void 0:_.querySelector("#mergeLayer-js");this._layers=((x=this._window)==null?void 0:x.querySelector("ul"))||null,this._layers&&(this._sortable=F.create(this._layers,{animation:100,dataIdAttr:"data-id",onEnd:this._moveLayer.bind(this)})),(S=this._layers)==null||S.addEventListener("click",this._layerClick.bind(this)),a==null||a.addEventListener("click",()=>this._addLayer()),l==null||l.addEventListener("click",this._removeLayer.bind(this)),p==null||p.addEventListener("click",this._mergeLayer.bind(this))}static updateLayers(){var a,l,p,m;this._layers&&(this._layers.innerHTML="");const n=this._sketch.frameManager.currentFrame;if(n)for(const v of n.layers){const _=this._newLayer(v.id,v.drawing.actif);(a=this._layers)==null||a.appendChild(_)}const o=(l=this._sketch.frameManager.currentFrame)==null?void 0:l.layerIndex;(m=(p=this._layers)==null?void 0:p.querySelector(`[data-id="${o}"`))==null||m.classList.add("selected")}static _addLayer(){var m,v,_,x,S;const n=(m=this._layers)==null?void 0:m.querySelector(".selected"),o=this.newId(),a=this._newLayer(o,!0);a.classList.add("selected"),n==null||n.classList.remove("selected"),n?(v=this._layers)==null||v.insertBefore(a,n):(_=this._layers)==null||_.appendChild(a);const p=Array.from(((x=this._layers)==null?void 0:x.querySelectorAll("li"))||[]).indexOf(a);(S=this._sketch.frameManager.currentFrame)==null||S.newLayer(o,p),this._updateSelectedLayer(),this._sketch.updatePreview()}static _newLayer(n,o){const a=document.createElement("li"),l=n;a.classList.add("layers_item"),a.setAttribute("data-id",l.toString()),a.textContent="Layer "+l;const p=document.createElement("input");return p.setAttribute("type","checkbox"),p.checked=o,p.setAttribute("name","visible"),p.classList.add("layers_checkbox"),p.addEventListener("change",this._checkBoxChange.bind(this)),a.insertAdjacentElement("afterbegin",p),a}static _removeLayer(){var p,m,v,_,x;const n=(p=this._layers)==null?void 0:p.querySelectorAll("li");if(!n||n.length<=1)return;const o=(m=this._layers)==null?void 0:m.querySelector(".selected"),a=o==null?void 0:o.nextElementSibling;o==null||o.remove(),a?a==null||a.classList.add("selected"):(_=(v=this._layers)==null?void 0:v.lastElementChild)==null||_.classList.add("selected");const l=Number(o==null?void 0:o.getAttribute("data-id"));l&&((x=this._sketch.frameManager.currentFrame)==null||x.removeLayer(l)),this._updateSelectedLayer(),this._sketch.updatePreview()}static _mergeLayer(){var p,m;const n=(p=this._layers)==null?void 0:p.querySelector(".selected"),o=Number(n==null?void 0:n.getAttribute("data-id")),a=n==null?void 0:n.nextSibling,l=Number(a==null?void 0:a.getAttribute("data-id"));o&&l&&n&&a&&((m=this._sketch.frameManager.currentFrame)==null||m.mergeLayer(o,l),n.remove())}static _updateSelectedLayer(){var o,a;const n=(o=this._layers)==null?void 0:o.querySelector(".selected");if(n){const l=Number(n==null?void 0:n.getAttribute("data-id"));l&&((a=this._sketch.frameManager.currentFrame)==null||a.selectLayer(l))}}static _moveLayer(n){var a,l,p,m;(l=this._sketch.frameManager.currentFrame)==null||l.sortLayers(((a=this._sortable)==null?void 0:a.toArray().map(Number))||[]),this._sketch.updatePreview();const o=n.item;o&&((m=(p=this._window)==null?void 0:p.querySelector(".selected"))==null||m.classList.remove("selected"),o.classList.add("selected"),this._updateSelectedLayer())}static _layerClick(n){var a,l;const o=n.target;o.nodeName==="LI"&&((l=(a=this._window)==null?void 0:a.querySelector(".selected"))==null||l.classList.remove("selected"),o.classList.add("selected")),this._updateSelectedLayer()}static _checkBoxChange(n){var m;const o=n.target,a=o.closest("li"),l=Number(a==null?void 0:a.getAttribute("data-id")),p=o.checked;l&&((m=this._sketch.frameManager.currentFrame)==null||m.setLayerVisible(l,p))}static newId(){var a;const n=Array.from(((a=this._layers)==null?void 0:a.querySelectorAll("li"))||[]),o=Math.max(...n.map(l=>Number(l.getAttribute("data-id"))));return o>0?o+1:1}}T(Dt,"_sketch"),T(Dt,"_window"),T(Dt,"_layers"),T(Dt,"_sortable",null);class dc{static init(){document.querySelectorAll("[translate]").forEach(o=>{const a=o.getAttribute("translate");if(a){const l=na(a);l&&(o.textContent=l)}})}}var hc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4xLWMwMDAgNzkuYjBmOGJlOSwgMjAyMS8xMi8wOC0xOToxMToyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIzLjIgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMi0wNS0xOFQyMjoxNToyNCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjItMDUtMjZUMTM6MDY6MDErMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjItMDUtMjZUMTM6MDY6MDErMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQxN2NhMTQ4LWQzZWItOTQ0OC05YjM5LTdlNmJkODhkY2JhMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0MTdjYTE0OC1kM2ViLTk0NDgtOWIzOS03ZTZiZDg4ZGNiYTMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MTdjYTE0OC1kM2ViLTk0NDgtOWIzOS03ZTZiZDg4ZGNiYTMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQxN2NhMTQ4LWQzZWItOTQ0OC05YjM5LTdlNmJkODhkY2JhMyIgc3RFdnQ6d2hlbj0iMjAyMi0wNS0xOFQyMjoxNToyNCswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIzLjIgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtgaEpQAAAoLSURBVHic7V1tTFRXGp4a0zSNIU3TNP4wDeKoiDNEQYQsIASxEj8mqI3iDiJRArjRQuq6kmLUBhv1h+KqFZWs2qAiacCYatb6tUGzfiGpCAQngEecGHWCOqiDjlzuuz+8YwZ27jnnfp1za+dNnl8zc87zvs+9c8993/ee+xEAWMJmHhvBm0DYhlpYEJNZWBCTWVgQk1lYEJNZWBCDrKSkxKHqhwAQhs44cuTIDwCA3rx546qqqiobO3bsCNrf6kYiJibmU96BMAP27t37dwBAEGQDAwOdNTU1FTQx0oVEYWHh169fv+44ffr0T7wDwhPbt2//23Axgm1wcLC7oaGhctq0aV8YJsjx48e3BpFA9fX1O3gHhgc2bNiQixMjyJDL5frNEEFu3rz5SwgSqK6ubjvvALFEaWlpdog4hLQHDx5cwY2lmkRzc3M9hgSqqamp4B0oFigoKMgURVEuDkPM4/E0Wa3WkbjxVJE4duzYj0A+ItChQ4c28g6YkVi6dOlfBEHoJsQBAAC8Xm+L3W6PII2pmgzhDAkYOnjw4Pe8A2cEHA5H7Nu3bzsJ/gMAgM/na09KShpNM64mUlevXq0FClF27979He8A6onMzEyr3+93EfwGAAC/3++aNWvWBNqxNZO7fPlyDVCIsnPnzm95B1IPJCcnj/H5fO0EfwEAQBCE7oULF8YpGV8XkufOnasGClG2bt1azDugWhAfH/+F1+ttIfgJAACiKKL8/Px0pXPoRvbMmTM/AYUomzdvzucdWDWw2WyjPB5PE8G/936WlJRkq5lHV9LSTSEikS0vL89lHVAtsFqtIx8+fPhfgl/v/dNy0OlOvra2NvjOXZb02rVrv2EVUK3o6elpJPjz3q9du3aVapnLEAcOHz78A1CIova0ZonOzs7zFL4AACDJb03zGebI/v37y0iOiKKIiouLs1gGWAnu3LnzK8kHyXTL4RnqUGVlZSnJIVEU0YoVKzJYBFgJbty4UUfiLhk6f/58tV7zGu7Ytm3bikmOCYLQnZeXN8NoLrRobGz8mcRZMnTt2rVaPedm4uDGjRvzSA4KgtC9ZMmSJBZ8cDh79uwBElfJkPSXpuv8zBxdv359DsnRgYGBzkWLFk1jxWk4GhoaKkkcJUPSxV53DkwdXrNmjYOUqvb7/a758+fHsuQFABapXIDlFjC3242taWgB86OwqKgoa3BwEJuy9vv9rqysrGhWnA4cOPA9UIrh8XiaJk6c+IlRXJgLAgCWvLy8GaQ6Qn9/f0dmZqbVaC47duz4FijF8Hq9LVOnTv3cSD5cBAEAS05OThKpnuDz+drT0tIijeIgpTgQjkMwl5SUlDFGx4WbIABgyc7OnkKqK7x8+bI1OTlZ90BIqRuEmztgLP9CuQoCAJY5c+bE9Pf3d+AC4vV6W6ZPn/6lXnMWFRVl0dbBBUHoXrx48XRW8eAuCABYZs6caSUVfbxeb0tcXJzm/+/c3NwU0qIiYKIoooKCgkyWseAuRgCpqalfvXjxohUXoN7e3ubY2Fhio4AcFixYEEfblACcMtLchQhGYmLi6OfPn/+Oi5LH42maPHnyKKVjz549O5q2Dg4AqKKiooBHDLiLMBxxcXGf9/b2NuOi9ejRo2tK7gXS0tIiaevgAICk/lwu/nMXIBRsNtuox48f38BFze12XyE1nQG8O+to6+BgggY/7sGXQ3R09CeksimpLdNut0c8ffoUe7YFGTp16tQ/efvNPfA4REVFjbh//34jYFpW7927959Qvx0/fvzHT548wZ5lweNcvHjxX7z9BbMLEkBXV9dFwIgSKvMqJQBpDF2/fr2Ot48BcCdAi46Ojn8DRhTpcwuAsjq4ETUNLfgI4I+zk0Nra+uvdrvdZrFYIkN8fL+tra3NYrFYbDab3HeGWFdX1wWr1TpLV5JajfcRoRSUTd5Ec7vdV5Q8+8cK3AmogVTHVm0ej6fJrM9EciegBpMmTfp0cHBQqQ4A8C4nlpCQoFuiUm9wJ6AG0t+WYvP5fO3p6emRvPnjwJ2AUkg3b0iREvCupjFv3jwbb/4kcCegBPv27fsHqLygS61I3H0ggTsBWkh9wEiRCkFG88ClGcCdAA0cDkcsqY4hCEI34Y4ejOql0hPcCZCQmJg4miJ1jlatWjUHgJgyMVWaJBS4EyCB4qkltGnTpvzA9+12e8SrV69wApoiqysH7gRwoHgcAEkX+iG/o/iLC/k7M4A7ATlI6XCEC+rRo0d/lPs9RZsPKisry+Ht53BwJxAK0g4Q2GBKXerYcaqqqrAPDYmiiJxOZwpvf4PBncBwSEetbBBB4YWZdKb5/X5XRkZGFG+/A+BOIBhOpzOF0MCmqn5x9+7d3zBjUu9DwgLcCQSQkpIyhtSmI5VzFY9ttVpHklZrRj5ioATcCdAGTOuddlpaWiRBcFNUD7mLAfC+5CprXq+3JT4+XnZbPFosW7ZsBhCuT7ybHbiLIRWbZIOk90VX2m9Fdj4gLKeNBlcxJMdlgyMIQrfD4dD98TaKLUC4bZTDTQzSkSqKIlq5cqVhnefS0ll2fgjKj7EEFzGkFn9sMFjcRZN6t4w6Q3FgLkZGRkYUabUj7X9rOJfY2NgIUibZ5/O1JyYmUm3PpweYimG32yMIjc9I2qabGSeaWgvL4hZTQUi1Cl5p8XXr1i0GQjWSVXGLmdOEiyi6dOnSYVZcQoHiWXUmxS0mzhI6RdDt27dP8RBhOGhS/kafxYY7uWfPnv97W0Cwma3OTcoagMHFLUOdk9bxSM4zt9t9Zdy4cabqBKHJq4GBy3LDHCOtXsyU8h4OiqW5YcUtQxxKSEj4Ere+V7L1Ni8sX748HQgrLyOKW4Y4g1ve+v1+19y5c03f0glAlYjU/UzX3Qlcp4gZa9gknDx5slLOn4DpWdzSlTxh2YhWr149j3eA1UDmxTVDfNOruKUbaUIjNNqyZQuXnRH0AsVDpLoUt3QhS+gUMW1TmhJMmTLlM5qWVq3FLc1ECZ0i6MSJEx/M+6hoEpGgsbiliSChERpduHDBFA/j6wma3VVBQ3FLNTHCHa3pu8y1oLq6egNQ7EOsprilmhQm54Pa2trO8A6a0aBIRKoqbulOxiwNZyxAkYiEZ8+e/a7kxlExCVyniMfjaZowYcLHvAPFClardSRpby8AZQepIgK4VEJfX18Ly9qzWUCTiAQFN47UE0spj5BimK2DnDWk122EjE3ABEHozs3NJaaNNB8Fal4N9yEC8++Benp6GlNTU7+iGYdqMrmtVc3+hhzWCFGqRtI7uajHoP5iYWHh18PuyE35SBhv3Lp1qx4AUF9fX4ual9Qo+nLQa6o/mDd3GoGGhobKqKgoVVs/Kd7ArLy8/K8xMTGTnU5nuUFbeP2p7Q+1o9yfwUbwJhC2oRYWxGQWFsRkFhbEZBYWxGQWFsRkFhbEZPY/sFO0fMCITY4AAAAASUVORK5CYII=",fc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACPklEQVR4nO2cS5LDIAwF5am5/5U9q0nF+dhgwO4nXu9TBTSSECRZ1nUNw+Hn7gGYLRYCw0JgWAiM37sH0AjxRLK0fFhZCFFGxHZc1XJUhVBlvFItxzXkOoo2kYVcy6EUC7meXSkWAsNCYFjIPXxNW6rH3iXKj75NjVoh3Y7hqkJoPEtvkuOUBcNC+tOUIpWFXFEbLkdZiDofa42yEJULxiqUhaTEQsZwur6pCiE1hS28zUNVSFosBIaFjONUulQUkqV+/LOZj6KQ1FgIjDuv3z+lnl5phpKuat5tIqKvkB5XGWvsL2bK65JnaoRctRhHUlJTWkPS70wKJULUZEhH15EQNRnyKB17p9gcRCHSKacVmpCpZURwvpeVrSE8zSgh8gtzF3tCSLeqUxT0CF4NmZXHhrMQGK1CSLWCNJbTOEJgWMh4qiLXQmBYyHhuezG8m5KJ4wt/JiEl4BtMpywGj8i1EBgWAkNFCL4Y90JFyDQoCZkiSpSEROSUspmTYh9SK4Xce7zNRVFILVJRpZay0mMhMLKnrJG/QRlC5gj5VszJRT6tkKNFx0rJKkQWC4FhITBahWBzsSqOEBgWAmNPCLqByoojBIaFwLAQGBYCw0JgWAgMC4HR44Hq9frk6v7l7PUN8m+gRrwY+n6rAacsGBYCw0JgWAiMmYXgTlgRx0KQg+4Adl4lEYId/AmWgM+ntA85mgSp90Av+BG9GkPpRSAxc1FHYiEwLASGhcCwEBgWAsNCYFgIDAuBYSEw/gA/aTLvItMlWwAAAABJRU5ErkJggg==";class yn{static init(n,o,a){this._element=document.querySelector(n),this._frameList=this._element.querySelector("#frameList-js"),this._sketch=o,this._updateLayers=a;const l=this._element.querySelector("#newFrame-js");l==null||l.addEventListener("click",this._addFrame.bind(this)),F.create(this._frameList,{onStart:this._onSortStart.bind(this),onSort:this._onSort.bind(this)}),this._addFrame(),this._sketch.addEventListener("update",this._onSketchChange.bind(this))}static _handleClick(n){if(this._sketch.playing){ot.show("inactifClick-modal");return}const o=n.target,a=o==null?void 0:o.closest(".anim_frame"),l=o==null?void 0:o.closest(".anim_delete");(o==null?void 0:o.closest(".anim_duplicate"))!==null?this._duplicateFrame(a):l!==null?(this._removeFrame(a),this._updateLayers()):(this._selectFrame(a),this._updateLayers())}static _onSortStart(n){this._sketch.playing&&(ot.show("inactifClick-modal"),n.preventDefault)}static _onSort(n){const a=Array.from(this._frameList.querySelectorAll(".anim_frame:not(.anim_frame-new)")).map(p=>Number(p.getAttribute("data-id"))),l=n.item;if(this._sketch.frameManager.sortFrames(a),this._sketch.playing){ot.show("inactifClick-modal");return}this._selectFrame(l),this._updateLayers()}static _addFrame(){if(this._sketch.playing){ot.show("inactifClick-modal");return}const n=this.newId(),o=this._createEl(n);this._frameList.appendChild(o),this._frameList.scrollTo(this._frameList.scrollWidth,0),this._sketch.frameManager.newFrame(n),this._selectFrame(o),this._updateLayers()}static _removeFrame(n){if(this._sketch.playing){ot.show("inactifClick-modal");return}const o=this._frameList.querySelectorAll(".anim_frame");if((o==null?void 0:o.length)>2){if(n.classList.contains("selected")){const p=Array.from(this._frameList.querySelectorAll(".anim_frame:not(.anim_frame-new)")),m=p.indexOf(n);if(m>=1){const v=p[m-1];console.log(m,v),this._selectFrame(v)}else{const v=p[1];this._selectFrame(v)}}const l=Number(n.getAttribute("data-id"));this._sketch.frameManager.removeFrame(l),n.remove()}}static _selectFrame(n){const o=this._frameList.querySelector(".selected");o==null||o.classList.remove("selected"),n.classList.add("selected");const a=Number(n.getAttribute("data-id"));this._sketch.frameManager.selectFrame(a),this._sketch.updatePreview()}static _duplicateFrame(n){const o=Number(n.getAttribute("data-id")),a=this.newId(),l=this._createEl(a);this._sketch.frameManager.duplicate(o,a);const p=this._sketch.frameManager.frames.find(m=>m.id===a);l.style.backgroundImage=`url(${p.preview.toDataURL()})`,this._frameList.appendChild(l),this._frameList.scrollTo(this._frameList.scrollWidth,0),this._selectFrame(l),this._updateLayers()}static _createEl(n){const o=document.createElement("li");o.classList.add("anim_frame"),o.setAttribute("data-id",n.toString());const a=document.createElement("button");a.classList.add("anim_delete"),a.setAttribute("tooltip-text","remove frame"),a.setAttribute("tooltip-right","true");const l=document.createElement("img");l.src=hc,l.setAttribute("alt","remove frame"),a.appendChild(l),o.appendChild(a);const p=document.createElement("button");p.classList.add("anim_duplicate"),p.setAttribute("tooltip-text","duplicate frame"),p.setAttribute("tooltip-right","true");const m=document.createElement("img");return m.src=fc,m.setAttribute("alt","duplicate frame"),p.appendChild(m),o.appendChild(p),o.addEventListener("click",this._handleClick.bind(this)),o}static newId(){const n=Array.from(this._frameList.querySelectorAll(".anim_frame")||[]),o=Math.max(...n.map(a=>Number(a.getAttribute("data-id"))));return o>0?o+1:1}static _onSketchChange(){Array.from(this._frameList.querySelectorAll(".anim_frame:not(.anim_frame-new)")).forEach(o=>{const a=Number(o.getAttribute("data-id")),l=this._sketch.frameManager.frames.find(p=>p.id===a);o.style.backgroundImage=`url(${l.preview.toDataURL()})`})}}T(yn,"_sketch"),T(yn,"_element"),T(yn,"_frameList"),T(yn,"_updateLayers");class bn{static init(n){this._playBtn=document.getElementById("play"),this._onionBtn=document.getElementById("oignon"),this._fpsInput=document.getElementById("fps"),this._playBtn.addEventListener("click",this._handleClickPlay.bind(this)),this._fpsInput.addEventListener("change",this._handleChangeFps.bind(this)),this._onionBtn.addEventListener("change",this._handleChangeOnion.bind(this)),this._sketch=n}static _handleClickPlay(n){n.target.checked?this._sketch.play():this._sketch.stop()}static _handleChangeFps(n){const o=n.target,a=o.value,l=Math.floor(Math.min(24,Math.max(1,Number(a))));o.value=l.toString(),this._sketch.fps=l}static _handleChangeOnion(){this._sketch.onion=this._onionBtn.checked,this._sketch.updatePreview()}}T(bn,"_sketch"),T(bn,"_playBtn"),T(bn,"_onionBtn"),T(bn,"_fpsInput");customElements.define("sketch-app",Ml);const We=document.querySelector("sketch-app");Al.init("#tools-js input[type=radio]",We);Tl.init("#size-js",We);zl.init(".actions_btn",We);Fl.init("#colorBtn-js",We);Dt.init("#layers-js",We);yn.init("#anim-js",We,Dt.updateLayers.bind(Dt));bn.init(We);vi.init("#resizeForm-js",We);Ll.init();dc.init();We.addEventListener("inactif-click",()=>ot.show("inactifClick-modal"));We.onload=()=>We.camera.fitSketch();

var js=Object.defineProperty;var Rs=(d,i,o)=>i in d?js(d,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[i]=o;var L=(d,i,o)=>(Rs(d,typeof i!="symbol"?i+"":i,o),o);const zs=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const v of u)if(v.type==="childList")for(const y of v.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function o(u){const v={};return u.integrity&&(v.integrity=u.integrity),u.referrerpolicy&&(v.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?v.credentials="include":u.crossorigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function s(u){if(u.ep)return;u.ep=!0;const v=o(u);fetch(u.href,v)}};zs();var Ls=Object.defineProperty,Bs=(d,i,o)=>i in d?Ls(d,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[i]=o,ne=(d,i,o)=>(Bs(d,typeof i!="symbol"?i+"":i,o),o);function Fs(d,i,o){d/=255,i/=255,o/=255;const s={h:0,s:0,b:0};var u=0,v=0;if(d>=i&&d>=o?(v=d,u=i>o?o:i):i>=o&&i>=d?(v=i,u=d>o?o:d):(v=o,u=i>d?d:i),s.b=v,s.s=v?(v-u)/v:0,!s.s)s.h=0;else{const y=v-u;d==v?s.h=(i-o)/y:i==v?s.h=2+(o-d)/y:s.h=4+(d-i)/y,s.h=Math.floor(s.h*60),s.h<0&&(s.h+=360)}return s.s=Math.floor(s.s*100),s.b=Math.floor(s.b*100),s}function Mt(d,i,o){let s=0,u=0,v=0;if(i==0)o==0?s=u=v=0:s=u=v=Math.floor(o*255/100);else{d==360&&(d=0),d/=60,i=i/100,o=o/100;var y=Math.floor(d),p=d-y,x=o*(1-i),E=o*(1-i*p),O=o*(1-i*(1-p));switch(y){case 0:s=o,u=O,v=x;break;case 1:s=E,u=o,v=x;break;case 2:s=x,u=o,v=O;break;case 3:s=x,u=E,v=o;break;case 4:s=O,u=x,v=o;break;case 5:s=o,u=x,v=E;break}s=Math.floor(s*255),u=Math.floor(u*255),v=Math.floor(v*255)}return Ns(s,u,v)}function Ns(d,i,o){return"#"+[d,i,o].map(s=>("0"+s.toString(16)).slice(-2)).join("")}function Xs(d){const i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:null}function Ys(d){const i=Xs(d);return i?Fs(i[0],i[1],i[2]):null}function Do(d){return/(^#[0-9A-F]{6}$)/i.test(d)}class Ws{constructor(i,o,s){ne(this,"elements"),ne(this,"confirmBtn"),ne(this,"cancelBtn"),this._colorPicker=i,this.elements=document.createElement("div"),this.elements.classList.add("btns"),this.confirmBtn=document.createElement("button"),this.confirmBtn.classList.add("btns_ok"),this.confirmBtn.textContent=o,this.elements.appendChild(this.confirmBtn),this.cancelBtn=document.createElement("button"),this.cancelBtn.classList.add("btns_cancel"),this.cancelBtn.textContent=s,this.elements.appendChild(this.cancelBtn),this.cancelBtn.addEventListener("click",()=>this._cancel()),this.cancelBtn.addEventListener("keydown",u=>this._keyDown(u)),this.confirmBtn.addEventListener("click",()=>this._confirm())}_cancel(){this._colorPicker.exit()}_confirm(){this._colorPicker.close();const i=Mt(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness);this._colorPicker.dispatchEvent(new CustomEvent("color-change",{detail:i}))}_keyDown(i){var o,s;i.code==="Tab"&&!i.shiftKey&&((s=(o=this._colorPicker.shadowRoot)==null?void 0:o.querySelector(".picker"))==null||s.focus(),i.preventDefault())}}function Hs(){const d=document.createElement("style");return d.textContent=`
            :host {
				display:flex;
				flex-direction: column;
				align-items: center;
                position: relative;
                padding:.5rem;
                gap:.7rem;
                background-color:var(--bg,#3f3e3e);
                border-radius:0.3125rem;
                display:none;
                z-index:10;
            }
            .picker{
                width:100%;
                height:auto;
                aspect-ratio:1;
                background-color: #ff0000;
                position:relative;
                cursor:pointer;
            }
            .picker::after{
                content:"";
                position:absolute;
                inset:0;
                background-image: linear-gradient(to right, #fff, rgba(204, 154, 129, 0));
            }
            .picker::before{
                content:"";
                position:absolute;
                inset:0;
                z-index:1;
                background-image: linear-gradient(to top, #000, rgba(204, 154, 129, 0));
            }
            .picker_cursor{
                position:absolute;
                width:.6rem;
                height:.6rem;
                border-radius:50%;
                border:2px solid #fff;
                mix-blend-mode:difference;
                left:100%;
                transform:translate(-50%,-50%);
                z-index:2;
            }
            .range-wrapper{
                display:flex;
                align-items:center;
                justify-content:space-between;
                width:100%;
                gap:.5rem;
            }
            .hueRange{
				-webkit-appearance :none;
                width:100%;
                height:.8rem;
                outline: 0;
                border-radius:0.5rem;
                box-sizing:border-box;
                background: linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%);
                cursor:pointer;
				padding:0;
            }
            .hueRange:focus{
                outline:1px solid;
            }
            .preview{
                width:1.5rem;
                height:auto;
                aspect-ratio:1;
                outline:1px solid white;
            }
            input[type=range]::-webkit-slider-thumb {
                -webkit-appearance: none;
                border: 2px solid #ffff;
                height: 1rem;
                width: .35rem;
                background: transparent;
                cursor: pointer;
              }
              
              input[type=range]::-moz-range-thumb {
                -webkit-appearance: none;
                border: 2px solid #ffff;
                height: 1rem;
                width: .35rem;
                background: transparent;
                cursor: pointer;
              }
			  .pallet{
				  width:100%;
                display:grid;
                grid-template-columns:repeat(8,1fr);
                align-content:center;
				gap:.2rem;
            }
            .colorBtn{
                display: none;
            }
            .colorLabel{
                cursor:pointer;
                border-radius:0.125rem;
				width:100%;
				height:auto;
				aspect-ratio:69 / 69;
            }
            .colorLabel:hover,.colorLabel:focus{
                transform:scale(1.1);
            }
            .colorBtn:checked + .colorLabel{
                outline:1px solid white;
                outline-offset: 1px;
            }
            .hexInput{
                grid-row:2;
                grid-column:2 / -1;
                display:block;
                width:100%;
                margin:0;
                box-sizing:border-box;
                background-color:var(--bg-input,#282828);
                color:var(--font-color,white);
                font-size:.8em;
                border:0;
                padding:.4rem;
            }
            .hexInput.error{
                background-color: var(--bg-error,#7b0000);
            }
            .btns{
                display:flex;
                width:100%;
                gap:.3125rem;
            }
            .btns_ok,.btns_cancel{
                width:100%;
                cursor:pointer;
                background-color:var(--bg-input,#282828);
                color:var(--font-color,white);
                border:0;
                padding:0.2rem;
            }
        `,d}class qs{constructor(i,o){ne(this,"element"),this._colorPicker=i,this._onChange=o,this.element=document.createElement("input"),this.element.classList.add("hexInput"),this.element.setAttribute("type","text"),this.element.setAttribute("maxlength","7"),this.update(),this.element.addEventListener("input",s=>this._onInput(s))}update(){const i=Mt(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness);this.element.value=i}_onInput(i){const o=i.target;/^#([A-Fa-f0-9]{6})$/.test(o.value)?(this.element.classList.remove("error"),this._onChange(o.value)):this.element.classList.add("error")}}class Vs{constructor(i,o){ne(this,"element"),this._colorPicker=i,this._onChange=o,this.element=document.createElement("input"),this.element.classList.add("hueRange"),this.element.setAttribute("type","range"),this.element.setAttribute("min","0"),this.element.setAttribute("max","360"),this.element.setAttribute("value","0"),this.element.addEventListener("input",s=>this._hueRangeChange())}_hueRangeChange(){this._onChange(this.value)}update(){this.value=this._colorPicker.hue}get value(){return parseInt(this.element.value)}set value(i){this.element.value=i.toString()}}class Io{constructor(i,o,s){ne(this,"element"),ne(this,"selected"),this._colorPicker=i,this._onChange=s,this.element=document.createElement("div"),this.element.classList.add("pallet"),this._init(o),this.selected=this.element.querySelector('input[type="radio"]')}_init(i){const o=this.element.querySelector("input:checked");this.element.innerHTML="",i.forEach((u,v)=>{const y=document.createElement("input");y.setAttribute("type","radio"),y.setAttribute("name","color"),y.setAttribute("value",u),y.id=`clrBtn-${v}`,y.classList.add("colorBtn");const p=document.createElement("label");p.setAttribute("for",`clrBtn-${v}`),p.classList.add("colorLabel"),p.style.backgroundColor=u,p.setAttribute("tabindex","0"),p.addEventListener("keydown",x=>{x.code==="Space"&&p.click()}),y.addEventListener("click",x=>this._clrBtnClick(x)),this.element.appendChild(y),this.element.appendChild(p)});const s=o?this.element.querySelector(`#${o.id}`):null;s?(this.selected=s,this.selected&&(this.selected.checked=!0)):(this.selected=o||this.element.querySelector('input[type="radio"]'),this.selected.checked=!0),this._onChange(this.selected.value)}_clrBtnClick(i){const o=i.target;this.selected=o,this._onChange(o.value)}setColors(i){this._init(i)}update(){const i=Mt(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness),o=this.element.querySelector(`label[for="${this.selected.id}"]`);this.selected.value=i,o&&o.style.setProperty("background-color",i)}get clrs(){const i=[];return this.element.querySelectorAll(".colorBtn").forEach(s=>{i.push(s.value)}),i}}class $s{constructor(i,o){ne(this,"element"),ne(this,"cursor"),this._colorPicker=i,this._onChange=o,this.element=document.createElement("div"),this.element.classList.add("picker"),this.element.addEventListener("click",s=>this._onClick(s)),this.element.addEventListener("mousemove",s=>this._onMove(s)),this.element.setAttribute("tabindex","0"),this.cursor=document.createElement("span"),this.cursor.classList.add("picker_cursor"),this.element.appendChild(this.cursor),this.element.addEventListener("keydown",s=>this._pickerKeyDown(s))}_onClick(i){const{left:o,top:s,width:u,height:v}=this.element.getBoundingClientRect(),y=i.clientX-o,p=i.clientY-s;this.cursor.style.setProperty("left",`${y}px`),this.cursor.style.setProperty("top",`${p}px`),this._colorPicker.brightness=Math.min(100,Math.max(0,100-p/v*100)),this._colorPicker.saturation=Math.min(100,Math.max(0,y/u*100)),this._onChange()}_onMove(i){if(i.buttons===1){i.preventDefault();const{left:o,top:s,width:u,height:v}=this.element.getBoundingClientRect(),y=Math.min(u,Math.max(0,i.clientX-o)),p=Math.min(v,Math.max(0,i.clientY-s));this.cursor.style.setProperty("left",`${y}px`),this.cursor.style.setProperty("top",`${p}px`),this._colorPicker.brightness=Math.min(100,Math.max(0,100-p/v*100)),this._colorPicker.saturation=Math.min(100,Math.max(0,y/u*100)),this._onChange()}}_pickerKeyDown(i){var o,s;switch(i.key){case"ArrowUp":this._colorPicker.brightness=Math.min(100,this._colorPicker.brightness+10),this._onChange();break;case"ArrowDown":this._colorPicker.brightness=Math.max(0,this._colorPicker.brightness-10),this._onChange();break;case"ArrowLeft":this._colorPicker.saturation=Math.max(0,this._colorPicker.saturation-10),this._onChange();break;case"ArrowRight":this._colorPicker.saturation=Math.min(100,this._colorPicker.saturation+10),this._onChange();break;case"Tab":i.shiftKey&&((s=(o=this._colorPicker.shadowRoot)==null?void 0:o.querySelector(".btns_cancel"))==null||s.focus(),i.preventDefault());break}this.update()}update(){this.element.style.setProperty("background-color",Mt(this._colorPicker.hue,100,100));const{width:i,height:o}=this.element.getBoundingClientRect(),s=this._colorPicker.saturation/100*i,u=(1-this._colorPicker.brightness/100)*o;this.cursor.style.setProperty("left",`${s}px`),this.cursor.style.setProperty("top",`${u}px`)}}class Gs{constructor(i){ne(this,"element"),this._colorPicker=i,this.element=document.createElement("div"),this.element.classList.add("preview")}update(){const i=Mt(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness);this.element.style.backgroundColor=i}}class Us extends HTMLElement{constructor(){var i;super(),ne(this,"_picker"),ne(this,"_hueRange"),ne(this,"_hexInput"),ne(this,"_preview"),ne(this,"_rangeWrapper"),ne(this,"_btns"),ne(this,"_pallet",null),ne(this,"_selectedClr",null),ne(this,"_palletClr",null),ne(this,"_savedPalletClr",null),ne(this,"_savedSelected",null),ne(this,"_value"),ne(this,"_savedValue",null),ne(this,"hue",0),ne(this,"saturation",0),ne(this,"brightness",0),ne(this,"_backdrop"),ne(this,"_openBtn",null);const o=this.attachShadow({mode:"open"});this._definePalletClr(),this._picker=new $s(this,this._onPickerChange.bind(this)),this._hueRange=new Vs(this,this._onHueRangeChange.bind(this)),this._preview=new Gs(this),this._rangeWrapper=document.createElement("div"),this._rangeWrapper.classList.add("range-wrapper"),this._rangeWrapper.appendChild(this._hueRange.element),this._palletClr&&(this._pallet=new Io(this,this._palletClr,this._onPalletChange.bind(this))),this._hexInput=new qs(this,this._onHexInputChange.bind(this)),this._btns=new Ws(this,this.getAttribute("confirm-label")||"Ok",this.getAttribute("cancel-label")||"Cancel"),o.appendChild(this._picker.element),o.appendChild(this._rangeWrapper),this._pallet?(o.appendChild(this._pallet.element),this._palletClr&&(this.updateHSB(this._palletClr[0]),this._selectedClr=this._pallet.element.querySelector(`input[value="${this._palletClr[0]}"]`))):(this._rangeWrapper.insertBefore(this._preview.element,this._hueRange.element),this._preview.update()),this._value=((i=this._selectedClr)==null?void 0:i.value)||"#000000",o.appendChild(this._hexInput.element),o.appendChild(this._btns.elements),this._picker.update(),this.setAttribute("aria-label","Color Picker"),this.setAttribute("role","dialog"),this.setAttribute("tabindex","0"),o.appendChild(Hs()),this._backdrop=this._createBackdrop()}static get observedAttributes(){return["confirm-label","cancel-label","pallet"]}attributeChangedCallback(i,o,s){i==="pallet"?(this._definePalletClr(),this._resetPallet()):i==="confirm-label"?this._btns.confirmBtn.textContent=s:i==="cancel-label"&&(this._btns.cancelBtn.textContent=s)}_resetPallet(){var i,o;const s=this._rangeWrapper.querySelector(".preview");s&&this._rangeWrapper.removeChild(s),this._palletClr?(this._pallet||(this._pallet=new Io(this,this._palletClr,this._onPalletChange),(i=this.shadowRoot)==null||i.insertBefore(this._pallet.element,this._hexInput.element),this._selectedClr=this._pallet.element.querySelector(`input[value="${this._palletClr[0]}"]`),this._selectedClr&&(this._selectedClr.checked=!0)),(o=this._pallet)==null||o.setColors(this._palletClr)):(this._rangeWrapper.insertBefore(this._preview.element,this._hueRange.element),this._preview.update())}get value(){return this._value}set value(i){var o;if(!Do(i))throw new Error("Invalid hex color");if(this._value=Mt(this.hue,this.saturation,this.brightness),this._savedValue=this._value,this._hexInput.update(),this._preview.update(),this._picker.update(),this._hueRange.update(),this.updateHSB(i),this._pallet){(o=this._pallet)==null||o.update();const s=Array.from(this._pallet.element.querySelectorAll('input[type="radio"]'));this._palletClr=s.map(u=>u.value),this._savedPalletClr=[...this._palletClr]}}open(){var i,o;this._openBtn=document.activeElement,this.style.display="flex",this.setAttribute("aria-hidden","false"),this._picker.element.focus(),this.addEventListener("keydown",s=>this._keyDown(s)),this._picker.update(),this._hexInput.update(),this._resetPallet(),this._palletClr&&(this._savedPalletClr=[...this._palletClr]),this._savedValue=this.value,this._savedSelected=((o=(i=this._pallet)==null?void 0:i.element.querySelector("input:checked"))==null?void 0:o.id)||null,document.body.appendChild(this._backdrop)}_createBackdrop(){const i=document.createElement("div");return i.classList.add("backdrop"),i.addEventListener("click",()=>this.exit()),i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.zIndex="1",i.style.backgroundColor="rgba(0,0,0,0.5)",i.id="clrpckr-backdrop",i}close(){var i;this.style.display="none",this.setAttribute("aria-hidden","true"),this.removeEventListener("keydown",s=>this._keyDown(s)),this._pallet&&(this._palletClr=this._pallet.clrs),this._value=Mt(this.hue,this.saturation,this.brightness);const o=document.getElementById("clrpckr-backdrop");o&&o.remove(),(i=this._openBtn)==null||i.focus()}exit(){var i;this.close(),this._savedPalletClr&&(this._palletClr=[...this._savedPalletClr]),this._savedValue&&(this.value=this._savedValue);const o=(i=this._pallet)==null?void 0:i.element.querySelector(`#${this._savedSelected}`);o&&(o.checked=!0)}_definePalletClr(){const i=this.getAttribute("pallet");let o=[];i&&JSON.parse(i).forEach(u=>{typeof u=="string"&&Do(u)&&o.push(u)}),this._palletClr=o.length>0?o:null}_keyDown(i){i.code==="Escape"?this.exit():i.code==="Enter"&&this.close()}updateHSB(i){const o=Ys(i);o&&(this.hue=o.h,this.saturation=o.s,this.brightness=o.b)}_onPalletChange(i){var o,s,u,v;this.updateHSB(i),(o=this._picker)==null||o.update(),(s=this._hueRange)==null||s.update(),(u=this._hexInput)==null||u.update(),(v=this._preview)==null||v.update()}_onHexInputChange(i){var o,s,u,v;this.updateHSB(i),(o=this._picker)==null||o.update(),(s=this._hueRange)==null||s.update(),(u=this._pallet)==null||u.update(),(v=this._preview)==null||v.update()}_onHueRangeChange(i){var o,s,u,v;this.hue=i,(o=this._picker)==null||o.update(),(s=this._pallet)==null||s.update(),(u=this._hexInput)==null||u.update(),(v=this._preview)==null||v.update()}_onPickerChange(){var i;(i=this._pallet)==null||i.update(),this._hexInput.update(),this._preview.update()}}customElements.define("color-picker",Us);class Ks{constructor(i,o){L(this,"_zoomValue",1);L(this,"_translate",{x:0,y:0});this._frame=i,this._canvas=o,document.addEventListener("fullscreenchange",s=>{this.fitSketch()})}get zoomValue(){return this._zoomValue}set zoomValue(i){this._zoomValue=i,this._canvas.style.width=this._canvas.width*this._zoomValue+"px";const o=this._frame.getBoundingClientRect();this.translate={x:-(o.width-this._canvas.width*this._zoomValue)/2,y:-(o.height-this._canvas.height*this._zoomValue)/2}}get translate(){return this._translate}set translate(i){this._translate=i,this._canvas.style.setProperty("transform",`translate(${-this._translate.x}px,${-this._translate.y}px)`)}fitSketch(){const{width:i,height:o}=this._frame.getBoundingClientRect(),s=this._canvas.width/this._canvas.height,u=i/o;this.zoomValue=s<u?o/this._canvas.height:i/this._canvas.width}zoom(i,o,s){let u=this._zoomValue>1?this._zoomValue+1:this._zoomValue*2;if(o&&o<0&&(u=this._zoomValue>1?this._zoomValue-1:this._zoomValue*.999999),s&&(u=s>1?this._zoomValue+.25:this._zoomValue-.25),u=Math.max(1,Math.min(50,u)),i){i.x=Math.min(Math.max(i.x,0),this._canvas.width),i.y=Math.min(Math.max(i.y,0),this._canvas.width);const v=i.x*u-i.x*this._zoomValue+this._translate.x,y=i.y*u-i.y*this._zoomValue+this._translate.y;this._translate={x:v,y}}this._zoomValue=u,this._canvas.style.width=this._canvas.width*this._zoomValue+"px",this._canvas.style.setProperty("transform",`translate(${-this._translate.x}px,${-this._translate.y}px)`)}drag(i,o){const s=o.x-i.x,u=o.y-i.y;this.translate={x:this.translate.x-s,y:this.translate.y-u}}}class Yo{constructor(){L(this,"rgba",[0,0,0,255])}get hex(){return"#"+this.rgba.map(i=>("00"+i.toString(16)).slice(-2)).join("")}}class Zs extends Yo{constructor(i){var s;super();const o=((s=i.replace("#","").match(/(..?)/g))==null?void 0:s.map(u=>parseInt(u,16)))||[];this.rgba=this.rgba.map((u,v)=>o[v]||u)}}class Js extends Yo{constructor(i){super(),this.rgba=i}}function Ur(d){return typeof d=="string"?new Zs(d):new Js(d)}class Wo{constructor(){L(this,"_canvas");L(this,"actif",!0);L(this,"_ctx");this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d")}set width(i){this._canvas.width=i}get width(){return this._canvas.width}set height(i){this._canvas.height=i}get height(){return this._canvas.height}get canvas(){return this._canvas}getImgData(i=0,o=0,s=this.width,u=this.height){return new ImageData(new Uint8ClampedArray(this._ctx.getImageData(i,o,s,u).data),s,u)}get imgData(){return this._ctx.getImageData(0,0,this.width,this.height)}crop(i,o,s,u){const v=this._ctx.getImageData(i,o,s,u);this.width=s,this.height=u,this._ctx.putImageData(v,0,0)}putDatas(i,o,s){this.clear(),this._ctx.putImageData(i,o,s)}resize(i,o,s=-1,u=-1){const v=this._ctx.getImageData(0,0,this.width,this.height);this.width=i,this.height=o,this._ctx.putImageData(v,0,0)}paint(i,o,s){this._ctx.fillStyle=s||"#000000";const u=o>1?i.x-o/2:i.x,v=o>1?i.y-o/2:i.y;this._ctx.fillRect(Math.floor(u),Math.floor(v),o,o)}erase(i,o){const s=o>1?i.x-o/2:i.x,u=o>1?i.y-o/2:i.y;this._ctx.clearRect(Math.floor(s),Math.floor(u),o,o)}_getColor(i){const[o,s,u,v]=this._ctx.getImageData(i.x,i.y,1,1).data;return[o,s,u,v].join("-")}_getHexColor(i){const[o,s,u,v]=this._ctx.getImageData(i.x,i.y,1,1).data;return v===0?null:"#"+((1<<24)+(o<<16)+(s<<8)+u).toString(16).slice(1)}_hexToRgba(i){var s;const o=((s=i.replace("#","").match(/(..?)/g))==null?void 0:s.map(u=>parseInt(u,16)))||[];for(let u=o.length;u<4;u++)o.push(u===3?255:0);return o}}class oi extends Wo{clear(){this._ctx.clearRect(0,0,this.width,this.height)}bucket(i,o){const s=i.y*this.width+i.x,u=this.getImgData().data,v=Ur([...u.slice(4*s,4*s+4)]);if(Ur(o).hex===v.hex)return;const p=new Set([s]),x=p.values();let E=x.next();for(;!E.done;){if(Ur([...u.slice(4*E.value,4*E.value+4)]).hex===v.hex){const S=E.value%this.width,D=Math.floor(E.value/this.width);S>0&&p.add(E.value-1),S<this.width-1&&p.add(E.value+1),D>0&&p.add(E.value-this.width),D<this.height-1&&p.add(E.value+this.width),this.paint({x:S,y:D},1,o)}E=x.next()}}line(i,o,s,u){const v=Math.floor(i.x),y=Math.floor(i.y),p=Math.floor(o.x),x=Math.floor(o.y);if(v===p&&y===x){this.paint(i,s,u);return}const E=Math.abs(p-v),O=Math.abs(x-y),S=Math.sign(p-v),D=Math.sign(x-y);if(O===0)for(let z=v;z!==p+S;z+=S)this.paint({x:z,y},s,u);else if(E===0)for(let z=y;z!==x+D;z+=D)this.paint({x:v,y:z},s,u);else if(E>=O){const z=2*O,q=-2*E;let Y=-E,fe=y;for(let V=v;V!==p+S;V+=S)this.paint({x:V,y:fe},s,u),Y+=z,Y>=0&&(fe+=D,Y+=q)}else{const z=2*E,q=-2*O;let Y=-O,fe=v;for(let V=y;V!==x+D;V+=D)this.paint({x:fe,y:V},s,u),Y+=z,Y>=0&&(fe+=S,Y+=q)}}fillRect(i,o,s,u){this._ctx.fillStyle=u,this._ctx.fillRect(i.x,i.y,o,s)}rect(i,o,s,u,v){this.line({x:i.x,y:i.y},{x:i.x+o,y:i.y},u,v),this.line({x:i.x+o,y:i.y},{x:i.x+o,y:i.y+s},u,v),this.line({x:i.x,y:i.y+s},{x:i.x+o,y:i.y+s},u,v),this.line({x:i.x,y:i.y},{x:i.x,y:i.y+s},u,v)}ellipse(i,o,s,u,v){this._ctx.fillStyle=v;const y=Math.floor(o/2),p=Math.floor(s/2);let x=0,E=p,O=p*p-y*y*p+.25*y*y,S=2*p*p*x,D=2*y*y*E;for(;S<D;)this._ctx.fillRect(x+i.x,E+i.y,u,u),this._ctx.fillRect(-x+i.x,E+i.y,u,u),this._ctx.fillRect(x+i.x,-E+i.y,u,u),this._ctx.fillRect(-x+i.x,-E+i.y,u,u),O<0?(x++,S=S+2*p*p,O=O+S+p*p):(x++,E--,S=S+2*p*p,D=D-2*y*y,O=O+S-D+p*p);let z=p*p*((x+.5)*(x+.5))+y*y*((E-1)*(E-1))-y*y*p*p;for(;E>=0;)this._ctx.fillRect(x+i.x,E+i.y,u,u),this._ctx.fillRect(-x+i.x,E+i.y,u,u),this._ctx.fillRect(x+i.x,-E+i.y,u,u),this._ctx.fillRect(-x+i.x,-E+i.y,u,u),z>0?(E--,D=D-2*y*y,z=z+y*y-D):(E--,x++,S=S+2*p*p,D=D-2*y*y,z=z+S-D+y*y)}resize(i,o,s=-1,u=-1){let v=0,y=0;s===0?v=(i-this.width)/2:s===1&&(v=i-this.width),u===0?y=(o-this.height)/2:u===1&&(y=o-this.height);const p=this._ctx.getImageData(0,0,this.width,this.height);this.width=i,this.height=o,this._ctx.putImageData(p,v,y)}}class Qs extends Wo{constructor(){super();L(this,"_colors",["#909090","#C0C0C0"]);L(this,"_size",4);this.clear()}clear(){for(let o=0;o<=Math.ceil(this.height/this._size);o++)for(let s=0;s<=Math.ceil(this.width/this._size);s++){const u=(s+o)%2;this.paint({x:s*this._size,y:o*this._size},this._size,this._colors[u])}}}class kt{constructor(){L(this,"_observers",[]);L(this,"_newId",function*(){let i=0;for(;;)yield i,i++}())}subscribe(i){const o=this._newId.next().value;return this._observers.push({id:o,callback:i}),o}unsubscribe(i){this._observers=this._observers.filter(o=>o.id!==i)}notify(i){this._observers.forEach(o=>o.callback(i))}}function el(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Ho={exports:{}};(function(d,i){(function(o){d.exports=o()})(function(){var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default=function(e){return!(!e||!e.Window)&&e instanceof e.Window};var s={};Object.defineProperty(s,"__esModule",{value:!0}),s.init=y,s.getWindow=function(e){return(0,o.default)(e)?e:(e.ownerDocument||e).defaultView||v.window},s.window=s.realWindow=void 0;var u=void 0;s.realWindow=u;var v=void 0;function y(e){s.realWindow=u=e;var t=e.document.createTextNode("");t.ownerDocument!==e.document&&typeof e.wrap=="function"&&e.wrap(t)===t&&(e=e.wrap(e)),s.window=v=e}s.window=v,typeof window!="undefined"&&window&&y(window);var p={};function x(e){return(x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var E=function(e){return!!e&&x(e)==="object"},O=function(e){return typeof e=="function"},S={window:function(e){return e===s.window||(0,o.default)(e)},docFrag:function(e){return E(e)&&e.nodeType===11},object:E,func:O,number:function(e){return typeof e=="number"},bool:function(e){return typeof e=="boolean"},string:function(e){return typeof e=="string"},element:function(e){if(!e||x(e)!=="object")return!1;var t=s.getWindow(e)||s.window;return/object|function/.test(x(t.Element))?e instanceof t.Element:e.nodeType===1&&typeof e.nodeName=="string"},plainObject:function(e){return E(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},array:function(e){return E(e)&&e.length!==void 0&&O(e.splice)}};p.default=S;var D={};function z(e){var t=e.interaction;if(t.prepared.name==="drag"){var n=t.prepared.axis;n==="x"?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):n==="y"&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function q(e){var t=e.iEvent,n=e.interaction;if(n.prepared.name==="drag"){var r=n.prepared.axis;if(r==="x"||r==="y"){var a=r==="x"?"y":"x";t.page[a]=n.coords.start.page[a],t.client[a]=n.coords.start.client[a],t.delta[a]=0}}}Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var Y={id:"actions/drag",install:function(e){var t=e.actions,n=e.Interactable,r=e.defaults;n.prototype.draggable=Y.draggable,t.map.drag=Y,t.methodDict.drag="draggable",r.actions.drag=Y.defaults},listeners:{"interactions:before-action-move":z,"interactions:action-resume":z,"interactions:action-move":q,"auto-start:check":function(e){var t=e.interaction,n=e.interactable,r=e.buttons,a=n.options.drag;if(a&&a.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(r&n.options.drag.mouseButtons)!=0))return e.action={name:"drag",axis:a.lockAxis==="start"?a.startAxis:a.lockAxis},!1}},draggable:function(e){return p.default.object(e)?(this.options.drag.enabled=e.enabled!==!1,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):p.default.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:z,move:q,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},fe=Y;D.default=fe;var V={};Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var Q={init:function(e){var t=e;Q.document=t.document,Q.DocumentFragment=t.DocumentFragment||pe,Q.SVGElement=t.SVGElement||pe,Q.SVGSVGElement=t.SVGSVGElement||pe,Q.SVGElementInstance=t.SVGElementInstance||pe,Q.Element=t.Element||pe,Q.HTMLElement=t.HTMLElement||Q.Element,Q.Event=t.Event,Q.Touch=t.Touch||pe,Q.PointerEvent=t.PointerEvent||t.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function pe(){}var we=Q;V.default=we;var ce={};Object.defineProperty(ce,"__esModule",{value:!0}),ce.default=void 0;var ae={init:function(e){var t=V.default.Element,n=e.navigator||{};ae.supportsTouch="ontouchstart"in e||p.default.func(e.DocumentTouch)&&V.default.document instanceof e.DocumentTouch,ae.supportsPointerEvent=n.pointerEnabled!==!1&&!!V.default.PointerEvent,ae.isIOS=/iP(hone|od|ad)/.test(n.platform),ae.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),ae.isIe9=/MSIE 9/.test(n.userAgent),ae.isOperaMobile=n.appName==="Opera"&&ae.supportsTouch&&/Presto/.test(n.userAgent),ae.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",ae.pEventTypes=ae.supportsPointerEvent?V.default.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,ae.wheelEvent=V.default.document&&"onmousewheel"in V.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},Ge=ae;ce.default=Ge;var R={};function ve(e){var t=e.parentNode;if(p.default.docFrag(t)){for(;(t=t.host)&&p.default.docFrag(t););return t}return t}function Xe(e,t){return s.window!==s.realWindow&&(t=t.replace(/\/deep\//g," ")),e[ce.default.prefixedMatchesSelector](t)}Object.defineProperty(R,"__esModule",{value:!0}),R.nodeContains=function(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1},R.closest=function(e,t){for(;p.default.element(e);){if(Xe(e,t))return e;e=ve(e)}return null},R.parentNode=ve,R.matchesSelector=Xe,R.indexOfDeepestElement=function(e){for(var t,n=[],r=0;r<e.length;r++){var a=e[r],l=e[t];if(a&&r!==t)if(l){var f=Ie(a),c=Ie(l);if(f!==a.ownerDocument)if(c!==a.ownerDocument)if(f!==c){n=n.length?n:at(l);var h=void 0;if(l instanceof V.default.HTMLElement&&a instanceof V.default.SVGElement&&!(a instanceof V.default.SVGSVGElement)){if(a===c)continue;h=a.ownerSVGElement}else h=a;for(var g=at(h,l.ownerDocument),m=0;g[m]&&g[m]===n[m];)m++;var b=[g[m-1],g[m],n[m]];if(b[0])for(var w=b[0].lastChild;w;){if(w===b[1]){t=r,n=g;break}if(w===b[2])break;w=w.previousSibling}}else P=a,_=l,(parseInt(s.getWindow(P).getComputedStyle(P).zIndex,10)||0)>=(parseInt(s.getWindow(_).getComputedStyle(_).zIndex,10)||0)&&(t=r);else t=r}else t=r}var P,_;return t},R.matchesUpTo=function(e,t,n){for(;p.default.element(e);){if(Xe(e,t))return!0;if((e=ve(e))===n)return Xe(e,t)}return!1},R.getActualElement=function(e){return e.correspondingUseElement||e},R.getScrollXY=Ae,R.getElementClientRect=Ye,R.getElementRect=function(e){var t=Ye(e);if(!ce.default.isIOS7&&t){var n=Ae(s.getWindow(e));t.left+=n.x,t.right+=n.x,t.top+=n.y,t.bottom+=n.y}return t},R.getPath=function(e){for(var t=[];e;)t.push(e),e=ve(e);return t},R.trySelector=function(e){return!!p.default.string(e)&&(V.default.document.querySelector(e),!0)};var Ie=function(e){return e.parentNode||e.host};function at(e,t){for(var n,r=[],a=e;(n=Ie(a))&&a!==t&&n!==a.ownerDocument;)r.unshift(a),a=n;return r}function Ae(e){return{x:(e=e||s.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function Ye(e){var t=e instanceof V.default.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.default=function(e,t){for(var n in t)e[n]=t[n];return e};var G={};function st(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function lt(e,t,n){return e==="parent"?(0,R.parentNode)(n):e==="self"?t.getRect(n):(0,R.closest)(n,e)}Object.defineProperty(G,"__esModule",{value:!0}),G.getStringOptionResult=lt,G.resolveRectLike=function(e,t,n,r){var a,l=e;return p.default.string(l)?l=lt(l,t,n):p.default.func(l)&&(l=l.apply(void 0,function(f){if(Array.isArray(f))return st(f)}(a=r)||function(f){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(f))return Array.from(f)}(a)||function(f,c){if(f){if(typeof f=="string")return st(f,c);var h=Object.prototype.toString.call(f).slice(8,-1);return h==="Object"&&f.constructor&&(h=f.constructor.name),h==="Map"||h==="Set"?Array.from(f):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?st(f,c):void 0}}(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())),p.default.element(l)&&(l=(0,R.getElementRect)(l)),l},G.rectToXY=function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},G.xywhToTlbr=function(e){return!e||"left"in e&&"top"in e||((e=(0,I.default)({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e},G.tlbrToXywh=function(e){return!e||"x"in e&&"y"in e||((e=(0,I.default)({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||(e.right||0)-e.x,e.height=e.height||(e.bottom||0)-e.y),e},G.addEdges=function(e,t,n){e.left&&(t.left+=n.x),e.right&&(t.right+=n.x),e.top&&(t.top+=n.y),e.bottom&&(t.bottom+=n.y),t.width=t.right-t.left,t.height=t.bottom-t.top};var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.default=function(e,t,n){var r=e.options[n],a=r&&r.origin||e.options.origin,l=(0,G.resolveRectLike)(a,e,t,[e&&t]);return(0,G.rectToXY)(l)||{x:0,y:0}};var mt={};function Ut(e){return e.trim().split(/ +/)}Object.defineProperty(mt,"__esModule",{value:!0}),mt.default=function e(t,n,r){if(r=r||{},p.default.string(t)&&t.search(" ")!==-1&&(t=Ut(t)),p.default.array(t))return t.reduce(function(h,g){return(0,I.default)(h,e(g,n,r))},r);if(p.default.object(t)&&(n=t,t=""),p.default.func(n))r[t]=r[t]||[],r[t].push(n);else if(p.default.array(n))for(var a=0;a<n.length;a++){var l;l=n[a],e(t,l,r)}else if(p.default.object(n))for(var f in n){var c=Ut(f).map(function(h){return"".concat(t).concat(h)});e(c,n[f],r)}return r};var We={};Object.defineProperty(We,"__esModule",{value:!0}),We.default=void 0,We.default=function(e,t){return Math.sqrt(e*e+t*t)};var Kt={};function mr(e,t){for(var n in t){var r=mr.prefixedPropREs,a=!1;for(var l in r)if(n.indexOf(l)===0&&r[l].test(n)){a=!0;break}a||typeof t[n]=="function"||(e[n]=t[n])}return e}Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.default=void 0,mr.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/};var ia=mr;Kt.default=ia;var j={};function yr(e){return e instanceof V.default.Event||e instanceof V.default.Touch}function Zt(e,t,n){return e=e||"page",(n=n||{}).x=t[e+"X"],n.y=t[e+"Y"],n}function hi(e,t){return t=t||{x:0,y:0},ce.default.isOperaMobile&&yr(e)?(Zt("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):Zt("page",e,t),t}function pi(e,t){return t=t||{},ce.default.isOperaMobile&&yr(e)?Zt("screen",e,t):Zt("client",e,t),t}function En(e){var t=[];return p.default.array(e)?(t[0]=e[0],t[1]=e[1]):e.type==="touchend"?e.touches.length===1?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):e.touches.length===0&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function vi(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<e.length;n++){var r=e[n];for(var a in t)t[a]+=r[a]}for(var l in t)t[l]/=e.length;return t}Object.defineProperty(j,"__esModule",{value:!0}),j.copyCoords=function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},j.setCoordDeltas=function(e,t,n){e.page.x=n.page.x-t.page.x,e.page.y=n.page.y-t.page.y,e.client.x=n.client.x-t.client.x,e.client.y=n.client.y-t.client.y,e.timeStamp=n.timeStamp-t.timeStamp},j.setCoordVelocity=function(e,t){var n=Math.max(t.timeStamp/1e3,.001);e.page.x=t.page.x/n,e.page.y=t.page.y/n,e.client.x=t.client.x/n,e.client.y=t.client.y/n,e.timeStamp=n},j.setZeroCoords=function(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0},j.isNativePointer=yr,j.getXY=Zt,j.getPageXY=hi,j.getClientXY=pi,j.getPointerId=function(e){return p.default.number(e.pointerId)?e.pointerId:e.identifier},j.setCoords=function(e,t,n){var r=t.length>1?vi(t):t[0];hi(r,e.page),pi(r,e.client),e.timeStamp=n},j.getTouchPair=En,j.pointerAverage=vi,j.touchBBox=function(e){if(!e.length)return null;var t=En(e),n=Math.min(t[0].pageX,t[1].pageX),r=Math.min(t[0].pageY,t[1].pageY),a=Math.max(t[0].pageX,t[1].pageX),l=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:r,left:n,top:r,right:a,bottom:l,width:a-n,height:l-r}},j.touchDistance=function(e,t){var n=t+"X",r=t+"Y",a=En(e),l=a[0][n]-a[1][n],f=a[0][r]-a[1][r];return(0,We.default)(l,f)},j.touchAngle=function(e,t){var n=t+"X",r=t+"Y",a=En(e),l=a[1][n]-a[0][n],f=a[1][r]-a[0][r];return 180*Math.atan2(f,l)/Math.PI},j.getPointerType=function(e){return p.default.string(e.pointerType)?e.pointerType:p.default.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type||"")||e instanceof V.default.Touch?"touch":"mouse"},j.getEventTargets=function(e){var t=p.default.func(e.composedPath)?e.composedPath():e.path;return[R.getActualElement(t?t[0]:e.target),R.getActualElement(e.currentTarget)]},j.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},j.coordsToEvent=function(e){return{coords:e,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(j,"pointerExtend",{enumerable:!0,get:function(){return Kt.default}});var Dt={};function oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.BaseEvent=void 0;var gi=function(){function e(r){(function(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),ct(this,"type",void 0),ct(this,"target",void 0),ct(this,"currentTarget",void 0),ct(this,"interactable",void 0),ct(this,"_interaction",void 0),ct(this,"timeStamp",void 0),ct(this,"immediatePropagationStopped",!1),ct(this,"propagationStopped",!1),this._interaction=r}var t,n;return t=e,(n=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&oa(t.prototype,n),e}();Dt.BaseEvent=gi,Object.defineProperty(gi.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var re={};Object.defineProperty(re,"__esModule",{value:!0}),re.find=re.findIndex=re.from=re.merge=re.remove=re.contains=void 0,re.contains=function(e,t){return e.indexOf(t)!==-1},re.remove=function(e,t){return e.splice(e.indexOf(t),1)};var mi=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}return e};re.merge=mi,re.from=function(e){return mi([],e)};var yi=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1};re.findIndex=yi,re.find=function(e,t){return e[yi(e,t)]};var Ke={};function bi(e){return(bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function aa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _i(e,t){return(_i=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(e,t)}function sa(e,t){return!t||bi(t)!=="object"&&typeof t!="function"?Ze(e):t}function Ze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function br(e){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.DropEvent=void 0;var la=function(e){(function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),h&&_i(c,h)})(f,e);var t,n,r,a,l=(r=f,a=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var c,h=br(r);if(a){var g=br(this).constructor;c=Reflect.construct(h,arguments,g)}else c=h.apply(this,arguments);return sa(this,c)});function f(c,h,g){var m;(function(_,k){if(!(_ instanceof k))throw new TypeError("Cannot call a class as a function")})(this,f),ut(Ze(m=l.call(this,h._interaction)),"target",void 0),ut(Ze(m),"dropzone",void 0),ut(Ze(m),"dragEvent",void 0),ut(Ze(m),"relatedTarget",void 0),ut(Ze(m),"draggable",void 0),ut(Ze(m),"timeStamp",void 0),ut(Ze(m),"propagationStopped",!1),ut(Ze(m),"immediatePropagationStopped",!1);var b=g==="dragleave"?c.prev:c.cur,w=b.element,P=b.dropzone;return m.type=g,m.target=w,m.currentTarget=w,m.dropzone=P,m.dragEvent=h,m.relatedTarget=h.target,m.draggable=h.interactable,m.timeStamp=h.timeStamp,m}return t=f,(n=[{key:"reject",value:function(){var c=this,h=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&h.cur.dropzone===this.dropzone&&h.cur.element===this.target)if(h.prev.dropzone=this.dropzone,h.prev.element=this.target,h.rejected=!0,h.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var g=h.activeDrops,m=re.findIndex(g,function(w){var P=w.dropzone,_=w.element;return P===c.dropzone&&_===c.target});h.activeDrops.splice(m,1);var b=new f(h,this.dragEvent,"dropdeactivate");b.dropzone=this.dropzone,b.target=this.target,this.dropzone.fire(b)}else this.dropzone.fire(new f(h,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&aa(t.prototype,n),f}(Dt.BaseEvent);Ke.DropEvent=la;var Pn={};function xi(e,t){for(var n=0;n<e.slice().length;n++){var r=e.slice()[n],a=r.dropzone,l=r.element;t.dropzone=a,t.target=l,a.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function _r(e,t){for(var n=function(l,f){for(var c=l.interactables,h=[],g=0;g<c.list.length;g++){var m=c.list[g];if(m.options.drop.enabled){var b=m.options.drop.accept;if(!(p.default.element(b)&&b!==f||p.default.string(b)&&!R.matchesSelector(f,b)||p.default.func(b)&&!b({dropzone:m,draggableElement:f})))for(var w=p.default.string(m.target)?m._context.querySelectorAll(m.target):p.default.array(m.target)?m.target:[m.target],P=0;P<w.length;P++){var _=w[P];_!==f&&h.push({dropzone:m,element:_,rect:m.getRect(_)})}}}return h}(e,t),r=0;r<n.length;r++){var a=n[r];a.rect=a.dropzone.getRect(a.element)}return n}function wi(e,t,n){for(var r=e.dropState,a=e.interactable,l=e.element,f=[],c=0;c<r.activeDrops.length;c++){var h=r.activeDrops[c],g=h.dropzone,m=h.element,b=h.rect;f.push(g.dropCheck(t,n,a,l,m,b)?m:null)}var w=R.indexOfDeepestElement(f);return r.activeDrops[w]||null}function xr(e,t,n){var r=e.dropState,a={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return n.type==="dragstart"&&(a.activate=new Ke.DropEvent(r,n,"dropactivate"),a.activate.target=null,a.activate.dropzone=null),n.type==="dragend"&&(a.deactivate=new Ke.DropEvent(r,n,"dropdeactivate"),a.deactivate.target=null,a.deactivate.dropzone=null),r.rejected||(r.cur.element!==r.prev.element&&(r.prev.dropzone&&(a.leave=new Ke.DropEvent(r,n,"dragleave"),n.dragLeave=a.leave.target=r.prev.element,n.prevDropzone=a.leave.dropzone=r.prev.dropzone),r.cur.dropzone&&(a.enter=new Ke.DropEvent(r,n,"dragenter"),n.dragEnter=r.cur.element,n.dropzone=r.cur.dropzone)),n.type==="dragend"&&r.cur.dropzone&&(a.drop=new Ke.DropEvent(r,n,"drop"),n.dropzone=r.cur.dropzone,n.relatedTarget=r.cur.element),n.type==="dragmove"&&r.cur.dropzone&&(a.move=new Ke.DropEvent(r,n,"dropmove"),a.move.dragmove=n,n.dropzone=r.cur.dropzone)),a}function wr(e,t){var n=e.dropState,r=n.activeDrops,a=n.cur,l=n.prev;t.leave&&l.dropzone.fire(t.leave),t.enter&&a.dropzone.fire(t.enter),t.move&&a.dropzone.fire(t.move),t.drop&&a.dropzone.fire(t.drop),t.deactivate&&xi(r,t.deactivate),n.prev.dropzone=a.dropzone,n.prev.element=a.element}function Ei(e,t){var n=e.interaction,r=e.iEvent,a=e.event;if(r.type==="dragmove"||r.type==="dragend"){var l=n.dropState;t.dynamicDrop&&(l.activeDrops=_r(t,n.element));var f=r,c=wi(n,f,a);l.rejected=l.rejected&&!!c&&c.dropzone===l.cur.dropzone&&c.element===l.cur.element,l.cur.dropzone=c&&c.dropzone,l.cur.element=c&&c.element,l.events=xr(n,0,f)}}Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.default=void 0;var Pi={id:"actions/drop",install:function(e){var t=e.actions,n=e.interactStatic,r=e.Interactable,a=e.defaults;e.usePlugin(D.default),r.prototype.dropzone=function(l){return function(f,c){if(p.default.object(c)){if(f.options.drop.enabled=c.enabled!==!1,c.listeners){var h=(0,mt.default)(c.listeners),g=Object.keys(h).reduce(function(m,b){return m[/^(enter|leave)/.test(b)?"drag".concat(b):/^(activate|deactivate|move)/.test(b)?"drop".concat(b):b]=h[b],m},{});f.off(f.options.drop.listeners),f.on(g),f.options.drop.listeners=g}return p.default.func(c.ondrop)&&f.on("drop",c.ondrop),p.default.func(c.ondropactivate)&&f.on("dropactivate",c.ondropactivate),p.default.func(c.ondropdeactivate)&&f.on("dropdeactivate",c.ondropdeactivate),p.default.func(c.ondragenter)&&f.on("dragenter",c.ondragenter),p.default.func(c.ondragleave)&&f.on("dragleave",c.ondragleave),p.default.func(c.ondropmove)&&f.on("dropmove",c.ondropmove),/^(pointer|center)$/.test(c.overlap)?f.options.drop.overlap=c.overlap:p.default.number(c.overlap)&&(f.options.drop.overlap=Math.max(Math.min(1,c.overlap),0)),"accept"in c&&(f.options.drop.accept=c.accept),"checker"in c&&(f.options.drop.checker=c.checker),f}return p.default.bool(c)?(f.options.drop.enabled=c,f):f.options.drop}(this,l)},r.prototype.dropCheck=function(l,f,c,h,g,m){return function(b,w,P,_,k,M,C){var A=!1;if(!(C=C||b.getRect(M)))return!!b.options.drop.checker&&b.options.drop.checker(w,P,A,b,M,_,k);var B=b.options.drop.overlap;if(B==="pointer"){var W=(0,Ue.default)(_,k,"drag"),K=j.getPageXY(w);K.x+=W.x,K.y+=W.y;var ie=K.x>C.left&&K.x<C.right,$=K.y>C.top&&K.y<C.bottom;A=ie&&$}var te=_.getRect(k);if(te&&B==="center"){var Re=te.left+te.width/2,nt=te.top+te.height/2;A=Re>=C.left&&Re<=C.right&&nt>=C.top&&nt<=C.bottom}return te&&p.default.number(B)&&(A=Math.max(0,Math.min(C.right,te.right)-Math.max(C.left,te.left))*Math.max(0,Math.min(C.bottom,te.bottom)-Math.max(C.top,te.top))/(te.width*te.height)>=B),b.options.drop.checker&&(A=b.options.drop.checker(w,P,A,b,M,_,k)),A}(this,l,f,c,h,g,m)},n.dynamicDrop=function(l){return p.default.bool(l)?(e.dynamicDrop=l,n):e.dynamicDrop},(0,I.default)(t.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),t.methodDict.drop="dropzone",e.dynamicDrop=!1,a.actions.drop=Pi.defaults},listeners:{"interactions:before-action-start":function(e){var t=e.interaction;t.prepared.name==="drag"&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var n=e.interaction,r=(e.event,e.iEvent);if(n.prepared.name==="drag"){var a=n.dropState;a.activeDrops=null,a.events=null,a.activeDrops=_r(t,n.element),a.events=xr(n,0,r),a.events.activate&&(xi(a.activeDrops,a.events.activate),t.fire("actions/drop:start",{interaction:n,dragEvent:r}))}},"interactions:action-move":Ei,"interactions:after-action-move":function(e,t){var n=e.interaction,r=e.iEvent;n.prepared.name==="drag"&&(wr(n,n.dropState.events),t.fire("actions/drop:move",{interaction:n,dragEvent:r}),n.dropState.events={})},"interactions:action-end":function(e,t){if(e.interaction.prepared.name==="drag"){var n=e.interaction,r=e.iEvent;Ei(e,t),wr(n,n.dropState.events),t.fire("actions/drop:end",{interaction:n,dragEvent:r})}},"interactions:stop":function(e){var t=e.interaction;if(t.prepared.name==="drag"){var n=t.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:_r,getDrop:wi,getDropEvents:xr,fireDropEvents:wr,defaults:{enabled:!1,accept:null,overlap:"pointer"}},ca=Pi;Pn.default=ca;var Sn={};function Er(e){var t=e.interaction,n=e.iEvent,r=e.phase;if(t.prepared.name==="gesture"){var a=t.pointers.map(function(g){return g.pointer}),l=r==="start",f=r==="end",c=t.interactable.options.deltaSource;if(n.touches=[a[0],a[1]],l)n.distance=j.touchDistance(a,c),n.box=j.touchBBox(a),n.scale=1,n.ds=0,n.angle=j.touchAngle(a,c),n.da=0,t.gesture.startDistance=n.distance,t.gesture.startAngle=n.angle;else if(f){var h=t.prevEvent;n.distance=h.distance,n.box=h.box,n.scale=h.scale,n.ds=0,n.angle=h.angle,n.da=0}else n.distance=j.touchDistance(a,c),n.box=j.touchBBox(a),n.scale=n.distance/t.gesture.startDistance,n.angle=j.touchAngle(a,c),n.ds=n.scale-t.gesture.scale,n.da=n.angle-t.gesture.angle;t.gesture.distance=n.distance,t.gesture.angle=n.angle,p.default.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(t.gesture.scale=n.scale)}}Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.default=void 0;var Pr={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,n=e.Interactable,r=e.defaults;n.prototype.gesturable=function(a){return p.default.object(a)?(this.options.gesture.enabled=a.enabled!==!1,this.setPerAction("gesture",a),this.setOnEvents("gesture",a),this):p.default.bool(a)?(this.options.gesture.enabled=a,this):this.options.gesture},t.map.gesture=Pr,t.methodDict.gesture="gesturable",r.actions.gesture=Pr.defaults},listeners:{"interactions:action-start":Er,"interactions:action-move":Er,"interactions:action-end":Er,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return e.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},ua=Pr;Sn.default=ua;var kn={};function da(e,t,n,r,a,l,f){if(!t)return!1;if(t===!0){var c=p.default.number(l.width)?l.width:l.right-l.left,h=p.default.number(l.height)?l.height:l.bottom-l.top;if(f=Math.min(f,Math.abs((e==="left"||e==="right"?c:h)/2)),c<0&&(e==="left"?e="right":e==="right"&&(e="left")),h<0&&(e==="top"?e="bottom":e==="bottom"&&(e="top")),e==="left")return n.x<(c>=0?l.left:l.right)+f;if(e==="top")return n.y<(h>=0?l.top:l.bottom)+f;if(e==="right")return n.x>(c>=0?l.right:l.left)-f;if(e==="bottom")return n.y>(h>=0?l.bottom:l.top)-f}return!!p.default.element(r)&&(p.default.element(t)?t===r:R.matchesUpTo(r,t,a))}function Si(e){var t=e.iEvent,n=e.interaction;if(n.prepared.name==="resize"&&n.resizeAxes){var r=t;n.interactable.options.resize.square?(n.resizeAxes==="y"?r.delta.x=r.delta.y:r.delta.y=r.delta.x,r.axes="xy"):(r.axes=n.resizeAxes,n.resizeAxes==="x"?r.delta.y=0:n.resizeAxes==="y"&&(r.delta.x=0))}}Object.defineProperty(kn,"__esModule",{value:!0}),kn.default=void 0;var Je={id:"actions/resize",before:["actions/drag"],install:function(e){var t=e.actions,n=e.browser,r=e.Interactable,a=e.defaults;Je.cursors=function(l){return l.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(n),Je.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,r.prototype.resizable=function(l){return function(f,c,h){return p.default.object(c)?(f.options.resize.enabled=c.enabled!==!1,f.setPerAction("resize",c),f.setOnEvents("resize",c),p.default.string(c.axis)&&/^x$|^y$|^xy$/.test(c.axis)?f.options.resize.axis=c.axis:c.axis===null&&(f.options.resize.axis=h.defaults.actions.resize.axis),p.default.bool(c.preserveAspectRatio)?f.options.resize.preserveAspectRatio=c.preserveAspectRatio:p.default.bool(c.square)&&(f.options.resize.square=c.square),f):p.default.bool(c)?(f.options.resize.enabled=c,f):f.options.resize}(this,l,e)},t.map.resize=Je,t.methodDict.resize="resizable",a.actions.resize=Je.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(e){(function(t){var n=t.iEvent,r=t.interaction;if(r.prepared.name==="resize"&&r.prepared.edges){var a=n,l=r.rect;r._rects={start:(0,I.default)({},l),corrected:(0,I.default)({},l),previous:(0,I.default)({},l),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},a.edges=r.prepared.edges,a.rect=r._rects.corrected,a.deltaRect=r._rects.delta}})(e),Si(e)},"interactions:action-move":function(e){(function(t){var n=t.iEvent,r=t.interaction;if(r.prepared.name==="resize"&&r.prepared.edges){var a=n,l=r.interactable.options.resize.invert,f=l==="reposition"||l==="negate",c=r.rect,h=r._rects,g=h.start,m=h.corrected,b=h.delta,w=h.previous;if((0,I.default)(w,m),f){if((0,I.default)(m,c),l==="reposition"){if(m.top>m.bottom){var P=m.top;m.top=m.bottom,m.bottom=P}if(m.left>m.right){var _=m.left;m.left=m.right,m.right=_}}}else m.top=Math.min(c.top,g.bottom),m.bottom=Math.max(c.bottom,g.top),m.left=Math.min(c.left,g.right),m.right=Math.max(c.right,g.left);for(var k in m.width=m.right-m.left,m.height=m.bottom-m.top,m)b[k]=m[k]-w[k];a.edges=r.prepared.edges,a.rect=m,a.deltaRect=b}})(e),Si(e)},"interactions:action-end":function(e){var t=e.iEvent,n=e.interaction;if(n.prepared.name==="resize"&&n.prepared.edges){var r=t;r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}},"auto-start:check":function(e){var t=e.interaction,n=e.interactable,r=e.element,a=e.rect,l=e.buttons;if(a){var f=(0,I.default)({},t.coords.cur.page),c=n.options.resize;if(c&&c.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(l&c.mouseButtons)!=0)){if(p.default.object(c.edges)){var h={left:!1,right:!1,top:!1,bottom:!1};for(var g in h)h[g]=da(g,c.edges[g],f,t._latestPointer.eventTarget,r,a,c.margin||Je.defaultMargin);h.left=h.left&&!h.right,h.top=h.top&&!h.bottom,(h.left||h.right||h.top||h.bottom)&&(e.action={name:"resize",edges:h})}else{var m=c.axis!=="y"&&f.x>a.right-Je.defaultMargin,b=c.axis!=="x"&&f.y>a.bottom-Je.defaultMargin;(m||b)&&(e.action={name:"resize",axes:(m?"x":"")+(b?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,n=e.axis,r=e.name,a=Je.cursors,l=null;if(n)l=a[r+n];else if(t){for(var f="",c=["top","bottom","left","right"],h=0;h<c.length;h++){var g=c[h];t[g]&&(f+=g)}l=a[f]}return l},defaultMargin:null},fa=Je;kn.default=fa;var On={};Object.defineProperty(On,"__esModule",{value:!0}),On.default=void 0;var ha={id:"actions",install:function(e){e.usePlugin(Sn.default),e.usePlugin(kn.default),e.usePlugin(D.default),e.usePlugin(Pn.default)}};On.default=ha;var Le={};Object.defineProperty(Le,"__esModule",{value:!0}),Le.default=void 0;var Qe,yt,ki=0,pa={request:function(e){return Qe(e)},cancel:function(e){return yt(e)},init:function(e){if(Qe=e.requestAnimationFrame,yt=e.cancelAnimationFrame,!Qe)for(var t=["ms","moz","webkit","o"],n=0;n<t.length;n++){var r=t[n];Qe=e["".concat(r,"RequestAnimationFrame")],yt=e["".concat(r,"CancelAnimationFrame")]||e["".concat(r,"CancelRequestAnimationFrame")]}Qe=Qe&&Qe.bind(e),yt=yt&&yt.bind(e),Qe||(Qe=function(a){var l=Date.now(),f=Math.max(0,16-(l-ki)),c=e.setTimeout(function(){a(l+f)},f);return ki=l+f,c},yt=function(a){return clearTimeout(a)})}};Le.default=pa;var dt={};Object.defineProperty(dt,"__esModule",{value:!0}),dt.getContainer=Cn,dt.getScroll=Jt,dt.getScrollSize=function(e){return p.default.window(e)&&(e=window.document.body),{x:e.scrollWidth,y:e.scrollHeight}},dt.getScrollSizeDelta=function(e,t){var n=e.interaction,r=e.element,a=n&&n.interactable.options[n.prepared.name].autoScroll;if(!a||!a.enabled)return t(),{x:0,y:0};var l=Cn(a.container,n.interactable,r),f=Jt(l);t();var c=Jt(l);return{x:c.x-f.x,y:c.y-f.y}},dt.default=void 0;var X={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){X.isScrolling=!0,Le.default.cancel(X.i),e.autoScroll=X,X.interaction=e,X.prevTime=X.now(),X.i=Le.default.request(X.scroll)},stop:function(){X.isScrolling=!1,X.interaction&&(X.interaction.autoScroll=null),Le.default.cancel(X.i)},scroll:function(){var e=X.interaction,t=e.interactable,n=e.element,r=e.prepared.name,a=t.options[r].autoScroll,l=Cn(a.container,t,n),f=X.now(),c=(f-X.prevTime)/1e3,h=a.speed*c;if(h>=1){var g={x:X.x*h,y:X.y*h};if(g.x||g.y){var m=Jt(l);p.default.window(l)?l.scrollBy(g.x,g.y):l&&(l.scrollLeft+=g.x,l.scrollTop+=g.y);var b=Jt(l),w={x:b.x-m.x,y:b.y-m.y};(w.x||w.y)&&t.fire({type:"autoscroll",target:n,interactable:t,delta:w,interaction:e,container:l})}X.prevTime=f}X.isScrolling&&(Le.default.cancel(X.i),X.i=Le.default.request(X.scroll))},check:function(e,t){var n;return(n=e.options[t].autoScroll)==null?void 0:n.enabled},onInteractionMove:function(e){var t=e.interaction,n=e.pointer;if(t.interacting()&&X.check(t.interactable,t.prepared.name))if(t.simulation)X.x=X.y=0;else{var r,a,l,f,c=t.interactable,h=t.element,g=t.prepared.name,m=c.options[g].autoScroll,b=Cn(m.container,c,h);if(p.default.window(b))f=n.clientX<X.margin,r=n.clientY<X.margin,a=n.clientX>b.innerWidth-X.margin,l=n.clientY>b.innerHeight-X.margin;else{var w=R.getElementClientRect(b);f=n.clientX<w.left+X.margin,r=n.clientY<w.top+X.margin,a=n.clientX>w.right-X.margin,l=n.clientY>w.bottom-X.margin}X.x=a?1:f?-1:0,X.y=l?1:r?-1:0,X.isScrolling||(X.margin=m.margin,X.speed=m.speed,X.start(t))}}};function Cn(e,t,n){return(p.default.string(e)?(0,G.getStringOptionResult)(e,t,n):e)||(0,s.getWindow)(n)}function Jt(e){return p.default.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var va={id:"auto-scroll",install:function(e){var t=e.defaults,n=e.actions;e.autoScroll=X,X.now=function(){return e.now()},n.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=X.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,X.stop(),X.interaction&&(X.interaction=null)},"interactions:stop":X.stop,"interactions:action-move":function(e){return X.onInteractionMove(e)}}};dt.default=va;var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.warnOnce=function(e,t){var n=!1;return function(){return n||(s.window.console.warn(t),n=!0),e.apply(this,arguments)}},Ce.copyAction=function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e},Ce.sign=void 0,Ce.sign=function(e){return e>=0?1:-1};var Tn={};function ga(e){return p.default.bool(e)?(this.options.styleCursor=e,this):e===null?(delete this.options.styleCursor,this):this.options.styleCursor}function ma(e){return p.default.func(e)?(this.options.actionChecker=e,this):e===null?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.default=void 0;var ya={id:"auto-start/interactableMethods",install:function(e){var t=e.Interactable;t.prototype.getAction=function(n,r,a,l){var f=function(c,h,g,m,b){var w=c.getRect(m),P={action:null,interactable:c,interaction:g,element:m,rect:w,buttons:h.buttons||{0:1,1:4,3:8,4:16}[h.button]};return b.fire("auto-start:check",P),P.action}(this,r,a,l,e);return this.options.actionChecker?this.options.actionChecker(n,r,f,this,l,a):f},t.prototype.ignoreFrom=(0,Ce.warnOnce)(function(n){return this._backCompatOption("ignoreFrom",n)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=(0,Ce.warnOnce)(function(n){return this._backCompatOption("allowFrom",n)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=ma,t.prototype.styleCursor=ga}};Tn.default=ya;var It={};function Oi(e,t,n,r,a){return t.testIgnoreAllow(t.options[e.name],n,r)&&t.options[e.name].enabled&&Mn(t,n,e,a)?e:null}function ba(e,t,n,r,a,l,f){for(var c=0,h=r.length;c<h;c++){var g=r[c],m=a[c],b=g.getAction(t,n,e,m);if(b){var w=Oi(b,g,m,l,f);if(w)return{action:w,interactable:g,element:m}}}return{action:null,interactable:null,element:null}}function Ci(e,t,n,r,a){var l=[],f=[],c=r;function h(m){l.push(m),f.push(c)}for(;p.default.element(c);){l=[],f=[],a.interactables.forEachMatch(c,h);var g=ba(e,t,n,l,f,r,a);if(g.action&&!g.interactable.options[g.action.name].manualStart)return g;c=R.parentNode(c)}return{action:null,interactable:null,element:null}}function Ti(e,t,n){var r=t.action,a=t.interactable,l=t.element;r=r||{name:null},e.interactable=a,e.element=l,(0,Ce.copyAction)(e.prepared,r),e.rect=a&&r.name?a.getRect(l):null,Di(e,n),n.fire("autoStart:prepared",{interaction:e})}function Mn(e,t,n,r){var a=e.options,l=a[n.name].max,f=a[n.name].maxPerElement,c=r.autoStart.maxInteractions,h=0,g=0,m=0;if(!(l&&f&&c))return!1;for(var b=0;b<r.interactions.list.length;b++){var w=r.interactions.list[b],P=w.prepared.name;if(w.interacting()&&(++h>=c||w.interactable===e&&((g+=P===n.name?1:0)>=l||w.element===t&&(m++,P===n.name&&m>=f))))return!1}return c>0}function Mi(e,t){return p.default.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function Sr(e,t,n){var r=n.autoStart.cursorElement;r&&r!==e&&(r.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,n.autoStart.cursorElement=t?e:null}function Di(e,t){var n=e.interactable,r=e.element,a=e.prepared;if(e.pointerType==="mouse"&&n&&n.options.styleCursor){var l="";if(a.name){var f=n.options[a.name].cursorChecker;l=p.default.func(f)?f(a,n,r,e._interacting):t.actions.map[a.name].getCursor(a)}Sr(e.element,l||"",t)}else t.autoStart.cursorElement&&Sr(t.autoStart.cursorElement,"",t)}Object.defineProperty(It,"__esModule",{value:!0}),It.default=void 0;var _a={id:"auto-start/base",before:["actions"],install:function(e){var t=e.interactStatic,n=e.defaults;e.usePlugin(Tn.default),n.base.actionChecker=null,n.base.styleCursor=!0,(0,I.default)(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=function(r){return Mi(r,e)},e.autoStart={maxInteractions:1/0,withinInteractionLimit:Mn,cursorElement:null}},listeners:{"interactions:down":function(e,t){var n=e.interaction,r=e.pointer,a=e.event,l=e.eventTarget;n.interacting()||Ti(n,Ci(n,r,a,l,t),t)},"interactions:move":function(e,t){(function(n,r){var a=n.interaction,l=n.pointer,f=n.event,c=n.eventTarget;a.pointerType!=="mouse"||a.pointerIsDown||a.interacting()||Ti(a,Ci(a,l,f,c,r),r)})(e,t),function(n,r){var a=n.interaction;if(a.pointerIsDown&&!a.interacting()&&a.pointerWasMoved&&a.prepared.name){r.fire("autoStart:before-start",n);var l=a.interactable,f=a.prepared.name;f&&l&&(l.options[f].manualStart||!Mn(l,a.element,a.prepared,r)?a.stop():(a.start(a.prepared,l,a.element),Di(a,r)))}}(e,t)},"interactions:stop":function(e,t){var n=e.interaction,r=n.interactable;r&&r.options.styleCursor&&Sr(n.element,"",t)}},maxInteractions:Mi,withinInteractionLimit:Mn,validateAction:Oi};It.default=_a;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.default=void 0;var xa={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,t){var n=e.interaction,r=e.eventTarget,a=e.dx,l=e.dy;if(n.prepared.name==="drag"){var f=Math.abs(a),c=Math.abs(l),h=n.interactable.options.drag,g=h.startAxis,m=f>c?"x":f<c?"y":"xy";if(n.prepared.axis=h.lockAxis==="start"?m[0]:h.lockAxis,m!=="xy"&&g!=="xy"&&g!==m){n.prepared.name=null;for(var b=r,w=function(_){if(_!==n.interactable){var k=n.interactable.options.drag;if(!k.manualStart&&_.testIgnoreAllow(k,b,r)){var M=_.getAction(n.downPointer,n.downEvent,n,b);if(M&&M.name==="drag"&&function(C,A){if(!A)return!1;var B=A.options.drag.startAxis;return C==="xy"||B==="xy"||B===C}(m,_)&&It.default.validateAction(M,_,b,r,t))return _}}};p.default.element(b);){var P=t.interactables.forEachMatch(b,w);if(P){n.prepared.name="drag",n.interactable=P,n.element=b;break}b=(0,R.parentNode)(b)}}}}}};Dn.default=xa;var In={};function kr(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var n=e.interactable.options;return n[t].hold||n[t].delay}Object.defineProperty(In,"__esModule",{value:!0}),In.default=void 0;var wa={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(It.default),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,n=kr(t);n>0&&(t.autoStartHoldTimer=setTimeout(function(){t.start(t.prepared,t.interactable,t.element)},n))},"interactions:move":function(e){var t=e.interaction,n=e.duplicate;t.autoStartHoldTimer&&t.pointerWasMoved&&!n&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":function(e){var t=e.interaction;kr(t)>0&&(t.prepared.name=null)}},getHoldDuration:kr};In.default=wa;var An={};Object.defineProperty(An,"__esModule",{value:!0}),An.default=void 0;var Ea={id:"auto-start",install:function(e){e.usePlugin(It.default),e.usePlugin(In.default),e.usePlugin(Dn.default)}};An.default=Ea;var At={};function Pa(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):p.default.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault}function Sa(e){var t=e.interaction,n=e.event;t.interactable&&t.interactable.checkAndPreventDefault(n)}function Ii(e){var t=e.Interactable;t.prototype.preventDefault=Pa,t.prototype.checkAndPreventDefault=function(n){return function(r,a,l){var f=r.options.preventDefault;if(f!=="never")if(f!=="always"){if(a.events.supportsPassive&&/^touch(start|move)$/.test(l.type)){var c=(0,s.getWindow)(l.target).document,h=a.getDocOptions(c);if(!h||!h.events||h.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(l.type)||p.default.element(l.target)&&(0,R.matchesSelector)(l.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||l.preventDefault()}else l.preventDefault()}(this,e,n)},e.interactions.docEvents.push({type:"dragstart",listener:function(n){for(var r=0;r<e.interactions.list.length;r++){var a=e.interactions.list[r];if(a.element&&(a.element===n.target||(0,R.nodeContains)(a.element,n.target)))return void a.interactable.checkAndPreventDefault(n)}}})}Object.defineProperty(At,"__esModule",{value:!0}),At.install=Ii,At.default=void 0;var ka={id:"core/interactablePreventDefault",install:Ii,listeners:["down","move","up","cancel"].reduce(function(e,t){return e["interactions:".concat(t)]=Sa,e},{})};At.default=ka;var Or={};Object.defineProperty(Or,"__esModule",{value:!0}),Or.default=void 0,Or.default={};var Qt,Cr={};Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.default=void 0,function(e){e.touchAction="touchAction",e.boxSizing="boxSizing",e.noListeners="noListeners"}(Qt||(Qt={})),Qt.touchAction,Qt.boxSizing,Qt.noListeners;var Oa={id:"dev-tools",install:function(){}};Cr.default=Oa;var bt={};Object.defineProperty(bt,"__esModule",{value:!0}),bt.default=function e(t){var n={};for(var r in t){var a=t[r];p.default.plainObject(a)?n[r]=e(a):p.default.array(a)?n[r]=re.from(a):n[r]=a}return n};var _t={};function Ai(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(n)){var a=[],l=!0,f=!1,c=void 0;try{for(var h,g=n[Symbol.iterator]();!(l=(h=g.next()).done)&&(a.push(h.value),!r||a.length!==r);l=!0);}catch(m){f=!0,c=m}finally{try{l||g.return==null||g.return()}finally{if(f)throw c}}return a}}(e,t)||function(n,r){if(n){if(typeof n=="string")return ji(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ji(n,r):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ji(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(_t,"__esModule",{value:!0}),_t.getRectOffset=Ri,_t.default=void 0;var Ta=function(){function e(r){(function(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),xt(this,"states",[]),xt(this,"startOffset",{left:0,right:0,top:0,bottom:0}),xt(this,"startDelta",void 0),xt(this,"result",void 0),xt(this,"endResult",void 0),xt(this,"edges",void 0),xt(this,"interaction",void 0),this.interaction=r,this.result=jn()}var t,n;return t=e,(n=[{key:"start",value:function(r,a){var l=r.phase,f=this.interaction,c=function(g){var m=g.interactable.options[g.prepared.name],b=m.modifiers;return b&&b.length?b:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(w){var P=m[w];return P&&P.enabled&&{options:P,methods:P._methods}}).filter(function(w){return!!w})}(f);this.prepareStates(c),this.edges=(0,I.default)({},f.edges),this.startOffset=Ri(f.rect,a),this.startDelta={x:0,y:0};var h=this.fillArg({phase:l,pageCoords:a,preEnd:!1});return this.result=jn(),this.startAll(h),this.result=this.setAll(h)}},{key:"fillArg",value:function(r){var a=this.interaction;return r.interaction=a,r.interactable=a.interactable,r.element=a.element,r.rect=r.rect||a.rect,r.edges=this.edges,r.startOffset=this.startOffset,r}},{key:"startAll",value:function(r){for(var a=0;a<this.states.length;a++){var l=this.states[a];l.methods.start&&(r.state=l,l.methods.start(r))}}},{key:"setAll",value:function(r){var a=r.phase,l=r.preEnd,f=r.skipModifiers,c=r.rect;r.coords=(0,I.default)({},r.pageCoords),r.rect=(0,I.default)({},c);for(var h=f?this.states.slice(f):this.states,g=jn(r.coords,r.rect),m=0;m<h.length;m++){var b,w=h[m],P=w.options,_=(0,I.default)({},r.coords),k=null;(b=w.methods)!=null&&b.set&&this.shouldDo(P,l,a)&&(r.state=w,k=w.methods.set(r),G.addEdges(this.interaction.edges,r.rect,{x:r.coords.x-_.x,y:r.coords.y-_.y})),g.eventProps.push(k)}g.delta.x=r.coords.x-r.pageCoords.x,g.delta.y=r.coords.y-r.pageCoords.y,g.rectDelta.left=r.rect.left-c.left,g.rectDelta.right=r.rect.right-c.right,g.rectDelta.top=r.rect.top-c.top,g.rectDelta.bottom=r.rect.bottom-c.bottom;var M=this.result.coords,C=this.result.rect;if(M&&C){var A=g.rect.left!==C.left||g.rect.right!==C.right||g.rect.top!==C.top||g.rect.bottom!==C.bottom;g.changed=A||M.x!==g.coords.x||M.y!==g.coords.y}return g}},{key:"applyToInteraction",value:function(r){var a=this.interaction,l=r.phase,f=a.coords.cur,c=a.coords.start,h=this.result,g=this.startDelta,m=h.delta;l==="start"&&(0,I.default)(this.startDelta,h.delta);for(var b=0;b<[[c,g],[f,m]].length;b++){var w=Ai([[c,g],[f,m]][b],2),P=w[0],_=w[1];P.page.x+=_.x,P.page.y+=_.y,P.client.x+=_.x,P.client.y+=_.y}var k=this.result.rectDelta,M=r.rect||a.rect;M.left+=k.left,M.right+=k.right,M.top+=k.top,M.bottom+=k.bottom,M.width=M.right-M.left,M.height=M.bottom-M.top}},{key:"setAndApply",value:function(r){var a=this.interaction,l=r.phase,f=r.preEnd,c=r.skipModifiers,h=this.setAll(this.fillArg({preEnd:f,phase:l,pageCoords:r.modifiedCoords||a.coords.cur.page}));if(this.result=h,!h.changed&&(!c||c<this.states.length)&&a.interacting())return!1;if(r.modifiedCoords){var g=a.coords.cur.page,m={x:r.modifiedCoords.x-g.x,y:r.modifiedCoords.y-g.y};h.coords.x+=m.x,h.coords.y+=m.y,h.delta.x+=m.x,h.delta.y+=m.y}this.applyToInteraction(r)}},{key:"beforeEnd",value:function(r){var a=r.interaction,l=r.event,f=this.states;if(f&&f.length){for(var c=!1,h=0;h<f.length;h++){var g=f[h];r.state=g;var m=g.options,b=g.methods,w=b.beforeEnd&&b.beforeEnd(r);if(w)return this.endResult=w,!1;c=c||!c&&this.shouldDo(m,!0,r.phase,!0)}c&&a.move({event:l,preEnd:!0})}}},{key:"stop",value:function(r){var a=r.interaction;if(this.states&&this.states.length){var l=(0,I.default)({states:this.states,interactable:a.interactable,element:a.element,rect:null},r);this.fillArg(l);for(var f=0;f<this.states.length;f++){var c=this.states[f];l.state=c,c.methods.stop&&c.methods.stop(l)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(r){this.states=[];for(var a=0;a<r.length;a++){var l=r[a],f=l.options,c=l.methods,h=l.name;this.states.push({options:f,methods:c,index:a,name:h})}return this.states}},{key:"restoreInteractionCoords",value:function(r){var a=r.interaction,l=a.coords,f=a.rect,c=a.modification;if(c.result){for(var h=c.startDelta,g=c.result,m=g.delta,b=g.rectDelta,w=[[l.start,h],[l.cur,m]],P=0;P<w.length;P++){var _=Ai(w[P],2),k=_[0],M=_[1];k.page.x-=M.x,k.page.y-=M.y,k.client.x-=M.x,k.client.y-=M.y}f.left-=b.left,f.right-=b.right,f.top-=b.top,f.bottom-=b.bottom}}},{key:"shouldDo",value:function(r,a,l,f){return!(!r||r.enabled===!1||f&&!r.endOnly||r.endOnly&&!a||l==="start"&&!r.setStart)}},{key:"copyFrom",value:function(r){this.startOffset=r.startOffset,this.startDelta=r.startDelta,this.edges=r.edges,this.states=r.states.map(function(a){return(0,bt.default)(a)}),this.result=jn((0,I.default)({},r.result.coords),(0,I.default)({},r.result.rect))}},{key:"destroy",value:function(){for(var r in this)this[r]=null}}])&&Ca(t.prototype,n),e}();function jn(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Ri(e,t){return e?{left:t.x-e.left,top:t.y-e.top,right:e.right-t.x,bottom:e.bottom-t.y}:{left:0,top:0,right:0,bottom:0}}_t.default=Ta;var me={};function Rn(e){var t=e.iEvent,n=e.interaction.modification.result;n&&(t.modifiers=n.eventProps)}Object.defineProperty(me,"__esModule",{value:!0}),me.makeModifier=function(e,t){var n=e.defaults,r={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop},a=function(l){var f=l||{};for(var c in f.enabled=f.enabled!==!1,n)c in f||(f[c]=n[c]);var h={options:f,methods:r,name:t,enable:function(){return f.enabled=!0,h},disable:function(){return f.enabled=!1,h}};return h};return t&&typeof t=="string"&&(a._defaults=n,a._methods=r),a},me.addEventModifiers=Rn,me.default=void 0;var Ma={id:"modifiers/base",before:["actions"],install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){var t=e.interaction;t.modification=new _t.default(t)},"interactions:before-action-start":function(e){var t=e.interaction.modification;t.start(e,e.interaction.coords.start.page),e.interaction.edges=t.edges,t.applyToInteraction(e)},"interactions:before-action-move":function(e){return e.interaction.modification.setAndApply(e)},"interactions:before-action-end":function(e){return e.interaction.modification.beforeEnd(e)},"interactions:action-start":Rn,"interactions:action-move":Rn,"interactions:action-end":Rn,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}}};me.default=Ma;var en={};Object.defineProperty(en,"__esModule",{value:!0}),en.defaults=void 0,en.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var tn={};function zi(e){return(zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Da(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Li(e,t){return(Li=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(e,t)}function Ia(e,t){return!t||zi(t)!=="object"&&typeof t!="function"?J(e):t}function J(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tr(e){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(tn,"__esModule",{value:!0}),tn.InteractEvent=void 0;var Bi=function(e){(function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),h&&Li(c,h)})(f,e);var t,n,r,a,l=(r=f,a=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var c,h=Tr(r);if(a){var g=Tr(this).constructor;c=Reflect.construct(h,arguments,g)}else c=h.apply(this,arguments);return Ia(this,c)});function f(c,h,g,m,b,w,P){var _;(function(ie,$){if(!(ie instanceof $))throw new TypeError("Cannot call a class as a function")})(this,f),ee(J(_=l.call(this,c)),"target",void 0),ee(J(_),"currentTarget",void 0),ee(J(_),"relatedTarget",null),ee(J(_),"screenX",void 0),ee(J(_),"screenY",void 0),ee(J(_),"button",void 0),ee(J(_),"buttons",void 0),ee(J(_),"ctrlKey",void 0),ee(J(_),"shiftKey",void 0),ee(J(_),"altKey",void 0),ee(J(_),"metaKey",void 0),ee(J(_),"page",void 0),ee(J(_),"client",void 0),ee(J(_),"delta",void 0),ee(J(_),"rect",void 0),ee(J(_),"x0",void 0),ee(J(_),"y0",void 0),ee(J(_),"t0",void 0),ee(J(_),"dt",void 0),ee(J(_),"duration",void 0),ee(J(_),"clientX0",void 0),ee(J(_),"clientY0",void 0),ee(J(_),"velocity",void 0),ee(J(_),"speed",void 0),ee(J(_),"swipe",void 0),ee(J(_),"timeStamp",void 0),ee(J(_),"axes",void 0),ee(J(_),"preEnd",void 0),b=b||c.element;var k=c.interactable,M=(k&&k.options||en.defaults).deltaSource,C=(0,Ue.default)(k,b,g),A=m==="start",B=m==="end",W=A?J(_):c.prevEvent,K=A?c.coords.start:B?{page:W.page,client:W.client,timeStamp:c.coords.cur.timeStamp}:c.coords.cur;return _.page=(0,I.default)({},K.page),_.client=(0,I.default)({},K.client),_.rect=(0,I.default)({},c.rect),_.timeStamp=K.timeStamp,B||(_.page.x-=C.x,_.page.y-=C.y,_.client.x-=C.x,_.client.y-=C.y),_.ctrlKey=h.ctrlKey,_.altKey=h.altKey,_.shiftKey=h.shiftKey,_.metaKey=h.metaKey,_.button=h.button,_.buttons=h.buttons,_.target=b,_.currentTarget=b,_.preEnd=w,_.type=P||g+(m||""),_.interactable=k,_.t0=A?c.pointers[c.pointers.length-1].downTime:W.t0,_.x0=c.coords.start.page.x-C.x,_.y0=c.coords.start.page.y-C.y,_.clientX0=c.coords.start.client.x-C.x,_.clientY0=c.coords.start.client.y-C.y,_.delta=A||B?{x:0,y:0}:{x:_[M].x-W[M].x,y:_[M].y-W[M].y},_.dt=c.coords.delta.timeStamp,_.duration=_.timeStamp-_.t0,_.velocity=(0,I.default)({},c.coords.velocity[M]),_.speed=(0,We.default)(_.velocity.x,_.velocity.y),_.swipe=B||m==="inertiastart"?_.getSwipe():null,_}return t=f,(n=[{key:"getSwipe",value:function(){var c=this._interaction;if(c.prevEvent.speed<600||this.timeStamp-c.prevEvent.timeStamp>150)return null;var h=180*Math.atan2(c.prevEvent.velocityY,c.prevEvent.velocityX)/Math.PI;h<0&&(h+=360);var g=112.5<=h&&h<247.5,m=202.5<=h&&h<337.5;return{up:m,down:!m&&22.5<=h&&h<157.5,left:g,right:!g&&(292.5<=h||h<67.5),angle:h,speed:c.prevEvent.speed,velocity:{x:c.prevEvent.velocityX,y:c.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&Da(t.prototype,n),f}(Dt.BaseEvent);tn.InteractEvent=Bi,Object.defineProperties(Bi.prototype,{pageX:{get:function(){return this.page.x},set:function(e){this.page.x=e}},pageY:{get:function(){return this.page.y},set:function(e){this.page.y=e}},clientX:{get:function(){return this.client.x},set:function(e){this.client.x=e}},clientY:{get:function(){return this.client.y},set:function(e){this.client.y=e}},dx:{get:function(){return this.delta.x},set:function(e){this.delta.x=e}},dy:{get:function(){return this.delta.y},set:function(e){this.delta.y=e}},velocityX:{get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},velocityY:{get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}});var nn={};function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(nn,"__esModule",{value:!0}),nn.PointerInfo=void 0,nn.PointerInfo=function e(t,n,r,a,l){(function(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,e),rn(this,"id",void 0),rn(this,"pointer",void 0),rn(this,"event",void 0),rn(this,"downTime",void 0),rn(this,"downTarget",void 0),this.id=t,this.pointer=n,this.event=r,this.downTime=a,this.downTarget=l};var zn,Ln,Se={};function Aa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Se,"__esModule",{value:!0}),Object.defineProperty(Se,"PointerInfo",{enumerable:!0,get:function(){return nn.PointerInfo}}),Se.default=Se.Interaction=Se._ProxyMethods=Se._ProxyValues=void 0,Se._ProxyValues=zn,function(e){e.interactable="",e.element="",e.prepared="",e.pointerIsDown="",e.pointerWasMoved="",e._proxy=""}(zn||(Se._ProxyValues=zn={})),Se._ProxyMethods=Ln,function(e){e.start="",e.move="",e.end="",e.stop="",e.interacting=""}(Ln||(Se._ProxyMethods=Ln={}));var ja=0,Fi=function(){function e(r){var a=this,l=r.pointerType,f=r.scopeFire;(function(w,P){if(!(w instanceof P))throw new TypeError("Cannot call a class as a function")})(this,e),se(this,"interactable",null),se(this,"element",null),se(this,"rect",void 0),se(this,"_rects",void 0),se(this,"edges",void 0),se(this,"_scopeFire",void 0),se(this,"prepared",{name:null,axis:null,edges:null}),se(this,"pointerType",void 0),se(this,"pointers",[]),se(this,"downEvent",null),se(this,"downPointer",{}),se(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),se(this,"prevEvent",null),se(this,"pointerIsDown",!1),se(this,"pointerWasMoved",!1),se(this,"_interacting",!1),se(this,"_ending",!1),se(this,"_stopped",!0),se(this,"_proxy",null),se(this,"simulation",null),se(this,"doMove",(0,Ce.warnOnce)(function(w){this.move(w)},"The interaction.doMove() method has been renamed to interaction.move()")),se(this,"coords",{start:j.newCoords(),prev:j.newCoords(),cur:j.newCoords(),delta:j.newCoords(),velocity:j.newCoords()}),se(this,"_id",ja++),this._scopeFire=f,this.pointerType=l;var c=this;this._proxy={};var h=function(w){Object.defineProperty(a._proxy,w,{get:function(){return c[w]}})};for(var g in zn)h(g);var m=function(w){Object.defineProperty(a._proxy,w,{value:function(){return c[w].apply(c,arguments)}})};for(var b in Ln)m(b);this._scopeFire("interactions:new",{interaction:this})}var t,n;return t=e,(n=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(r,a,l){var f=this.updatePointer(r,a,l,!0),c=this.pointers[f];this._scopeFire("interactions:down",{pointer:r,event:a,eventTarget:l,pointerIndex:f,pointerInfo:c,type:"down",interaction:this})}},{key:"start",value:function(r,a,l){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(r.name==="gesture"?2:1)||!a.options[r.name].enabled)&&((0,Ce.copyAction)(this.prepared,r),this.interactable=a,this.element=l,this.rect=a.getRect(l),this.edges=this.prepared.edges?(0,I.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(r,a,l){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(r,a,l,!1);var f,c,h=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(f=this.coords.cur.client.x-this.coords.start.client.x,c=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,We.default)(f,c)>this.pointerMoveTolerance);var g=this.getPointerIndex(r),m={pointer:r,pointerIndex:g,pointerInfo:this.pointers[g],event:a,type:"move",eventTarget:l,dx:f,dy:c,duplicate:h,interaction:this};h||j.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",m),h||this.simulation||(this.interacting()&&(m.type=null,this.move(m)),this.pointerWasMoved&&j.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(r){r&&r.event||j.setZeroCoords(this.coords.delta),(r=(0,I.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},r||{})).phase="move",this._doPhase(r)}},{key:"pointerUp",value:function(r,a,l,f){var c=this.getPointerIndex(r);c===-1&&(c=this.updatePointer(r,a,l,!1));var h=/cancel$/i.test(a.type)?"cancel":"up";this._scopeFire("interactions:".concat(h),{pointer:r,pointerIndex:c,pointerInfo:this.pointers[c],event:a,eventTarget:l,type:h,curEventTarget:f,interaction:this}),this.simulation||this.end(a),this.removePointer(r,a)}},{key:"documentBlur",value:function(r){this.end(r),this._scopeFire("interactions:blur",{event:r,type:"blur",interaction:this})}},{key:"end",value:function(r){var a;this._ending=!0,r=r||this._latestPointer.event,this.interacting()&&(a=this._doPhase({event:r,interaction:this,phase:"end"})),this._ending=!1,a===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(r){var a=j.getPointerId(r);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:re.findIndex(this.pointers,function(l){return l.id===a})}},{key:"getPointerInfo",value:function(r){return this.pointers[this.getPointerIndex(r)]}},{key:"updatePointer",value:function(r,a,l,f){var c=j.getPointerId(r),h=this.getPointerIndex(r),g=this.pointers[h];return f=f!==!1&&(f||/(down|start)$/i.test(a.type)),g?g.pointer=r:(g=new nn.PointerInfo(c,r,a,null,null),h=this.pointers.length,this.pointers.push(g)),j.setCoords(this.coords.cur,this.pointers.map(function(m){return m.pointer}),this._now()),j.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),f&&(this.pointerIsDown=!0,g.downTime=this.coords.cur.timeStamp,g.downTarget=l,j.pointerExtend(this.downPointer,r),this.interacting()||(j.copyCoords(this.coords.start,this.coords.cur),j.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=a,this.pointerWasMoved=!1)),this._updateLatestPointer(r,a,l),this._scopeFire("interactions:update-pointer",{pointer:r,event:a,eventTarget:l,down:f,pointerInfo:g,pointerIndex:h,interaction:this}),h}},{key:"removePointer",value:function(r,a){var l=this.getPointerIndex(r);if(l!==-1){var f=this.pointers[l];this._scopeFire("interactions:remove-pointer",{pointer:r,event:a,eventTarget:null,pointerIndex:l,pointerInfo:f,interaction:this}),this.pointers.splice(l,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(r,a,l){this._latestPointer.pointer=r,this._latestPointer.event=a,this._latestPointer.eventTarget=l}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(r,a,l,f){return new tn.InteractEvent(this,r,this.prepared.name,a,this.element,l,f)}},{key:"_fireEvent",value:function(r){this.interactable.fire(r),(!this.prevEvent||r.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=r)}},{key:"_doPhase",value:function(r){var a=r.event,l=r.phase,f=r.preEnd,c=r.type,h=this.rect;if(h&&l==="move"&&(G.addEdges(this.edges,h,this.coords.delta[this.interactable.options.deltaSource]),h.width=h.right-h.left,h.height=h.bottom-h.top),this._scopeFire("interactions:before-action-".concat(l),r)===!1)return!1;var g=r.iEvent=this._createPreparedEvent(a,l,f,c);return this._scopeFire("interactions:action-".concat(l),r),l==="start"&&(this.prevEvent=g),this._fireEvent(g),this._scopeFire("interactions:after-action-".concat(l),r),!0}},{key:"_now",value:function(){return Date.now()}}])&&Aa(t.prototype,n),e}();Se.Interaction=Fi;var Ra=Fi;Se.default=Ra;var wt={};function Ni(e){e.pointerIsDown&&(Dr(e.coords.cur,e.offset.total),e.offset.pending.x=0,e.offset.pending.y=0)}function Xi(e){Mr(e.interaction)}function Mr(e){if(!function(n){return!(!n.offset.pending.x&&!n.offset.pending.y)}(e))return!1;var t=e.offset.pending;return Dr(e.coords.cur,t),Dr(e.coords.delta,t),G.addEdges(e.edges,e.rect,t),t.x=0,t.y=0,!0}function za(e){var t=e.x,n=e.y;this.offset.pending.x+=t,this.offset.pending.y+=n,this.offset.total.x+=t,this.offset.total.y+=n}function Dr(e,t){var n=e.page,r=e.client,a=t.x,l=t.y;n.x+=a,n.y+=l,r.x+=a,r.y+=l}Object.defineProperty(wt,"__esModule",{value:!0}),wt.addTotal=Ni,wt.applyPending=Mr,wt.default=void 0,Se._ProxyMethods.offsetBy="";var La={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(e){e.Interaction.prototype.offsetBy=za},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return Ni(e.interaction)},"interactions:before-action-start":Xi,"interactions:before-action-move":Xi,"interactions:before-action-end":function(e){var t=e.interaction;if(Mr(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function(e){var t=e.interaction;t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}};wt.default=La;var jt={};function Ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(jt,"__esModule",{value:!0}),jt.default=jt.InertiaState=void 0;var Yi=function(){function e(r){(function(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),ge(this,"active",!1),ge(this,"isModified",!1),ge(this,"smoothEnd",!1),ge(this,"allowResume",!1),ge(this,"modification",void 0),ge(this,"modifierCount",0),ge(this,"modifierArg",void 0),ge(this,"startCoords",void 0),ge(this,"t0",0),ge(this,"v0",0),ge(this,"te",0),ge(this,"targetOffset",void 0),ge(this,"modifiedOffset",void 0),ge(this,"currentOffset",void 0),ge(this,"lambda_v0",0),ge(this,"one_ve_v0",0),ge(this,"timeout",void 0),ge(this,"interaction",void 0),this.interaction=r}var t,n;return t=e,(n=[{key:"start",value:function(r){var a=this.interaction,l=Bn(a);if(!l||!l.enabled)return!1;var f=a.coords.velocity.client,c=(0,We.default)(f.x,f.y),h=this.modification||(this.modification=new _t.default(a));if(h.copyFrom(a.modification),this.t0=a._now(),this.allowResume=l.allowResume,this.v0=c,this.currentOffset={x:0,y:0},this.startCoords=a.coords.cur.page,this.modifierArg=h.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-a.coords.cur.timeStamp<50&&c>l.minSpeed&&c>l.endSpeed)this.startInertia();else{if(h.result=h.setAll(this.modifierArg),!h.result.changed)return!1;this.startSmoothEnd()}return a.modification.result.rect=null,a.offsetBy(this.targetOffset),a._doPhase({interaction:a,event:r,phase:"inertiastart"}),a.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),a.modification.result.rect=null,this.active=!0,a.simulation=this,!0}},{key:"startInertia",value:function(){var r=this,a=this.interaction.coords.velocity.client,l=Bn(this.interaction),f=l.resistance,c=-Math.log(l.endSpeed/this.v0)/f;this.targetOffset={x:(a.x-c)/f,y:(a.y-c)/f},this.te=c,this.lambda_v0=f/this.v0,this.one_ve_v0=1-l.endSpeed/this.v0;var h=this.modification,g=this.modifierArg;g.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},h.result=h.setAll(g),h.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+h.result.delta.x,y:this.targetOffset.y+h.result.delta.y}),this.onNextFrame(function(){return r.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var r=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return r.smoothEndTick()})}},{key:"onNextFrame",value:function(r){var a=this;this.timeout=Le.default.request(function(){a.active&&r()})}},{key:"inertiaTick",value:function(){var r,a,l,f,c,h=this,g=this.interaction,m=Bn(g).resistance,b=(g._now()-this.t0)/1e3;if(b<this.te){var w,P=1-(Math.exp(-m*b)-this.lambda_v0)/this.one_ve_v0;this.isModified?(r=this.targetOffset.x,a=this.targetOffset.y,l=this.modifiedOffset.x,f=this.modifiedOffset.y,w={x:Wi(c=P,0,r,l),y:Wi(c,0,a,f)}):w={x:this.targetOffset.x*P,y:this.targetOffset.y*P};var _={x:w.x-this.currentOffset.x,y:w.y-this.currentOffset.y};this.currentOffset.x+=_.x,this.currentOffset.y+=_.y,g.offsetBy(_),g.move(),this.onNextFrame(function(){return h.inertiaTick()})}else g.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var r=this,a=this.interaction,l=a._now()-this.t0,f=Bn(a).smoothEndDuration;if(l<f){var c={x:Hi(l,0,this.targetOffset.x,f),y:Hi(l,0,this.targetOffset.y,f)},h={x:c.x-this.currentOffset.x,y:c.y-this.currentOffset.y};this.currentOffset.x+=h.x,this.currentOffset.y+=h.y,a.offsetBy(h),a.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return r.smoothEndTick()})}else a.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(r){var a=r.pointer,l=r.event,f=r.eventTarget,c=this.interaction;c.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),c.updatePointer(a,l,f,!0),c._doPhase({interaction:c,event:l,phase:"resume"}),(0,j.copyCoords)(c.coords.prev,c.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Le.default.cancel(this.timeout)}}])&&Ba(t.prototype,n),e}();function Bn(e){var t=e.interactable,n=e.prepared;return t&&t.options&&n.name&&t.options[n.name].inertia}function Wi(e,t,n,r){var a=1-e;return a*a*t+2*a*e*n+e*e*r}function Hi(e,t,n,r){return-n*(e/=r)*(e-2)+t}jt.InertiaState=Yi;var Fa={id:"inertia",before:["modifiers","actions"],install:function(e){var t=e.defaults;e.usePlugin(wt.default),e.usePlugin(me.default),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){var t=e.interaction;t.inertia=new Yi(t)},"interactions:before-action-end":function(e){var t=e.interaction,n=e.event;return(!t._interacting||t.simulation||!t.inertia.start(n))&&null},"interactions:down":function(e){var t=e.interaction,n=e.eventTarget,r=t.inertia;if(r.active)for(var a=n;p.default.element(a);){if(a===t.element){r.resume(e);break}a=R.parentNode(a)}},"interactions:stop":function(e){var t=e.interaction.inertia;t.active&&t.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":me.addEventModifiers,"interactions:action-inertiastart":me.addEventModifiers,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};jt.default=Fa;var on={};function Na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e.immediatePropagationStopped)break;r(e)}}Object.defineProperty(on,"__esModule",{value:!0}),on.Eventable=void 0;var Xa=function(){function e(r){(function(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),an(this,"options",void 0),an(this,"types",{}),an(this,"propagationStopped",!1),an(this,"immediatePropagationStopped",!1),an(this,"global",void 0),this.options=(0,I.default)({},r||{})}var t,n;return t=e,(n=[{key:"fire",value:function(r){var a,l=this.global;(a=this.types[r.type])&&qi(r,a),!r.propagationStopped&&l&&(a=l[r.type])&&qi(r,a)}},{key:"on",value:function(r,a){var l=(0,mt.default)(r,a);for(r in l)this.types[r]=re.merge(this.types[r]||[],l[r])}},{key:"off",value:function(r,a){var l=(0,mt.default)(r,a);for(r in l){var f=this.types[r];if(f&&f.length)for(var c=0;c<l[r].length;c++){var h=l[r][c],g=f.indexOf(h);g!==-1&&f.splice(g,1)}}}},{key:"getRect",value:function(r){return null}}])&&Na(t.prototype,n),e}();on.Eventable=Xa;var sn={};Object.defineProperty(sn,"__esModule",{value:!0}),sn.default=function(e,t){if(t.phaselessTypes[e])return!0;for(var n in t.map)if(e.indexOf(n)===0&&e.substr(n.length)in t.phases)return!0;return!1};var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.createInteractStatic=function(e){var t=function n(r,a){var l=e.interactables.get(r,a);return l||((l=e.interactables.new(r,a)).events.global=n.globalEvents),l};return t.getPointerAverage=j.pointerAverage,t.getTouchBBox=j.touchBBox,t.getTouchDistance=j.touchDistance,t.getTouchAngle=j.touchAngle,t.getElementRect=R.getElementRect,t.getElementClientRect=R.getElementClientRect,t.matchesSelector=R.matchesSelector,t.closest=R.closest,t.globalEvents={},t.version="1.10.11",t.scope=e,t.use=function(n,r){return this.scope.usePlugin(n,r),this},t.isSet=function(n,r){return!!this.scope.interactables.get(n,r&&r.context)},t.on=(0,Ce.warnOnce)(function(n,r,a){if(p.default.string(n)&&n.search(" ")!==-1&&(n=n.trim().split(/ +/)),p.default.array(n)){for(var l=0;l<n.length;l++){var f=n[l];this.on(f,r,a)}return this}if(p.default.object(n)){for(var c in n)this.on(c,n[c],r);return this}return(0,sn.default)(n,this.scope.actions)?this.globalEvents[n]?this.globalEvents[n].push(r):this.globalEvents[n]=[r]:this.scope.events.add(this.scope.document,n,r,{options:a}),this},"The interact.on() method is being deprecated"),t.off=(0,Ce.warnOnce)(function(n,r,a){if(p.default.string(n)&&n.search(" ")!==-1&&(n=n.trim().split(/ +/)),p.default.array(n)){for(var l=0;l<n.length;l++){var f=n[l];this.off(f,r,a)}return this}if(p.default.object(n)){for(var c in n)this.off(c,n[c],r);return this}var h;return(0,sn.default)(n,this.scope.actions)?n in this.globalEvents&&(h=this.globalEvents[n].indexOf(r))!==-1&&this.globalEvents[n].splice(h,1):this.scope.events.remove(this.scope.document,n,r,a),this},"The interact.off() method is being deprecated"),t.debug=function(){return this.scope},t.supportsTouch=function(){return ce.default.supportsTouch},t.supportsPointerEvent=function(){return ce.default.supportsPointerEvent},t.stop=function(){for(var n=0;n<this.scope.interactions.list.length;n++)this.scope.interactions.list[n].stop();return this},t.pointerMoveTolerance=function(n){return p.default.number(n)?(this.scope.interactions.pointerMoveTolerance=n,this):this.scope.interactions.pointerMoveTolerance},t.addDocument=function(n,r){this.scope.addDocument(n,r)},t.removeDocument=function(n){this.scope.removeDocument(n)},t};var Fn={};function Ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.Interactable=void 0;var Wa=function(){function e(r,a,l,f){(function(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")})(this,e),et(this,"options",void 0),et(this,"_actions",void 0),et(this,"target",void 0),et(this,"events",new on.Eventable),et(this,"_context",void 0),et(this,"_win",void 0),et(this,"_doc",void 0),et(this,"_scopeEvents",void 0),et(this,"_rectChecker",void 0),this._actions=a.actions,this.target=r,this._context=a.context||l,this._win=(0,s.getWindow)((0,R.trySelector)(r)?this._context:r),this._doc=this._win.document,this._scopeEvents=f,this.set(a)}var t,n;return t=e,(n=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(r,a){return p.default.func(a.onstart)&&this.on("".concat(r,"start"),a.onstart),p.default.func(a.onmove)&&this.on("".concat(r,"move"),a.onmove),p.default.func(a.onend)&&this.on("".concat(r,"end"),a.onend),p.default.func(a.oninertiastart)&&this.on("".concat(r,"inertiastart"),a.oninertiastart),this}},{key:"updatePerActionListeners",value:function(r,a,l){(p.default.array(a)||p.default.object(a))&&this.off(r,a),(p.default.array(l)||p.default.object(l))&&this.on(r,l)}},{key:"setPerAction",value:function(r,a){var l=this._defaults;for(var f in a){var c=f,h=this.options[r],g=a[c];c==="listeners"&&this.updatePerActionListeners(r,h.listeners,g),p.default.array(g)?h[c]=re.from(g):p.default.plainObject(g)?(h[c]=(0,I.default)(h[c]||{},(0,bt.default)(g)),p.default.object(l.perAction[c])&&"enabled"in l.perAction[c]&&(h[c].enabled=g.enabled!==!1)):p.default.bool(g)&&p.default.object(l.perAction[c])?h[c].enabled=g:h[c]=g}}},{key:"getRect",value:function(r){return r=r||(p.default.element(this.target)?this.target:null),p.default.string(this.target)&&(r=r||this._context.querySelector(this.target)),(0,R.getElementRect)(r)}},{key:"rectChecker",value:function(r){var a=this;return p.default.func(r)?(this._rectChecker=r,this.getRect=function(l){var f=(0,I.default)({},a._rectChecker(l));return"width"in f||(f.width=f.right-f.left,f.height=f.bottom-f.top),f},this):r===null?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(r,a){if((0,R.trySelector)(a)||p.default.object(a)){for(var l in this.options[r]=a,this._actions.map)this.options[l][r]=a;return this}return this.options[r]}},{key:"origin",value:function(r){return this._backCompatOption("origin",r)}},{key:"deltaSource",value:function(r){return r==="page"||r==="client"?(this.options.deltaSource=r,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(r){return this._context===r.ownerDocument||(0,R.nodeContains)(this._context,r)}},{key:"testIgnoreAllow",value:function(r,a,l){return!this.testIgnore(r.ignoreFrom,a,l)&&this.testAllow(r.allowFrom,a,l)}},{key:"testAllow",value:function(r,a,l){return!r||!!p.default.element(l)&&(p.default.string(r)?(0,R.matchesUpTo)(l,r,a):!!p.default.element(r)&&(0,R.nodeContains)(r,l))}},{key:"testIgnore",value:function(r,a,l){return!(!r||!p.default.element(l))&&(p.default.string(r)?(0,R.matchesUpTo)(l,r,a):!!p.default.element(r)&&(0,R.nodeContains)(r,l))}},{key:"fire",value:function(r){return this.events.fire(r),this}},{key:"_onOff",value:function(r,a,l,f){p.default.object(a)&&!p.default.array(a)&&(f=l,l=null);var c=r==="on"?"add":"remove",h=(0,mt.default)(a,l);for(var g in h){g==="wheel"&&(g=ce.default.wheelEvent);for(var m=0;m<h[g].length;m++){var b=h[g][m];(0,sn.default)(g,this._actions)?this.events[r](g,b):p.default.string(this.target)?this._scopeEvents["".concat(c,"Delegate")](this.target,this._context,g,b,f):this._scopeEvents[c](this.target,g,b,f)}}return this}},{key:"on",value:function(r,a,l){return this._onOff("on",r,a,l)}},{key:"off",value:function(r,a,l){return this._onOff("off",r,a,l)}},{key:"set",value:function(r){var a=this._defaults;for(var l in p.default.object(r)||(r={}),this.options=(0,bt.default)(a.base),this._actions.methodDict){var f=l,c=this._actions.methodDict[f];this.options[f]={},this.setPerAction(f,(0,I.default)((0,I.default)({},a.perAction),a.actions[f])),this[c](r[f])}for(var h in r)p.default.func(this[h])&&this[h](r[h]);return this}},{key:"unset",value:function(){if(p.default.string(this.target))for(var r in this._scopeEvents.delegatedEvents)for(var a=this._scopeEvents.delegatedEvents[r],l=a.length-1;l>=0;l--){var f=a[l],c=f.selector,h=f.context,g=f.listeners;c===this.target&&h===this._context&&a.splice(l,1);for(var m=g.length-1;m>=0;m--)this._scopeEvents.removeDelegate(this.target,this._context,r,g[m][0],g[m][1])}else this._scopeEvents.remove(this.target,"all")}}])&&Ya(t.prototype,n),e}();Fn.Interactable=Wa;var Nn={};function Ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.InteractableSet=void 0;var qa=function(){function e(r){var a=this;(function(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")})(this,e),Ar(this,"list",[]),Ar(this,"selectorMap",{}),Ar(this,"scope",void 0),this.scope=r,r.addListeners({"interactable:unset":function(l){var f=l.interactable,c=f.target,h=f._context,g=p.default.string(c)?a.selectorMap[c]:c[a.scope.id],m=re.findIndex(g,function(b){return b.context===h});g[m]&&(g[m].context=null,g[m].interactable=null),g.splice(m,1)}})}var t,n;return t=e,(n=[{key:"new",value:function(r,a){a=(0,I.default)(a||{},{actions:this.scope.actions});var l=new this.scope.Interactable(r,a,this.scope.document,this.scope.events),f={context:l._context,interactable:l};return this.scope.addDocument(l._doc),this.list.push(l),p.default.string(r)?(this.selectorMap[r]||(this.selectorMap[r]=[]),this.selectorMap[r].push(f)):(l.target[this.scope.id]||Object.defineProperty(r,this.scope.id,{value:[],configurable:!0}),r[this.scope.id].push(f)),this.scope.fire("interactable:new",{target:r,options:a,interactable:l,win:this.scope._win}),l}},{key:"get",value:function(r,a){var l=a&&a.context||this.scope.document,f=p.default.string(r),c=f?this.selectorMap[r]:r[this.scope.id];if(!c)return null;var h=re.find(c,function(g){return g.context===l&&(f||g.interactable.inContext(r))});return h&&h.interactable}},{key:"forEachMatch",value:function(r,a){for(var l=0;l<this.list.length;l++){var f=this.list[l],c=void 0;if((p.default.string(f.target)?p.default.element(r)&&R.matchesSelector(r,f.target):r===f.target)&&f.inContext(r)&&(c=a(f)),c!==void 0)return c}}}])&&Ha(t.prototype,n),e}();Nn.InteractableSet=qa;var Xn={};function Va(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rr(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(n)){var a=[],l=!0,f=!1,c=void 0;try{for(var h,g=n[Symbol.iterator]();!(l=(h=g.next()).done)&&(a.push(h.value),!r||a.length!==r);l=!0);}catch(m){f=!0,c=m}finally{try{l||g.return==null||g.return()}finally{if(f)throw c}}return a}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Vi(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Vi(n,r):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vi(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.default=void 0;var $a=function(){function e(r){(function(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),jr(this,"currentTarget",void 0),jr(this,"originalEvent",void 0),jr(this,"type",void 0),this.originalEvent=r,(0,Kt.default)(this,r)}var t,n;return t=e,(n=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&Va(t.prototype,n),e}();function ln(e){if(!p.default.object(e))return{capture:!!e,passive:!1};var t=(0,I.default)({},e);return t.capture=!!e.capture,t.passive=!!e.passive,t}var Ga={id:"events",install:function(e){var t,n=[],r={},a=[],l={add:f,remove:c,addDelegate:function(m,b,w,P,_){var k=ln(_);if(!r[w]){r[w]=[];for(var M=0;M<a.length;M++){var C=a[M];f(C,w,h),f(C,w,g,!0)}}var A=r[w],B=re.find(A,function(W){return W.selector===m&&W.context===b});B||(B={selector:m,context:b,listeners:[]},A.push(B)),B.listeners.push([P,k])},removeDelegate:function(m,b,w,P,_){var k,M=ln(_),C=r[w],A=!1;if(C)for(k=C.length-1;k>=0;k--){var B=C[k];if(B.selector===m&&B.context===b){for(var W=B.listeners,K=W.length-1;K>=0;K--){var ie=Rr(W[K],2),$=ie[0],te=ie[1],Re=te.capture,nt=te.passive;if($===P&&Re===M.capture&&nt===M.passive){W.splice(K,1),W.length||(C.splice(k,1),c(b,w,h),c(b,w,g,!0)),A=!0;break}}if(A)break}}},delegateListener:h,delegateUseCapture:g,delegatedEvents:r,documents:a,targets:n,supportsOptions:!1,supportsPassive:!1};function f(m,b,w,P){var _=ln(P),k=re.find(n,function(M){return M.eventTarget===m});k||(k={eventTarget:m,events:{}},n.push(k)),k.events[b]||(k.events[b]=[]),m.addEventListener&&!re.contains(k.events[b],w)&&(m.addEventListener(b,w,l.supportsOptions?_:_.capture),k.events[b].push(w))}function c(m,b,w,P){var _=ln(P),k=re.findIndex(n,function(K){return K.eventTarget===m}),M=n[k];if(M&&M.events)if(b!=="all"){var C=!1,A=M.events[b];if(A){if(w==="all"){for(var B=A.length-1;B>=0;B--)c(m,b,A[B],_);return}for(var W=0;W<A.length;W++)if(A[W]===w){m.removeEventListener(b,w,l.supportsOptions?_:_.capture),A.splice(W,1),A.length===0&&(delete M.events[b],C=!0);break}}C&&!Object.keys(M.events).length&&n.splice(k,1)}else for(b in M.events)M.events.hasOwnProperty(b)&&c(m,b,"all")}function h(m,b){for(var w=ln(b),P=new $a(m),_=r[m.type],k=Rr(j.getEventTargets(m),1)[0],M=k;p.default.element(M);){for(var C=0;C<_.length;C++){var A=_[C],B=A.selector,W=A.context;if(R.matchesSelector(M,B)&&R.nodeContains(W,k)&&R.nodeContains(W,M)){var K=A.listeners;P.currentTarget=M;for(var ie=0;ie<K.length;ie++){var $=Rr(K[ie],2),te=$[0],Re=$[1],nt=Re.capture,Gr=Re.passive;nt===w.capture&&Gr===w.passive&&te(P)}}}M=R.parentNode(M)}}function g(m){return h(m,!0)}return(t=e.document)==null||t.createElement("div").addEventListener("test",null,{get capture(){return l.supportsOptions=!0},get passive(){return l.supportsPassive=!0}}),e.events=l,l}};Xn.default=Ga;var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.default=void 0;var Wn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0;t<Wn.methodOrder.length;t++){var n;n=Wn.methodOrder[t];var r=Wn[n](e);if(r)return r}return null},simulationResume:function(e){var t=e.pointerType,n=e.eventType,r=e.eventTarget,a=e.scope;if(!/down|start/i.test(n))return null;for(var l=0;l<a.interactions.list.length;l++){var f=a.interactions.list[l],c=r;if(f.simulation&&f.simulation.allowResume&&f.pointerType===t)for(;c;){if(c===f.element)return f;c=R.parentNode(c)}}return null},mouseOrPen:function(e){var t,n=e.pointerId,r=e.pointerType,a=e.eventType,l=e.scope;if(r!=="mouse"&&r!=="pen")return null;for(var f=0;f<l.interactions.list.length;f++){var c=l.interactions.list[f];if(c.pointerType===r){if(c.simulation&&!$i(c,n))continue;if(c.interacting())return c;t||(t=c)}}if(t)return t;for(var h=0;h<l.interactions.list.length;h++){var g=l.interactions.list[h];if(!(g.pointerType!==r||/down/i.test(a)&&g.simulation))return g}return null},hasPointer:function(e){for(var t=e.pointerId,n=e.scope,r=0;r<n.interactions.list.length;r++){var a=n.interactions.list[r];if($i(a,t))return a}return null},idle:function(e){for(var t=e.pointerType,n=e.scope,r=0;r<n.interactions.list.length;r++){var a=n.interactions.list[r];if(a.pointers.length===1){var l=a.interactable;if(l&&(!l.options.gesture||!l.options.gesture.enabled))continue}else if(a.pointers.length>=2)continue;if(!a.interacting()&&t===a.pointerType)return a}return null}};function $i(e,t){return e.pointers.some(function(n){return n.id===t})}var Ua=Wn;Yn.default=Ua;var Hn={};function Gi(e){return(Gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Ui(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(n)){var a=[],l=!0,f=!1,c=void 0;try{for(var h,g=n[Symbol.iterator]();!(l=(h=g.next()).done)&&(a.push(h.value),!r||a.length!==r);l=!0);}catch(m){f=!0,c=m}finally{try{l||g.return==null||g.return()}finally{if(f)throw c}}return a}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ki(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ki(n,r):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ki(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ka(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Za(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zi(e,t){return(Zi=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(e,t)}function Ja(e,t){return!t||Gi(t)!=="object"&&typeof t!="function"?function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e):t}function zr(e){return(zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.default=void 0;var Lr=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Ji(e,t){return function(n){var r=t.interactions.list,a=j.getPointerType(n),l=Ui(j.getEventTargets(n),2),f=l[0],c=l[1],h=[];if(/^touch/.test(n.type)){t.prevTouchTime=t.now();for(var g=0;g<n.changedTouches.length;g++){var m=n.changedTouches[g],b={pointer:m,pointerId:j.getPointerId(m),pointerType:a,eventType:n.type,eventTarget:f,curEventTarget:c,scope:t},w=Qi(b);h.push([b.pointer,b.eventTarget,b.curEventTarget,w])}}else{var P=!1;if(!ce.default.supportsPointerEvent&&/mouse/.test(n.type)){for(var _=0;_<r.length&&!P;_++)P=r[_].pointerType!=="mouse"&&r[_].pointerIsDown;P=P||t.now()-t.prevTouchTime<500||n.timeStamp===0}if(!P){var k={pointer:n,pointerId:j.getPointerId(n),pointerType:a,eventType:n.type,curEventTarget:c,eventTarget:f,scope:t},M=Qi(k);h.push([k.pointer,k.eventTarget,k.curEventTarget,M])}}for(var C=0;C<h.length;C++){var A=Ui(h[C],4),B=A[0],W=A[1],K=A[2];A[3][e](B,n,W,K)}}}function Qi(e){var t=e.pointerType,n=e.scope,r={interaction:Yn.default.search(e),searchDetails:e};return n.fire("interactions:find",r),r.interaction||n.interactions.new({pointerType:t})}function Br(e,t){var n=e.doc,r=e.scope,a=e.options,l=r.interactions.docEvents,f=r.events,c=f[t];for(var h in r.browser.isIOS&&!a.events&&(a.events={passive:!1}),f.delegatedEvents)c(n,h,f.delegateListener),c(n,h,f.delegateUseCapture,!0);for(var g=a&&a.events,m=0;m<l.length;m++){var b=l[m];c(n,b.type,b.listener,g)}}var Qa={id:"core/interactions",install:function(e){for(var t={},n=0;n<Lr.length;n++){var r=Lr[n];t[r]=Ji(r,e)}var a,l=ce.default.pEventTypes;function f(){for(var c=0;c<e.interactions.list.length;c++){var h=e.interactions.list[c];if(h.pointerIsDown&&h.pointerType==="touch"&&!h._interacting)for(var g=function(){var b=h.pointers[m];e.documents.some(function(w){var P=w.doc;return(0,R.nodeContains)(P,b.downTarget)})||h.removePointer(b.pointer,b.event)},m=0;m<h.pointers.length;m++)g()}}(a=V.default.PointerEvent?[{type:l.down,listener:f},{type:l.down,listener:t.pointerDown},{type:l.move,listener:t.pointerMove},{type:l.up,listener:t.pointerUp},{type:l.cancel,listener:t.pointerUp}]:[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:f},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}]).push({type:"blur",listener:function(c){for(var h=0;h<e.interactions.list.length;h++)e.interactions.list[h].documentBlur(c)}}),e.prevTouchTime=0,e.Interaction=function(c){(function(_,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(k&&k.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),k&&Zi(_,k)})(P,c);var h,g,m,b,w=(m=P,b=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _,k=zr(m);if(b){var M=zr(this).constructor;_=Reflect.construct(k,arguments,M)}else _=k.apply(this,arguments);return Ja(this,_)});function P(){return Ka(this,P),w.apply(this,arguments)}return h=P,(g=[{key:"pointerMoveTolerance",get:function(){return e.interactions.pointerMoveTolerance},set:function(_){e.interactions.pointerMoveTolerance=_}},{key:"_now",value:function(){return e.now()}}])&&Za(h.prototype,g),P}(Se.default),e.interactions={list:[],new:function(c){c.scopeFire=function(g,m){return e.fire(g,m)};var h=new e.Interaction(c);return e.interactions.list.push(h),h},listeners:t,docEvents:a,pointerMoveTolerance:1},e.usePlugin(At.default)},listeners:{"scope:add-document":function(e){return Br(e,"add")},"scope:remove-document":function(e){return Br(e,"remove")},"interactable:unset":function(e,t){for(var n=e.interactable,r=t.interactions.list.length-1;r>=0;r--){var a=t.interactions.list[r];a.interactable===n&&(a.stop(),t.fire("interactions:destroy",{interaction:a}),a.destroy(),t.interactions.list.length>2&&t.interactions.list.splice(r,1))}}},onDocSignal:Br,doOnInteractions:Ji,methodNames:Lr};Hn.default=Qa;var cn={};function eo(e){return(eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Fr(e,t,n){return(Fr=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(r,a,l){var f=function(h,g){for(;!Object.prototype.hasOwnProperty.call(h,g)&&(h=Rt(h))!==null;);return h}(r,a);if(f){var c=Object.getOwnPropertyDescriptor(f,a);return c.get?c.get.call(l):c.value}})(e,t,n||e)}function to(e,t){return(to=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(e,t)}function es(e,t){return!t||eo(t)!=="object"&&typeof t!="function"?function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e):t}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function no(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function io(e,t,n){return t&&ro(e.prototype,t),n&&ro(e,n),e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(cn,"__esModule",{value:!0}),cn.initScope=oo,cn.Scope=void 0;var ts=function(){function e(){var t=this;no(this,e),ye(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),ye(this,"isInitialized",!1),ye(this,"listenerMaps",[]),ye(this,"browser",ce.default),ye(this,"defaults",(0,bt.default)(en.defaults)),ye(this,"Eventable",on.Eventable),ye(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),ye(this,"interactStatic",(0,Ir.createInteractStatic)(this)),ye(this,"InteractEvent",tn.InteractEvent),ye(this,"Interactable",void 0),ye(this,"interactables",new Nn.InteractableSet(this)),ye(this,"_win",void 0),ye(this,"document",void 0),ye(this,"window",void 0),ye(this,"documents",[]),ye(this,"_plugins",{list:[],map:{}}),ye(this,"onWindowUnload",function(r){return t.removeDocument(r.target)});var n=this;this.Interactable=function(r){(function(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&to(h,g)})(c,r);var a,l,f=(a=c,l=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var h,g=Rt(a);if(l){var m=Rt(this).constructor;h=Reflect.construct(g,arguments,m)}else h=g.apply(this,arguments);return es(this,h)});function c(){return no(this,c),f.apply(this,arguments)}return io(c,[{key:"_defaults",get:function(){return n.defaults}},{key:"set",value:function(h){return Fr(Rt(c.prototype),"set",this).call(this,h),n.fire("interactable:set",{options:h,interactable:this}),this}},{key:"unset",value:function(){Fr(Rt(c.prototype),"unset",this).call(this),n.interactables.list.splice(n.interactables.list.indexOf(this),1),n.fire("interactable:unset",{interactable:this})}}]),c}(Fn.Interactable)}return io(e,[{key:"addListeners",value:function(t,n){this.listenerMaps.push({id:n,map:t})}},{key:"fire",value:function(t,n){for(var r=0;r<this.listenerMaps.length;r++){var a=this.listenerMaps[r].map[t];if(a&&a(n,this,t)===!1)return!1}}},{key:"init",value:function(t){return this.isInitialized?this:oo(this,t)}},{key:"pluginIsInstalled",value:function(t){return this._plugins.map[t.id]||this._plugins.list.indexOf(t)!==-1}},{key:"usePlugin",value:function(t,n){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,n),t.listeners&&t.before){for(var r=0,a=this.listenerMaps.length,l=t.before.reduce(function(c,h){return c[h]=!0,c[ao(h)]=!0,c},{});r<a;r++){var f=this.listenerMaps[r].id;if(l[f]||l[ao(f)])break}this.listenerMaps.splice(r,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}},{key:"addDocument",value:function(t,n){if(this.getDocIndex(t)!==-1)return!1;var r=s.getWindow(t);n=n?(0,I.default)({},n):{},this.documents.push({doc:t,options:n}),this.events.documents.push(t),t!==this.document&&this.events.add(r,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:r,scope:this,options:n})}},{key:"removeDocument",value:function(t){var n=this.getDocIndex(t),r=s.getWindow(t),a=this.documents[n].options;this.events.remove(r,"unload",this.onWindowUnload),this.documents.splice(n,1),this.events.documents.splice(n,1),this.fire("scope:remove-document",{doc:t,window:r,scope:this,options:a})}},{key:"getDocIndex",value:function(t){for(var n=0;n<this.documents.length;n++)if(this.documents[n].doc===t)return n;return-1}},{key:"getDocOptions",value:function(t){var n=this.getDocIndex(t);return n===-1?null:this.documents[n].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),e}();function oo(e,t){return e.isInitialized=!0,p.default.window(t)&&s.init(t),V.default.init(t),ce.default.init(t),Le.default.init(t),e.window=t,e.document=t.document,e.usePlugin(Hn.default),e.usePlugin(Xn.default),e}function ao(e){return e&&e.replace(/\/.*$/,"")}cn.Scope=ts;var _e={};Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var so=new cn.Scope,ns=so.interactStatic;_e.default=ns;var rs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:void 0;so.init(rs);var qn={};Object.defineProperty(qn,"__esModule",{value:!0}),qn.default=void 0,qn.default=function(){};var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.default=void 0,Vn.default=function(){};var $n={};function lo(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(n)){var a=[],l=!0,f=!1,c=void 0;try{for(var h,g=n[Symbol.iterator]();!(l=(h=g.next()).done)&&(a.push(h.value),!r||a.length!==r);l=!0);}catch(m){f=!0,c=m}finally{try{l||g.return==null||g.return()}finally{if(f)throw c}}return a}}(e,t)||function(n,r){if(n){if(typeof n=="string")return co(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?co(n,r):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function co(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty($n,"__esModule",{value:!0}),$n.default=void 0,$n.default=function(e){var t=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(r){var a=lo(r,2),l=a[0],f=a[1];return l in e||f in e}),n=function(r,a){for(var l=e.range,f=e.limits,c=f===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:f,h=e.offset,g=h===void 0?{x:0,y:0}:h,m={range:l,grid:e,x:null,y:null},b=0;b<t.length;b++){var w=lo(t[b],2),P=w[0],_=w[1],k=Math.round((r-g.x)/e[P]),M=Math.round((a-g.y)/e[_]);m[P]=Math.max(c.left,Math.min(c.right,k*e[P]+g.x)),m[_]=Math.max(c.top,Math.min(c.bottom,M*e[_]+g.y))}return m};return n.grid=e,n.coordFields=t,n};var un={};Object.defineProperty(un,"__esModule",{value:!0}),Object.defineProperty(un,"edgeTarget",{enumerable:!0,get:function(){return qn.default}}),Object.defineProperty(un,"elements",{enumerable:!0,get:function(){return Vn.default}}),Object.defineProperty(un,"grid",{enumerable:!0,get:function(){return $n.default}});var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.default=void 0;var is={id:"snappers",install:function(e){var t=e.interactStatic;t.snappers=(0,I.default)(t.snappers||{},un),t.createSnapGrid=t.snappers.grid}};Gn.default=is;var zt={};function uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uo(Object(n),!0).forEach(function(r){os(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uo(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function os(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(zt,"__esModule",{value:!0}),zt.aspectRatio=zt.default=void 0;var fo={start:function(e){var t=e.state,n=e.rect,r=e.edges,a=e.pageCoords,l=t.options.ratio,f=t.options,c=f.equalDelta,h=f.modifiers;l==="preserve"&&(l=n.width/n.height),t.startCoords=(0,I.default)({},a),t.startRect=(0,I.default)({},n),t.ratio=l,t.equalDelta=c;var g=t.linkedEdges={top:r.top||r.left&&!r.bottom,left:r.left||r.top&&!r.right,bottom:r.bottom||r.right&&!r.top,right:r.right||r.bottom&&!r.left};if(t.xIsPrimaryAxis=!(!r.left&&!r.right),t.equalDelta)t.edgeSign=(g.left?1:-1)*(g.top?1:-1);else{var m=t.xIsPrimaryAxis?g.top:g.left;t.edgeSign=m?-1:1}if((0,I.default)(e.edges,g),h&&h.length){var b=new _t.default(e.interaction);b.copyFrom(e.interaction.modification),b.prepareStates(h),t.subModification=b,b.startAll(Nr({},e))}},set:function(e){var t=e.state,n=e.rect,r=e.coords,a=(0,I.default)({},r),l=t.equalDelta?as:ss;if(l(t,t.xIsPrimaryAxis,r,n),!t.subModification)return null;var f=(0,I.default)({},n);(0,G.addEdges)(t.linkedEdges,f,{x:r.x-a.x,y:r.y-a.y});var c=t.subModification.setAll(Nr(Nr({},e),{},{rect:f,edges:t.linkedEdges,pageCoords:r,prevCoords:r,prevRect:f})),h=c.delta;return c.changed&&(l(t,Math.abs(h.x)>Math.abs(h.y),c.coords,c.rect),(0,I.default)(r,c.coords)),c.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function as(e,t,n){var r=e.startCoords,a=e.edgeSign;t?n.y=r.y+(n.x-r.x)*a:n.x=r.x+(n.y-r.y)*a}function ss(e,t,n,r){var a=e.startRect,l=e.startCoords,f=e.ratio,c=e.edgeSign;if(t){var h=r.width/f;n.y=l.y+(h-a.height)*c}else{var g=r.height*f;n.x=l.x+(g-a.width)*c}}zt.aspectRatio=fo;var ls=(0,me.makeModifier)(fo,"aspectRatio");zt.default=ls;var Et={};Object.defineProperty(Et,"__esModule",{value:!0}),Et.default=void 0;var ho=function(){};ho._defaults={};var cs=ho;Et.default=cs;var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0}),Object.defineProperty(Xr,"default",{enumerable:!0,get:function(){return Et.default}});var Ee={};function Yr(e,t,n){return p.default.func(e)?G.resolveRectLike(e,t.interactable,t.element,[n.x,n.y,t]):G.resolveRectLike(e,t.interactable,t.element)}Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.getRestrictionRect=Yr,Ee.restrict=Ee.default=void 0;var po={start:function(e){var t=e.rect,n=e.startOffset,r=e.state,a=e.interaction,l=e.pageCoords,f=r.options,c=f.elementRect,h=(0,I.default)({left:0,top:0,right:0,bottom:0},f.offset||{});if(t&&c){var g=Yr(f.restriction,a,l);if(g){var m=g.right-g.left-t.width,b=g.bottom-g.top-t.height;m<0&&(h.left+=m,h.right+=m),b<0&&(h.top+=b,h.bottom+=b)}h.left+=n.left-t.width*c.left,h.top+=n.top-t.height*c.top,h.right+=n.right-t.width*(1-c.right),h.bottom+=n.bottom-t.height*(1-c.bottom)}r.offset=h},set:function(e){var t=e.coords,n=e.interaction,r=e.state,a=r.options,l=r.offset,f=Yr(a.restriction,n,t);if(f){var c=G.xywhToTlbr(f);t.x=Math.max(Math.min(c.right-l.right,t.x),c.left+l.left),t.y=Math.max(Math.min(c.bottom-l.bottom,t.y),c.top+l.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};Ee.restrict=po;var us=(0,me.makeModifier)(po,"restrict");Ee.default=us;var He={};Object.defineProperty(He,"__esModule",{value:!0}),He.restrictEdges=He.default=void 0;var vo={top:1/0,left:1/0,bottom:-1/0,right:-1/0},go={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function mo(e,t){for(var n=["top","left","bottom","right"],r=0;r<n.length;r++){var a=n[r];a in e||(e[a]=t[a])}return e}var yo={noInner:vo,noOuter:go,start:function(e){var t,n=e.interaction,r=e.startOffset,a=e.state,l=a.options;if(l){var f=(0,Ee.getRestrictionRect)(l.offset,n,n.coords.start.page);t=G.rectToXY(f)}t=t||{x:0,y:0},a.offset={top:t.y+r.top,left:t.x+r.left,bottom:t.y-r.bottom,right:t.x-r.right}},set:function(e){var t=e.coords,n=e.edges,r=e.interaction,a=e.state,l=a.offset,f=a.options;if(n){var c=(0,I.default)({},t),h=(0,Ee.getRestrictionRect)(f.inner,r,c)||{},g=(0,Ee.getRestrictionRect)(f.outer,r,c)||{};mo(h,vo),mo(g,go),n.top?t.y=Math.min(Math.max(g.top+l.top,c.y),h.top+l.top):n.bottom&&(t.y=Math.max(Math.min(g.bottom+l.bottom,c.y),h.bottom+l.bottom)),n.left?t.x=Math.min(Math.max(g.left+l.left,c.x),h.left+l.left):n.right&&(t.x=Math.max(Math.min(g.right+l.right,c.x),h.right+l.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};He.restrictEdges=yo;var ds=(0,me.makeModifier)(yo,"restrictEdges");He.default=ds;var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.restrictRect=Lt.default=void 0;var fs=(0,I.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},Ee.restrict.defaults),bo={start:Ee.restrict.start,set:Ee.restrict.set,defaults:fs};Lt.restrictRect=bo;var hs=(0,me.makeModifier)(bo,"restrictRect");Lt.default=hs;var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.restrictSize=Bt.default=void 0;var ps={width:-1/0,height:-1/0},vs={width:1/0,height:1/0},_o={start:function(e){return He.restrictEdges.start(e)},set:function(e){var t=e.interaction,n=e.state,r=e.rect,a=e.edges,l=n.options;if(a){var f=G.tlbrToXywh((0,Ee.getRestrictionRect)(l.min,t,e.coords))||ps,c=G.tlbrToXywh((0,Ee.getRestrictionRect)(l.max,t,e.coords))||vs;n.options={endOnly:l.endOnly,inner:(0,I.default)({},He.restrictEdges.noInner),outer:(0,I.default)({},He.restrictEdges.noOuter)},a.top?(n.options.inner.top=r.bottom-f.height,n.options.outer.top=r.bottom-c.height):a.bottom&&(n.options.inner.bottom=r.top+f.height,n.options.outer.bottom=r.top+c.height),a.left?(n.options.inner.left=r.right-f.width,n.options.outer.left=r.right-c.width):a.right&&(n.options.inner.right=r.left+f.width,n.options.outer.right=r.left+c.width),He.restrictEdges.set(e),n.options=l}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Bt.restrictSize=_o;var gs=(0,me.makeModifier)(_o,"restrictSize");Bt.default=gs;var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0}),Object.defineProperty(Wr,"default",{enumerable:!0,get:function(){return Et.default}});var ft={};Object.defineProperty(ft,"__esModule",{value:!0}),ft.snap=ft.default=void 0;var xo={start:function(e){var t,n=e.interaction,r=e.interactable,a=e.element,l=e.rect,f=e.state,c=e.startOffset,h=f.options,g=h.offsetWithOrigin?function(w){var P=w.interaction.element;return(0,G.rectToXY)((0,G.resolveRectLike)(w.state.options.origin,null,null,[P]))||(0,Ue.default)(w.interactable,P,w.interaction.prepared.name)}(e):{x:0,y:0};if(h.offset==="startCoords")t={x:n.coords.start.page.x,y:n.coords.start.page.y};else{var m=(0,G.resolveRectLike)(h.offset,r,a,[n]);(t=(0,G.rectToXY)(m)||{x:0,y:0}).x+=g.x,t.y+=g.y}var b=h.relativePoints;f.offsets=l&&b&&b.length?b.map(function(w,P){return{index:P,relativePoint:w,x:c.left-l.width*w.x+t.x,y:c.top-l.height*w.y+t.y}}):[{index:0,relativePoint:null,x:t.x,y:t.y}]},set:function(e){var t=e.interaction,n=e.coords,r=e.state,a=r.options,l=r.offsets,f=(0,Ue.default)(t.interactable,t.element,t.prepared.name),c=(0,I.default)({},n),h=[];a.offsetWithOrigin||(c.x-=f.x,c.y-=f.y);for(var g=0;g<l.length;g++)for(var m=l[g],b=c.x-m.x,w=c.y-m.y,P=0,_=a.targets.length;P<_;P++){var k,M=a.targets[P];(k=p.default.func(M)?M(b,w,t._proxy,m,P):M)&&h.push({x:(p.default.number(k.x)?k.x:b)+m.x,y:(p.default.number(k.y)?k.y:w)+m.y,range:p.default.number(k.range)?k.range:a.range,source:M,index:P,offset:m})}for(var C={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},A=0;A<h.length;A++){var B=h[A],W=B.range,K=B.x-c.x,ie=B.y-c.y,$=(0,We.default)(K,ie),te=$<=W;W===1/0&&C.inRange&&C.range!==1/0&&(te=!1),C.target&&!(te?C.inRange&&W!==1/0?$/W<C.distance/C.range:W===1/0&&C.range!==1/0||$<C.distance:!C.inRange&&$<C.distance)||(C.target=B,C.distance=$,C.range=W,C.inRange=te,C.delta.x=K,C.delta.y=ie)}return C.inRange&&(n.x=C.target.x,n.y=C.target.y),r.closest=C,C},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};ft.snap=xo;var ms=(0,me.makeModifier)(xo,"snap");ft.default=ms;var tt={};function wo(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(tt,"__esModule",{value:!0}),tt.snapSize=tt.default=void 0;var Eo={start:function(e){var t=e.state,n=e.edges,r=t.options;if(!n)return null;e.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:r.offset||"self",origin:{x:0,y:0},range:r.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],ft.snap.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t,n,r=e.interaction,a=e.state,l=e.coords,f=a.options,c=a.offsets,h={x:l.x-c[0].x,y:l.y-c[0].y};a.options=(0,I.default)({},f),a.options.targets=[];for(var g=0;g<(f.targets||[]).length;g++){var m=(f.targets||[])[g],b=void 0;if(b=p.default.func(m)?m(h.x,h.y,r):m){for(var w=0;w<a.targetFields.length;w++){var P=(t=a.targetFields[w],n=2,function(C){if(Array.isArray(C))return C}(t)||function(C,A){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(C)){var B=[],W=!0,K=!1,ie=void 0;try{for(var $,te=C[Symbol.iterator]();!(W=($=te.next()).done)&&(B.push($.value),!A||B.length!==A);W=!0);}catch(Re){K=!0,ie=Re}finally{try{W||te.return==null||te.return()}finally{if(K)throw ie}}return B}}(t,n)||function(C,A){if(C){if(typeof C=="string")return wo(C,A);var B=Object.prototype.toString.call(C).slice(8,-1);return B==="Object"&&C.constructor&&(B=C.constructor.name),B==="Map"||B==="Set"?Array.from(C):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?wo(C,A):void 0}}(t,n)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),_=P[0],k=P[1];if(_ in b||k in b){b.x=b[_],b.y=b[k];break}}a.options.targets.push(b)}}var M=ft.snap.set(e);return a.options=f,M},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};tt.snapSize=Eo;var ys=(0,me.makeModifier)(Eo,"snapSize");tt.default=ys;var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.snapEdges=Ft.default=void 0;var Po={start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],tt.snapSize.start(e)):null},set:tt.snapSize.set,defaults:(0,I.default)((0,bt.default)(tt.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};Ft.snapEdges=Po;var bs=(0,me.makeModifier)(Po,"snapEdges");Ft.default=bs;var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0}),Object.defineProperty(Hr,"default",{enumerable:!0,get:function(){return Et.default}});var qr={};Object.defineProperty(qr,"__esModule",{value:!0}),Object.defineProperty(qr,"default",{enumerable:!0,get:function(){return Et.default}});var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.default=void 0;var _s={aspectRatio:zt.default,restrictEdges:He.default,restrict:Ee.default,restrictRect:Lt.default,restrictSize:Bt.default,snapEdges:Ft.default,snap:ft.default,snapSize:tt.default,spring:Hr.default,avoid:Xr.default,transform:qr.default,rubberband:Wr.default};Nt.default=_s;var Un={};Object.defineProperty(Un,"__esModule",{value:!0}),Un.default=void 0;var xs={id:"modifiers",install:function(e){var t=e.interactStatic;for(var n in e.usePlugin(me.default),e.usePlugin(Gn.default),t.modifiers=Nt.default,Nt.default){var r=Nt.default[n],a=r._defaults,l=r._methods;a._methods=l,e.defaults.perAction[n]=a}}};Un.default=xs;var Pt={};function So(e){return(So=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ko(e,t){return(ko=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(e,t)}function Es(e,t){return!t||So(t)!=="object"&&typeof t!="function"?ke(e):t}function ke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vr(e){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.PointerEvent=Pt.default=void 0;var Ps=function(e){(function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),h&&ko(c,h)})(f,e);var t,n,r,a,l=(r=f,a=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var c,h=Vr(r);if(a){var g=Vr(this).constructor;c=Reflect.construct(h,arguments,g)}else c=h.apply(this,arguments);return Es(this,c)});function f(c,h,g,m,b,w){var P;if(function(M,C){if(!(M instanceof C))throw new TypeError("Cannot call a class as a function")}(this,f),Be(ke(P=l.call(this,b)),"type",void 0),Be(ke(P),"originalEvent",void 0),Be(ke(P),"pointerId",void 0),Be(ke(P),"pointerType",void 0),Be(ke(P),"double",void 0),Be(ke(P),"pageX",void 0),Be(ke(P),"pageY",void 0),Be(ke(P),"clientX",void 0),Be(ke(P),"clientY",void 0),Be(ke(P),"dt",void 0),Be(ke(P),"eventable",void 0),j.pointerExtend(ke(P),g),g!==h&&j.pointerExtend(ke(P),h),P.timeStamp=w,P.originalEvent=g,P.type=c,P.pointerId=j.getPointerId(h),P.pointerType=j.getPointerType(h),P.target=m,P.currentTarget=null,c==="tap"){var _=b.getPointerIndex(h);P.dt=P.timeStamp-b.pointers[_].downTime;var k=P.timeStamp-b.tapTime;P.double=!!(b.prevTap&&b.prevTap.type!=="doubletap"&&b.prevTap.target===P.target&&k<500)}else c==="doubletap"&&(P.dt=h.timeStamp-b.tapTime);return P}return t=f,(n=[{key:"_subtractOrigin",value:function(c){var h=c.x,g=c.y;return this.pageX-=h,this.pageY-=g,this.clientX-=h,this.clientY-=g,this}},{key:"_addOrigin",value:function(c){var h=c.x,g=c.y;return this.pageX+=h,this.pageY+=g,this.clientX+=h,this.clientY+=g,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&ws(t.prototype,n),f}(Dt.BaseEvent);Pt.PointerEvent=Pt.default=Ps;var dn={};Object.defineProperty(dn,"__esModule",{value:!0}),dn.default=void 0;var Kn={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(e){e.pointerEvents=Kn,e.defaults.actions.pointerEvents=Kn.defaults,(0,I.default)(e.actions.phaselessTypes,Kn.types)},listeners:{"interactions:new":function(e){var t=e.interaction;t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,n=e.pointerInfo;!t&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var n=e.interaction,r=e.pointer,a=e.event,l=e.eventTarget;e.duplicate||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&$r(e),ht({interaction:n,pointer:r,event:a,eventTarget:l,type:"move"},t))},"interactions:down":function(e,t){(function(n,r){for(var a=n.interaction,l=n.pointer,f=n.event,c=n.eventTarget,h=n.pointerIndex,g=a.pointers[h].hold,m=R.getPath(c),b={interaction:a,pointer:l,event:f,eventTarget:c,type:"hold",targets:[],path:m,node:null},w=0;w<m.length;w++){var P=m[w];b.node=P,r.fire("pointerEvents:collect-targets",b)}if(b.targets.length){for(var _=1/0,k=0;k<b.targets.length;k++){var M=b.targets[k].eventable.options.holdDuration;M<_&&(_=M)}g.duration=_,g.timeout=setTimeout(function(){ht({interaction:a,eventTarget:c,pointer:l,event:f,type:"hold"},r)},_)}})(e,t),ht(e,t)},"interactions:up":function(e,t){$r(e),ht(e,t),function(n,r){var a=n.interaction,l=n.pointer,f=n.event,c=n.eventTarget;a.pointerWasMoved||ht({interaction:a,eventTarget:c,pointer:l,event:f,type:"tap"},r)}(e,t)},"interactions:cancel":function(e,t){$r(e),ht(e,t)}},PointerEvent:Pt.PointerEvent,fire:ht,collectEventTargets:Oo,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function ht(e,t){var n=e.interaction,r=e.pointer,a=e.event,l=e.eventTarget,f=e.type,c=e.targets,h=c===void 0?Oo(e,t):c,g=new Pt.PointerEvent(f,r,a,l,n,t.now());t.fire("pointerEvents:new",{pointerEvent:g});for(var m={interaction:n,pointer:r,event:a,eventTarget:l,targets:h,type:f,pointerEvent:g},b=0;b<h.length;b++){var w=h[b];for(var P in w.props||{})g[P]=w.props[P];var _=(0,Ue.default)(w.eventable,w.node);if(g._subtractOrigin(_),g.eventable=w.eventable,g.currentTarget=w.node,w.eventable.fire(g),g._addOrigin(_),g.immediatePropagationStopped||g.propagationStopped&&b+1<h.length&&h[b+1].node!==g.currentTarget)break}if(t.fire("pointerEvents:fired",m),f==="tap"){var k=g.double?ht({interaction:n,pointer:r,event:a,eventTarget:l,type:"doubletap"},t):g;n.prevTap=k,n.tapTime=k.timeStamp}return g}function Oo(e,t){var n=e.interaction,r=e.pointer,a=e.event,l=e.eventTarget,f=e.type,c=n.getPointerIndex(r),h=n.pointers[c];if(f==="tap"&&(n.pointerWasMoved||!h||h.downTarget!==l))return[];for(var g=R.getPath(l),m={interaction:n,pointer:r,event:a,eventTarget:l,type:f,path:g,targets:[],node:null},b=0;b<g.length;b++){var w=g[b];m.node=w,t.fire("pointerEvents:collect-targets",m)}return f==="hold"&&(m.targets=m.targets.filter(function(P){var _;return P.eventable.options.holdDuration===((_=n.pointers[c])==null?void 0:_.hold.duration)})),m.targets}function $r(e){var t=e.interaction,n=e.pointerIndex,r=t.pointers[n].hold;r&&r.timeout&&(clearTimeout(r.timeout),r.timeout=null)}var Ss=Kn;dn.default=Ss;var Zn={};function ks(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.default=void 0;var Os={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(dn.default);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(e,t){return e["pointerEvents:".concat(t)]=ks,e},{"pointerEvents:new":function(e){var t=e.pointerEvent;t.type==="hold"&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function(e,t){var n=e.interaction,r=e.pointerEvent,a=e.eventTarget,l=e.targets;if(r.type==="hold"&&l.length){var f=l[0].eventable.options.holdRepeatInterval;f<=0||(n.holdIntervalHandle=setTimeout(function(){t.pointerEvents.fire({interaction:n,eventTarget:a,type:"hold",pointer:r,event:r},t)},f))}}})};Zn.default=Os;var Jn={};function Cs(e){return(0,I.default)(this.events.options,e),this}Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.default=void 0;var Ts={id:"pointer-events/interactableTargets",install:function(e){var t=e.Interactable;t.prototype.pointerEvents=Cs;var n=t.prototype._backCompatOption;t.prototype._backCompatOption=function(r,a){var l=n.call(this,r,a);return l===this&&(this.events.options[r]=a),l}},listeners:{"pointerEvents:collect-targets":function(e,t){var n=e.targets,r=e.node,a=e.type,l=e.eventTarget;t.interactables.forEachMatch(r,function(f){var c=f.events,h=c.options;c.types[a]&&c.types[a].length&&f.testIgnoreAllow(h,r,l)&&n.push({node:r,eventable:c,props:{interactable:f}})})},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(n){return t.getRect(n)}},"interactable:set":function(e,t){var n=e.interactable,r=e.options;(0,I.default)(n.events.options,t.pointerEvents.defaults),(0,I.default)(n.events.options,r.pointerEvents||{})}}};Jn.default=Ts;var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.default=void 0;var Ms={id:"pointer-events",install:function(e){e.usePlugin(dn),e.usePlugin(Zn.default),e.usePlugin(Jn.default)}};Qn.default=Ms;var fn={};function Co(e){var t=e.Interactable;e.actions.phases.reflow=!0,t.prototype.reflow=function(n){return function(r,a,l){for(var f=p.default.string(r.target)?re.from(r._context.querySelectorAll(r.target)):[r.target],c=l.window.Promise,h=c?[]:null,g=function(){var b=f[m],w=r.getRect(b);if(!w)return"break";var P=re.find(l.interactions.list,function(A){return A.interacting()&&A.interactable===r&&A.element===b&&A.prepared.name===a.name}),_=void 0;if(P)P.move(),h&&(_=P._reflowPromise||new c(function(A){P._reflowResolve=A}));else{var k=(0,G.tlbrToXywh)(w),M={page:{x:k.x,y:k.y},client:{x:k.x,y:k.y},timeStamp:l.now()},C=j.coordsToEvent(M);_=function(A,B,W,K,ie){var $=A.interactions.new({pointerType:"reflow"}),te={interaction:$,event:ie,pointer:ie,eventTarget:W,phase:"reflow"};$.interactable=B,$.element=W,$.prevEvent=ie,$.updatePointer(ie,ie,W,!0),j.setZeroCoords($.coords.delta),(0,Ce.copyAction)($.prepared,K),$._doPhase(te);var Re=A.window.Promise,nt=Re?new Re(function(Gr){$._reflowResolve=Gr}):void 0;return $._reflowPromise=nt,$.start(K,B,W),$._interacting?($.move(te),$.end(ie)):($.stop(),$._reflowResolve()),$.removePointer(ie,ie),nt}(l,r,b,a,C)}h&&h.push(_)},m=0;m<f.length&&g()!=="break";m++);return h&&c.all(h).then(function(){return r})}(this,n,e)}}Object.defineProperty(fn,"__esModule",{value:!0}),fn.install=Co,fn.default=void 0;var Ds={id:"reflow",install:Co,listeners:{"interactions:stop":function(e,t){var n=e.interaction;n.pointerType==="reflow"&&(n._reflowResolve&&n._reflowResolve(),re.remove(t.interactions.list,n))}}};fn.default=Ds;var je={exports:{}};function To(e){return(To=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(je.exports,"__esModule",{value:!0}),je.exports.default=void 0,_e.default.use(At.default),_e.default.use(wt.default),_e.default.use(Qn.default),_e.default.use(jt.default),_e.default.use(Un.default),_e.default.use(An.default),_e.default.use(On.default),_e.default.use(dt.default),_e.default.use(fn.default);var Is=_e.default;if(je.exports.default=Is,To(je)==="object"&&je)try{je.exports=_e.default}catch{}_e.default.default=_e.default,je=je.exports;var St={exports:{}};function Mo(e){return(Mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(St.exports,"__esModule",{value:!0}),St.exports.default=void 0;var As=je.default;if(St.exports.default=As,Mo(St)==="object"&&St)try{St.exports=je.default}catch{}return je.default.default=je.default,St.exports})})(Ho);var tl=el(Ho.exports);class nl{constructor(i){L(this,"_clickObservers",new kt);L(this,"_rightClickObservers",new kt);L(this,"_dragObservers",new kt);L(this,"_pointerMoveObservers",new kt);L(this,"_pointerUpObservers",new kt);L(this,"_pointerOutObservers",new kt);L(this,"_zoomObservers",new kt);L(this,"_evtCache",[]);L(this,"_oldPos",null);L(this,"_initPos",null);L(this,"_buttonDown",null);L(this,"_inGesture",!1);tl(i).gesturable({onmove:o=>{if(o.scale!==1){const s={x:o.client.x,y:o.client.y};this._zoomObservers.notify({pos:s,factor:o.scale})}o.stopPropagation()},onstart:o=>{this._inGesture=!0},onend:o=>{this._inGesture=!1}}),i.addEventListener("pointerdown",o=>{this._inGesture||this._handleTouch(o)}),document.addEventListener("pointermove",o=>{this._inGesture||this._handleDrag(o)}),document.addEventListener("pointerup",o=>{this._initPos&&this._pointerUpObservers.notify({button:o.button,initPos:this._initPos,newPos:{x:o.clientX,y:o.clientY}}),this._handleOut(o)}),document.addEventListener("pointercancel",o=>{this._handleOut(o)}),i.addEventListener("wheel",o=>{const s={x:o.clientX,y:o.clientY},u=-Math.sign(o.deltaY);this._zoomObservers.notify({pos:s,dir:u})}),i.addEventListener("contextmenu",o=>o.preventDefault())}_handleTouch(i){if(this._evtCache.push(i),this._evtCache.length===1){const o={x:i.clientX,y:i.clientY};this._buttonDown=i.button,this._oldPos=o,i.button===2&&this._rightClickObservers.notify(o),i.button===0&&(this._initPos=o,this._clickObservers.notify(o))}}_handleDrag(i){const o={x:i.clientX,y:i.clientY};this._buttonDown===null?this._pointerMoveObservers.notify({oldPos:this._oldPos||{x:-1,y:-1},newPos:o}):this._buttonDown!==null&&this._oldPos&&(this._dragObservers.notify({oldPos:this._oldPos,newPos:o,button:this._buttonDown,initPos:this._initPos||{x:0,y:0}}),this._oldPos=o)}_handleOut(i){const o={x:i.clientX,y:i.clientY};this._buttonDown=null,this._pointerOutObservers.notify(o),this._evtCache=this._evtCache.filter(s=>s.pointerId!==i.pointerId),this._initPos=null}addObserver(i,o){switch(i){case"click":return this._clickObservers.subscribe(o);case"rightClick":return this._rightClickObservers.subscribe(o);case"drag":return this._dragObservers.subscribe(o);case"pointerMove":return this._pointerMoveObservers.subscribe(o);case"pointerUp":return this._pointerUpObservers.subscribe(o);case"pointerOut":return this._pointerOutObservers.subscribe(o);case"zoom":return this._zoomObservers.subscribe(o);default:return-1}}removeObserver(i,o){switch(i){case"click":return this._clickObservers.unsubscribe(o);case"rightClick":return this._rightClickObservers.unsubscribe(o);case"drag":return this._dragObservers.unsubscribe(o);case"pointerMove":return this._pointerMoveObservers.unsubscribe(o);case"pointerUp":return this._pointerUpObservers.unsubscribe(o);case"pointerOut":return this._pointerOutObservers.unsubscribe(o);case"zoom":return this._zoomObservers.unsubscribe(o);default:return null}}}class Ne{constructor(i,o,s){L(this,"_sketch");L(this,"_layers");L(this,"_cursor");this._sketch=i,this._layers=o,this._cursor=s}get drawing(){return this._layers.currentLayer()}init(){}click(i){}rightClick(i){var o;(o=this.drawing)==null||o.erase(this._sketch.gridCoordinate(i),this._sketch.size),this._sketch.updatePreview(),this._cursor.actif=!1,this._cursor.clear()}drag(i){}move(i){}unClick(i){}out(i){}zoom(i){this._sketch.camera.zoom(this._sketch.gridCoordinate(i.pos),i.dir,i.factor)}exit(){}}class rl extends Ne{click(i){var s;const o=this._sketch.gridCoordinate(i);o.x>0&&o.y>0&&o.x<this._sketch.width&&o.y<this._sketch.height&&((s=this.drawing)==null||s.bucket(o,this._sketch.color),this._sketch.updatePreview())}}class il extends Ne{drag(i){this._sketch.camera.drag(i.oldPos,i.newPos)}}class ol extends Ne{click(i){var o;(o=this.drawing)==null||o.erase(this._sketch.gridCoordinate(i),this._sketch.size),this._sketch.updatePreview()}drag({newPos:i}){var o;(o=this.drawing)==null||o.erase(this._sketch.gridCoordinate(i),this._sketch.size),this._sketch.updatePreview()}}class al extends Ne{drag({initPos:i,newPos:o}){this._cursor.actif=!0,this._cursor.clear(),this._cursor.line(this._sketch.gridCoordinate(i),this._sketch.gridCoordinate(o),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}unClick({initPos:i,newPos:o}){var s;(s=this.drawing)==null||s.line(this._sketch.gridCoordinate(i),this._sketch.gridCoordinate(o),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}move(i){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(i.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class sl extends Ne{click(i){var o;(o=this.drawing)==null||o.paint(this._sketch.gridCoordinate(i),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}drag({oldPos:i,newPos:o}){var s;(s=this.drawing)==null||s.line(this._sketch.gridCoordinate(i),this._sketch.gridCoordinate(o),this._sketch.size,this._sketch.color),this._sketch.updatePreview(),this._cursor.actif=!1}move(i){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(i.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class ll extends Ne{click(i){this._sketch.camera.zoom(this._sketch.gridCoordinate(i),-1)}}class cl extends Ne{click(i){this._sketch.camera.zoom(this._sketch.gridCoordinate(i))}}class ul extends Ne{drag({initPos:i,newPos:o}){this._cursor.actif=!0,this._cursor.clear();const s=this._sketch.gridCoordinate(i),u=this._sketch.gridCoordinate(o);this._cursor.rect(s,u.x-s.x,u.y-s.y,this._sketch.size,this._sketch.color),this._sketch.updatePreview()}unClick({initPos:i,newPos:o}){var v;const s=this._sketch.gridCoordinate(i),u=this._sketch.gridCoordinate(o);(v=this.drawing)==null||v.rect(s,u.x-s.x,u.y-s.y,this._sketch.size,this._sketch.color),this._sketch.updatePreview()}move(i){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(i.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class dl extends Ne{drag({initPos:i,newPos:o}){this._cursor.actif=!0,this._cursor.clear(),this._ellipse(i,o,this._cursor)}unClick({initPos:i,newPos:o}){this.drawing&&this._ellipse(i,o,this.drawing)}move(i){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(i.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}_ellipse(i,o,s){const u=this._sketch.gridCoordinate(i),v=this._sketch.gridCoordinate(o),y=Math.abs(v.x-u.x),p=Math.abs(v.y-u.y),x=Math.sign(v.x-u.x),E=Math.sign(v.y-u.y),O={x:Math.floor(u.x+y/2*x),y:Math.floor(u.y+p/2*E)};s.ellipse(O,y,p,this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class fl extends Ne{constructor(){super(...arguments);L(this,"_img",null)}click(o){var s;this._img=((s=this.drawing)==null?void 0:s.getImgData())||null}drag({initPos:o,newPos:s}){var x;const u=this._sketch.gridCoordinate(o),v=this._sketch.gridCoordinate(s),y=v.x-u.x,p=v.y-u.y;this._img&&((x=this.drawing)==null||x.putDatas(this._img,y,p),this._sketch.updatePreview())}}class hl extends Ne{constructor(){super(...arguments);L(this,"_bgColor","#000000AA")}drag({initPos:o,newPos:s}){this._cursor.actif=!0,this._cursor.clear();const u=this._sketch.gridCoordinate({x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)}),v=this._sketch.gridCoordinate({x:Math.max(o.x,s.x),y:Math.max(o.y,s.y)});this._cursor.fillRect({x:0,y:0},u.x,this._cursor.height,this._bgColor),this._cursor.fillRect({x:u.x,y:0},this._cursor.width,u.y,this._bgColor),this._cursor.fillRect({x:u.x,y:v.y},this._cursor.width-u.x,this._cursor.height-v.y,this._bgColor),this._cursor.fillRect({x:v.x,y:u.y},this._cursor.width-v.x,v.y-u.y,this._bgColor),this._sketch.updatePreview()}unClick({initPos:o,newPos:s}){var O,S;const u=this._sketch.gridCoordinate({x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)}),v=this._sketch.gridCoordinate({x:Math.max(o.x,s.x),y:Math.max(o.y,s.y)}),y=Math.max(u.x,0),p=Math.max(u.y,0),x=Math.min(v.x-y,((O=this.drawing)==null?void 0:O.width)||0-y),E=Math.min(v.y-p,((S=this.drawing)==null?void 0:S.height)||0-p);this._cursor.clear(),x>0&&E>0&&this._sketch.crop(y,p,x,E)}}class pl{constructor(i,o,s){L(this,"_eventsManager");L(this,"_tools");L(this,"_currentTool");L(this,"_sketch");L(this,"_cursor");this._sketch=i,this._cursor=s,this._tools={paint:new sl(i,o,s),erase:new ol(i,o,s),line:new al(i,o,s),rect:new ul(i,o,s),circle:new dl(i,o,s),bucket:new rl(i,o,s),crop:new hl(i,o,s),zoom:new cl(i,o,s),unzoom:new ll(i,o,s),drag:new fl(i,o,s),handle:new il(i,o,s)},this._currentTool=this._tools.paint,this._eventsManager=new nl(i),this._addEvents()}set tool(i){this._tools[i]&&(this._currentTool.exit(),this._currentTool=this._tools[i],this._currentTool.init())}_addEvents(){this._eventsManager.addObserver("click",i=>{this._currentTool.click(i)}),this._eventsManager.addObserver("rightClick",i=>{this._currentTool.rightClick(i)}),this._eventsManager.addObserver("pointerUp",i=>{this._currentTool.unClick(i)}),this._eventsManager.addObserver("drag",i=>{const{button:o,oldPos:s,newPos:u}=i;switch(o){case 1:this._sketch.camera.drag(s,u);break;case 2:this._currentTool.rightClick(u);break;default:this._currentTool.drag(i);break}}),this._eventsManager.addObserver("pointerMove",i=>{this._currentTool.move(i)}),this._eventsManager.addObserver("pointerOut",()=>{this._cursor.actif=!1,this._sketch.updatePreview()}),this._eventsManager.addObserver("zoom",i=>{this._currentTool.zoom(i)})}}class vl{constructor(){L(this,"layers");L(this,"_layerIndex",1);this.layers=[{id:1,drawing:new oi}]}newLayer(i,o){const s={id:i,drawing:new oi};this.layers.splice(o,0,s)}selectLayer(i){this._layerIndex=i}removeLayer(i){this.layers=this.layers.filter(o=>o.id!==i)}sortLayer(i){const o=[];i.forEach(s=>{const u=this.layers.find(v=>v.id===s);u&&o.push(u)}),this.layers=o}currentLayer(){var i;return(i=this.layers.find(o=>o.id===this._layerIndex))==null?void 0:i.drawing}clear(){this.layers.forEach(i=>i.drawing.clear())}resize(i,o,s=-1,u=-1){this.layers.forEach(v=>v.drawing.resize(i,o,s,u))}crop(i,o,s,u){this.layers.forEach(v=>v.drawing.crop(i,o,s,u))}}class gl extends HTMLElement{constructor(){super();L(this,"_canvas");L(this,"_ctx");L(this,"layers");L(this,"_cursor");L(this,"_background");L(this,"camera");L(this,"size",1);L(this,"color","#000000");L(this,"_tools");this._canvas=this._createCanvas(),this._ctx=this._canvas.getContext("2d"),this.layers=new vl,this._cursor=new oi,this._background=new Qs,this.camera=new Ks(this,this._canvas),this._tools=new pl(this,this.layers,this._cursor)}connectedCallback(){this.camera.fitSketch(),this.updatePreview()}_createCanvas(){const o=this.attachShadow({mode:"open"}),s=document.createElement("canvas"),u=document.createElement("style");return u.textContent=`
        canvas{
			-ms-interpolation-mode: nearest-neighbor;
			image-rendering: pixelated;    
			background-color: #ffff;
			cursor:crosshair;
			pointer-events:none;
        }
        `,o.appendChild(s),o.appendChild(u),s}get width(){return this._canvas.width}get height(){return this._canvas.height}set tool(o){this._tools.tool=o}static get observedAttributes(){return["width","height"]}crop(o,s,u,v){this._canvas.width=u,this._canvas.height=v,this.layers.crop(o,s,u,v),this._cursor.resize(u,v),this._background.resize(u,v),this._background.clear(),this.camera.fitSketch(),this.updatePreview()}resize(o,s,u,v){this._canvas.width=o,this._canvas.height=s,this.layers.resize(o,s,u,v),this._cursor.resize(o,s),this._background.resize(o,s),this._background.clear(),this.camera.fitSketch(),this.updatePreview()}attributeChangedCallback(o,s,u){if(!u||isNaN(Number(u)))return;const v=Number(u);switch(o){case"width":v>=1&&(this._canvas.width=v,this.layers.resize(v,this._canvas.height),this._cursor.resize(v,this._canvas.height),this._background.resize(v,this._canvas.height),this._background.clear(),this.camera.fitSketch(),this.updatePreview());break;case"height":this._canvas.height=v,this.layers.resize(this._canvas.width,v),this._cursor.resize(this._canvas.width,v),this._background.resize(this._canvas.width,v),this._background.clear(),this.camera.fitSketch(),this.updatePreview();break;default:return}}updatePreview(){this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._ctx.drawImage(this._background.canvas,0,0);for(let o=this.layers.layers.length-1;o>=0;o--){const s=this.layers.layers[o];this._ctx.drawImage(s.drawing.canvas,0,0)}this._ctx.drawImage(this._cursor.canvas,0,0)}clear(){this._background.clear(),this.layers.clear(),this._cursor.clear(),this.updatePreview()}gridCoordinate({x:o,y:s}){const{left:u,top:v}=this._canvas.getBoundingClientRect(),y=(o-u)/this.camera.zoomValue,p=(s-v)/this.camera.zoomValue;return{x:Math.floor(y),y:Math.floor(p)}}}class ml{static init(i,o){document.querySelectorAll(i).forEach(u=>{u.addEventListener("click",v=>{o.tool=u.value})})}}class yl{static init(i,o){document.querySelectorAll(i).forEach(u=>{u.addEventListener("click",v=>{o.size=Number(u.value)})})}}const er={tools:[{for:"paint",en:{title:"Paint Tool"},fr:{title:"Pinceau"},de:{title:"Malerei"}},{for:"erase",en:{title:"Eraser Tool"},fr:{title:"Gomme"},de:{title:"Radiergummi"}},{for:"line",en:{title:"Line Tool"},fr:{title:"Ligne"},de:{title:"Linie"}},{for:"rect",en:{title:"Rectangle Tool"},fr:{title:"Rectangle"},de:{title:"Rechteck"}},{for:"circle",en:{title:"Circle Tool"},fr:{title:"Cercle"},de:{title:"Kreis"}},{for:"bucket",en:{title:"Bucket Tool"},fr:{title:"Pot de peinture"},de:{title:"Pflaster"}},{for:"drag",en:{title:"Drag Tool"},fr:{title:"D\xE9placer l'image"},de:{title:"Bild verschieben"}},{for:"crop",en:{title:"Crop Tool"},fr:{title:"Recadrer l'image"},de:{title:"Bild zuschneiden"}},{for:"zoom",en:{title:"Zoom Tool"},fr:{title:"Zoom"},de:{title:"Zoom"}},{for:"unzoom",en:{title:"Unzoom Tool"},fr:{title:"D\xE9zoom"},de:{title:"Dekrom"}},{for:"handle",en:{title:"Move Tool"},fr:{title:"D\xE9placer l'image"},de:{title:"Bild verschieben"}}],colors:{en:{title:"Current color"},fr:{title:"Couleur actuelle"},de:{title:"Aktuelle Farbe"}},sizes:{en:{title:"define current size to"},fr:{title:"D\xE9finir la taille \xE0"},de:{title:"Definieren Sie die aktuelle Gr\xF6\xDFe auf"}},actions:[{id:"save",en:{title:"Save"},fr:{title:"Sauvegarder"},de:{title:"Speichern"}},{id:"open",en:{title:"Open"},fr:{title:"Ouvrir"},de:{title:"\xD6ffnen"}},{id:"clear",en:{title:"Clear"},fr:{title:"Effacer"},de:{title:"L\xF6schen"}},{id:"undo",en:{title:"Undo"},fr:{title:"Annuler"},de:{title:"R\xFCckg\xE4ngig"}},{id:"redo",en:{title:"Redo"},fr:{title:"R\xE9tablir"},de:{title:"Wiederholen"}},{id:"download",en:{title:"Download"},fr:{title:"T\xE9l\xE9charger"},de:{title:"Herunterladen"}},{id:"fit",en:{title:"Fit to screen"},fr:{title:"Ajuster \xE0 l'\xE9cran"},de:{title:"An Bildschirm anpassen"}},{id:"resize",en:{title:"Resize"},fr:{title:"Redimensionner"},de:{title:"Gr\xF6\xDFe \xE4ndern"}}]};class Ht{constructor(i,o,s,u){L(this,"_toHelp",null);L(this,"_element");L(this,"_style");this._toHelp=i;const{top:v,right:y,height:p,left:x}=this._toHelp.getBoundingClientRect();this._element=document.createElement("div"),this._element.classList.add("helper"),this._element.classList.add(o==="left"?"helper--left":"helper--right");const E=document.createElement("h3");if(E.textContent=s,this._element.appendChild(E),u){const O=document.createElement("p");O.textContent=u,this._element.appendChild(O)}this._style=this._element.style,this._style.position="absolute",this._style.zIndex="2",this._style.display="none",this._style.left=o==="right"?`${y}px`:`${x}px`,this._style.top=`${v+p/2}px`,document.body.appendChild(this._element),this._toHelp.addEventListener("mouseenter",this._onMouseEnter.bind(this)),this._toHelp.addEventListener("mouseleave",this._onMouseLeave.bind(this))}static init(){const i=window.location.search,s=new URLSearchParams(i).get("lang")==="fr"?"fr":"en";er.tools.forEach(O=>{const S=document.querySelector(`[for=${O.for}]`);S&&new Ht(S,"right",O[s].title)}),er.actions.forEach(O=>{const S=document.querySelector(`#${O.id}`);S&&new Ht(S,"left",O[s].title)});const y=er.colors,p=document.getElementById("colorBtn-js");p&&new Ht(p,"right",y[s].title);const x=er.sizes;document.querySelectorAll(".sizes_label").forEach(O=>{new Ht(O,"right",x[s].title+" "+O.getAttribute("for")+"px")})}_onMouseEnter(){this._style.display="block"}_onMouseLeave(){this._style.display="none"}}class bl{static init(i,o){document.querySelectorAll(i).forEach(u=>{u.addEventListener("click",v=>{switch(u.id){case"fit":o.camera.fitSketch();break;case"clear":o.clear();break}})})}}class _l{static init(i,o){const s=document.querySelector(i),u=document.querySelector("color-picker");s==null||s.addEventListener("click",v=>{u==null||u.open()}),u==null||u.addEventListener("color-change",v=>{o.color=v.detail,s&&(s.style.backgroundColor=v.detail)})}}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ao(d,i){var o=Object.keys(d);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(d);i&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(d,u).enumerable})),o.push.apply(o,s)}return o}function $e(d){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?Ao(Object(o),!0).forEach(function(s){xl(d,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(o)):Ao(Object(o)).forEach(function(s){Object.defineProperty(d,s,Object.getOwnPropertyDescriptor(o,s))})}return d}function or(d){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?or=function(i){return typeof i}:or=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},or(d)}function xl(d,i,o){return i in d?Object.defineProperty(d,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):d[i]=o,d}function it(){return it=Object.assign||function(d){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(d[s]=o[s])}return d},it.apply(this,arguments)}function wl(d,i){if(d==null)return{};var o={},s=Object.keys(d),u,v;for(v=0;v<s.length;v++)u=s[v],!(i.indexOf(u)>=0)&&(o[u]=d[u]);return o}function El(d,i){if(d==null)return{};var o=wl(d,i),s,u;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(d);for(u=0;u<v.length;u++)s=v[u],!(i.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(d,s)||(o[s]=d[s]))}return o}var Pl="1.15.0";function rt(d){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(d)}var ot=rt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),xn=rt(/Edge/i),jo=rt(/firefox/i),gn=rt(/safari/i)&&!rt(/chrome/i)&&!rt(/android/i),qo=rt(/iP(ad|od|hone)/i),Vo=rt(/chrome/i)&&rt(/android/i),$o={capture:!1,passive:!1};function Z(d,i,o){d.addEventListener(i,o,!ot&&$o)}function U(d,i,o){d.removeEventListener(i,o,!ot&&$o)}function dr(d,i){if(!!i){if(i[0]===">"&&(i=i.substring(1)),d)try{if(d.matches)return d.matches(i);if(d.msMatchesSelector)return d.msMatchesSelector(i);if(d.webkitMatchesSelector)return d.webkitMatchesSelector(i)}catch{return!1}return!1}}function Sl(d){return d.host&&d!==document&&d.host.nodeType?d.host:d.parentNode}function qe(d,i,o,s){if(d){o=o||document;do{if(i!=null&&(i[0]===">"?d.parentNode===o&&dr(d,i):dr(d,i))||s&&d===o)return d;if(d===o)break}while(d=Sl(d))}return null}var Ro=/\s+/g;function Te(d,i,o){if(d&&i)if(d.classList)d.classList[o?"add":"remove"](i);else{var s=(" "+d.className+" ").replace(Ro," ").replace(" "+i+" "," ");d.className=(s+(o?" "+i:"")).replace(Ro," ")}}function F(d,i,o){var s=d&&d.style;if(s){if(o===void 0)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(d,""):d.currentStyle&&(o=d.currentStyle),i===void 0?o:o[i];!(i in s)&&i.indexOf("webkit")===-1&&(i="-webkit-"+i),s[i]=o+(typeof o=="string"?"":"px")}}function Vt(d,i){var o="";if(typeof d=="string")o=d;else do{var s=F(d,"transform");s&&s!=="none"&&(o=s+" "+o)}while(!i&&(d=d.parentNode));var u=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return u&&new u(o)}function Go(d,i,o){if(d){var s=d.getElementsByTagName(i),u=0,v=s.length;if(o)for(;u<v;u++)o(s[u],u);return s}return[]}function Ve(){var d=document.scrollingElement;return d||document.documentElement}function he(d,i,o,s,u){if(!(!d.getBoundingClientRect&&d!==window)){var v,y,p,x,E,O,S;if(d!==window&&d.parentNode&&d!==Ve()?(v=d.getBoundingClientRect(),y=v.top,p=v.left,x=v.bottom,E=v.right,O=v.height,S=v.width):(y=0,p=0,x=window.innerHeight,E=window.innerWidth,O=window.innerHeight,S=window.innerWidth),(i||o)&&d!==window&&(u=u||d.parentNode,!ot))do if(u&&u.getBoundingClientRect&&(F(u,"transform")!=="none"||o&&F(u,"position")!=="static")){var D=u.getBoundingClientRect();y-=D.top+parseInt(F(u,"border-top-width")),p-=D.left+parseInt(F(u,"border-left-width")),x=y+v.height,E=p+v.width;break}while(u=u.parentNode);if(s&&d!==window){var z=Vt(u||d),q=z&&z.a,Y=z&&z.d;z&&(y/=Y,p/=q,S/=q,O/=Y,x=y+O,E=p+S)}return{top:y,left:p,bottom:x,right:E,width:S,height:O}}}function zo(d,i,o){for(var s=gt(d,!0),u=he(d)[i];s;){var v=he(s)[o],y=void 0;if(o==="top"||o==="left"?y=u>=v:y=u<=v,!y)return s;if(s===Ve())break;s=gt(s,!1)}return!1}function $t(d,i,o,s){for(var u=0,v=0,y=d.children;v<y.length;){if(y[v].style.display!=="none"&&y[v]!==N.ghost&&(s||y[v]!==N.dragged)&&qe(y[v],o.draggable,d,!1)){if(u===i)return y[v];u++}v++}return null}function ui(d,i){for(var o=d.lastElementChild;o&&(o===N.ghost||F(o,"display")==="none"||i&&!dr(o,i));)o=o.previousElementSibling;return o||null}function ze(d,i){var o=0;if(!d||!d.parentNode)return-1;for(;d=d.previousElementSibling;)d.nodeName.toUpperCase()!=="TEMPLATE"&&d!==N.clone&&(!i||dr(d,i))&&o++;return o}function Lo(d){var i=0,o=0,s=Ve();if(d)do{var u=Vt(d),v=u.a,y=u.d;i+=d.scrollLeft*v,o+=d.scrollTop*y}while(d!==s&&(d=d.parentNode));return[i,o]}function kl(d,i){for(var o in d)if(!!d.hasOwnProperty(o)){for(var s in i)if(i.hasOwnProperty(s)&&i[s]===d[o][s])return Number(o)}return-1}function gt(d,i){if(!d||!d.getBoundingClientRect)return Ve();var o=d,s=!1;do if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var u=F(o);if(o.clientWidth<o.scrollWidth&&(u.overflowX=="auto"||u.overflowX=="scroll")||o.clientHeight<o.scrollHeight&&(u.overflowY=="auto"||u.overflowY=="scroll")){if(!o.getBoundingClientRect||o===document.body)return Ve();if(s||i)return o;s=!0}}while(o=o.parentNode);return Ve()}function Ol(d,i){if(d&&i)for(var o in i)i.hasOwnProperty(o)&&(d[o]=i[o]);return d}function Kr(d,i){return Math.round(d.top)===Math.round(i.top)&&Math.round(d.left)===Math.round(i.left)&&Math.round(d.height)===Math.round(i.height)&&Math.round(d.width)===Math.round(i.width)}var mn;function Uo(d,i){return function(){if(!mn){var o=arguments,s=this;o.length===1?d.call(s,o[0]):d.apply(s,o),mn=setTimeout(function(){mn=void 0},i)}}}function Cl(){clearTimeout(mn),mn=void 0}function Ko(d,i,o){d.scrollLeft+=i,d.scrollTop+=o}function Zo(d){var i=window.Polymer,o=window.jQuery||window.Zepto;return i&&i.dom?i.dom(d).cloneNode(!0):o?o(d).clone(!0)[0]:d.cloneNode(!0)}var De="Sortable"+new Date().getTime();function Tl(){var d=[],i;return{captureAnimationState:function(){if(d=[],!!this.options.animation){var s=[].slice.call(this.el.children);s.forEach(function(u){if(!(F(u,"display")==="none"||u===N.ghost)){d.push({target:u,rect:he(u)});var v=$e({},d[d.length-1].rect);if(u.thisAnimationDuration){var y=Vt(u,!0);y&&(v.top-=y.f,v.left-=y.e)}u.fromRect=v}})}},addAnimationState:function(s){d.push(s)},removeAnimationState:function(s){d.splice(kl(d,{target:s}),1)},animateAll:function(s){var u=this;if(!this.options.animation){clearTimeout(i),typeof s=="function"&&s();return}var v=!1,y=0;d.forEach(function(p){var x=0,E=p.target,O=E.fromRect,S=he(E),D=E.prevFromRect,z=E.prevToRect,q=p.rect,Y=Vt(E,!0);Y&&(S.top-=Y.f,S.left-=Y.e),E.toRect=S,E.thisAnimationDuration&&Kr(D,S)&&!Kr(O,S)&&(q.top-S.top)/(q.left-S.left)===(O.top-S.top)/(O.left-S.left)&&(x=Dl(q,D,z,u.options)),Kr(S,O)||(E.prevFromRect=O,E.prevToRect=S,x||(x=u.options.animation),u.animate(E,q,S,x)),x&&(v=!0,y=Math.max(y,x),clearTimeout(E.animationResetTimer),E.animationResetTimer=setTimeout(function(){E.animationTime=0,E.prevFromRect=null,E.fromRect=null,E.prevToRect=null,E.thisAnimationDuration=null},x),E.thisAnimationDuration=x)}),clearTimeout(i),v?i=setTimeout(function(){typeof s=="function"&&s()},y):typeof s=="function"&&s(),d=[]},animate:function(s,u,v,y){if(y){F(s,"transition",""),F(s,"transform","");var p=Vt(this.el),x=p&&p.a,E=p&&p.d,O=(u.left-v.left)/(x||1),S=(u.top-v.top)/(E||1);s.animatingX=!!O,s.animatingY=!!S,F(s,"transform","translate3d("+O+"px,"+S+"px,0)"),this.forRepaintDummy=Ml(s),F(s,"transition","transform "+y+"ms"+(this.options.easing?" "+this.options.easing:"")),F(s,"transform","translate3d(0,0,0)"),typeof s.animated=="number"&&clearTimeout(s.animated),s.animated=setTimeout(function(){F(s,"transition",""),F(s,"transform",""),s.animated=!1,s.animatingX=!1,s.animatingY=!1},y)}}}}function Ml(d){return d.offsetWidth}function Dl(d,i,o,s){return Math.sqrt(Math.pow(i.top-d.top,2)+Math.pow(i.left-d.left,2))/Math.sqrt(Math.pow(i.top-o.top,2)+Math.pow(i.left-o.left,2))*s.animation}var Xt=[],Zr={initializeByDefault:!0},wn={mount:function(i){for(var o in Zr)Zr.hasOwnProperty(o)&&!(o in i)&&(i[o]=Zr[o]);Xt.forEach(function(s){if(s.pluginName===i.pluginName)throw"Sortable: Cannot mount plugin ".concat(i.pluginName," more than once")}),Xt.push(i)},pluginEvent:function(i,o,s){var u=this;this.eventCanceled=!1,s.cancel=function(){u.eventCanceled=!0};var v=i+"Global";Xt.forEach(function(y){!o[y.pluginName]||(o[y.pluginName][v]&&o[y.pluginName][v]($e({sortable:o},s)),o.options[y.pluginName]&&o[y.pluginName][i]&&o[y.pluginName][i]($e({sortable:o},s)))})},initializePlugins:function(i,o,s,u){Xt.forEach(function(p){var x=p.pluginName;if(!(!i.options[x]&&!p.initializeByDefault)){var E=new p(i,o,i.options);E.sortable=i,E.options=i.options,i[x]=E,it(s,E.defaults)}});for(var v in i.options)if(!!i.options.hasOwnProperty(v)){var y=this.modifyOption(i,v,i.options[v]);typeof y!="undefined"&&(i.options[v]=y)}},getEventProperties:function(i,o){var s={};return Xt.forEach(function(u){typeof u.eventProperties=="function"&&it(s,u.eventProperties.call(o[u.pluginName],i))}),s},modifyOption:function(i,o,s){var u;return Xt.forEach(function(v){!i[v.pluginName]||v.optionListeners&&typeof v.optionListeners[o]=="function"&&(u=v.optionListeners[o].call(i[v.pluginName],s))}),u}};function Il(d){var i=d.sortable,o=d.rootEl,s=d.name,u=d.targetEl,v=d.cloneEl,y=d.toEl,p=d.fromEl,x=d.oldIndex,E=d.newIndex,O=d.oldDraggableIndex,S=d.newDraggableIndex,D=d.originalEvent,z=d.putSortable,q=d.extraEventProperties;if(i=i||o&&o[De],!!i){var Y,fe=i.options,V="on"+s.charAt(0).toUpperCase()+s.substr(1);window.CustomEvent&&!ot&&!xn?Y=new CustomEvent(s,{bubbles:!0,cancelable:!0}):(Y=document.createEvent("Event"),Y.initEvent(s,!0,!0)),Y.to=y||o,Y.from=p||o,Y.item=u||o,Y.clone=v,Y.oldIndex=x,Y.newIndex=E,Y.oldDraggableIndex=O,Y.newDraggableIndex=S,Y.originalEvent=D,Y.pullMode=z?z.lastPutMode:void 0;var Q=$e($e({},q),wn.getEventProperties(s,i));for(var pe in Q)Y[pe]=Q[pe];o&&o.dispatchEvent(Y),fe[V]&&fe[V].call(i,Y)}}var Al=["evt"],Oe=function(i,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=s.evt,v=El(s,Al);wn.pluginEvent.bind(N)(i,o,$e({dragEl:T,parentEl:ue,ghostEl:H,rootEl:oe,nextEl:Tt,lastDownEl:ar,cloneEl:le,cloneHidden:vt,dragStarted:hn,putSortable:be,activeSortable:N.active,originalEvent:u,oldIndex:qt,oldDraggableIndex:yn,newIndex:Me,newDraggableIndex:pt,hideGhostForTarget:ta,unhideGhostForTarget:na,cloneNowHidden:function(){vt=!0},cloneNowShown:function(){vt=!1},dispatchSortableEvent:function(p){Pe({sortable:o,name:p,originalEvent:u})}},v))};function Pe(d){Il($e({putSortable:be,cloneEl:le,targetEl:T,rootEl:oe,oldIndex:qt,oldDraggableIndex:yn,newIndex:Me,newDraggableIndex:pt},d))}var T,ue,H,oe,Tt,ar,le,vt,qt,Me,yn,pt,tr,be,Wt=!1,fr=!1,hr=[],Ot,Fe,Jr,Qr,Bo,Fo,hn,Yt,bn,_n=!1,nr=!1,sr,xe,ei=[],ai=!1,pr=[],gr=typeof document!="undefined",rr=qo,No=xn||ot?"cssFloat":"float",jl=gr&&!Vo&&!qo&&"draggable"in document.createElement("div"),Jo=function(){if(!!gr){if(ot)return!1;var d=document.createElement("x");return d.style.cssText="pointer-events:auto",d.style.pointerEvents==="auto"}}(),Qo=function(i,o){var s=F(i),u=parseInt(s.width)-parseInt(s.paddingLeft)-parseInt(s.paddingRight)-parseInt(s.borderLeftWidth)-parseInt(s.borderRightWidth),v=$t(i,0,o),y=$t(i,1,o),p=v&&F(v),x=y&&F(y),E=p&&parseInt(p.marginLeft)+parseInt(p.marginRight)+he(v).width,O=x&&parseInt(x.marginLeft)+parseInt(x.marginRight)+he(y).width;if(s.display==="flex")return s.flexDirection==="column"||s.flexDirection==="column-reverse"?"vertical":"horizontal";if(s.display==="grid")return s.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(v&&p.float&&p.float!=="none"){var S=p.float==="left"?"left":"right";return y&&(x.clear==="both"||x.clear===S)?"vertical":"horizontal"}return v&&(p.display==="block"||p.display==="flex"||p.display==="table"||p.display==="grid"||E>=u&&s[No]==="none"||y&&s[No]==="none"&&E+O>u)?"vertical":"horizontal"},Rl=function(i,o,s){var u=s?i.left:i.top,v=s?i.right:i.bottom,y=s?i.width:i.height,p=s?o.left:o.top,x=s?o.right:o.bottom,E=s?o.width:o.height;return u===p||v===x||u+y/2===p+E/2},zl=function(i,o){var s;return hr.some(function(u){var v=u[De].options.emptyInsertThreshold;if(!(!v||ui(u))){var y=he(u),p=i>=y.left-v&&i<=y.right+v,x=o>=y.top-v&&o<=y.bottom+v;if(p&&x)return s=u}}),s},ea=function(i){function o(v,y){return function(p,x,E,O){var S=p.options.group.name&&x.options.group.name&&p.options.group.name===x.options.group.name;if(v==null&&(y||S))return!0;if(v==null||v===!1)return!1;if(y&&v==="clone")return v;if(typeof v=="function")return o(v(p,x,E,O),y)(p,x,E,O);var D=(y?p:x).options.group.name;return v===!0||typeof v=="string"&&v===D||v.join&&v.indexOf(D)>-1}}var s={},u=i.group;(!u||or(u)!="object")&&(u={name:u}),s.name=u.name,s.checkPull=o(u.pull,!0),s.checkPut=o(u.put),s.revertClone=u.revertClone,i.group=s},ta=function(){!Jo&&H&&F(H,"display","none")},na=function(){!Jo&&H&&F(H,"display","")};gr&&!Vo&&document.addEventListener("click",function(d){if(fr)return d.preventDefault(),d.stopPropagation&&d.stopPropagation(),d.stopImmediatePropagation&&d.stopImmediatePropagation(),fr=!1,!1},!0);var Ct=function(i){if(T){i=i.touches?i.touches[0]:i;var o=zl(i.clientX,i.clientY);if(o){var s={};for(var u in i)i.hasOwnProperty(u)&&(s[u]=i[u]);s.target=s.rootEl=o,s.preventDefault=void 0,s.stopPropagation=void 0,o[De]._onDragOver(s)}}},Ll=function(i){T&&T.parentNode[De]._isOutsideThisEl(i.target)};function N(d,i){if(!(d&&d.nodeType&&d.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(d));this.el=d,this.options=i=it({},i),d[De]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(d.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Qo(d,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(y,p){y.setData("Text",p.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:N.supportPointer!==!1&&"PointerEvent"in window&&!gn,emptyInsertThreshold:5};wn.initializePlugins(this,d,o);for(var s in o)!(s in i)&&(i[s]=o[s]);ea(i);for(var u in this)u.charAt(0)==="_"&&typeof this[u]=="function"&&(this[u]=this[u].bind(this));this.nativeDraggable=i.forceFallback?!1:jl,this.nativeDraggable&&(this.options.touchStartThreshold=1),i.supportPointer?Z(d,"pointerdown",this._onTapStart):(Z(d,"mousedown",this._onTapStart),Z(d,"touchstart",this._onTapStart)),this.nativeDraggable&&(Z(d,"dragover",this),Z(d,"dragenter",this)),hr.push(this.el),i.store&&i.store.get&&this.sort(i.store.get(this)||[]),it(this,Tl())}N.prototype={constructor:N,_isOutsideThisEl:function(i){!this.el.contains(i)&&i!==this.el&&(Yt=null)},_getDirection:function(i,o){return typeof this.options.direction=="function"?this.options.direction.call(this,i,o,T):this.options.direction},_onTapStart:function(i){if(!!i.cancelable){var o=this,s=this.el,u=this.options,v=u.preventOnFilter,y=i.type,p=i.touches&&i.touches[0]||i.pointerType&&i.pointerType==="touch"&&i,x=(p||i).target,E=i.target.shadowRoot&&(i.path&&i.path[0]||i.composedPath&&i.composedPath()[0])||x,O=u.filter;if(ql(s),!T&&!(/mousedown|pointerdown/.test(y)&&i.button!==0||u.disabled)&&!E.isContentEditable&&!(!this.nativeDraggable&&gn&&x&&x.tagName.toUpperCase()==="SELECT")&&(x=qe(x,u.draggable,s,!1),!(x&&x.animated)&&ar!==x)){if(qt=ze(x),yn=ze(x,u.draggable),typeof O=="function"){if(O.call(this,i,x,this)){Pe({sortable:o,rootEl:E,name:"filter",targetEl:x,toEl:s,fromEl:s}),Oe("filter",o,{evt:i}),v&&i.cancelable&&i.preventDefault();return}}else if(O&&(O=O.split(",").some(function(S){if(S=qe(E,S.trim(),s,!1),S)return Pe({sortable:o,rootEl:S,name:"filter",targetEl:x,fromEl:s,toEl:s}),Oe("filter",o,{evt:i}),!0}),O)){v&&i.cancelable&&i.preventDefault();return}u.handle&&!qe(E,u.handle,s,!1)||this._prepareDragStart(i,p,x)}}},_prepareDragStart:function(i,o,s){var u=this,v=u.el,y=u.options,p=v.ownerDocument,x;if(s&&!T&&s.parentNode===v){var E=he(s);if(oe=v,T=s,ue=T.parentNode,Tt=T.nextSibling,ar=s,tr=y.group,N.dragged=T,Ot={target:T,clientX:(o||i).clientX,clientY:(o||i).clientY},Bo=Ot.clientX-E.left,Fo=Ot.clientY-E.top,this._lastX=(o||i).clientX,this._lastY=(o||i).clientY,T.style["will-change"]="all",x=function(){if(Oe("delayEnded",u,{evt:i}),N.eventCanceled){u._onDrop();return}u._disableDelayedDragEvents(),!jo&&u.nativeDraggable&&(T.draggable=!0),u._triggerDragStart(i,o),Pe({sortable:u,name:"choose",originalEvent:i}),Te(T,y.chosenClass,!0)},y.ignore.split(",").forEach(function(O){Go(T,O.trim(),ti)}),Z(p,"dragover",Ct),Z(p,"mousemove",Ct),Z(p,"touchmove",Ct),Z(p,"mouseup",u._onDrop),Z(p,"touchend",u._onDrop),Z(p,"touchcancel",u._onDrop),jo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,T.draggable=!0),Oe("delayStart",this,{evt:i}),y.delay&&(!y.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(xn||ot))){if(N.eventCanceled){this._onDrop();return}Z(p,"mouseup",u._disableDelayedDrag),Z(p,"touchend",u._disableDelayedDrag),Z(p,"touchcancel",u._disableDelayedDrag),Z(p,"mousemove",u._delayedDragTouchMoveHandler),Z(p,"touchmove",u._delayedDragTouchMoveHandler),y.supportPointer&&Z(p,"pointermove",u._delayedDragTouchMoveHandler),u._dragStartTimer=setTimeout(x,y.delay)}else x()}},_delayedDragTouchMoveHandler:function(i){var o=i.touches?i.touches[0]:i;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){T&&ti(T),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var i=this.el.ownerDocument;U(i,"mouseup",this._disableDelayedDrag),U(i,"touchend",this._disableDelayedDrag),U(i,"touchcancel",this._disableDelayedDrag),U(i,"mousemove",this._delayedDragTouchMoveHandler),U(i,"touchmove",this._delayedDragTouchMoveHandler),U(i,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(i,o){o=o||i.pointerType=="touch"&&i,!this.nativeDraggable||o?this.options.supportPointer?Z(document,"pointermove",this._onTouchMove):o?Z(document,"touchmove",this._onTouchMove):Z(document,"mousemove",this._onTouchMove):(Z(T,"dragend",this),Z(oe,"dragstart",this._onDragStart));try{document.selection?lr(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(i,o){if(Wt=!1,oe&&T){Oe("dragStarted",this,{evt:o}),this.nativeDraggable&&Z(document,"dragover",Ll);var s=this.options;!i&&Te(T,s.dragClass,!1),Te(T,s.ghostClass,!0),N.active=this,i&&this._appendGhost(),Pe({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(Fe){this._lastX=Fe.clientX,this._lastY=Fe.clientY,ta();for(var i=document.elementFromPoint(Fe.clientX,Fe.clientY),o=i;i&&i.shadowRoot&&(i=i.shadowRoot.elementFromPoint(Fe.clientX,Fe.clientY),i!==o);)o=i;if(T.parentNode[De]._isOutsideThisEl(i),o)do{if(o[De]){var s=void 0;if(s=o[De]._onDragOver({clientX:Fe.clientX,clientY:Fe.clientY,target:i,rootEl:o}),s&&!this.options.dragoverBubble)break}i=o}while(o=o.parentNode);na()}},_onTouchMove:function(i){if(Ot){var o=this.options,s=o.fallbackTolerance,u=o.fallbackOffset,v=i.touches?i.touches[0]:i,y=H&&Vt(H,!0),p=H&&y&&y.a,x=H&&y&&y.d,E=rr&&xe&&Lo(xe),O=(v.clientX-Ot.clientX+u.x)/(p||1)+(E?E[0]-ei[0]:0)/(p||1),S=(v.clientY-Ot.clientY+u.y)/(x||1)+(E?E[1]-ei[1]:0)/(x||1);if(!N.active&&!Wt){if(s&&Math.max(Math.abs(v.clientX-this._lastX),Math.abs(v.clientY-this._lastY))<s)return;this._onDragStart(i,!0)}if(H){y?(y.e+=O-(Jr||0),y.f+=S-(Qr||0)):y={a:1,b:0,c:0,d:1,e:O,f:S};var D="matrix(".concat(y.a,",").concat(y.b,",").concat(y.c,",").concat(y.d,",").concat(y.e,",").concat(y.f,")");F(H,"webkitTransform",D),F(H,"mozTransform",D),F(H,"msTransform",D),F(H,"transform",D),Jr=O,Qr=S,Fe=v}i.cancelable&&i.preventDefault()}},_appendGhost:function(){if(!H){var i=this.options.fallbackOnBody?document.body:oe,o=he(T,!0,rr,!0,i),s=this.options;if(rr){for(xe=i;F(xe,"position")==="static"&&F(xe,"transform")==="none"&&xe!==document;)xe=xe.parentNode;xe!==document.body&&xe!==document.documentElement?(xe===document&&(xe=Ve()),o.top+=xe.scrollTop,o.left+=xe.scrollLeft):xe=Ve(),ei=Lo(xe)}H=T.cloneNode(!0),Te(H,s.ghostClass,!1),Te(H,s.fallbackClass,!0),Te(H,s.dragClass,!0),F(H,"transition",""),F(H,"transform",""),F(H,"box-sizing","border-box"),F(H,"margin",0),F(H,"top",o.top),F(H,"left",o.left),F(H,"width",o.width),F(H,"height",o.height),F(H,"opacity","0.8"),F(H,"position",rr?"absolute":"fixed"),F(H,"zIndex","100000"),F(H,"pointerEvents","none"),N.ghost=H,i.appendChild(H),F(H,"transform-origin",Bo/parseInt(H.style.width)*100+"% "+Fo/parseInt(H.style.height)*100+"%")}},_onDragStart:function(i,o){var s=this,u=i.dataTransfer,v=s.options;if(Oe("dragStart",this,{evt:i}),N.eventCanceled){this._onDrop();return}Oe("setupClone",this),N.eventCanceled||(le=Zo(T),le.removeAttribute("id"),le.draggable=!1,le.style["will-change"]="",this._hideClone(),Te(le,this.options.chosenClass,!1),N.clone=le),s.cloneId=lr(function(){Oe("clone",s),!N.eventCanceled&&(s.options.removeCloneOnHide||oe.insertBefore(le,T),s._hideClone(),Pe({sortable:s,name:"clone"}))}),!o&&Te(T,v.dragClass,!0),o?(fr=!0,s._loopId=setInterval(s._emulateDragOver,50)):(U(document,"mouseup",s._onDrop),U(document,"touchend",s._onDrop),U(document,"touchcancel",s._onDrop),u&&(u.effectAllowed="move",v.setData&&v.setData.call(s,u,T)),Z(document,"drop",s),F(T,"transform","translateZ(0)")),Wt=!0,s._dragStartId=lr(s._dragStarted.bind(s,o,i)),Z(document,"selectstart",s),hn=!0,gn&&F(document.body,"user-select","none")},_onDragOver:function(i){var o=this.el,s=i.target,u,v,y,p=this.options,x=p.group,E=N.active,O=tr===x,S=p.sort,D=be||E,z,q=this,Y=!1;if(ai)return;function fe(lt,Ue){Oe(lt,q,$e({evt:i,isOwner:O,axis:z?"vertical":"horizontal",revert:y,dragRect:u,targetRect:v,canSort:S,fromSortable:D,target:s,completed:Q,onMove:function(Ut,We){return ir(oe,o,T,u,Ut,he(Ut),i,We)},changed:pe},Ue))}function V(){fe("dragOverAnimationCapture"),q.captureAnimationState(),q!==D&&D.captureAnimationState()}function Q(lt){return fe("dragOverCompleted",{insertion:lt}),lt&&(O?E._hideClone():E._showClone(q),q!==D&&(Te(T,be?be.options.ghostClass:E.options.ghostClass,!1),Te(T,p.ghostClass,!0)),be!==q&&q!==N.active?be=q:q===N.active&&be&&(be=null),D===q&&(q._ignoreWhileAnimating=s),q.animateAll(function(){fe("dragOverAnimationComplete"),q._ignoreWhileAnimating=null}),q!==D&&(D.animateAll(),D._ignoreWhileAnimating=null)),(s===T&&!T.animated||s===o&&!s.animated)&&(Yt=null),!p.dragoverBubble&&!i.rootEl&&s!==document&&(T.parentNode[De]._isOutsideThisEl(i.target),!lt&&Ct(i)),!p.dragoverBubble&&i.stopPropagation&&i.stopPropagation(),Y=!0}function pe(){Me=ze(T),pt=ze(T,p.draggable),Pe({sortable:q,name:"change",toEl:o,newIndex:Me,newDraggableIndex:pt,originalEvent:i})}if(i.preventDefault!==void 0&&i.cancelable&&i.preventDefault(),s=qe(s,p.draggable,o,!0),fe("dragOver"),N.eventCanceled)return Y;if(T.contains(i.target)||s.animated&&s.animatingX&&s.animatingY||q._ignoreWhileAnimating===s)return Q(!1);if(fr=!1,E&&!p.disabled&&(O?S||(y=ue!==oe):be===this||(this.lastPutMode=tr.checkPull(this,E,T,i))&&x.checkPut(this,E,T,i))){if(z=this._getDirection(i,s)==="vertical",u=he(T),fe("dragOverValid"),N.eventCanceled)return Y;if(y)return ue=oe,V(),this._hideClone(),fe("revert"),N.eventCanceled||(Tt?oe.insertBefore(T,Tt):oe.appendChild(T)),Q(!0);var we=ui(o,p.draggable);if(!we||Xl(i,z,this)&&!we.animated){if(we===T)return Q(!1);if(we&&o===i.target&&(s=we),s&&(v=he(s)),ir(oe,o,T,u,s,v,i,!!s)!==!1)return V(),we&&we.nextSibling?o.insertBefore(T,we.nextSibling):o.appendChild(T),ue=o,pe(),Q(!0)}else if(we&&Nl(i,z,this)){var ce=$t(o,0,p,!0);if(ce===T)return Q(!1);if(s=ce,v=he(s),ir(oe,o,T,u,s,v,i,!1)!==!1)return V(),o.insertBefore(T,ce),ue=o,pe(),Q(!0)}else if(s.parentNode===o){v=he(s);var ae=0,Ge,R=T.parentNode!==o,ve=!Rl(T.animated&&T.toRect||u,s.animated&&s.toRect||v,z),Xe=z?"top":"left",Ie=zo(s,"top","top")||zo(T,"top","top"),at=Ie?Ie.scrollTop:void 0;Yt!==s&&(Ge=v[Xe],_n=!1,nr=!ve&&p.invertSwap||R),ae=Yl(i,s,v,z,ve?1:p.swapThreshold,p.invertedSwapThreshold==null?p.swapThreshold:p.invertedSwapThreshold,nr,Yt===s);var Ae;if(ae!==0){var Ye=ze(T);do Ye-=ae,Ae=ue.children[Ye];while(Ae&&(F(Ae,"display")==="none"||Ae===H))}if(ae===0||Ae===s)return Q(!1);Yt=s,bn=ae;var I=s.nextElementSibling,G=!1;G=ae===1;var st=ir(oe,o,T,u,s,v,i,G);if(st!==!1)return(st===1||st===-1)&&(G=st===1),ai=!0,setTimeout(Fl,30),V(),G&&!I?o.appendChild(T):s.parentNode.insertBefore(T,G?I:s),Ie&&Ko(Ie,0,at-Ie.scrollTop),ue=T.parentNode,Ge!==void 0&&!nr&&(sr=Math.abs(Ge-he(s)[Xe])),pe(),Q(!0)}if(o.contains(T))return Q(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){U(document,"mousemove",this._onTouchMove),U(document,"touchmove",this._onTouchMove),U(document,"pointermove",this._onTouchMove),U(document,"dragover",Ct),U(document,"mousemove",Ct),U(document,"touchmove",Ct)},_offUpEvents:function(){var i=this.el.ownerDocument;U(i,"mouseup",this._onDrop),U(i,"touchend",this._onDrop),U(i,"pointerup",this._onDrop),U(i,"touchcancel",this._onDrop),U(document,"selectstart",this)},_onDrop:function(i){var o=this.el,s=this.options;if(Me=ze(T),pt=ze(T,s.draggable),Oe("drop",this,{evt:i}),ue=T&&T.parentNode,Me=ze(T),pt=ze(T,s.draggable),N.eventCanceled){this._nulling();return}Wt=!1,nr=!1,_n=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),si(this.cloneId),si(this._dragStartId),this.nativeDraggable&&(U(document,"drop",this),U(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),gn&&F(document.body,"user-select",""),F(T,"transform",""),i&&(hn&&(i.cancelable&&i.preventDefault(),!s.dropBubble&&i.stopPropagation()),H&&H.parentNode&&H.parentNode.removeChild(H),(oe===ue||be&&be.lastPutMode!=="clone")&&le&&le.parentNode&&le.parentNode.removeChild(le),T&&(this.nativeDraggable&&U(T,"dragend",this),ti(T),T.style["will-change"]="",hn&&!Wt&&Te(T,be?be.options.ghostClass:this.options.ghostClass,!1),Te(T,this.options.chosenClass,!1),Pe({sortable:this,name:"unchoose",toEl:ue,newIndex:null,newDraggableIndex:null,originalEvent:i}),oe!==ue?(Me>=0&&(Pe({rootEl:ue,name:"add",toEl:ue,fromEl:oe,originalEvent:i}),Pe({sortable:this,name:"remove",toEl:ue,originalEvent:i}),Pe({rootEl:ue,name:"sort",toEl:ue,fromEl:oe,originalEvent:i}),Pe({sortable:this,name:"sort",toEl:ue,originalEvent:i})),be&&be.save()):Me!==qt&&Me>=0&&(Pe({sortable:this,name:"update",toEl:ue,originalEvent:i}),Pe({sortable:this,name:"sort",toEl:ue,originalEvent:i})),N.active&&((Me==null||Me===-1)&&(Me=qt,pt=yn),Pe({sortable:this,name:"end",toEl:ue,originalEvent:i}),this.save()))),this._nulling()},_nulling:function(){Oe("nulling",this),oe=T=ue=H=Tt=le=ar=vt=Ot=Fe=hn=Me=pt=qt=yn=Yt=bn=be=tr=N.dragged=N.ghost=N.clone=N.active=null,pr.forEach(function(i){i.checked=!0}),pr.length=Jr=Qr=0},handleEvent:function(i){switch(i.type){case"drop":case"dragend":this._onDrop(i);break;case"dragenter":case"dragover":T&&(this._onDragOver(i),Bl(i));break;case"selectstart":i.preventDefault();break}},toArray:function(){for(var i=[],o,s=this.el.children,u=0,v=s.length,y=this.options;u<v;u++)o=s[u],qe(o,y.draggable,this.el,!1)&&i.push(o.getAttribute(y.dataIdAttr)||Hl(o));return i},sort:function(i,o){var s={},u=this.el;this.toArray().forEach(function(v,y){var p=u.children[y];qe(p,this.options.draggable,u,!1)&&(s[v]=p)},this),o&&this.captureAnimationState(),i.forEach(function(v){s[v]&&(u.removeChild(s[v]),u.appendChild(s[v]))}),o&&this.animateAll()},save:function(){var i=this.options.store;i&&i.set&&i.set(this)},closest:function(i,o){return qe(i,o||this.options.draggable,this.el,!1)},option:function(i,o){var s=this.options;if(o===void 0)return s[i];var u=wn.modifyOption(this,i,o);typeof u!="undefined"?s[i]=u:s[i]=o,i==="group"&&ea(s)},destroy:function(){Oe("destroy",this);var i=this.el;i[De]=null,U(i,"mousedown",this._onTapStart),U(i,"touchstart",this._onTapStart),U(i,"pointerdown",this._onTapStart),this.nativeDraggable&&(U(i,"dragover",this),U(i,"dragenter",this)),Array.prototype.forEach.call(i.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),hr.splice(hr.indexOf(this.el),1),this.el=i=null},_hideClone:function(){if(!vt){if(Oe("hideClone",this),N.eventCanceled)return;F(le,"display","none"),this.options.removeCloneOnHide&&le.parentNode&&le.parentNode.removeChild(le),vt=!0}},_showClone:function(i){if(i.lastPutMode!=="clone"){this._hideClone();return}if(vt){if(Oe("showClone",this),N.eventCanceled)return;T.parentNode==oe&&!this.options.group.revertClone?oe.insertBefore(le,T):Tt?oe.insertBefore(le,Tt):oe.appendChild(le),this.options.group.revertClone&&this.animate(T,le),F(le,"display",""),vt=!1}}};function Bl(d){d.dataTransfer&&(d.dataTransfer.dropEffect="move"),d.cancelable&&d.preventDefault()}function ir(d,i,o,s,u,v,y,p){var x,E=d[De],O=E.options.onMove,S;return window.CustomEvent&&!ot&&!xn?x=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(x=document.createEvent("Event"),x.initEvent("move",!0,!0)),x.to=i,x.from=d,x.dragged=o,x.draggedRect=s,x.related=u||i,x.relatedRect=v||he(i),x.willInsertAfter=p,x.originalEvent=y,d.dispatchEvent(x),O&&(S=O.call(E,x,y)),S}function ti(d){d.draggable=!1}function Fl(){ai=!1}function Nl(d,i,o){var s=he($t(o.el,0,o.options,!0)),u=10;return i?d.clientX<s.left-u||d.clientY<s.top&&d.clientX<s.right:d.clientY<s.top-u||d.clientY<s.bottom&&d.clientX<s.left}function Xl(d,i,o){var s=he(ui(o.el,o.options.draggable)),u=10;return i?d.clientX>s.right+u||d.clientX<=s.right&&d.clientY>s.bottom&&d.clientX>=s.left:d.clientX>s.right&&d.clientY>s.top||d.clientX<=s.right&&d.clientY>s.bottom+u}function Yl(d,i,o,s,u,v,y,p){var x=s?d.clientY:d.clientX,E=s?o.height:o.width,O=s?o.top:o.left,S=s?o.bottom:o.right,D=!1;if(!y){if(p&&sr<E*u){if(!_n&&(bn===1?x>O+E*v/2:x<S-E*v/2)&&(_n=!0),_n)D=!0;else if(bn===1?x<O+sr:x>S-sr)return-bn}else if(x>O+E*(1-u)/2&&x<S-E*(1-u)/2)return Wl(i)}return D=D||y,D&&(x<O+E*v/2||x>S-E*v/2)?x>O+E/2?1:-1:0}function Wl(d){return ze(T)<ze(d)?1:-1}function Hl(d){for(var i=d.tagName+d.className+d.src+d.href+d.textContent,o=i.length,s=0;o--;)s+=i.charCodeAt(o);return s.toString(36)}function ql(d){pr.length=0;for(var i=d.getElementsByTagName("input"),o=i.length;o--;){var s=i[o];s.checked&&pr.push(s)}}function lr(d){return setTimeout(d,0)}function si(d){return clearTimeout(d)}gr&&Z(document,"touchmove",function(d){(N.active||Wt)&&d.cancelable&&d.preventDefault()});N.utils={on:Z,off:U,css:F,find:Go,is:function(i,o){return!!qe(i,o,i,!1)},extend:Ol,throttle:Uo,closest:qe,toggleClass:Te,clone:Zo,index:ze,nextTick:lr,cancelNextTick:si,detectDirection:Qo,getChild:$t};N.get=function(d){return d[De]};N.mount=function(){for(var d=arguments.length,i=new Array(d),o=0;o<d;o++)i[o]=arguments[o];i[0].constructor===Array&&(i=i[0]),i.forEach(function(s){if(!s.prototype||!s.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(s));s.utils&&(N.utils=$e($e({},N.utils),s.utils)),wn.mount(s)})};N.create=function(d,i){return new N(d,i)};N.version=Pl;var de=[],pn,li,ci=!1,ni,ri,vr,vn;function Vl(){function d(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this))}return d.prototype={dragStarted:function(o){var s=o.originalEvent;this.sortable.nativeDraggable?Z(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Z(document,"pointermove",this._handleFallbackAutoScroll):s.touches?Z(document,"touchmove",this._handleFallbackAutoScroll):Z(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var s=o.originalEvent;!this.options.dragOverBubble&&!s.rootEl&&this._handleAutoScroll(s)},drop:function(){this.sortable.nativeDraggable?U(document,"dragover",this._handleAutoScroll):(U(document,"pointermove",this._handleFallbackAutoScroll),U(document,"touchmove",this._handleFallbackAutoScroll),U(document,"mousemove",this._handleFallbackAutoScroll)),Xo(),cr(),Cl()},nulling:function(){vr=li=pn=ci=vn=ni=ri=null,de.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,s){var u=this,v=(o.touches?o.touches[0]:o).clientX,y=(o.touches?o.touches[0]:o).clientY,p=document.elementFromPoint(v,y);if(vr=o,s||this.options.forceAutoScrollFallback||xn||ot||gn){ii(o,this.options,p,s);var x=gt(p,!0);ci&&(!vn||v!==ni||y!==ri)&&(vn&&Xo(),vn=setInterval(function(){var E=gt(document.elementFromPoint(v,y),!0);E!==x&&(x=E,cr()),ii(o,u.options,E,s)},10),ni=v,ri=y)}else{if(!this.options.bubbleScroll||gt(p,!0)===Ve()){cr();return}ii(o,this.options,gt(p,!1),!1)}}},it(d,{pluginName:"scroll",initializeByDefault:!0})}function cr(){de.forEach(function(d){clearInterval(d.pid)}),de=[]}function Xo(){clearInterval(vn)}var ii=Uo(function(d,i,o,s){if(!!i.scroll){var u=(d.touches?d.touches[0]:d).clientX,v=(d.touches?d.touches[0]:d).clientY,y=i.scrollSensitivity,p=i.scrollSpeed,x=Ve(),E=!1,O;li!==o&&(li=o,cr(),pn=i.scroll,O=i.scrollFn,pn===!0&&(pn=gt(o,!0)));var S=0,D=pn;do{var z=D,q=he(z),Y=q.top,fe=q.bottom,V=q.left,Q=q.right,pe=q.width,we=q.height,ce=void 0,ae=void 0,Ge=z.scrollWidth,R=z.scrollHeight,ve=F(z),Xe=z.scrollLeft,Ie=z.scrollTop;z===x?(ce=pe<Ge&&(ve.overflowX==="auto"||ve.overflowX==="scroll"||ve.overflowX==="visible"),ae=we<R&&(ve.overflowY==="auto"||ve.overflowY==="scroll"||ve.overflowY==="visible")):(ce=pe<Ge&&(ve.overflowX==="auto"||ve.overflowX==="scroll"),ae=we<R&&(ve.overflowY==="auto"||ve.overflowY==="scroll"));var at=ce&&(Math.abs(Q-u)<=y&&Xe+pe<Ge)-(Math.abs(V-u)<=y&&!!Xe),Ae=ae&&(Math.abs(fe-v)<=y&&Ie+we<R)-(Math.abs(Y-v)<=y&&!!Ie);if(!de[S])for(var Ye=0;Ye<=S;Ye++)de[Ye]||(de[Ye]={});(de[S].vx!=at||de[S].vy!=Ae||de[S].el!==z)&&(de[S].el=z,de[S].vx=at,de[S].vy=Ae,clearInterval(de[S].pid),(at!=0||Ae!=0)&&(E=!0,de[S].pid=setInterval(function(){s&&this.layer===0&&N.active._onTouchMove(vr);var I=de[this.layer].vy?de[this.layer].vy*p:0,G=de[this.layer].vx?de[this.layer].vx*p:0;typeof O=="function"&&O.call(N.dragged.parentNode[De],G,I,d,vr,de[this.layer].el)!=="continue"||Ko(de[this.layer].el,G,I)}.bind({layer:S}),24))),S++}while(i.bubbleScroll&&D!==x&&(D=gt(D,!1)));ci=E}},30),ra=function(i){var o=i.originalEvent,s=i.putSortable,u=i.dragEl,v=i.activeSortable,y=i.dispatchSortableEvent,p=i.hideGhostForTarget,x=i.unhideGhostForTarget;if(!!o){var E=s||v;p();var O=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,S=document.elementFromPoint(O.clientX,O.clientY);x(),E&&!E.el.contains(S)&&(y("spill"),this.onSpill({dragEl:u,putSortable:s}))}};function di(){}di.prototype={startIndex:null,dragStart:function(i){var o=i.oldDraggableIndex;this.startIndex=o},onSpill:function(i){var o=i.dragEl,s=i.putSortable;this.sortable.captureAnimationState(),s&&s.captureAnimationState();var u=$t(this.sortable.el,this.startIndex,this.options);u?this.sortable.el.insertBefore(o,u):this.sortable.el.appendChild(o),this.sortable.animateAll(),s&&s.animateAll()},drop:ra};it(di,{pluginName:"revertOnSpill"});function fi(){}fi.prototype={onSpill:function(i){var o=i.dragEl,s=i.putSortable,u=s||this.sortable;u.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),u.animateAll()},drop:ra};it(fi,{pluginName:"removeOnSpill"});N.mount(new Vl);N.mount(fi,di);class ur{static init(i,o){var v,y,p,x;this._window=document.querySelector(i),this._sketch=o;const s=(v=this._window)==null?void 0:v.querySelector("#newLayer-js"),u=(y=this._window)==null?void 0:y.querySelector("#deleteLayer-js");this._layers=((p=this._window)==null?void 0:p.querySelector("ul"))||null,this._layers&&N.create(this._layers,{animation:100,dataIdAttr:"data-id",onEnd:this._moveLayer.bind(this)}),(x=this._layers)==null||x.addEventListener("click",this._layerClick.bind(this)),s==null||s.addEventListener("click",this._addLayer.bind(this)),u==null||u.addEventListener("click",this._removeLayer.bind(this))}static _addLayer(){var y,p,x;const i=(y=this._layers)==null?void 0:y.querySelector(".selected"),o=document.createElement("li"),s=this.newId();o.classList.add("layers_item"),o.classList.add("selected"),o.setAttribute("data-id",s.toString()),o.textContent="Layer "+s,i&&((p=this._layers)==null||p.insertBefore(o,i)),i==null||i.classList.remove("selected");const v=Array.from(((x=this._layers)==null?void 0:x.querySelectorAll("li"))||[]).indexOf(o);this._sketch.layers.newLayer(s,v),this._select(),this._sketch.updatePreview()}static _removeLayer(){var v,y,p,x;const i=(v=this._layers)==null?void 0:v.querySelectorAll("li");if(!i||i.length<=1)return;const o=(y=this._layers)==null?void 0:y.querySelector(".selected"),s=o==null?void 0:o.nextElementSibling;o==null||o.remove(),s?s==null||s.classList.add("selected"):(x=(p=this._layers)==null?void 0:p.lastElementChild)==null||x.classList.add("selected");const u=Number(o==null?void 0:o.getAttribute("data-id"));u&&this._sketch.layers.removeLayer(u),this._select(),this._sketch.updatePreview()}static _select(){var o;const i=(o=this._layers)==null?void 0:o.querySelector(".selected");if(i){const s=Number(i==null?void 0:i.getAttribute("data-id"));s&&this._sketch.layers.selectLayer(s)}}static _moveLayer(i){console.log(i)}static _layerClick(i){var s,u;const o=i.target;o.nodeName==="LI"&&((u=(s=this._window)==null?void 0:s.querySelector(".selected"))==null||u.classList.remove("selected"),o.classList.add("selected")),this._select()}static newId(){var s;const i=Array.from(((s=this._layers)==null?void 0:s.querySelectorAll("li"))||[]);return Math.max(...i.map(u=>Number(u.getAttribute("data-id"))))+1}}L(ur,"_sketch"),L(ur,"_window"),L(ur,"_layers");customElements.define("sketch-app",gl);const Gt=document.querySelector("sketch-app");ml.init("#tools-js input[type=radio]",Gt);yl.init("#sizes-js input[type=radio]",Gt);bl.init(".actions_btn",Gt);_l.init("#colorBtn-js",Gt);ur.init("#layers-js",Gt);Ht.init();Gt.camera.fitSketch();
